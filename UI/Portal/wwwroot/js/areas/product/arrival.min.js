function setupControls(){_gridItems=$("#Listado").kendoGrid({dataBound:n=>{for(var t=n.sender,i=0;i<t.columns.length;i++)t.showColumn(i);$("div.k-group-indicator").each((n,i)=>t.hideColumn($(i).data("field")));t.element.find("table").attr("style","")},groupable:{enabled:!0,messages:{empty:"Arrastre un encabezado de columna y colóquela aquí para agrupar por esa columna"}},pageable:{enabled:!0},noRecords:{template:"No existen resultados para el criterio de búsqueda."},scrollable:!0,sortable:!0,selectable:!0,columns:[{field:"line",title:"Línea",hidden:!0,width:120,aggregates:["count"],groupHeaderTemplate:"Línea: #=value#    (Total: #=count#)"},{field:"category",title:"Categoría",hidden:!0,width:120,aggregates:["count"],groupHeaderTemplate:"Categoría: #=value#    (Total: #=count#)"},{field:"subcategory",title:"Subcategoría",width:120,aggregates:["count"],groupHeaderTemplate:"Subcategoría: #= value #    (Total: #= count#)"},{field:"itemCode",title:"Item",width:160,groupable:!1},{field:"itemName",title:"Descripción",width:300,groupable:!1},{field:"stock",title:"Cantidad",width:90,attributes:_alignRight,headerAttributes:_alignRight,template:n=>_isLocal||n.stock<=50?n.stock:"50+"},{field:"arrivalDate",title:"F. Est. Arribo",width:100,attributes:_alignCenter,headerAttributes:_alignCenter,format:"{0:dd-MM-yyyy}"}],dataSource:getDataSource([])}).data("kendoGrid")}function cleanFilters(){$("#filter-product").val("")}function loadGrid(n){var t=getDataSource(n);_gridItems.setDataSource(t);n&&n.length>0?($("#filter-box").collapse("hide"),$("#action-excel").removeClass("d-none")):$("#action-excel").addClass("d-none");setGridHeight("Listado",_gridMargin)}function filterData(){$.get(urlFilter,{Filter:$("#filter-product").val()},function(n){n.message!=""?(showError(n.message),loadGrid([])):loadGrid(n.items)})}function getDataSource(n){n.forEach(n=>{n.date=JSON.toDate(n.date),n.arrivalDate=JSON.toDate(n.arrivalDate)});return new kendo.data.DataSource({data:n,pageSize:500,aggregate:[{aggregate:"count",field:"line"},{aggregate:"count",field:"category"},{aggregate:"count",field:"subcategory"}],group:[{field:"line",dir:"asc",aggregates:[{field:"line",aggregate:"count"}]},{field:"category",dir:"asc",aggregates:[{field:"category",aggregate:"count"}]},{field:"subcategory",dir:"asc",aggregates:[{field:"subcategory",aggregate:"count"}]}]})}const _gridMargin=30,_alignCenter={"class":"k-text-center !k-justify-content-center"},_alignRight={style:"text-align: right;"},_alignRight2={"class":"table-header-cell !k-text-right"};var _gridItems;$(function(){setupControls();filterData()});$(window).resize(()=>setGridHeight("Listado",_gridMargin));$("#filter-box").on("hidden.bs.collapse",()=>setGridHeight("Listado",_gridMargin));$("#filter-box").on("shown.bs.collapse",()=>setGridHeight("Listado",_gridMargin));$("#action-clean").click(cleanFilters);$("#action-filter").click(filterData);