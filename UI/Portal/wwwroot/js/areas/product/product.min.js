function setupControls(){$("#FilEnabled").kendoDropDownList();$("#FilOffers").kendoDropDownList();$("#FilLine").kendoDropDownList({dataSource:{transport:{read:{url:urlLines}}},optionLabel:"Seleccione una Línea...",filter:"contains",dataTextField:"name",dataValueField:"id"});$("#FilCategory").kendoDropDownList({dataSource:{serverFiltering:!0,transport:{read:{url:urlCategories,data:function(){return{LineId:$("#FilLine").val()}}}}},cascadeFrom:"FilLine",optionLabel:"Seleccione una Categoría...",filter:"contains",dataTextField:"name",dataValueField:"name"});$("#Listado").kendoGrid({columns:[{field:"line",title:"Line",hidden:!0,aggregates:["count"],groupHeaderTemplate:"Línea: #= value #    ( Total: #= count# )"},{field:"category",title:"Category",hidden:!0,aggregates:["count"],groupHeaderTemplate:"Categoría: #= value #    ( Total: #= count# )"},{field:"itemCode",title:"Item",width:150},{field:"name",title:"Nombre",width:255},{field:"enabled",title:"Habilitado",attributes:alignCenter,headerAttributes:alignCenter,width:90,template:'# if(enabled) {# <i class="fas fa-check"><\/i> #} #'},{field:"isDigital",title:"Digital",attributes:alignCenter,headerAttributes:alignCenter,width:70,template:'# if(isDigital) {# <i class="fas fa-check"><\/i> #} #'},{title:"Precios",headerAttributes:alignCenter,columns:[{field:"santaCruz",title:"Santa Cruz",attributes:alignRight,headerAttributes:alignRight,width:90,format:"{0:N2}"},{field:"miami",title:"Miami",attributes:alignRight,headerAttributes:alignRight,width:80,format:"{0:N2}"},{field:"iquique",title:"Iquique",attributes:alignRight,headerAttributes:alignRight,width:80,format:"{0:N2}"}]},{title:"Stock",headerAttributes:alignCenter,columns:[{field:"stockSantaCruz",title:"Santa Cruz",attributes:alignRight,headerAttributes:alignRight,width:110,template:"#=stockSantaCruz#"},{field:"stockMiami",title:"Miami",attributes:alignRight,headerAttributes:alignRight,width:110,template:"#=stockMiami#"},{field:"stockIquique",title:"Iquique",attributes:alignRight,headerAttributes:alignRight,width:110,template:"#=stockIquique#"}]},{title:"Mostrar",headerAttributes:alignCenter,columns:[{field:"showAlways",title:"Siempre",attributes:alignCenter,headerAttributes:alignCenter,width:70,template:'# if(showAlways) {# <i class="fas fa- check"><\/i> #} #'},{field:"showInWeb",title:"en Web",attributes:alignCenter,headerAttributes:alignCenter,width:70,template:'# if(showInWeb) {# <i class="fas fa-check"><\/i> #} #'},{field:"showTeamOnly",title:"Sólo DMC",attributes:alignCenter,headerAttributes:alignCenter,width:80,template:'# if(showTeamOnly) {# <i class="fas fa-check"><\/i> #} #'}]},{field:"imageURL",title:" ",attributes:alignCenter,width:30,template:'# if(imageURL != null && $.trim(imageURL) != "") {# <i class="fas fa-image" title="Tiene Imagen"><\/i> #} #'},{title:" ",attributes:alignCenter,width:50,sortable:!1,headerAttributes:alignCenter,template:'<a class="action action-link action-sync" title="Sincronizar Producto"><i class="fas fa-sync-alt"><\/i><\/a><a class="action action-link action-prices" title="Historial de Precios"><i class="fas fa-dollar-sign"><\/i><\/a>'},{field:"itemCode",title:" ",attributes:alignCenter,width:50,sortable:!1,headerAttributes:alignCenter,headerTemplate:'<a class="action action-link new-product" title="Nuevo Producto"><i class="fas fa-plus"><\/i><\/a>',template:'<a class="action action-link action-edit" title="Editar Producto"><i class="fas fa-pen"><\/i><\/a><a class="action action-link action-delete" title="Eliminar Producto"><i class="fas fa-trash-alt"><\/i><\/a>'}],sortable:!0,selectable:"Single, Row",scrollable:{height:"200px"},messages:{noRecords:'<div class="w-100 text-center p-3">No hay registros para el criterio de b&uacute;squeda.<\/div>'},dataSource:{group:[{field:"line",dir:"asc",aggregates:[{field:"line",aggregate:"count"},{field:"category",aggregate:"count"}]},{field:"category",dir:"asc",aggregates:[{field:"line",aggregate:"count"},{field:"category",aggregate:"count"}]}],aggregate:[{field:"line",aggregate:"count"},{field:"category",aggregate:"count"}],schema:{data:"Data",total:"Total",errors:"Errors",model:{id:"id"}},data:[]}});var n=$("#FilProduct").magicSuggest({hideTrigger:!0,placeholder:"Escriba su criterio de búsqueda, separado por comas si desea ingresar más de uno"});$(n).on("keydown",function(n,t,i){i.keyCode==13&&filterData()});setGridHeight("Listado",marginGrid)}function cleanFilters(){$("#FilProduct").val("");$("#FilEnabled").data("kendoDropDownList").value("");$("#FilOffers").data("kendoDropDownList").value("");$("#FilLine").data("kendoDropDownList").value("");$("#FilCategory").data("kendoDropDownList").value("")}function loadGrid(n){var t=$("#Listado").data("kendoGrid"),i=getDataSource(n);t.setDataSource(i);n&&n.length>0?($("#filter-box").collapse("hide"),$("#action-excel").removeClass("d-none")):$("#action-excel").addClass("d-none");setGridHeight("Listado",marginGrid)}function filterData(){var n=getFilters();n.message===""?$.get(urlFilter,n.data,function(n){n.message!==""?(showError(n.message),loadGrid([])):loadGrid(n.items)}):showInfo(`Debe seleccionar los siguientes campos: <br />${n.message}`)}function getDataSource(n){return new kendo.data.DataSource({data:n,pageSize:500,group:[{field:"line",dir:"asc",aggregates:[{field:"line",aggregate:"count"}]},{field:"category",dir:"asc",aggregates:[{field:"category",aggregate:"count"}]}]})}function getFilters(){$("#FilProduct").blur();var n=$("#FilProduct").magicSuggest().getValue().join(),t=$("#FilEnabled").data("kendoDropDownList").value(),i=$("#FilOffers").data("kendoDropDownList").value(),r=$("#FilLine").data("kendoDropDownList").value(),u=$("#FilCategory").data("kendoDropDownList").value(),f="";return t===""&&n===""&&i===""&&r===""&&u===""&&(f+="- Al menos un criterio de búsqueda."),{message:f,data:{Name:n,LineId:r,CategoryId:u,Enabled:t,Offer:i}}}function loadGridVolume(n,t){var i=n.find(".k-grid").getKendoGrid(),r=new kendo.data.DataSource({data:Enumerable.From(t).Where("$.statusType !== 3").ToArray()});i.setDataSource(r)}function loadDetail(n,t){var i=kendo.template($("#detailTemplate").html());t.observations===null&&(t.observations="");n.find(".card-body").html(i(t));n.find("#Quantity").kendoNumericTextBox({format:"N0",decimals:0});n.find("#Price").kendoNumericTextBox();n.removeClass("d-none");$("#Detail").getKendoWindow().center()}function ExportExcel(){var n=getFilters();n.message===""?window.location.href=`${urlExcel}?${$.param(n.data)}`:showInfo(`Los siguientes campos son necesarios <br />${n.message}`)}function getId(){return _intId-=1}function getCategoryValue(){return{Category:$("#Category").val()}}function loadDetailLot(n,t){var i=kendo.template($("#detailLotTemplate").html());n.find(".card-body").html(i(t));n.find("#AccEnabled").prop("checked",t.enabled);n.find("#Quantity").kendoNumericTextBox({format:"N0",decimals:0});n.find("#InitialQuantity").kendoNumericTextBox({format:"N0",decimals:0});n.find("#Accelerator").kendoNumericTextBox();n.find("#InitialDate").kendoDatePicker({value:t.initialDate});n.find("#FinalDate").kendoDatePicker({value:t.finalDate});t.id!==0&&(n.find("#InitialQuantity").data("kendoNumericTextBox").enable(!1),n.find("#Quantity").data("kendoNumericTextBox").enable(!1));n.removeClass("d-none");$("#Detail").getKendoWindow().center()}function toCamel(n){var r,i,u,t;if(n instanceof Array)return n.map(function(n){return typeof n=="object"&&(n=toCamel(n)),n});r={};for(i in n)n.hasOwnProperty(i)&&(u=(i.charAt(0).toLowerCase()+i.slice(1)||i).toString(),t=n[i],(t instanceof Array||t!==null&&t.constructor===Object)&&(t=toCamel(t)),r[u]=t);return r}function toTitle(n){var r,i,u,t;if(n instanceof Array)return n.map(function(n){return typeof n=="object"&&(n=toTitle(n)),n});r={};for(i in n)n.hasOwnProperty(i)&&(u=(i.charAt(0).toUpperCase()+i.slice(1)||i).toString(),t=n[i],(t instanceof Array||t!==null&&t.constructor===Object)&&(t=toTitle(t)),r[u]=t);return r}function onRefresh(n){var i,t;$("#ExtraComments").kendoEditor({resizable:{content:!0},tools:["bold","italic","underline","strikethrough","fontSize","foreColor","backColor","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","indent","outdent","createLink","unlink","tableWizard","createTable","addRowAbove","addRowBelow","addColumnLeft","addColumnRight","deleteRow","deleteColumn","viewHtml","formatting","cleanFormatting"],messages:{dialogCancel:"Cancelar",dialogInsert:"Agregar",dialogUpdate:"Aceptar",imageAltTex:"Texto Alternativo",imageWebAddress:"Dirección Imagen",insertImage:"Insertar Imagen",viewHtml:"Ver HTML"}});$(".volumeprice-subsidiary").each(function(n,t){var i=$(t).find(".id-subsidiary").val(),r=JSON.parse($("#Volumen").val());$(t).find(".grid-volume").kendoGrid({sortable:!0,scrollable:{height:200},selectable:"Single, Row",noRecords:{template:"No hay precios por volumen para esta sucursal."},columns:[{title:"Cantidad",field:"quantity",width:110,attributes:alignRight,headerAttributes:alignRight},{title:"Precio",field:"price",width:120,attributes:alignRight,headerAttributes:alignRight,format:"{0:N2}"},{title:"Comentarios",field:"observations"},{title:"",attributes:alignCenter,headerAttributes:alignCenter,width:50,template:'<i class="fas fa-pen action edit-volume-price" title="Editar Precio por Volúmen"><\/i>&nbsp;&nbsp;<i class="fas fa-trash-alt action delete-volume-price" title="Eliminar Precio por Volúmen"><\/i>',headerAttributes:alignCenter,headerTemplate:'<i class="fas fa-plus action new-volume-price" title="Nuevo Precio por Volúmen"><\/i>'}],dataSource:{data:Enumerable.From(r).Where(`$.idSubsidiary === ${i}`).ToArray()}})});n.sender.element.find("[type='number']").kendoNumericTextBox();i=JSON.parse($("#Accelerators").val());i.forEach(n=>{n.initialDate=JSON.toDate(n.initialDate),n.finalDate=JSON.toDate(n.finalDate)});$("#AcceleratorLots").kendoGrid({columns:[{title:"Cantidad Inicial",field:"initialQuantity",attributes:alignRight,headerAttributes:alignRight},{title:"Cantidad",field:"quantity",attributes:alignRight,headerAttributes:alignRight},{title:"Acelerador",field:"accelerator",attributes:alignRight,headerAttributes:alignRight},{title:"Desde",field:"initialDate",format:dateFormat,attributes:alignCenter,headerAttributes:alignCenter},{title:"Hasta",field:"finalDate",format:dateFormat,attributes:alignCenter,headerAttributes:alignCenter},{title:"Habilitado",attributes:alignCenter,headerAttributes:alignCenter,width:80,template:'# if(enabled) {# <i class="fas fa-check"><\/i> #} #',field:"enabled"},{field:"id",title:" ",attributes:alignCenter,width:70,sortable:!1,headerAttributes:alignCenter,headerTemplate:'<i class="fas fa-plus action new-lot" title="Nuevo Acelerador"><\/i>',template:'<i class="fas fa-pen action edit-lot" title="Editar Acelerador"><\/i>&nbsp;&nbsp;<i class="fas fa-trash-alt action delete-lot" title="Eliminar Acelerador"><\/i>'}],sortable:!0,selectable:"Single, Row",dataSource:{filter:[{logic:"and",filters:[{field:"statusType",operator:"neq",value:3}]}],schema:{model:{id:"id"}},data:i}});t=0;tabs=$(".tab-content.main-tab > .tab-pane");$.each(tabs,function(){this.classList.add("active");t=this.clientHeight>t?this.clientHeight:t;$(this).hasClass("show")||this.classList.remove("active")});$.each(tabs,function(){$(this).height(t)});onRefreshWindow(n)}function onSelect(n){var t=n.files[0].extension.toLowerCase();Enumerable.From([".jpg",".jpeg",".gif",".png",".bmp"]).Where(`$ === '${t}'`).Count()===0&&(n.preventDefault(),showInfo("Debe ser una imagen."))}function onUploadSucceded(n){var i=n.files,t;n.operation=="upload"?$.each(i,function(n,t){$("#Photo").attr("src",urlImages+t.name);$("#DeletePhoto").hide();$("#NewImageURL").val(t.name)}):(t=$("#ImageURL").val(),$("#NewImageURL").val(""),t===""?($("#Photo").attr("src",urlNoImage),$("#DeletePhoto").hide()):($("#Photo").attr("src",urlImages+t),$("#DeletePhoto").show()))}function onNewProduct(){var n=$("#Detail").data("kendoWindow");n.refresh({url:urlEdit,data:{Id:0}});n.open()}function onProductEdit(n){var i=$("#Listado").data("kendoGrid"),r=i.dataItem($(n.currentTarget).closest("tr")),t=$("#Detail").data("kendoWindow");t.setOptions({title:"Detalle de Producto",width:900});t.refresh({url:urlEdit,data:{Id:r.id}});t.open()}function onProductDelete(n){var i=$("#Listado").data("kendoGrid"),t=i.dataItem($(n.currentTarget).closest("tr")),r=getFilters();t.editable?showConfirm(`¿Está seguro que desea eliminar el producto <b>${t.itemCode}</b>?`,()=>{$.post(urlDelete,{Id:t.id,Filters:r.data},function(n){n.message===""?(loadGrid(n.items),showMessage(`Se ha eliminado el producto <b>${t.itemCode}</b> correctamente.`)):showError(n.message)})}):showInfo(`No se puede eliminar el Producto <b>${t.itemCode}</b>, est&aacute; ligado a un producto en el SAP.`)}function onProductSync(n){var i=$("#Listado").data("kendoGrid"),r=$(n.currentTarget).closest("tr"),t=i.dataItem(r),u=getFilters();$.post(urlSync,{Id:t.id,Filters:u.data},function(n){n.error?showError(n.message):(loadGrid(n.items),n.message===""?showMessage(`Se ha sincronizado el Item: <b>${t.itemCode}</b> exitosamente.`):showInfo(n.message))})}function onProductSave(n){var i,r,t,u,f,e,o;n.preventDefault();i=$(this).closest("form");r=i.kendoValidator().data("kendoValidator");r.validate()&&(t=i.serializeObject(),t.Prices=[],u=JSON.parse($("#Volumen").val()),t.Volumen=Enumerable.From(u).Where("$.statusType !== 0").ToArray(),$.each($(".price-subsidiary"),function(n,i){var r={Id:$(i).find("#id").val(),IdSubsidiary:$(i).find("#id-subsidiary").val(),Regular:$(i).find("#regular-price").data("kendoNumericTextBox").value(),Offer:$(i).find("#offer-price").data("kendoNumericTextBox").value(),ClientSuggested:$(i).find("#client-suggested").data("kendoNumericTextBox").value(),OfferDescription:$(i).find("#offer-description").val(),Observations:$(i).find("#observations").val(),Commentaries:$(i).find("#commentaries").val(),Volumen:[]};t.Prices.push(r)}),$("#id-external").length>0&&(t.ExternalPrice={Id:$("#id-external").val(),Price:$("#external-price").data("kendoNumericTextBox").value(),Commentaries:$("#external-price-commentaries").val(),ShowAlways:$("#external-price-show-always").prop("checked")}),f=$("#AcceleratorLots").data("kendoGrid"),e=f.dataSource.data(),t.Lots=e.map(n=>({Id:n.id,IdProduct:n.idProduct,InitialQuantity:n.initialQuantity,Quantity:n.quantity,Accelerator:n.accelerator,InitialDate:n.initialDate,FinalDate:n.finalDate,Enabled:n.enabled,StatusType:n.statusType})),o=getFilters(),$.post(urlEdit,{Item:t,Filters:o.data},function(n){n.message===""?(loadGrid(n.items),$("#Detail").data("kendoWindow").close(),showMessage("Se realizaron los cambios correctamente.")):showError(n.message)}))}function onGettingPriceHistory(n){var t=$("#Listado").data("kendoGrid"),i=$(n.currentTarget).closest("tr"),r,u;t.select(i);r=t.dataItem(i);u=$("#HistoryDetail").data("kendoWindow");$.get(urlHistory,{Id:r.id},function(n){$.each(n.prices,function(n,t){t.logDate=JSON.toDate(t.logDate)});$.each(n.volume,function(n,t){t.logDate=JSON.toDate(t.logDate)});$("#prices-history-grid").kendoGrid({sortable:!0,scrollable:{height:200},selectable:"Single, Row",noRecords:{template:'<div class="w-100 text-center p-3">No hay histórico de precios para este producto.<\/div>'},columns:[{title:"Sucursal",width:"120px",field:"sudsidiary.name"},{title:"Precio",attributes:alignRight,headerAttributes:alignRight,width:"80px",field:"regular",format:"{0:N2}"},{title:"Oferta",attributes:alignRight,headerAttributes:alignRight,width:"80px",field:"offer",format:"{0:N2}"},{title:"Oferta Desc.",width:"250px",field:"offerDescription"},{title:"Sug. Cliente",attributes:alignRight,headerAttributes:alignRight,width:"100px",field:"clientSuggested",format:"{0:N2}"},{title:"Observaciones",width:"250px",field:"observations"},{title:"Comentarios",width:"250px",field:"commentaries"},{title:"Usuario",width:"150px",field:"userName"},{title:"Fecha",width:110,field:"logDate",format:"{0:dd/MM/yyyy HH:mm}"},{title:"Acción",width:100,field:"logAction"}],dataSource:{data:n.prices}});$("#volume-prices-history-grid").kendoGrid({sortable:!0,scrollable:{height:200},selectable:"Single, Row",noRecords:{template:'<div class="w-100 text-center p-3">No hay histórico de precios por volumen para este producto.<\/div>'},columns:[{title:"Sucursal",width:"120px",field:"subsidiary.name"},{title:"Cantidad",attributes:alignRight,headerAttributes:alignRight,width:"80px",field:"quantity"},{title:"Precio",attributes:alignRight,headerAttributes:alignRight,width:"80px",field:"price",format:"{0:N2}"},{title:"Observaciones",width:"250px",field:"observations"},{title:"Usuario",width:"150px",field:"userName"},{title:"Fecha",width:110,field:"logDate",format:"{0:dd/MM/yyyy HH:mm}"},{title:"Acción",width:100,field:"logAction"}],dataSource:{data:n.volume}});u.open().center()})}function onNewVolumePrice(){var n={id:getId(),idProduct:$("#Id").val(),idSubsidiary:$(this).closest(".volumeprice-subsidiary").find(".id-subsidiary").val(),quantity:0,price:0,observations:""},t=$(this).closest(".volumeprice-subsidiary").find(".detail-volume");loadDetail(t,n);$(".save-product").attr("disabled",!0)}function onVolumePriceEdit(){var n=$(this).closest(".k-grid").data("kendoGrid"),t=n.dataItem($(this).closest("tr")),i=$(this).closest(".volumeprice-subsidiary").find(".detail-volume");loadDetail(i,t);$(".save-product").attr("disabled",!0)}function onVolumePriceDelete(){var r=$(this).closest(".k-grid").data("kendoGrid"),i=r.dataItem($(this).closest("tr")),u=$(this).closest(".volumeprice-subsidiary"),n=JSON.parse($("#Volumen").val()),t=Enumerable.From(n).Where(`$.id === ${i.id}`).FirstOrDefault();showConfirm(`¿Está seguro que desea eliminar este precio por volumen?`,()=>{t&&(t.id>0?t.statusType=3:n=n.filter(n=>n.id!==t.id),$("#Volumen").val(JSON.stringify(n)),loadGridVolume(u,Enumerable.From(n).Where(`$.idSubsidiary === ${i.idSubsidiary}`).ToArray()))})}function onVolumePriceCancelEdit(){var n=$(this).closest(".card");n.addClass("d-none");n.find(".card-body").empty();$("#Detail").getKendoWindow().center();$(".save-product").removeAttr("disabled")}function onVolumePriceSave(){var t=$(this).closest(".card-body"),u=$(this).closest(".volumeprice-subsidiary"),r=JSON.parse($("#Volumen").val()),i={id:+t.find("#Id").val(),idProduct:+t.find("#IdProduct").val(),idSubsidiary:+t.find("#IdSubsidiary").val(),observations:t.find("#Observations").val(),quantity:t.find("#Quantity").getKendoNumericTextBox().value(),price:t.find("#Price").getKendoNumericTextBox().value()},f={rules:{price:n=>n.is("#Price")?n.val()>0:!0,quantity:n=>n.is("#Quantity")?n.val()>0:!0},messages:{quantity:"Debe ser mayor a cero.",price:"Debe ser mayor a cero."}},e=t.kendoValidator(f).data("kendoValidator"),n;e.validate()&&(n=Enumerable.From(r).Where(`$.id === ${i.id} && $.idSubsidiary === ${i.idSubsidiary}`).FirstOrDefault(),n?(i.statusType=n.id>0?2:1,n=Object.assign(n,i)):(n=i,n.statusType=1,r.push(n)),loadGridVolume(u,Enumerable.From(r).Where(`$.idSubsidiary === ${i.idSubsidiary}`).ToArray()),u.find(".card-body").empty(),u.find(".card").addClass("d-none"),$("#Detail").getKendoWindow().center(),$("#Volumen").val(JSON.stringify(r)),$(".save-product").removeAttr("disabled"))}function onDeletePhoto(){$("#Photo").attr("src",urlNoImage);$("#DeletePhoto").hide();$("#NewImageURL").val("None")}function onNewLot(n){var t=$(n.currentTarget).closest(".kbyte-detail").find(".card"),i={id:0,idProduct:$("#Id").val(),initialQuantity:0,quantity:0,accelerator:0,initialDate:null,finalDate:null,enabled:!0};loadDetailLot(t,i);$(".save-product").attr("disabled",!0)}function onLotEdit(n){var t=$(n.currentTarget).closest(".k-grid").data("kendoGrid"),i=t.dataItem($(n.currentTarget).closest("tr")),r=$(n.currentTarget).closest(".kbyte-detail").find(".card");loadDetailLot(r,i);$(".save-product").attr("disabled",!0)}function onLotDelete(n){var t=$(n.currentTarget).closest(".k-grid").data("kendoGrid");showConfirm("¿Está seguro que desea eliminar este Lote con acelerador?",()=>{var i=t.dataSource,r=t.dataItem($(n.currentTarget).closest("tr")),u=i.get(r.id);u.statusType=3;t.setDataSource(i)})}function onLotEditCancel(){var n=$(this).closest(".kbyte-detail").find(".card");n.find(".card-body").empty();n.addClass("d-none");$("#Detail").getKendoWindow().center();$(".save-product").removeAttr("disabled")}function onLotSave(){var r=$(this).closest(".kbyte-detail").find(".card"),n=r.serializeToObject(),u,i,t;n=toCamel(n);n.enabled=n.accEnabled;u=$("#AcceleratorLots").data("kendoGrid");i=u.dataSource;+n.id==0?(n.statusType=1,n.id=getId(),i.add(n)):(t=i.get(n.id),t.initialQuantity=n.initialQuantity,t.quantity=n.quantity,t.accelerator=n.accelerator,t.initialDate=n.initialDate,t.finalDate=n.finalDate,t.enabled=n.accEnabled,t.statusType=t.id>0?2:1);u.setDataSource(i);r.find(".card-body").empty();r.addClass("d-none");$("#Detail").getKendoWindow().center();$(".save-product").removeAttr("disabled")}const marginGrid=30,alignCenter={style:"text-align: center;"},alignRight={style:"text-align: right;"},dateFormat="{0:dd-MM-yyyy}";var _intId=0;$(()=>setupControls());$(window).resize(()=>setGridHeight("Listado",marginGrid));$("#filter-box").on("hidden.bs.collapse",()=>setGridHeight("Listado",marginGrid));$("#filter-box").on("shown.bs.collapse",()=>setGridHeight("Listado",marginGrid));$("#Listado").on("click",".new-product",onNewProduct);$("#Listado").on("click",".action-edit",onProductEdit);$("#Listado").on("click",".action-delete",onProductDelete);$("#Listado").on("click",".action-sync",onProductSync);$("#Listado").on("click",".action-prices",onGettingPriceHistory);$("#action-clean").click(()=>cleanFilters());$("#action-filter").click(()=>filterData());$("#Detail").on("click",".new-volume-price",onNewVolumePrice);$("#Detail").on("click",".edit-volume-price",onVolumePriceEdit);$("#Detail").on("click",".delete-volume-price",onVolumePriceDelete);$("#Detail").on("click",".cancel-volume-price",onVolumePriceCancelEdit);$("#Detail").on("click",".save-volume-price",onVolumePriceSave);$("#Detail").on("click",".save-product",onProductSave);$("#Detail").on("click","#DeletePhoto",onDeletePhoto);$("#Detail").on("shown.bs.tab",'a[data-toggle="tab"]',()=>$("#Detail").getKendoWindow().center());$("#action-excel").click(()=>ExportExcel());$("#Detail").on("click",".new-lot",onNewLot);$("#Detail").on("click",".edit-lot",onLotEdit);$("#Detail").on("click",".delete-lot",onLotDelete);$("#Detail").on("click","#cancel-lot",onLotEditCancel);$("#Detail").on("click","#save-lot",onLotSave);