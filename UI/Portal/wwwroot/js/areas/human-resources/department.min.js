function setupPage(){_grdItems=$("#Listado").kendoGrid({noRecords:{template:'<div class="text-center w-100">No se encontraron registros para el criterio de b&uacute;squeda.<\/div>'},columns:[{title:"Nombre",field:"name"},{title:"Habilitado",field:"enabled",attributes:alignCenter,headerAttributes:alignCenter,width:100,template:n=>n.enabled?'<i class="fas fa-check"><\/i>':""},{field:"id",title:" ",attributes:alignCenter,width:70,sortable:!1,headerAttributes:alignCenter,headerTemplate:'<a title="Nueva Area de Trabajo" class="action action-link action-new"><i class="fas fa-plus"><\/i><\/a>',template:'<a title="Editar Area de Trabajo" class="action action-link action-edit"><i class="fas fa-pen"><\/i><\/a>'}],sortable:!0,selectable:"Single, Row",dataSource:{schema:{model:{id:"id"}},data:[]}}).data("kendoGrid");filterData(!0);_wndDetail=$("#Detail").kendoWindow({width:500,title:"Detalle de Area de Trabajo",visible:!1,modal:!0,activate:onRefreshWindow}).data("kendoWindow");_swEnabled=$("#enabled").kendoSwitch({messages:{checked:"",unchecked:""},size:"small"}).data("kendoSwitch")}function cleanFilters(){$("#filter").val("")}function getFilters(){var n=$("#filter").val();return{message:"",data:{FilterData:n}}}function filterData(n){var t=getFilters();t.message==""?$.get(urlFilter,t.data,function(n){loadGrid(n.items);n.message!=""&&showError(`Se ha producido el siguiente error al traer los datos: ${n.message}`)}):(setGridHeight("Listado",_gridMargin),n||showInfo(`Se deben ingresar los siguientes campos: <br />${t.message}`))}function loadGrid(n){if(n){var t=$("#Listado").data("kendoGrid"),i=new kendo.data.DataSource({data:n,schema:{model:{id:"id"}}});t.setDataSource(i);n&&n.length>0?($("#filter-box").collapse("hide"),$("#action-excel").removeClass("d-none")):$("#action-excel").addClass("d-none");setTimeout(()=>setGridHeight("Listado",_gridMargin),100)}}function onEdit(n){var t,i;n.preventDefault();this.classList.contains("action-new")?(_grdItems.clearSelection(),t={id:0,name:"",enabled:!0}):(i=$(n.currentTarget).closest("tr"),_grdItems.select(i),t=_grdItems.dataItem(i));$("#id").val(t.id);$("#name").val(t.name);_swEnabled.check(t.enabled);_wndDetail.center().open()}function onCancel(n){n.preventDefault();_wndDetail.close()}function onSave(n){var i,r,t;n.preventDefault();i=$(n.currentTarget).closest("form");r=i.kendoValidator().data("kendoValidator");r.validate()&&(t=i.serializeObject(),$.post(urlEdit,{Item:t},function(n){n.message==""?(_wndDetail.close(),showMessage("Se realizaron los cambios correctamente."),t.id=n.id,_grdItems.dataSource.pushUpdate(t)):showError(n.message)}))}var _wndDetail,_grdItems,_swEnabled;const alignCenter={"class":"k-text-center !k-justify-content-center"},alignRight={style:"text-align: right;"},numberFormat="{0:#,##0.00}",dateFormat="{0:dd-MM-yyyy}",_gridMargin=30;$(()=>setupPage());$(window).resize(()=>setGridHeight("Listado",_gridMargin));$("#filter-box").on("hidden.bs.collapse",()=>setGridHeight("Listado",_gridMargin));$("#filter-box").on("shown.bs.collapse",()=>setGridHeight("Listado",_gridMargin));$("#action-clean").click(()=>cleanFilters());$("#action-filter").click(()=>filterData(!1));$("#Listado").on("click",".action-new, .action-edit",onEdit);$("#Detail").on("click",".action-cancel",onCancel);$("#Detail").on("click",".action-save",onSave);