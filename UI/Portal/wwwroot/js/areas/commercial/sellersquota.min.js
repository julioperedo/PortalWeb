function loadData(){$.get(urlFilter,{Year:$("#year").val(),Month:$("#month").val()},function(n){n.message===""?renderGrid(n.items):showError(n.message)})}function renderGrid(n){var i=$("#QuoteContent"),t=$("<div>");i.html(t);t.handsontable({data:n,columns:[{data:"code",readOnly:!0},{data:"name",readOnly:!0,width:200},{data:"amount",type:"numeric",numericFormat:{pattern:"#,##0.00"},width:150},{data:"commentaries",width:300}],rowHeaders:!1,colHeaders:["Nom. Corto","Nombre","Monto","Comentarios"],columnSorting:!0,height:700,licenseKey:"non-commercial-and-evaluation"})}function saveQuote(){var t=$(".handsontable").handsontable("getInstance"),i=t.getData(),n=[];i.forEach(t=>{t[2]>0&&n.push({SalesmanCode:t[0],Amount:t[2],Commentaries:t[3]})});$.post(urlSave,{Items:n,Year:$("#year").val(),Month:$("#month").val()},function(n){n.message==""?(renderGrid(n.items),showMessage("Se han guardado los presupuestos correctamente")):showError(n.message)})}$(()=>{$("#month").kendoDropDownList({value:currentMonth}),loadData()});$("#action-filter").click(()=>loadData());$("#action-save").click(()=>saveQuote());