function setupControls(){$("#Detail").kendoWindow({visible:!1,width:1500,title:"Item Manual de Usaurio",modal:!0,close:onCloseWindow,refresh:function(n){$("#Value").kendoEditor({resizable:{content:!0},tools:["bold","italic","underline","strikethrough","fontSize","foreColor","backColor","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","indent","outdent","createLink","unlink","insertImage","tableWizard","createTable","addRowAbove","addRowBelow","addColumnLeft","addColumnRight","deleteRow","deleteColumn","viewHtml","formatting","cleanFormatting"],imageBrowser:{fileTypes:"*.png,*.gif,*.jpg,*.jpeg",path:"help",transport:{read:urlImageRead,destroy:{url:urlImageDestroy,type:"POST"},create:{url:urlImageCreate,type:"POST"},uploadUrl:urlImageUpload,imageUrl:urlImage,type:"filebrowser-aspnetmvc"}}});onRefreshWindow(n)}});$("#Listado").kendoGrid({columns:[{title:"Título",field:"title"},{field:"id",title:" ",attributes:alignCenter,width:50,sortable:!1,headerAttributes:alignCenter,headerTemplate:'<i class="fas fa-plus action action-link action-new" title="Nuevo Item"><\/i>',template:'<i class="fas fa-pen action action-link action-edit" title="Editar Item"><\/i>&nbsp;&nbsp;<i class="fas fa-trash-alt action action-link action-delete" title="Eliminar Item"><\/i>'}],sortable:!0,selectable:"Single, Row",noRecords:{template:"No hay resultados para el criterio de búsqueda."},dataSource:[]})}function filterData(){$.get(urlFilter,{},function(n){loadGrid(n.items);n.message!==""&&showError(`Se ha producido el siguiente error al traer los datos: ${n.message}`)})}function loadGrid(n){if(n){var t=$("#Listado").data("kendoGrid"),i=new kendo.data.DataSource({data:n});t.setDataSource(i);setTimeout(()=>{setGridHeight("Listado",_gridMargin)},200)}}var _minDate,_maxDate,notification;const alignCenter={style:"text-align: center;"},alignRight={style:"text-align: right;"},numberFormat="{0:#,##0.00}",dateFormat="{0:dd-MM-yyyy}",_gridMargin=30,objConfig={messages:{required:"*"}};$(()=>{setupControls(),filterData(!0)});$(window).resize(()=>{setGridHeight("Listado",_gridMargin)});$("#Listado").on("click",".action-new",function(){var n=$("#Detail").data("kendoWindow");n.refresh({url:urlEdit,data:{Id:0}});n.open()});$("#Listado").on("click",".action-edit",function(n){var i=$("#Listado").data("kendoGrid"),r=$(n.currentTarget).closest("tr"),u,t;i.select(r);u=i.dataItem(r);t=$("#Detail").data("kendoWindow");t.refresh({url:urlEdit,data:{Id:u.id}});t.open()});$("#Listado").on("click",".action-delete",function(n){var t=$("#Listado").data("kendoGrid"),i=$(n.currentTarget).closest("tr"),r=t.dataItem(i);showConfirm("¿Est&aacute; seguro que desea eliminar este Item?",function(){$.post(urlDelete,{Id:r.id},function(n){n.message===""?(loadGrid(n.items),showMessage("Se ha eliminado el Item correctamente.")):showError(n.message)})})});$("#Detail").on("click",".save-item",function(){var n=$(this).closest("form"),i=n.kendoValidator({messages:{required:"*"}}).data("kendoValidator"),t;i.validate()&&(t=n.serializeObject(),$.post(urlEdit,{Item:t},function(n){if(n.message===""){loadGrid(n.items);var t=$("#Detail").data("kendoWindow");t.close();showMessage("Se realizaron los cambios correctamente.")}else showError(n.message)}))});$(document).on("click",".k-imagebrowser>.k-filemanager-listview>.k-listview-content>.k-listview-item",function(){var n=$("#k-editor-image-url")[0];n&&/%2F/.test(n.value)&&(n.value=n.value.replace(/%2F/g,"/").replace("help/",""))});