"use strict";!function(i){"object"==typeof module&&module.exports?module.exports=i.default=i:"function"==typeof define&&define.amd?define("highcharts/modules/grid-axis",["highcharts"],function(t){return i(t),i.Highcharts=t,i}):i("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){var i=t?t._modules:{};function e(t,i,e,n){t.hasOwnProperty(i)||(t[i]=n.apply(null,e))}e(i,"parts-gantt/GridAxis.js",[i["parts/Axis.js"],i["parts/Globals.js"],i["parts/Options.js"],i["parts/Tick.js"],i["parts/Utilities.js"]],function(c,t,i,e,n){function a(t){return n.isObject(t,!0)}var o=i.dateFormat,s=n.addEvent,r=n.defined,f=n.erase,u=n.find,l=n.isArray,A=n.isNumber,g=n.merge,b=n.pick,h=n.timeUnits,p=n.wrap,d=t.Chart;c.prototype.getMaxLabelDimensions=function(s,t){var r={width:0,height:0};return t.forEach(function(t){var i,e=s[t],n=0,o=0;a(e)&&(n=(i=a(e.label)?e.label:{}).getBBox?i.getBBox().height:0,i.textStr&&!A(i.textPxLength)&&(i.textPxLength=i.getBBox().width),o=A(i.textPxLength)?Math.round(i.textPxLength):0,r.height=Math.max(n,r.height),r.width=Math.max(o,r.width))}),r},t.dateFormats.W=function(t){var i=new this.Date(t),e=(this.get("Day",i)+6)%7,n=new this.Date(i.valueOf());this.set("Date",n,this.get("Date",i)-e+3);var o=new this.Date(this.get("FullYear",n),0,1);return 4!==this.get("Day",o)&&(this.set("Month",i,0),this.set("Date",i,1+(11-this.get("Day",o))%7)),(1+Math.floor((n.valueOf()-o.valueOf())/6048e5)).toString()},t.dateFormats.E=function(t){return o("%a",t,!0).charAt(0)},s(d,"afterSetChartSize",function(){this.axes.forEach(function(t){(t.grid&&t.grid.columns||[]).forEach(function(t){t.setAxisSize(),t.setAxisTranslation()})})}),s(e,"afterGetLabelPosition",function(t){var i,e,n,o,s,r,a,l=this,d=l.label,h=l.axis,c=h.reversed,f=h.chart,u=h.options.grid||{},g=h.options.labels,p=g.align,m=O.Side[h.side],x=t.tickmarkOffset,k=h.tickPositions,b=l.pos-x,v=A(k[t.index+1])?k[t.index+1]-x:h.max+x,P=h.tickSize("tick"),S=P?P[0]:0,y=P?P[1]/2:0;!0===u.enabled&&("top"===m?s=(o=h.top+h.offset)-S:"bottom"===m?o=(s=f.chartHeight-h.bottom+h.offset)+S:(o=h.top+h.len-h.translate(c?v:b),s=h.top+h.len-h.translate(c?b:v)),"right"===m?a=(r=f.chartWidth-h.right+h.offset)+S:"left"===m?r=(a=h.left+h.offset)-S:(r=Math.round(h.left+h.translate(c?v:b))-y,a=Math.round(h.left+h.translate(c?b:v))-y),l.slotWidth=a-r,t.pos.x="left"===p?r:"right"===p?a:r+(a-r)/2,t.pos.y=s+(o-s)/2,e=f.renderer.fontMetrics(g.style.fontSize,d.element),i=d.getBBox().height,g.useHTML?t.pos.y+=e.b+-i/2:(n=Math.round(i/e.h),t.pos.y+=(e.b-(e.h-e.f))/2+-((n-1)*e.h)/2),t.pos.x+=h.horiz&&g.x||0)});var m=(x.prototype.isOuterAxis=function(){var e=this.axis,t=e.chart,i=e.grid.columnIndex,n=e.linkedParent&&e.linkedParent.grid.columns||e.grid.columns,o=i?e.linkedParent:e,s=-1,r=0;return t[e.coll].forEach(function(t,i){t.side!==e.side||t.options.isInternal||(r=i,t===o&&(s=i))}),r===s&&(!A(i)||n.length===i)},x);function x(t){this.axis=t}var k,v,O=(P.compose=function(t){c.keepProps.push("grid"),p(t.prototype,"unsquish",P.wrapUnsquish),s(t,"init",P.onInit),s(t,"afterGetOffset",P.onAfterGetOffset),s(t,"afterGetTitlePosition",P.onAfterGetTitlePosition),s(t,"afterInit",P.onAfterInit),s(t,"afterRender",P.onAfterRender),s(t,"afterSetAxisTranslation",P.onAfterSetAxisTranslation),s(t,"afterSetOptions",P.onAfterSetOptions),s(t,"afterSetOptions",P.onAfterSetOptions2),s(t,"afterSetScale",P.onAfterSetScale),s(t,"afterTickSize",P.onAfterTickSize),s(t,"trimTicks",P.onTrimTicks),s(t,"destroy",P.onDestroy)},P.onAfterGetOffset=function(){var t=this.grid;(t&&t.columns||[]).forEach(function(t){t.getOffset()})},P.onAfterGetTitlePosition=function(t){var i,e,n,o,s,r,a,l,d,h,c,f,u,g,p,m,x,k=this;!0===(k.options.grid||{}).enabled&&(i=k.axisTitle,e=k.height,n=k.horiz,o=k.left,s=k.offset,r=k.opposite,l=void 0===(a=k.options.title)?{}:a,d=k.top,h=k.width,c=k.tickSize(),f=i&&i.getBBox().width,u=l.x||0,g=l.y||0,p=b(l.margin,n?5:10),m=k.chart.renderer.fontMetrics(l.style&&l.style.fontSize,i).f,x=(n?d+e:o)+(n?1:-1)*(r?-1:1)*(c?c[0]/2:0)+(k.side===P.Side.bottom?m:0),t.titlePosition.x=n?o-f/2-p+u:x+(r?h:0)+s+u,t.titlePosition.y=n?x-(r?e:0)+(r?m:-m)/2+s+g:d-p+g)},P.onAfterInit=function(){var t,i,e=this,n=e.chart,o=e.options.grid,s=void 0===o?{}:o,r=e.userOptions;if(s.enabled&&((i=(t=e).options).labels||(i.labels={}),i.labels.align=b(i.labels.align,"center"),t.categories||(i.showLastLabel=!1),t.labelRotation=0,i.labels.rotation=0,p(e,"labelFormatter",function(t){var i=this.axis,e=this.value,n=i.tickPositions,o=(i.isLinked?i.linkedParent:i).series[0],s=e===n[0],r=e===n[n.length-1],a=o&&u(o.options.data,function(t){return t[i.isXAxis?"x":"y"]===e});return this.isFirst=s,this.isLast=r,this.point=a,t.call(this)})),s.columns)for(var a=e.grid.columns=[],l=e.grid.columnIndex=0;++l<s.columns.length;){var d=g(r,s.columns[s.columns.length-l-1],{linkedTo:0,type:"category"});delete d.grid.columns;var h=new c(e.chart,d);h.grid.isColumn=!0,h.grid.columnIndex=l,f(n.axes,h),f(n[e.coll],h),a.push(h)}},P.onAfterRender=function(){var t,i,e,n,o,s=this,r=s.grid,a=s.options,l=s.chart.renderer;!0===(a.grid||{}).enabled&&(s.maxLabelDimensions=s.getMaxLabelDimensions(s.ticks,s.tickPositions),s.rightWall&&s.rightWall.destroy(),s.grid&&s.grid.isOuterAxis()&&s.axisLine&&(t=a.lineWidth)&&(e=(i=s.getLinePath(t))[0],n=i[1],o=((s.tickSize("tick")||[1])[0]-1)*(s.side===P.Side.top||s.side===P.Side.left?-1:1),"M"===e[0]&&"L"===n[0]&&(s.horiz?(e[2]+=o,n[2]+=o):(e[1]+=o,n[1]+=o)),s.grid.axisLineExtra?s.grid.axisLineExtra.animate({d:i}):(s.grid.axisLineExtra=l.path(i).attr({zIndex:7}).addClass("highcharts-axis-line").add(s.axisGroup),l.styledMode||s.grid.axisLineExtra.attr({stroke:a.lineColor,"stroke-width":t})),s.axisLine[s.showAxis?"show":"hide"](!0)),(r&&r.columns||[]).forEach(function(t){t.render()}))},P.onAfterSetAxisTranslation=function(){var t=this,i=t.tickPositions&&t.tickPositions.info,e=t.options,n=e.grid||{},o=t.userOptions.labels||{};t.horiz&&(!0===n.enabled&&t.series.forEach(function(t){t.options.pointRange=0}),i&&e.dateTimeLabelFormats&&e.labels&&!r(o.align)&&(!1===e.dateTimeLabelFormats[i.unitName].range||1<i.count)&&(e.labels.align="left",r(o.x)||(e.labels.x=3)))},P.onAfterSetOptions=function(t){var d,i=this.options,e=t.userOptions,n=i&&a(i.grid)?i.grid:{};!0===n.enabled&&(d=g(!0,{className:"highcharts-grid-axis "+(e.className||""),dateTimeLabelFormats:{hour:{list:["%H:%M","%H"]},day:{list:["%A, %e. %B","%a, %e. %b","%E"]},week:{list:["Week %W","W%W"]},month:{list:["%B","%b","%o"]}},grid:{borderWidth:1},labels:{padding:2,style:{fontSize:"13px"}},margin:0,title:{text:null,reserveSpace:!1,rotation:0},units:[["millisecond",[1,10,100]],["second",[1,10]],["minute",[1,5,15]],["hour",[1,6]],["day",[1]],["week",[1]],["month",[1]],["year",null]]},e),"xAxis"===this.coll&&(r(e.linkedTo)&&!r(e.tickPixelInterval)&&(d.tickPixelInterval=350),r(e.tickPixelInterval)||!r(e.linkedTo)||r(e.tickPositioner)||r(e.tickInterval)||(d.tickPositioner=function(t,i){var e=this.linkedParent&&this.linkedParent.tickPositions&&this.linkedParent.tickPositions.info;if(e){for(var n,o,s,r,a=d.units,l=0;l<a.length;l++)if(a[l][0]===e.unitName){n=l;break}return a[n+1]?(s=a[n+1][0],o=(a[n+1][1]||[1])[0]):"year"===e.unitName&&(s="year",o=10*e.count),r=h[s],this.tickInterval=r*o,this.getTimeTicks({unitRange:r,count:o,unitName:s},t,i,this.options.startOfWeek)}})),g(!0,this.options,d),this.horiz&&(i.minPadding=b(e.minPadding,0),i.maxPadding=b(e.maxPadding,0)),A(i.grid.borderWidth)&&(i.tickWidth=i.lineWidth=n.borderWidth))},P.onAfterSetOptions2=function(t){var i=t.userOptions,e=i&&i.grid||{},n=e.columns;e.enabled&&n&&g(!0,this.options,n[n.length-1])},P.onAfterSetScale=function(){(this.grid.columns||[]).forEach(function(t){t.setScale()})},P.onAfterTickSize=function(t){var i,e,n=c.defaultLeftAxisOptions,o=this.horiz,s=this.maxLabelDimensions,r=this.options.grid,a=void 0===r?{}:r;a.enabled&&s&&(i=2*Math.abs(n.labels.x),e=o?a.cellHeight||i+s.height:i+s.width,l(t.tickSize)?t.tickSize[0]=e:t.tickSize=[e,0])},P.onDestroy=function(i){var t=this.grid;(t.columns||[]).forEach(function(t){t.destroy(i.keepEvents)}),t.columns=void 0},P.onInit=function(t){var i=t.userOptions||{},e=i.grid||{};e.enabled&&r(e.borderColor)&&(i.tickColor=i.lineColor=e.borderColor),this.grid||(this.grid=new m(this))},P.onTrimTicks=function(){var t=this,i=t.options,e=i.grid||{},n=t.categories,o=t.tickPositions,s=o[0],r=o[o.length-1],a=t.linkedParent&&t.linkedParent.min,l=t.linkedParent&&t.linkedParent.max,d=a||t.min,h=l||t.max,c=t.tickInterval,f=s<d&&d<s+c,u=h<r&&r-c<h;!0!==e.enabled||n||!t.horiz&&!t.isLinked||(f&&!i.startOnTick&&(o[0]=d),u&&!i.endOnTick&&(o[o.length-1]=h))},P.wrapUnsquish=function(t){var i,e=this.options.grid;return!0===(void 0===e?{}:e).enabled&&this.categories?this.tickInterval:t.apply(this,(i=arguments,Array.prototype.slice.call(i,1)))},P);function P(){}return k=O=O||{},(v=k.Side||(k.Side={}))[v.top=0]="top",v[v.right=1]="right",v[v.bottom=2]="bottom",v[v.left=3]="left",O.compose(c),O}),e(i,"masters/modules/grid-axis.src.js",[],function(){})});