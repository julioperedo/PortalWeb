"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/treegrid",["highcharts"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){var t=e?e._modules:{};function i(e,t,i,o){e.hasOwnProperty(t)||(e[t]=o.apply(null,i))}i(t,"parts-gantt/Tree.js",[t["parts/Utilities.js"]],function(e){function r(e,o){var r=e.reduce(function(e,t){var i=g(t.parent,"");return void 0===e[i]&&(e[i]=[]),e[i].push(t),e},{});return Object.keys(r).forEach(function(e,t){var i=r[e];""!==e&&-1===o.indexOf(e)&&(i.forEach(function(e){t[""].push(e)}),delete t[e])}),r}var u=e.extend,m=e.isNumber,g=e.pick,v=function(r,e,n,t,s,a){var l,d,i,c=0,p=0,o=a&&a.after,f=a&&a.before,h={data:t,depth:n-1,id:r,level:n,parent:e};return"function"==typeof f&&f(h,a),i=(s[r]||[]).map(function(e){var t=v(e.id,r,n+1,e,s,a),i=e.start,o=!0===e.milestone?i:e.end;return l=!m(l)||i<l?i:l,d=!m(d)||d<o?o:d,c=c+1+t.descendants,p=Math.max(t.height+1,p),t}),t&&(t.start=g(t.start,l),t.end=g(t.end,d)),u(h,{children:i,descendants:c,height:p}),"function"==typeof o&&o(h,a),h};return{getListOfParents:r,getNode:v,getTree:function(e,t){var i=e.map(function(e){return e.id}),o=r(e,i);return v("",null,1,null,o,t)}}}),i(t,"parts-gantt/TreeGridTick.js",[t["parts/Utilities.js"]],function(e){var t,B=e.addEvent,L=e.defined,w=e.isObject,C=e.isNumber,j=e.pick,a=e.wrap;return function(e){var t=!1;function i(){this.treeGrid||(this.treeGrid=new n(this))}function o(e,t,i,o,r,n,s,a,l){var d,c,p,f,h,u=this,m=j(u.options&&u.options.labels,n),g=u.pos,v=u.axis,x="treegrid"===v.options.type,k=e.apply(u,[t,i,o,r,m,s,a,l]);return x&&(d=m&&w(m.symbol,!0)?m.symbol:{},c=m&&C(m.indentation)?m.indentation:0,h=(f=(p=v.treeGrid.mapOfPosToGridNode)&&p[g])&&f.depth||1,k.x+=d.width+2*d.padding+(h-1)*c),k}function r(e){var t,i,o,r,n,s,a,l,d,c,p,f,h,u,m,g,v=this,x=v.pos,k=v.axis,b=v.label,y=k.treeGrid.mapOfPosToGridNode,A=k.options,G=j(v.options&&v.options.labels,A&&A.labels),P=G&&w(G.symbol,!0)?G.symbol:{},T=y&&y[x],O=T&&T.depth,S="treegrid"===A.type,I=-1<k.tickPositions.indexOf(x),N="highcharts-treegrid-node-",E=k.chart.styledMode;S&&T&&b&&b.element&&b.addClass(N+"level-"+O),e.apply(v,Array.prototype.slice.call(arguments,1)),S&&b&&b.element&&T&&T.descendants&&0<T.descendants&&(t=k.treeGrid.isCollapsed(T),r=v,n={color:!E&&b.styles&&b.styles.color||"",collapsed:t,group:b.parentGroup,options:P,renderer:b.renderer,show:I,xy:b.xy},s=r.treeGrid,a=!s.labelIcon,l=n.renderer,d=n.xy,c=n.options,p=c.width,f=c.height,h={x:d.x-p/2-c.padding,y:d.y-f/2},u=n.collapsed?90:180,m=n.show&&C(h.y),(g=s.labelIcon)||(s.labelIcon=g=l.path(l.symbols[c.type](c.x,c.y,p,f)).addClass("highcharts-label-icon").add(n.group)),m||g.attr({y:-9999}),l.styledMode||g.attr({"stroke-width":1,fill:j(n.color,"#666666")}).css({cursor:"pointer",stroke:c.lineColor,strokeWidth:c.lineWidth}),g[a?"attr":"animate"]({translateX:h.x,translateY:h.y,rotation:u}),i=N+(t?"collapsed":"expanded"),o=N+(t?"expanded":"collapsed"),b.addClass(i).removeClass(o),E||b.css({cursor:"pointer"}),[b,v.treeGrid.labelIcon].forEach(function(e){e&&!e.attachedTreeGridEvents&&(B(e.element,"mouseover",function(){var e;(e=b).addClass("highcharts-treegrid-node-active"),e.renderer.styledMode||e.css({textDecoration:"underline"})}),B(e.element,"mouseout",function(){var e,t,i;e=b,i=L((t=G).style)?t.style:{},e.removeClass("highcharts-treegrid-node-active"),e.renderer.styledMode||e.css({textDecoration:i.textDecoration})}),B(e.element,"click",function(){v.treeGrid.toggleCollapse()}),e.attachedTreeGridEvents=!0)}))}e.compose=function(e){t||(B(e,"init",i),a(e.prototype,"getLabelPosition",o),a(e.prototype,"renderLabel",r),e.prototype.collapse=function(e){this.treeGrid.collapse(e)},e.prototype.expand=function(e){this.treeGrid.expand(e)},e.prototype.toggleCollapse=function(e){this.treeGrid.toggleCollapse(e)},t=!0)};var n=(s.prototype.collapse=function(e){var t,i,o,r=this.tick,n=r.axis,s=n.brokenAxis;s&&n.treeGrid.mapOfPosToGridNode&&(t=r.pos,i=n.treeGrid.mapOfPosToGridNode[t],o=n.treeGrid.collapse(i),s.setBreaks(o,j(e,!0)))},s.prototype.expand=function(e){var t,i,o,r=this.tick,n=r.axis,s=n.brokenAxis;s&&n.treeGrid.mapOfPosToGridNode&&(t=r.pos,i=n.treeGrid.mapOfPosToGridNode[t],o=n.treeGrid.expand(i),s.setBreaks(o,j(e,!0)))},s.prototype.toggleCollapse=function(e){var t,i,o,r=this.tick,n=r.axis,s=n.brokenAxis;s&&n.treeGrid.mapOfPosToGridNode&&(t=r.pos,i=n.treeGrid.mapOfPosToGridNode[t],o=n.treeGrid.toggleCollapse(i),s.setBreaks(o,j(e,!0)))},s);function s(e){this.tick=e}e.Additions=n}(t=t||{}),t}),i(t,"mixins/tree-series.js",[t["parts/Color.js"],t["parts/Utilities.js"]],function(k,e){function f(e){return"boolean"==typeof e}var h=e.extend,l=e.isArray,d=e.isNumber,c=e.isObject,p=e.merge,b=e.pick;return{getColor:function(e,t){var i,o,r,n,s,a,l,d,c=t.index,p=t.mapOptionsToLevel,f=t.parentColor,h=t.parentColorIndex,u=t.series,m=t.colors,g=t.siblings,v=u.points,x=u.chart.options.chart;return e&&(i=v[e.i],o=p[e.level]||{},i&&o.colorByPoint&&(n=i.index%(m?m.length:x.colorCount),r=m&&m[n]),u.chart.styledMode||(s=b(i&&i.options.color,o&&o.color,r,f&&(l=f,(d=o&&o.colorVariation)&&"brightness"===d.key?k.parse(l).brighten(d.to*(c/g)).get():l),u.color)),a=b(i&&i.options.colorIndex,o&&o.colorIndex,n,h,t.colorIndex)),{color:s,colorIndex:a}},getLevelOptions:function(e){var n,t,i,s,o,r,a=null;if(c(e))for(a={},s=d(e.from)?e.from:1,r=e.levels,t={},n=c(e.defaults)?e.defaults:{},l(r)&&(t=r.reduce(function(e,t){var i,o,r;return c(t)&&d(t.level)&&(r=p({},t),o=f(r.levelIsConstant)?r.levelIsConstant:n.levelIsConstant,delete r.levelIsConstant,delete r.level,i=t.level+(o?0:s-1),c(e[i])?h(e[i],r):e[i]=r),e},{})),o=d(e.to)?e.to:1,i=0;i<=o;i++)a[i]=p({},n,c(t[i])?t[i]:{});return a},setTreeValues:function o(r,n){var e,t=n.before,i=n.idRoot,s=n.mapIdToNode[i],a=!f(n.levelIsConstant)||n.levelIsConstant,l=n.points[r.i],d=l&&l.options||{},c=0,p=[];return h(r,{levelDynamic:r.level-(a?0:s.level),name:b(l&&l.name,""),visible:i===r.id||!!f(n.visible)&&n.visible}),"function"==typeof t&&(r=t(r,n)),r.children.forEach(function(e,t){var i=h({},n);h(i,{index:t,siblings:r.children.length,visible:r.visible}),e=o(e,i),p.push(e),e.visible&&(c+=e.val)}),r.visible=0<c||r.visible,e=b(d.value,c),h(r,{children:p,childrenTotal:c,isLeaf:r.visible&&!c,val:e}),r},updateRootId:function(e){var t,i;return c(e)&&(i=c(e.options)?e.options:{},t=b(e.rootNode,i.rootId,""),c(e.userOptions)&&(e.userOptions.rootId=t),e.rootNode=t),t}}}),i(t,"parts-gantt/GridAxis.js",[t["parts/Axis.js"],t["parts/Globals.js"],t["parts/Options.js"],t["parts/Tick.js"],t["parts/Utilities.js"]],function(p,e,t,i,o){function a(e){return o.isObject(e,!0)}var r=t.dateFormat,n=o.addEvent,s=o.defined,f=o.erase,h=o.find,l=o.isArray,G=o.isNumber,u=o.merge,k=o.pick,c=o.timeUnits,m=o.wrap,d=e.Chart;p.prototype.getMaxLabelDimensions=function(n,e){var s={width:0,height:0};return e.forEach(function(e){var t,i=n[e],o=0,r=0;a(i)&&(o=(t=a(i.label)?i.label:{}).getBBox?t.getBBox().height:0,t.textStr&&!G(t.textPxLength)&&(t.textPxLength=t.getBBox().width),r=G(t.textPxLength)?Math.round(t.textPxLength):0,s.height=Math.max(o,s.height),s.width=Math.max(r,s.width))}),s},e.dateFormats.W=function(e){var t=new this.Date(e),i=(this.get("Day",t)+6)%7,o=new this.Date(t.valueOf());this.set("Date",o,this.get("Date",t)-i+3);var r=new this.Date(this.get("FullYear",o),0,1);return 4!==this.get("Day",r)&&(this.set("Month",t,0),this.set("Date",t,1+(11-this.get("Day",r))%7)),(1+Math.floor((o.valueOf()-r.valueOf())/6048e5)).toString()},e.dateFormats.E=function(e){return r("%a",e,!0).charAt(0)},n(d,"afterSetChartSize",function(){this.axes.forEach(function(e){(e.grid&&e.grid.columns||[]).forEach(function(e){e.setAxisSize(),e.setAxisTranslation()})})}),n(i,"afterGetLabelPosition",function(e){var t,i,o,r,n,s,a,l=this.label,d=this.axis,c=d.reversed,p=d.chart,f=d.options.grid||{},h=d.options.labels,u=h.align,m=P.Side[d.side],g=e.tickmarkOffset,v=d.tickPositions,x=this.pos-g,k=G(v[e.index+1])?v[e.index+1]-g:d.max+g,b=d.tickSize("tick"),y=b?b[0]:0,A=b?b[1]/2:0;!0===f.enabled&&("top"===m?n=(r=d.top+d.offset)-y:"bottom"===m?r=(n=p.chartHeight-d.bottom+d.offset)+y:(r=d.top+d.len-d.translate(c?k:x),n=d.top+d.len-d.translate(c?x:k)),"right"===m?a=(s=p.chartWidth-d.right+d.offset)+y:"left"===m?s=(a=d.left+d.offset)-y:(s=Math.round(d.left+d.translate(c?k:x))-A,a=Math.round(d.left+d.translate(c?x:k))-A),this.slotWidth=a-s,e.pos.x="left"===u?s:"right"===u?a:s+(a-s)/2,e.pos.y=n+(r-n)/2,i=p.renderer.fontMetrics(h.style.fontSize,l.element),t=l.getBBox().height,h.useHTML?e.pos.y+=i.b+-t/2:(o=Math.round(t/i.h),e.pos.y+=(i.b-(i.h-i.f))/2+-((o-1)*i.h)/2),e.pos.x+=d.horiz&&h.x||0)});var g=(v.prototype.isOuterAxis=function(){var i=this.axis,e=i.chart,t=i.grid.columnIndex,o=i.linkedParent&&i.linkedParent.grid.columns||i.grid.columns,r=t?i.linkedParent:i,n=-1,s=0;return e[i.coll].forEach(function(e,t){e.side!==i.side||e.options.isInternal||(s=t,e===r&&(n=t))}),s===n&&(!G(t)||o.length===t)},v);function v(e){this.axis=e}var x,b,P=(y.compose=function(e){p.keepProps.push("grid"),m(e.prototype,"unsquish",y.wrapUnsquish),n(e,"init",y.onInit),n(e,"afterGetOffset",y.onAfterGetOffset),n(e,"afterGetTitlePosition",y.onAfterGetTitlePosition),n(e,"afterInit",y.onAfterInit),n(e,"afterRender",y.onAfterRender),n(e,"afterSetAxisTranslation",y.onAfterSetAxisTranslation),n(e,"afterSetOptions",y.onAfterSetOptions),n(e,"afterSetOptions",y.onAfterSetOptions2),n(e,"afterSetScale",y.onAfterSetScale),n(e,"afterTickSize",y.onAfterTickSize),n(e,"trimTicks",y.onTrimTicks),n(e,"destroy",y.onDestroy)},y.onAfterGetOffset=function(){var e=this.grid;(e&&e.columns||[]).forEach(function(e){e.getOffset()})},y.onAfterGetTitlePosition=function(e){var t,i,o,r,n,s,a,l,d,c,p,f,h,u,m,g,v,x=this;!0===(x.options.grid||{}).enabled&&(t=x.axisTitle,i=x.height,o=x.horiz,r=x.left,n=x.offset,s=x.opposite,l=void 0===(a=x.options.title)?{}:a,d=x.top,c=x.width,p=x.tickSize(),f=t&&t.getBBox().width,h=l.x||0,u=l.y||0,m=k(l.margin,o?5:10),g=x.chart.renderer.fontMetrics(l.style&&l.style.fontSize,t).f,v=(o?d+i:r)+(o?1:-1)*(s?-1:1)*(p?p[0]/2:0)+(x.side===y.Side.bottom?g:0),e.titlePosition.x=o?r-f/2-m+h:v+(s?c:0)+n+h,e.titlePosition.y=o?v-(s?i:0)+(s?g:-g)/2+n+u:d-m+u)},y.onAfterInit=function(){var e,t,i=this,o=i.chart,r=i.options.grid,n=void 0===r?{}:r,s=i.userOptions;if(n.enabled&&((t=(e=i).options).labels||(t.labels={}),t.labels.align=k(t.labels.align,"center"),e.categories||(t.showLastLabel=!1),e.labelRotation=0,t.labels.rotation=0,m(i,"labelFormatter",function(e){var t=this.axis,i=this.value,o=t.tickPositions,r=(t.isLinked?t.linkedParent:t).series[0],n=i===o[0],s=i===o[o.length-1],a=r&&h(r.options.data,function(e){return e[t.isXAxis?"x":"y"]===i});return this.isFirst=n,this.isLast=s,this.point=a,e.call(this)})),n.columns)for(var a=i.grid.columns=[],l=i.grid.columnIndex=0;++l<n.columns.length;){var d=u(s,n.columns[n.columns.length-l-1],{linkedTo:0,type:"category"});delete d.grid.columns;var c=new p(i.chart,d);c.grid.isColumn=!0,c.grid.columnIndex=l,f(o.axes,c),f(o[i.coll],c),a.push(c)}},y.onAfterRender=function(){var e,t,i,o,r,n=this,s=n.grid,a=n.options,l=n.chart.renderer;!0===(a.grid||{}).enabled&&(n.maxLabelDimensions=n.getMaxLabelDimensions(n.ticks,n.tickPositions),n.rightWall&&n.rightWall.destroy(),n.grid&&n.grid.isOuterAxis()&&n.axisLine&&(e=a.lineWidth)&&(i=(t=n.getLinePath(e))[0],o=t[1],r=((n.tickSize("tick")||[1])[0]-1)*(n.side===y.Side.top||n.side===y.Side.left?-1:1),"M"===i[0]&&"L"===o[0]&&(n.horiz?(i[2]+=r,o[2]+=r):(i[1]+=r,o[1]+=r)),n.grid.axisLineExtra?n.grid.axisLineExtra.animate({d:t}):(n.grid.axisLineExtra=l.path(t).attr({zIndex:7}).addClass("highcharts-axis-line").add(n.axisGroup),l.styledMode||n.grid.axisLineExtra.attr({stroke:a.lineColor,"stroke-width":e})),n.axisLine[n.showAxis?"show":"hide"](!0)),(s&&s.columns||[]).forEach(function(e){e.render()}))},y.onAfterSetAxisTranslation=function(){var e=this,t=e.tickPositions&&e.tickPositions.info,i=e.options,o=i.grid||{},r=e.userOptions.labels||{};e.horiz&&(!0===o.enabled&&e.series.forEach(function(e){e.options.pointRange=0}),t&&i.dateTimeLabelFormats&&i.labels&&!s(r.align)&&(!1===i.dateTimeLabelFormats[t.unitName].range||1<t.count)&&(i.labels.align="left",s(r.x)||(i.labels.x=3)))},y.onAfterSetOptions=function(e){var d,t=this.options,i=e.userOptions,o=t&&a(t.grid)?t.grid:{};!0===o.enabled&&(d=u(!0,{className:"highcharts-grid-axis "+(i.className||""),dateTimeLabelFormats:{hour:{list:["%H:%M","%H"]},day:{list:["%A, %e. %B","%a, %e. %b","%E"]},week:{list:["Week %W","W%W"]},month:{list:["%B","%b","%o"]}},grid:{borderWidth:1},labels:{padding:2,style:{fontSize:"13px"}},margin:0,title:{text:null,reserveSpace:!1,rotation:0},units:[["millisecond",[1,10,100]],["second",[1,10]],["minute",[1,5,15]],["hour",[1,6]],["day",[1]],["week",[1]],["month",[1]],["year",null]]},i),"xAxis"===this.coll&&(s(i.linkedTo)&&!s(i.tickPixelInterval)&&(d.tickPixelInterval=350),s(i.tickPixelInterval)||!s(i.linkedTo)||s(i.tickPositioner)||s(i.tickInterval)||(d.tickPositioner=function(e,t){var i=this.linkedParent&&this.linkedParent.tickPositions&&this.linkedParent.tickPositions.info;if(i){for(var o,r,n,s,a=d.units,l=0;l<a.length;l++)if(a[l][0]===i.unitName){o=l;break}return a[o+1]?(n=a[o+1][0],r=(a[o+1][1]||[1])[0]):"year"===i.unitName&&(n="year",r=10*i.count),s=c[n],this.tickInterval=s*r,this.getTimeTicks({unitRange:s,count:r,unitName:n},e,t,this.options.startOfWeek)}})),u(!0,this.options,d),this.horiz&&(t.minPadding=k(i.minPadding,0),t.maxPadding=k(i.maxPadding,0)),G(t.grid.borderWidth)&&(t.tickWidth=t.lineWidth=o.borderWidth))},y.onAfterSetOptions2=function(e){var t=e.userOptions,i=t&&t.grid||{},o=i.columns;i.enabled&&o&&u(!0,this.options,o[o.length-1])},y.onAfterSetScale=function(){(this.grid.columns||[]).forEach(function(e){e.setScale()})},y.onAfterTickSize=function(e){var t,i,o=p.defaultLeftAxisOptions,r=this.horiz,n=this.maxLabelDimensions,s=this.options.grid,a=void 0===s?{}:s;a.enabled&&n&&(t=2*Math.abs(o.labels.x),i=r?a.cellHeight||t+n.height:t+n.width,l(e.tickSize)?e.tickSize[0]=i:e.tickSize=[i,0])},y.onDestroy=function(t){var e=this.grid;(e.columns||[]).forEach(function(e){e.destroy(t.keepEvents)}),e.columns=void 0},y.onInit=function(e){var t=e.userOptions||{},i=t.grid||{};i.enabled&&s(i.borderColor)&&(t.tickColor=t.lineColor=i.borderColor),this.grid||(this.grid=new g(this))},y.onTrimTicks=function(){var e=this,t=e.options,i=t.grid||{},o=e.categories,r=e.tickPositions,n=r[0],s=r[r.length-1],a=e.linkedParent&&e.linkedParent.min,l=e.linkedParent&&e.linkedParent.max,d=a||e.min,c=l||e.max,p=e.tickInterval,f=n<d&&d<n+p,h=c<s&&s-p<c;!0!==i.enabled||o||!e.horiz&&!e.isLinked||(f&&!t.startOnTick&&(r[0]=d),h&&!t.endOnTick&&(r[r.length-1]=c))},y.wrapUnsquish=function(e){var t,i=this.options.grid;return!0===(void 0===i?{}:i).enabled&&this.categories?this.tickInterval:e.apply(this,(t=arguments,Array.prototype.slice.call(t,1)))},y);function y(){}return x=P=P||{},(b=x.Side||(x.Side={}))[b.top=0]="top",b[b.right=1]="right",b[b.bottom=2]="bottom",b[b.left=3]="left",P.compose(p),P}),i(t,"modules/broken-axis.src.js",[t["parts/Axis.js"],t["parts/Globals.js"],t["parts/Utilities.js"],t["parts/Stacking.js"]],function(u,e,t,d){var o=t.addEvent,i=t.find,m=t.fireEvent,r=t.isArray,c=t.isNumber,g=t.pick,n=e.Series,s=(v.isInBreak=function(e,t){var i=e.repeat||1/0,o=e.from,r=e.to-e.from,n=o<=t?(t-o)%i:i-(o-t)%i,s=e.inclusive?n<=r:n<r&&0!=n;return s},v.lin2Val=function(e){var t=this.brokenAxis,i=t&&t.breakArray;if(!i)return e;for(var o,r=e,n=0;n<i.length&&!((o=i[n]).from>=r);n++)(o.to<r||v.isInBreak(o,r))&&(r+=o.len);return r},v.val2Lin=function(e){var t=this.brokenAxis,i=t&&t.breakArray;if(!i)return e;for(var o,r=e,n=0;n<i.length;n++)if((o=i[n]).to<=e)r-=o.len;else{if(o.from>=e)break;if(v.isInBreak(o,e)){r-=e-o.from;break}}return r},v.prototype.findBreakAt=function(t,e){return i(e,function(e){return e.from<t&&t<e.to})},v.prototype.isInAnyBreak=function(e,t){var i,o,r,n=this.axis,s=n.options.breaks,a=s&&s.length;if(a){for(;a--;)v.isInBreak(s[a],e)&&(i=!0,o=o||g(s[a].showPoints,!n.isXAxis));r=i&&t?i&&!o:i}return r},v.prototype.setBreaks=function(e,t){var f=this,h=f.axis,i=r(e)&&!!e.length;h.isDirty=f.hasBreaks!==i,f.hasBreaks=i,h.options.breaks=h.userOptions.breaks=e,h.forceRedraw=!0,h.series.forEach(function(e){e.isDirty=!0}),i||h.val2lin!==v.val2Lin||(delete h.val2lin,delete h.lin2val),i&&(h.userOptions.ordinal=!1,h.lin2val=v.lin2Val,h.val2lin=v.val2Lin,h.setExtremes=function(e,t,i,o,r){if(f.hasBreaks){for(var n,s=this.options.breaks;n=f.findBreakAt(e,s);)e=n.to;for(;n=f.findBreakAt(t,s);)t=n.from;t<e&&(t=e)}u.prototype.setExtremes.call(this,e,t,i,o,r)},h.setAxisTranslation=function(e){var t,i,o,r,n,s,a,l,d,c,p;u.prototype.setAxisTranslation.call(this,e),f.unitLength=null,f.hasBreaks&&(t=h.options.breaks||[],i=[],o=[],r=0,a=h.userMin||h.min,l=h.userMax||h.max,d=g(h.pointRangePadding,0),t.forEach(function(e){s=e.repeat||1/0,v.isInBreak(e,a)&&(a+=e.to%s-a%s),v.isInBreak(e,l)&&(l-=l%s-e.from%s)}),t.forEach(function(e){for(c=e.from,s=e.repeat||1/0;a<c-s;)c-=s;for(;c<a;)c+=s;for(p=c;p<l;p+=s)i.push({value:p,move:"in"}),i.push({value:p+(e.to-e.from),move:"out",size:e.breakSize})}),i.sort(function(e,t){return e.value===t.value?("in"===e.move?0:1)-("in"===t.move?0:1):e.value-t.value}),n=0,c=a,i.forEach(function(e){1===(n+="in"===e.move?1:-1)&&"in"===e.move&&(c=e.value),0===n&&(o.push({from:c,to:e.value,len:e.value-c-(e.size||0)}),r+=e.value-c-(e.size||0))}),h.breakArray=f.breakArray=o,f.unitLength=l-a-r+d,m(h,"afterBreaks"),h.staticScale?h.transA=h.staticScale:f.unitLength&&(h.transA*=(l-h.min+d)/f.unitLength),d&&(h.minPixelPadding=h.transA*h.minPointOffset),h.min=a,h.max=l)}),g(t,!0)&&h.chart.redraw()},v);function v(e){this.hasBreaks=!1,this.axis=e}var a=(l.compose=function(e,t){e.keepProps.push("brokenAxis");var i=n.prototype;i.drawBreaks=function(i,e){var o,r,n,s,t,a=this,l=a.points;i&&i.brokenAxis&&i.brokenAxis.hasBreaks&&(t=i.brokenAxis,e.forEach(function(e){o=t&&t.breakArray||[],r=i.isXAxis?i.min:g(a.options.threshold,i.min),l.forEach(function(t){s=g(t["stack"+e.toUpperCase()],t[e]),o.forEach(function(e){c(r)&&c(s)&&(n=!1,r<e.from&&s>e.to||r>e.from&&s<e.from?n="pointBreak":(r<e.from&&s>e.from&&s<e.to||r>e.from&&s>e.to&&s<e.from)&&(n="pointInBreak"),n&&m(i,n,{point:t,brk:e}))})})}))},i.gappedPath=function(){var e=this.currentDataGrouping,t=e&&e.gapSize,i=this.options.gapSize,o=this.points.slice(),r=o.length-1,n=this.yAxis;if(i&&0<r){"value"!==this.options.gapUnit&&(i*=this.basePointRange),t&&i<t&&t>=this.basePointRange&&(i=t);for(var s,a=void 0,l=void 0;r--;)l&&!1!==l.visible||(l=o[r+1]),a=o[r],!1!==l.visible&&!1!==a.visible&&(l.x-a.x>i&&(s=(a.x+l.x)/2,o.splice(r+1,0,{isNull:!0,x:s}),n.stacking&&this.options.stacking&&((n.stacking.stacks[this.stackKey][s]=new d(n,n.options.stackLabels,!1,s,this.stack)).total=0)),l=a)}return this.getGraphPath(o)},o(e,"init",function(){this.brokenAxis||(this.brokenAxis=new s(this))}),o(e,"afterInit",function(){void 0!==this.brokenAxis&&this.brokenAxis.setBreaks(this.options.breaks,!1)}),o(e,"afterSetTickPositions",function(){var e=this.brokenAxis;if(e&&e.hasBreaks){for(var t=this.tickPositions,i=this.tickPositions.info,o=[],r=0;r<t.length;r++)e.isInAnyBreak(t[r])||o.push(t[r]);this.tickPositions=o,this.tickPositions.info=i}}),o(e,"afterSetOptions",function(){this.brokenAxis&&this.brokenAxis.hasBreaks&&(this.options.ordinal=!1)}),o(t,"afterGeneratePoints",function(){var e=this,t=e.isDirty,i=e.options.connectNulls,o=e.points,r=e.xAxis,n=e.yAxis;if(t)for(var s=o.length;s--;){var a=o[s],l=!(null===a.y&&!1===i)&&(r&&r.brokenAxis&&r.brokenAxis.isInAnyBreak(a.x,!0)||n&&n.brokenAxis&&n.brokenAxis.isInAnyBreak(a.y,!0));a.visible=!l&&!1!==a.options.visible}}),o(t,"afterRender",function(){this.drawBreaks(this.xAxis,["x"]),this.drawBreaks(this.yAxis,g(this.pointArrayMap,["y"]))})},l);function l(){}return a.compose(u,n),a}),i(t,"parts-gantt/TreeGridAxis.js",[t["parts/Axis.js"],t["parts/Tick.js"],t["parts-gantt/Tree.js"],t["parts-gantt/TreeGridTick.js"],t["mixins/tree-series.js"],t["parts/Utilities.js"]],function(e,p,u,f,h,t){var i,m=t.addEvent,g=t.find,v=t.fireEvent,x=t.isNumber,k=t.isObject,b=t.isString,y=t.merge,A=t.pick,G=t.wrap;return function(e){var t=!1;function r(e,t){var i=e.collapseStart||0,o=e.collapseEnd||0;return t<=o&&(i-=.5),{from:i,to:o,showPoints:!1}}function a(e,t,i){var a,l,d=[],r=[],c={},p={},f=-1,h="boolean"==typeof t&&t,o={after:function(e){var t=p[e.pos],i=0,o=0;t.children.forEach(function(e){o+=(e.descendants||0)+1,i=Math.max((e.height||0)+1,i)}),t.descendants=o,t.height=i,t.collapsed&&r.push(t)},before:function(e){var t,i,o=k(e.data,!0)?e.data:{},r=b(o.name)?o.name:"",n=c[e.parent],s=k(n,!0)?p[n.pos]:null;h&&k(s,!0)&&(t=g(s.children,function(e){return e.name===r}))?(i=t.pos,t.nodes.push(e)):i=f++,p[i]||(p[i]=t={depth:s?s.depth+1:0,name:r,nodes:[e],children:[],pos:i},-1!==i&&d.push(r),k(s,!0)&&s.children.push(t)),b(e.id)&&(c[e.id]=e),t&&!0===o.collapsed&&(t.collapsed=!0),e.pos=i}},n=u.getTree(e,o);return a=i,p=(l=function(e,i,t){var o=e.nodes,r=i+(-1===i?0:a-1),n=(r-i)/2,s=i+n;return o.forEach(function(e){var t=e.data;k(t,!0)&&(t.y=i+(t.seriesIndex||0),delete t.seriesIndex),e.pos=s}),(t[s]=e).pos=s,e.tickmarkOffset=.5+n,e.collapseStart=r+.5,e.children.forEach(function(e){l(e,r+1,t),r=(e.collapseEnd||0)-.5}),e.collapseEnd=r+.5,t})(p[-1],-1,{}),{categories:d,mapOfIdToNode:c,mapOfPosToGridNode:p,collapsedNodes:r,tree:n}}function n(s){s.target.axes.filter(function(e){return"treegrid"===e.options.type}).forEach(function(e){var t,i=e.options||{},o=i.labels,r=i.uniqueNames,n=0;e.treeGrid.mapOfPosToGridNode&&!e.series.some(function(e){return!e.hasRendered||e.isDirtyData||e.isDirty})||(t=a(e.series.reduce(function(t,e){return e.visible&&((e.options.data||[]).forEach(function(e){k(e,!0)&&(e.seriesIndex=n,t.push(e))}),!0===r&&n++),t},[]),r||!1,!0===r?n:1),e.categories=t.categories,e.treeGrid.mapOfPosToGridNode=t.mapOfPosToGridNode,e.hasNames=!0,e.treeGrid.tree=t.tree,e.series.forEach(function(e){var t=(e.options.data||[]).map(function(e){return k(e,!0)?y(e):e});e.visible&&e.setData(t,!1)}),e.treeGrid.mapOptionsToLevel=h.getLevelOptions({defaults:o,from:1,levels:o&&o.levels,to:e.treeGrid.tree&&e.treeGrid.tree.height}),"beforeRender"===s.type&&(e.treeGrid.collapsedNodes=t.collapsedNodes))})}function i(e,t){var i,o,r,n=this,s=n.treeGrid.mapOptionsToLevel||{},a="treegrid"===n.options.type,l=n.ticks,d=l[t];a&&n.treeGrid.mapOfPosToGridNode?((i=s[(r=n.treeGrid.mapOfPosToGridNode[t]).depth])&&(o={labels:i}),d?(d.parameters.category=r.name,d.options=o,d.addLabel()):l[t]=d=new p(n,t,void 0,void 0,{category:r.name,tickmarkOffset:r.tickmarkOffset,options:o})):e.apply(n,Array.prototype.slice.call(arguments,1))}function o(e){var t,i=this,o=i.options,r=o&&o.labels,n=r&&x(r.indentation)?r.indentation:0,s=e.apply(i,Array.prototype.slice.call(arguments,1));return"treegrid"===i.options.type&&i.treeGrid.mapOfPosToGridNode&&(t=i.treeGrid.mapOfPosToGridNode[-1].height||0,s.width+=n*(t-1)),s}function s(e,t,i){var o=this,r="treegrid"===i.type;o.treeGrid||(o.treeGrid=new d(o)),r&&(m(t,"beforeRender",n),m(t,"beforeRedraw",n),m(t,"addSeries",function(e){var t;e.options.data&&(t=a(e.options.data,i.uniqueNames||!1,1),o.treeGrid.collapsedNodes=(o.treeGrid.collapsedNodes||[]).concat(t.collapsedNodes))}),m(o,"foundExtremes",function(){o.treeGrid.collapsedNodes&&o.treeGrid.collapsedNodes.forEach(function(t){var e=o.treeGrid.collapse(t);o.brokenAxis&&(o.brokenAxis.setBreaks(e,!1),o.treeGrid.collapsedNodes&&(o.treeGrid.collapsedNodes=o.treeGrid.collapsedNodes.filter(function(e){return t.collapseStart!==e.collapseStart||t.collapseEnd!==e.collapseEnd})))})}),m(o,"afterBreaks",function(){var e;"yAxis"===o.coll&&!o.staticScale&&null!==(e=o.chart.options.chart)&&void 0!==e&&e.height&&(o.isDirty=!0)}),i=y({grid:{enabled:!0},labels:{align:"left",levels:[{level:void 0},{level:1,style:{fontWeight:"bold"}}],symbol:{type:"triangle",x:-5,y:-5,height:10,width:10,padding:5}},uniqueNames:!1},i,{reversed:!0,grid:{columns:void 0}})),e.apply(o,[t,i]),r&&(o.hasNames=!0,o.options.showLastLabel=!0)}function l(e){var t=this,i=t.options;"treegrid"===i.type?(t.min=A(t.userMin,i.min,t.dataMin),t.max=A(t.userMax,i.max,t.dataMax),v(t,"foundExtremes"),t.setAxisTranslation(!0),t.tickmarkOffset=.5,t.tickInterval=1,t.tickPositions=t.treeGrid.mapOfPosToGridNode?t.treeGrid.getTickPositions():[]):e.apply(t,Array.prototype.slice.call(arguments,1))}e.compose=function(e){t||(G(e.prototype,"generateTick",i),G(e.prototype,"getMaxLabelDimensions",o),G(e.prototype,"init",s),G(e.prototype,"setTickInterval",l),f.compose(p),t=!0)};var d=(c.prototype.collapse=function(e){var t=this.axis,i=t.options.breaks||[],o=r(e,t.max);return i.push(o),i},c.prototype.expand=function(e){var t=this.axis,i=t.options.breaks||[],o=r(e,t.max);return i.reduce(function(e,t){return t.to===o.to&&t.from===o.from||e.push(t),e},[])},c.prototype.getTickPositions=function(){var o=this.axis;return Object.keys(o.treeGrid.mapOfPosToGridNode||{}).reduce(function(e,t){var i=+t;return!(o.min<=i&&o.max>=i)||o.brokenAxis&&o.brokenAxis.isInAnyBreak(i)||e.push(i),e},[])},c.prototype.isCollapsed=function(e){var t=this.axis,i=t.options.breaks||[],o=r(e,t.max);return i.some(function(e){return e.from===o.from&&e.to===o.to})},c.prototype.toggleCollapse=function(e){return this.isCollapsed(e)?this.expand(e):this.collapse(e)},c);function c(e){this.axis=e}e.Additions=d}(i=i||{}),e.prototype.utils={getNode:u.getNode},i.compose(e),i}),i(t,"masters/modules/treegrid.src.js",[],function(){})});