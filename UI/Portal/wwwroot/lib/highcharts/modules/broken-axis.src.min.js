"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/broken-axis",["highcharts"],function(i){return t(i),t.Highcharts=i,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(i){var t=i?i._modules:{};function s(i,t,s,n){i.hasOwnProperty(t)||(i[t]=n.apply(null,s))}s(t,"modules/broken-axis.src.js",[t["parts/Axis.js"],t["parts/Globals.js"],t["parts/Utilities.js"],t["parts/Stacking.js"]],function(p,i,t,h){var n=t.addEvent,s=t.find,v=t.fireEvent,r=t.isArray,u=t.isNumber,x=t.pick,e=i.Series,o=(m.isInBreak=function(i,t){var s=i.repeat||1/0,n=i.from,r=i.to-i.from,e=n<=t?(t-n)%s:s-(n-t)%s,o=i.inclusive?e<=r:e<r&&0!=e;return o},m.lin2Val=function(i){var t=this.brokenAxis,s=t&&t.breakArray;if(!s)return i;for(var n,r=i,e=0;e<s.length&&!((n=s[e]).from>=r);e++)(n.to<r||m.isInBreak(n,r))&&(r+=n.len);return r},m.val2Lin=function(i){var t=this.brokenAxis,s=t&&t.breakArray;if(!s)return i;for(var n,r=i,e=0;e<s.length;e++)if((n=s[e]).to<=i)r-=n.len;else{if(n.from>=i)break;if(m.isInBreak(n,i)){r-=i-n.from;break}}return r},m.prototype.findBreakAt=function(t,i){return s(i,function(i){return i.from<t&&t<i.to})},m.prototype.isInAnyBreak=function(i,t){var s,n,r,e=this.axis,o=e.options.breaks,a=o&&o.length;if(a){for(;a--;)m.isInBreak(o[a],i)&&(s=!0,n=n||x(o[a].showPoints,!e.isXAxis));r=s&&t?s&&!n:s}return r},m.prototype.setBreaks=function(i,t){var c=this,k=c.axis,s=r(i)&&!!i.length;k.isDirty=c.hasBreaks!==s,c.hasBreaks=s,k.options.breaks=k.userOptions.breaks=i,k.forceRedraw=!0,k.series.forEach(function(i){i.isDirty=!0}),s||k.val2lin!==m.val2Lin||(delete k.val2lin,delete k.lin2val),s&&(k.userOptions.ordinal=!1,k.lin2val=m.lin2Val,k.val2lin=m.val2Lin,k.setExtremes=function(i,t,s,n,r){if(c.hasBreaks){for(var e,o=this.options.breaks;e=c.findBreakAt(i,o);)i=e.to;for(;e=c.findBreakAt(t,o);)t=e.from;t<i&&(t=i)}p.prototype.setExtremes.call(this,i,t,s,n,r)},k.setAxisTranslation=function(i){var t,s,n,r,e,o,a,f,h,u,l;p.prototype.setAxisTranslation.call(this,i),c.unitLength=null,c.hasBreaks&&(t=k.options.breaks||[],s=[],n=[],r=0,a=k.userMin||k.min,f=k.userMax||k.max,h=x(k.pointRangePadding,0),t.forEach(function(i){o=i.repeat||1/0,m.isInBreak(i,a)&&(a+=i.to%o-a%o),m.isInBreak(i,f)&&(f-=f%o-i.from%o)}),t.forEach(function(i){for(u=i.from,o=i.repeat||1/0;a<u-o;)u-=o;for(;u<a;)u+=o;for(l=u;l<f;l+=o)s.push({value:l,move:"in"}),s.push({value:l+(i.to-i.from),move:"out",size:i.breakSize})}),s.sort(function(i,t){return i.value===t.value?("in"===i.move?0:1)-("in"===t.move?0:1):i.value-t.value}),e=0,u=a,s.forEach(function(i){1===(e+="in"===i.move?1:-1)&&"in"===i.move&&(u=i.value),0===e&&(n.push({from:u,to:i.value,len:i.value-u-(i.size||0)}),r+=i.value-u-(i.size||0))}),k.breakArray=c.breakArray=n,c.unitLength=f-a-r+h,v(k,"afterBreaks"),k.staticScale?k.transA=k.staticScale:c.unitLength&&(k.transA*=(f-k.min+h)/c.unitLength),h&&(k.minPixelPadding=k.transA*k.minPointOffset),k.min=a,k.max=f)}),x(t,!0)&&k.chart.redraw()},m);function m(i){this.hasBreaks=!1,this.axis=i}var a=(f.compose=function(i,t){i.keepProps.push("brokenAxis");var s=e.prototype;s.drawBreaks=function(s,i){var n,r,e,o,t,a=this,f=a.points;s&&s.brokenAxis&&s.brokenAxis.hasBreaks&&(t=s.brokenAxis,i.forEach(function(i){n=t&&t.breakArray||[],r=s.isXAxis?s.min:x(a.options.threshold,s.min),f.forEach(function(t){o=x(t["stack"+i.toUpperCase()],t[i]),n.forEach(function(i){u(r)&&u(o)&&(e=!1,r<i.from&&o>i.to||r>i.from&&o<i.from?e="pointBreak":(r<i.from&&o>i.from&&o<i.to||r>i.from&&o>i.to&&o<i.from)&&(e="pointInBreak"),e&&v(s,e,{point:t,brk:i}))})})}))},s.gappedPath=function(){var i=this.currentDataGrouping,t=i&&i.gapSize,s=this.options.gapSize,n=this.points.slice(),r=n.length-1,e=this.yAxis;if(s&&0<r){"value"!==this.options.gapUnit&&(s*=this.basePointRange),t&&s<t&&t>=this.basePointRange&&(s=t);for(var o,a=void 0,f=void 0;r--;)f&&!1!==f.visible||(f=n[r+1]),a=n[r],!1!==f.visible&&!1!==a.visible&&(f.x-a.x>s&&(o=(a.x+f.x)/2,n.splice(r+1,0,{isNull:!0,x:o}),e.stacking&&this.options.stacking&&((e.stacking.stacks[this.stackKey][o]=new h(e,e.options.stackLabels,!1,o,this.stack)).total=0)),f=a)}return this.getGraphPath(n)},n(i,"init",function(){this.brokenAxis||(this.brokenAxis=new o(this))}),n(i,"afterInit",function(){void 0!==this.brokenAxis&&this.brokenAxis.setBreaks(this.options.breaks,!1)}),n(i,"afterSetTickPositions",function(){var i=this.brokenAxis;if(i&&i.hasBreaks){for(var t=this.tickPositions,s=this.tickPositions.info,n=[],r=0;r<t.length;r++)i.isInAnyBreak(t[r])||n.push(t[r]);this.tickPositions=n,this.tickPositions.info=s}}),n(i,"afterSetOptions",function(){this.brokenAxis&&this.brokenAxis.hasBreaks&&(this.options.ordinal=!1)}),n(t,"afterGeneratePoints",function(){var i=this,t=i.isDirty,s=i.options.connectNulls,n=i.points,r=i.xAxis,e=i.yAxis;if(t)for(var o=n.length;o--;){var a=n[o],f=!(null===a.y&&!1===s)&&(r&&r.brokenAxis&&r.brokenAxis.isInAnyBreak(a.x,!0)||e&&e.brokenAxis&&e.brokenAxis.isInAnyBreak(a.y,!0));a.visible=!f&&!1!==a.options.visible}}),n(t,"afterRender",function(){this.drawBreaks(this.xAxis,["x"]),this.drawBreaks(this.yAxis,x(this.pointArrayMap,["y"]))})},f);function f(){}return a.compose(p,e),a}),s(t,"masters/modules/broken-axis.src.js",[],function(){})});