!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/networkgraph",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,i,o){t.hasOwnProperty(e)||(t[e]=o.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Series/DragNodesComposition.js",[t["Core/Utilities.js"]],function(e){const r=e["addEvent"],i=[];function o(){const i=this;let t,o,s;i.container&&(t=r(i.container,"mousedown",t=>{const e=i.hoverPoint;e&&e.series&&e.series.hasDraggableNodes&&e.series.options.draggable&&(e.series.onMouseDown(e,t),o=r(i.container,"mousemove",t=>e&&e.series&&e.series.onMouseMove(e,t)),s=r(i.container.ownerDocument,"mouseup",t=>(o(),s(),e&&e.series&&e.series.onMouseUp(e,t))))})),r(i,"destroy",function(){t()})}return{compose:function(t){e.pushUnique(i,t)&&r(t,"load",o)},onMouseDown:function(t,e){e=this.chart.pointer.normalize(e),t.fixedPosition={chartX:e.chartX,chartY:e.chartY,plotX:t.plotX,plotY:t.plotY},t.inDragMode=!0},onMouseMove:function(t,e){if(t.fixedPosition&&t.inDragMode){const o=this.chart,s=o.pointer.normalize(e),r=t.fixedPosition.chartX-s.chartX,n=t.fixedPosition.chartY-s.chartY,a=o.graphLayoutsLookup;var i;(5<Math.abs(r)||5<Math.abs(n))&&(e=t.fixedPosition.plotX-r,i=t.fixedPosition.plotY-n,o.isInsidePlot(e,i)&&(t.plotX=e,t.plotY=i,t.hasDragged=!0,this.redrawHalo(t),a.forEach(t=>{t.restartSimulation()})))}},onMouseUp:function(t,e){t.fixedPosition&&(t.hasDragged&&(this.layout.enableSimulation?this.layout.start():this.chart.redraw()),t.inDragMode=t.hasDragged=!1,this.options.fixedDraggable||delete t.fixedPosition)},redrawHalo:function(t){t&&this.halo&&this.halo.attr({d:t.haloPath(this.options.states.hover.halo.size)})}}}),e(t,"Series/GraphLayoutComposition.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Utilities.js"]],function(t,e){const o=t["setAnimation"],i=e["addEvent"],s=[];function r(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(t=>{t.updateSimulation()}),this.redraw())}function n(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(t=>{t.updateSimulation(!1)}),this.redraw())}function a(){this.graphLayoutsLookup&&this.graphLayoutsLookup.forEach(t=>{t.stop()})}function h(){let e,i=!1;var t=t=>{t.maxIterations--&&isFinite(t.temperature)&&!t.isStable()&&!t.enableSimulation&&(t.beforeStep&&t.beforeStep(),t.step(),e=!1,i=!0)};if(this.graphLayoutsLookup){for(o(!1,this),this.graphLayoutsLookup.forEach(t=>t.start());!e;)e=!0,this.graphLayoutsLookup.forEach(t);i&&this.series.forEach(t=>{t&&t.layout&&t.render()})}}return{compose:function(t){e.pushUnique(s,t)&&(i(t,"afterPrint",r),i(t,"beforePrint",n),i(t,"predraw",a),i(t,"render",h))},integrations:{},layouts:{}}}),e(t,"Series/NodesComposition.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,s){const{prototype:o,prototype:{pointClass:{prototype:h}}}=t["series"],{defined:r,extend:n,find:a,merge:d,pick:l}=s;var e;{t=e=e||{};const m=[];function p(){return this.data=[].concat(this.points||[],this.nodes),o.destroy.apply(this,arguments)}function c(){this.nodes&&(this.nodes.forEach(t=>{t.destroy()}),this.nodes.length=0),o.setData.apply(this,arguments)}function u(t){const e=arguments,i=this.isNode?this.linksTo.concat(this.linksFrom):[this.fromNode,this.toNode];"select"!==t&&i.forEach(t=>{t&&t.series&&(h.setState.apply(t,e),t.isNode||(t.fromNode.graphic&&h.setState.apply(t.fromNode,e),t.toNode&&t.toNode.graphic&&h.setState.apply(t.toNode,e)))}),h.setState.apply(this,e)}function f(t,e,i,o){const s=this.series.options.nodes,r=this.series.options.data,n=r&&r.length||0,a=r&&r[this.index];h.update.call(this,t,!this.isNode&&e,i,o),this.isNode&&(t=(s||[]).reduce((t,e,i)=>this.id===e.id?i:t,-1),o=d(s&&s[t]||{},r&&r[this.index]||{}),r&&(a?r[this.index]=a:r.length=n),s?0<=t?s[t]=o:s.push(o):this.series.options.nodes=[o],l(e,!0)&&this.series.chart.redraw(i))}t.compose=function(t,e){if(s.pushUnique(m,t)){const i=t.prototype;i.setNodeState=u,i.setState=u,i.update=f}if(s.pushUnique(m,e)){const o=e.prototype;o.destroy=p,o.setData=c}return e},t.createNode=function(t){const e=this.pointClass,i=(t,e)=>a(t,t=>t.id===e);let o=i(this.nodes,t),s;if(!o){s=this.options.nodes&&i(this.options.nodes,t);const r=(new e).init(this,n({className:"highcharts-node",isNode:!0,id:t,y:1},s));r.linksTo=[],r.linksFrom=[],r.getSum=function(){let e=0,i=0;return r.linksTo.forEach(t=>{e+=t.weight||0}),r.linksFrom.forEach(t=>{i+=t.weight||0}),Math.max(e,i)},r.offset=function(e,i){let o=0;for(let t=0;t<r[i].length;t++){if(r[i][t]===e)return o;o+=r[i][t].weight}},r.hasShape=function(){let e=0;return r.linksTo.forEach(t=>{t.outgoing&&e++}),!r.linksTo.length||e!==r.linksTo.length},r.index=this.nodes.push(r)-1,o=r}return o.formatPrefix="node",o.name=o.name||o.options.id||"",o.mass=l(o.options.mass,o.options.marker&&o.options.marker.radius,this.options.marker&&this.options.marker.radius,4),o},t.destroy=p,t.generatePoints=function(){const e=this.chart,i={};o.generatePoints.call(this),this.nodes||(this.nodes=[]),this.colorCounter=0,this.nodes.forEach(t=>{t.linksFrom.length=0,t.linksTo.length=0,t.level=t.options.level}),this.points.forEach(t=>{r(t.from)&&(i[t.from]||(i[t.from]=this.createNode(t.from)),i[t.from].linksFrom.push(t),t.fromNode=i[t.from],e.styledMode?t.colorIndex=l(t.options.colorIndex,i[t.from].colorIndex):t.color=t.options.color||i[t.from].color),r(t.to)&&(i[t.to]||(i[t.to]=this.createNode(t.to)),i[t.to].linksTo.push(t),t.toNode=i[t.to]),t.name=t.name||t.id},this),this.nodeLookup=i},t.setNodeState=u,t.updateNode=f}return e}),e(t,"Series/Networkgraph/NetworkgraphPoint.js",[t["Series/NodesComposition.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,i){const{prototype:a,prototype:{pointClass:o}}=e["series"],{addEvent:s,css:r,defined:n,extend:h,pick:d}=i;class l extends o{destroy(){return this.isNode&&this.linksFrom.concat(this.linksTo).forEach(function(t){t.destroyElements&&t.destroyElements()}),this.series.layout.removeElementFromCollection(this,this.series.layout[this.isNode?"nodes":"links"]),o.prototype.destroy.apply(this,arguments)}getDegree(){var t=this.isNode?this.linksFrom.length+this.linksTo.length:0;return 0===t?1:t}getLinkAttributes(){var t=this.series.options.link,e=this.options;return{"stroke-width":d(e.width,t.width),stroke:e.color||t.color,dashstyle:e.dashStyle||t.dashStyle,opacity:d(e.opacity,t.opacity,1)}}getLinkPath(){let t=this.fromNode,e=this.toNode;return t.plotX>e.plotX&&(t=this.toNode,e=this.fromNode),[["M",t.plotX||0,t.plotY||0],["L",e.plotX||0,e.plotY||0]]}getMass(){var t=this.fromNode.mass,e=this.toNode.mass,i=t+e;return{fromNode:1-t/i,toNode:1-e/i}}init(t,e,i){return super.init(t,e,i),this.series.options.draggable&&!this.series.chart.styledMode&&(s(this,"mouseOver",function(){r(this.series.chart.container,{cursor:"move"})}),s(this,"mouseOut",function(){r(this.series.chart.container,{cursor:"default"})})),this}isValid(){return!this.isNode||n(this.id)}redrawLink(){let t=this.getLinkPath(),e;var i,o;this.graphic&&(this.shapeArgs={d:t},this.series.chart.styledMode||(e=this.series.pointAttribs(this),this.graphic.attr(e),(this.dataLabels||[]).forEach(function(t){t&&t.attr({opacity:e.opacity})})),this.graphic.animate(this.shapeArgs),i=t[0],o=t[1],"M"===i[0]&&"L"===o[0]&&(this.plotX=(i[1]+o[1])/2,this.plotY=(i[2]+o[2])/2))}remove(t,e){let i=this,o=i.series,s=o.options.nodes||[],r,n=s.length;if(i.isNode){for(o.points=[],[].concat(i.linksFrom).concat(i.linksTo).forEach(function(t){-1<(r=t.fromNode.linksFrom.indexOf(t))&&t.fromNode.linksFrom.splice(r,1),-1<(r=t.toNode.linksTo.indexOf(t))&&t.toNode.linksTo.splice(r,1),a.removePoint.call(o,o.data.indexOf(t),!1,!1)}),o.points=o.data.slice(),o.nodes.splice(o.nodes.indexOf(i),1);n--;)if(s[n].id===i.options.id){o.options.nodes.splice(n,1);break}i&&i.destroy(),o.isDirty=!0,o.isDirtyData=!0,t&&o.chart.redraw(t)}else o.removePoint(o.data.indexOf(i),t,e)}renderLink(){let e;this.graphic||(this.graphic=this.series.chart.renderer.path(this.getLinkPath()).addClass(this.getClassName(),!0).add(this.series.group),this.series.chart.styledMode||(e=this.series.pointAttribs(this),this.graphic.attr(e),(this.dataLabels||[]).forEach(function(t){t&&t.attr({opacity:e.opacity})})))}}return h(l.prototype,{setState:t.setNodeState}),l}),e(t,"Series/Networkgraph/NetworkgraphSeriesDefaults.js",[],function(){return{stickyTracking:!1,inactiveOtherPoints:!0,marker:{enabled:!0,states:{inactive:{opacity:.3,animation:{duration:50}}}},states:{inactive:{linkOpacity:.3,animation:{duration:50}}},dataLabels:{formatter:function(){return this.key},linkFormatter:function(){return this.point.fromNode.name+"<br>"+this.point.toNode.name},linkTextPath:{enabled:!0},textPath:{enabled:!1},style:{transition:"opacity 2000ms"},defer:!0,animation:{defer:1e3}},link:{color:"rgba(100, 100, 100, 0.5)",width:1},draggable:!0,layoutAlgorithm:{initialPositions:"circle",initialPositionRadius:1,enableSimulation:!1,theta:.5,maxSpeed:10,approximation:"none",type:"reingold-fruchterman",integration:"euler",maxIterations:1e3,gravitationalConstant:.0625,friction:-.981},showInLegend:!1}}),e(t,"Series/Networkgraph/EulerIntegration.js",[],function(){return{attractive:function(t,e,i,o){var s=t.getMass(),r=i.x/o*e,i=i.y/o*e;t.fromNode.fixedPosition||(t.fromNode.dispX-=r*s.fromNode/t.fromNode.degree,t.fromNode.dispY-=i*s.fromNode/t.fromNode.degree),t.toNode.fixedPosition||(t.toNode.dispX+=r*s.toNode/t.toNode.degree,t.toNode.dispY+=i*s.toNode/t.toNode.degree)},attractiveForceFunction:function(t,e){return t*t/e},barycenter:function(){const i=this.options.gravitationalConstant,o=this.barycenter.xFactor,s=this.barycenter.yFactor;this.nodes.forEach(function(t){var e;t.fixedPosition||(e=(e=t.getDegree())*(1+e/2),t.dispX+=(o-t.plotX)*i*e/t.degree,t.dispY+=(s-t.plotY)*i*e/t.degree)})},getK:function(t){return Math.pow(t.box.width*t.box.height/t.nodes.length,.3)},integrate:function(t,e){var i;e.dispX+=e.dispX*t.options.friction,e.dispY+=e.dispY*t.options.friction,0!==(i=e.temperature=t.vectorLength({x:e.dispX,y:e.dispY}))&&(e.plotX+=e.dispX/i*Math.min(Math.abs(e.dispX),t.temperature),e.plotY+=e.dispY/i*Math.min(Math.abs(e.dispY),t.temperature))},repulsive:function(t,e,i,o){t.dispX+=i.x/o*e/t.degree,t.dispY+=i.y/o*e/t.degree},repulsiveForceFunction:function(t,e){return e*e/t}}}),e(t,"Series/Networkgraph/QuadTreeNode.js",[],function(){return class o{constructor(t){this.body=!1,this.isEmpty=!1,this.isInternal=!1,this.nodes=[],this.box=t,this.boxSize=Math.min(t.width,t.height)}divideBox(){var t=this.box.width/2,e=this.box.height/2;this.nodes[0]=new o({left:this.box.left,top:this.box.top,width:t,height:e}),this.nodes[1]=new o({left:this.box.left+t,top:this.box.top,width:t,height:e}),this.nodes[2]=new o({left:this.box.left+t,top:this.box.top+e,width:t,height:e}),this.nodes[3]=new o({left:this.box.left,top:this.box.top+e,width:t,height:e})}getBoxPosition(t){var e=t.plotX<this.box.left+this.box.width/2,t=t.plotY<this.box.top+this.box.height/2;let i;return i=e?t?0:3:t?1:2}insert(t,e){let i;this.isInternal?this.nodes[this.getBoxPosition(t)].insert(t,e-1):(this.isEmpty=!1,this.body?e?(this.isInternal=!0,this.divideBox(),!0!==this.body&&(this.nodes[this.getBoxPosition(this.body)].insert(this.body,e-1),this.body=!0),this.nodes[this.getBoxPosition(t)].insert(t,e-1)):((i=new o({top:t.plotX||NaN,left:t.plotY||NaN,width:.1,height:.1})).body=t,i.isInternal=!1,this.nodes.push(i)):(this.isInternal=!1,this.body=t))}updateMassAndCenter(){let t=0,e=0,i=0;if(this.isInternal){for(const o of this.nodes)o.isEmpty||(t+=o.mass,e+=o.plotX*o.mass,i+=o.plotY*o.mass);e/=t,i/=t}else this.body&&(t=this.body.mass,e=this.body.plotX,i=this.body.plotY);this.mass=t,this.plotX=e,this.plotY=i}}}),e(t,"Series/Networkgraph/QuadTree.js",[t["Series/Networkgraph/QuadTreeNode.js"]],function(s){return class{constructor(t,e,i,o){this.box={left:t,top:e,width:i,height:o},this.maxDepth=25,this.root=new s(this.box),this.root.isInternal=!0,this.root.isRoot=!0,this.root.divideBox()}calculateMassAndCenter(){this.visitNodeRecursive(null,null,function(t){t.updateMassAndCenter()})}insertNodes(t){for(const e of t)this.root.insert(e,this.maxDepth)}visitNodeRecursive(t,e,i){let o;if(t=t||this.root,!1!==(o=t===this.root&&e?e(t):o)){for(const s of t.nodes){if(s.isInternal){if(!1===(o=e?e(s):o))continue;this.visitNodeRecursive(s,e,i)}else s.body&&e&&e(s.body);i&&i(s)}t===this.root&&i&&i(t)}}}}),e(t,"Series/Networkgraph/VerletIntegration.js",[],function(){return{attractive:function(t,e,i){var o=t.getMass(),s=-i.x*e*this.diffTemperature,i=-i.y*e*this.diffTemperature;t.fromNode.fixedPosition||(t.fromNode.plotX-=s*o.fromNode/t.fromNode.degree,t.fromNode.plotY-=i*o.fromNode/t.fromNode.degree),t.toNode.fixedPosition||(t.toNode.plotX+=s*o.toNode/t.toNode.degree,t.toNode.plotY+=i*o.toNode/t.toNode.degree)},attractiveForceFunction:function(t,e){return(e-t)/t},barycenter:function(){let t=this.options.gravitationalConstant,e=this.barycenter.xFactor,i=this.barycenter.yFactor;e=(e-(this.box.left+this.box.width)/2)*t,i=(i-(this.box.top+this.box.height)/2)*t,this.nodes.forEach(function(t){t.fixedPosition||(t.plotX-=e/t.mass/t.degree,t.plotY-=i/t.mass/t.degree)})},getK:function(t){return Math.pow(t.box.width*t.box.height/t.nodes.length,.5)},integrate:function(t,e){let i=-t.options.friction,o=t.options.maxSpeed,s=e.prevX,r=e.prevY,n=(e.plotX+e.dispX-s)*i,a=(e.plotY+e.dispY-r)*i,h=Math.abs,d=h(n)/(n||1),l=h(a)/(a||1);n=d*Math.min(o,Math.abs(n)),a=l*Math.min(o,Math.abs(a)),e.prevX=e.plotX+e.dispX,e.prevY=e.plotY+e.dispY,e.plotX+=n,e.plotY+=a,e.temperature=t.vectorLength({x:n,y:a})},repulsive:function(t,e,i){e=e*this.diffTemperature/t.mass/t.degree,t.fixedPosition||(t.plotX+=i.x*e,t.plotY+=i.y*e)},repulsiveForceFunction:function(t,e){return(e-t)/t*(t<e?1:0)}}}),e(t,"Series/Networkgraph/ReingoldFruchtermanLayout.js",[t["Series/Networkgraph/EulerIntegration.js"],t["Core/Globals.js"],t["Series/GraphLayoutComposition.js"],t["Series/Networkgraph/QuadTree.js"],t["Core/Utilities.js"],t["Series/Networkgraph/VerletIntegration.js"]],function(e,t,i,o,s,r){const n=t["win"],{clamp:a,defined:h,isFunction:d,fireEvent:l,pick:p}=s;return class c{constructor(){this.attractiveForce=void 0,this.box={},this.currentStep=0,this.initialRendering=!0,this.integration=void 0,this.links=[],this.nodes=[],this.options=void 0,this.quadTree=void 0,this.repulsiveForce=void 0,this.series=[],this.simulation=!1}static compose(t){i.compose(t),i.integrations.euler=e,i.integrations.verlet=r,i.layouts["reingold-fruchterman"]=c}init(t){this.options=t,this.nodes=[],this.links=[],this.series=[],this.box={x:0,y:0,width:0,height:0},this.setInitialRendering(!0),this.integration=i.integrations[t.integration],this.enableSimulation=t.enableSimulation,this.attractiveForce=p(t.attractiveForce,this.integration.attractiveForceFunction),this.repulsiveForce=p(t.repulsiveForce,this.integration.repulsiveForceFunction),this.approximation=t.approximation}updateSimulation(t){this.enableSimulation=p(t,this.options.enableSimulation)}start(){const t=this,e=this.series,i=this.options;t.currentStep=0,t.forces=e[0]&&e[0].forces||[],t.chart=e[0]&&e[0].chart,t.initialRendering&&(t.initPositions(),e.forEach(function(t){t.finishedAnimating=!0,t.render()})),t.setK(),t.resetSimulation(i),t.enableSimulation&&t.step()}step(){var t=this.series;this.currentStep++,"barnes-hut"===this.approximation&&(this.createQuadTree(),this.quadTree.calculateMassAndCenter());for(const e of this.forces||[])this[e+"Forces"](this.temperature);if(this.applyLimits(),this.temperature=this.coolDown(this.startTemperature,this.diffTemperature,this.currentStep),this.prevSystemTemperature=this.systemTemperature,this.systemTemperature=this.getSystemTemperature(),this.enableSimulation){for(const i of t)i.chart&&i.render();this.maxIterations--&&isFinite(this.temperature)&&!this.isStable()?(this.simulation&&n.cancelAnimationFrame(this.simulation),this.simulation=n.requestAnimationFrame(()=>this.step())):(this.simulation=!1,this.series.forEach(t=>{l(t,"afterSimulation")}))}}stop(){this.simulation&&n.cancelAnimationFrame(this.simulation)}setArea(t,e,i,o){this.box={left:t,top:e,width:i,height:o}}setK(){this.k=this.options.linkLength||this.integration.getK(this)}addElementsToCollection(t,e){for(const i of t)-1===e.indexOf(i)&&e.push(i)}removeElementFromCollection(t,e){-1!==(t=e.indexOf(t))&&e.splice(t,1)}clear(){this.nodes.length=0,this.links.length=0,this.series.length=0,this.resetSimulation()}resetSimulation(){this.forcedStop=!1,this.systemTemperature=0,this.setMaxIterations(),this.setTemperature(),this.setDiffTemperature()}restartSimulation(){this.simulation?this.resetSimulation():(this.setInitialRendering(!1),this.enableSimulation?this.start():this.setMaxIterations(1),this.chart&&this.chart.redraw(),this.setInitialRendering(!0))}setMaxIterations(t){this.maxIterations=p(t,this.options.maxIterations)}setTemperature(){this.temperature=this.startTemperature=Math.sqrt(this.nodes.length)}setDiffTemperature(){this.diffTemperature=this.startTemperature/(this.options.maxIterations+1)}setInitialRendering(t){this.initialRendering=t}createQuadTree(){this.quadTree=new o(this.box.left,this.box.top,this.box.width,this.box.height),this.quadTree.insertNodes(this.nodes)}initPositions(){const t=this.options.initialPositions;if(d(t)){t.call(this);for(const e of this.nodes)h(e.prevX)||(e.prevX=e.plotX),h(e.prevY)||(e.prevY=e.plotY),e.dispX=0,e.dispY=0}else"circle"===t?this.setCircularPositions():this.setRandomPositions()}setCircularPositions(){const i=this.box,t=this.nodes,e=t.length+1,o=2*Math.PI/e,s=t.filter(function(t){return 0===t.linksTo.length}),r={},n=this.options.initialPositionRadius,a=t=>{for(const e of t.linksFrom||[])r[e.toNode.id]||(r[e.toNode.id]=!0,h.push(e.toNode),a(e.toNode))};let h=[];for(const l of s)h.push(l),a(l);if(h.length)for(const d of t)-1===h.indexOf(d)&&h.push(d);else h=t;let d;for(let t=0,e=h.length;t<e;++t)(d=h[t]).plotX=d.prevX=p(d.plotX,i.width/2+n*Math.cos(t*o)),d.plotY=d.prevY=p(d.plotY,i.height/2+n*Math.sin(t*o)),d.dispX=0,d.dispY=0}setRandomPositions(){var i=this.box,o=this.nodes,s=o.length+1,r=t=>(t=t*t/Math.PI,t-=Math.floor(t));let n;for(let t=0,e=o.length;t<e;++t)(n=o[t]).plotX=n.prevX=p(n.plotX,i.width*r(t)),n.plotY=n.prevY=p(n.plotY,i.height*r(s+t)),n.dispX=0,n.dispY=0}force(t,...e){this.integration[t].apply(this,e)}barycenterForces(){this.getBarycenter(),this.force("barycenter")}getBarycenter(){let t=0,e=0,i=0;for(const o of this.nodes)e+=o.plotX*o.mass,i+=o.plotY*o.mass,t+=o.mass;return this.barycenter={x:e,y:i,xFactor:e/t,yFactor:i/t},this.barycenter}barnesHutApproximation(t,e){var i=this.getDistXY(t,e),o=this.vectorLength(i);let s,r;return t!==e&&0!==o&&(e.isInternal?s=!(e.boxSize/o<this.options.theta&&0!==o&&(r=this.repulsiveForce(o,this.k),this.force("repulsive",t,r*e.mass,i,o),1)):(r=this.repulsiveForce(o,this.k),this.force("repulsive",t,r*e.mass,i,o))),s}repulsiveForces(){var t,e,i;if("barnes-hut"===this.approximation)for(const o of this.nodes)this.quadTree.visitNodeRecursive(null,t=>this.barnesHutApproximation(o,t));else for(const s of this.nodes)for(const r of this.nodes)s===r||s.fixedPosition||(i=this.getDistXY(s,r),0!==(e=this.vectorLength(i))&&(t=this.repulsiveForce(e,this.k),this.force("repulsive",s,t*r.mass,i,e)))}attractiveForces(){var t,e,i;for(const o of this.links)o.fromNode&&o.toNode&&(t=this.getDistXY(o.fromNode,o.toNode),0!==(e=this.vectorLength(t))&&(i=this.attractiveForce(e,this.k),this.force("attractive",o,i,t,e)))}applyLimits(){for(const t of this.nodes){if(t.fixedPosition)return;this.integration.integrate(this,t),this.applyLimitBox(t,this.box),t.dispX=0,t.dispY=0}}applyLimitBox(t,e){var i=t.radius;t.plotX=a(t.plotX,e.left+i,e.width-i),t.plotY=a(t.plotY,e.top+i,e.height-i)}coolDown(t,e,i){return t-e*i}isStable(){return Math.abs(this.systemTemperature-this.prevSystemTemperature)<1e-5||this.temperature<=0}getSystemTemperature(){let t=0;for(const e of this.nodes)t+=e.temperature;return t}vectorLength(t){return Math.sqrt(t.x*t.x+t.y*t.y)}getDistR(t,e){return t=this.getDistXY(t,e),this.vectorLength(t)}getDistXY(t,e){var i=t.plotX-e.plotX,t=t.plotY-e.plotY;return{x:i,y:t,absX:Math.abs(i),absY:Math.abs(t)}}}}),e(t,"Series/SimulationSeriesUtilities.js",[t["Core/Utilities.js"],t["Core/Animation/AnimationUtilities.js"]],function(t,e){const i=t["syncTimeout"],o=e["animObject"];return{initDataLabels:function(){var t=this,e=t.options.dataLabels;if(t.dataLabelsGroup)return t.dataLabelsGroup.attr({opacity:1}),t.dataLabelsGroup;{const i=this.initDataLabelsGroup();return!t.chart.styledMode&&e?.style&&i.css(e.style),i.attr({opacity:0}),t.visible&&i.show(),i}},initDataLabelsDefer:function(){var t=this.options.dataLabels;t?.defer&&this.options.layoutAlgorithm?.enableSimulation?i(()=>{this.deferDataLabels=!1},t?o(t.animation).defer:0):this.deferDataLabels=!1}}}),e(t,"Series/Networkgraph/NetworkgraphSeries.js",[t["Series/DragNodesComposition.js"],t["Series/GraphLayoutComposition.js"],t["Core/Globals.js"],t["Series/Networkgraph/NetworkgraphPoint.js"],t["Series/Networkgraph/NetworkgraphSeriesDefaults.js"],t["Series/NodesComposition.js"],t["Series/Networkgraph/ReingoldFruchtermanLayout.js"],t["Core/Series/SeriesRegistry.js"],t["Series/SimulationSeriesUtilities.js"],t["Core/Utilities.js"]],function(e,r,t,i,o,s,n,a,h,d){t=t.noop;const{series:l,seriesTypes:{column:{prototype:p},line:{prototype:c}}}=a,{initDataLabels:u,initDataLabelsDefer:f}=h,{addEvent:m,defined:g,extend:y,merge:b,pick:x}=d;class v extends l{constructor(){super(...arguments),this.data=void 0,this.nodes=void 0,this.options=void 0,this.points=void 0,this.deferDataLabels=!0}static compose(t){e.compose(t),n.compose(t)}deferLayout(){let t=this.options.layoutAlgorithm,e=this.chart.graphLayoutsStorage,i=this.chart.graphLayoutsLookup,o=this.chart.options.chart,s;this.visible&&(e||(this.chart.graphLayoutsStorage=e={},this.chart.graphLayoutsLookup=i=[]),(s=e[t.type])||(t.enableSimulation=g(o.forExport)?!o.forExport:t.enableSimulation,e[t.type]=s=new r.layouts[t.type],s.init(t),i.splice(s.index,0,s)),(this.layout=s).setArea(0,0,this.chart.plotWidth,this.chart.plotHeight),s.addElementsToCollection([this],s.series),s.addElementsToCollection(this.nodes,s.nodes),s.addElementsToCollection(this.points,s.links))}destroy(){this.layout&&this.layout.removeElementFromCollection(this,this.layout.series),s.destroy.call(this)}drawDataLabels(){if(!this.deferDataLabels){const e=this.options.dataLabels;let t;e?.textPath&&(t=e.textPath),l.prototype.drawDataLabels.call(this,this.nodes),e?.linkTextPath&&(e.textPath=e.linkTextPath),l.prototype.drawDataLabels.call(this,this.data),e?.textPath&&(e.textPath=t)}}generatePoints(){let t,e;for(s.generatePoints.apply(this,arguments),this.options.nodes&&this.options.nodes.forEach(function(t){this.nodeLookup[t.id]||(this.nodeLookup[t.id]=this.createNode(t.id))},this),e=this.nodes.length-1;0<=e;e--)(t=this.nodes[e]).degree=t.getDegree(),t.radius=x(t.marker&&t.marker.radius,this.options.marker&&this.options.marker.radius,0),this.nodeLookup[t.id]||t.remove();this.data.forEach(function(t){t.formatPrefix="link"}),this.indexateNodes()}getPointsCollection(){return this.nodes||[]}indexateNodes(){this.nodes.forEach(function(t,e){t.index=e})}init(t,e){return super.init(t,e),f.call(this),m(this,"updatedData",()=>{this.layout&&this.layout.stop()}),m(this,"afterUpdate",()=>{this.nodes.forEach(t=>{t&&t.series&&t.resolveColor()})}),m(this,"afterSimulation",function(){this.deferDataLabels=!1,this.drawDataLabels()}),this}markerAttribs(t,e){const i=l.prototype.markerAttribs.call(this,t,e);return g(t.plotY)||(i.y=0),i.x=(t.plotX||0)-(i.width||0)/2,i}pointAttribs(t,e){let i=e||t&&t.state||"normal",o=l.prototype.pointAttribs.call(this,t,i),s=this.options.states[i];return t&&!t.isNode&&(o=t.getLinkAttributes(),s&&(o={stroke:s.linkColor||o.stroke,dashstyle:s.linkDashStyle||o.dashstyle,opacity:x(s.linkOpacity,o.opacity),"stroke-width":s.linkColor||o["stroke-width"]})),o}render(){const t=this,e=t.points,i=t.chart.hoverPoint,o=[];t.points=t.nodes,c.render.call(this),(t.points=e).forEach(function(t){t.fromNode&&t.toNode&&(t.renderLink(),t.redrawLink())}),i&&i.series===t&&t.redrawHalo(i),t.chart.hasRendered&&!t.options.dataLabels.allowOverlap&&(t.nodes.concat(t.points).forEach(function(t){t.dataLabel&&o.push(t.dataLabel)}),t.chart.hideOverlappingLabels(o))}setState(t,e){e?(this.points=this.nodes.concat(this.data),l.prototype.setState.apply(this,arguments),this.points=this.data):l.prototype.setState.apply(this,arguments),this.layout.simulation||t||this.render()}translate(){this.processedXData||this.processData(),this.generatePoints(),this.deferLayout(),this.nodes.forEach(function(t){t.isInside=!0,t.linksFrom.forEach(function(t){t.shapeType="path",t.y=1})})}}return v.defaultOptions=b(l.defaultOptions,o),y(v.prototype,{pointClass:i,animate:void 0,directTouch:!0,drawGraph:void 0,forces:["barycenter","repulsive","attractive"],hasDraggableNodes:!0,isCartesian:!1,noSharedTooltip:!0,pointArrayMap:["from","to"],requireSorting:!1,trackerGroups:["group","markerGroup","dataLabelsGroup"],initDataLabels:u,buildKDTree:t,createNode:s.createNode,drawTracker:p.drawTracker,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp,redrawHalo:e.redrawHalo}),a.registerSeriesType("networkgraph",v),v}),e(t,"masters/modules/networkgraph.src.js",[t["Core/Globals.js"],t["Series/Networkgraph/NetworkgraphSeries.js"]],function(t,e){e.compose(t.Chart)})});