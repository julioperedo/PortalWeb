"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/venn",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){var e=t?t._modules:{};function r(t,e,r,n){t.hasOwnProperty(e)||(t[e]=n.apply(null,r))}r(e,"mixins/draw-point.js",[],function(){return function(t){(t.attribs=t.attribs||{}).class=this.getClassName(),function(t){var e,r,n=this,i=n.graphic,o=t.animatableAttribs,s=t.onComplete,a=t.css,c=t.renderer,u=null===(e=n.series)||void 0===e?void 0:e.options.animation;n.shouldDraw()?(i||(n.graphic=i=c[t.shapeType](t.shapeArgs).add(t.group)),i.css(a).attr(t.attribs).animate(o,!t.isNew&&u,s)):i&&(r=function(){n.graphic=i=i.destroy(),"function"==typeof s&&s()},Object.keys(o).length?i.animate(o,void 0,function(){r()}):r())}.call(this,t)}}),r(e,"mixins/geometry.js",[],function(){return{getAngleBetweenPoints:function(t,e){return Math.atan2(e.x-t.x,e.y-t.y)},getCenterOfPoints:function(t){var e=t.reduce(function(t,e){return t.x+=e.x,t.y+=e.y,t},{x:0,y:0});return{x:e.x/t.length,y:e.y/t.length}},getDistanceBetweenPoints:function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}}}),r(e,"mixins/geometry-circles.js",[e["mixins/geometry.js"]],function(t){var h=t.getAngleBetweenPoints,o=t.getCenterOfPoints,v=t.getDistanceBetweenPoints;function x(t,e){var r=Math.pow(10,e);return Math.round(t*r)/r}function s(t){if(t<=0)throw new Error("radius of circle must be a positive number.");return Math.PI*t*t}function a(t,e){return t*t*Math.acos(1-e/t)-(t-e)*Math.sqrt(e*(2*t-e))}function c(t,e){var r,n,i,o,s,a,c,u,l,f,h,p=v(t,e),d=t.r,g=e.r,y=[];return p<d+g&&p>Math.abs(d-g)&&(n=((r=d*d)-g*g+p*p)/(2*p),i=Math.sqrt(r-n*n),o=t.x,s=e.x,l=(a=t.y)+n*((c=e.y)-a)/p,h=i/p*-(s-o),y=[{x:x((u=o+n*(s-o)/p)+(f=i/p*-(c-a)),14),y:x(l-h,14)},{x:x(u-f,14),y:x(l+h,14)}]),y}function r(t){return t.reduce(function(t,i,o,e){var r=e.slice(o+1).reduce(function(t,e,r){var n=[o,r+o+1];return t.concat(c(i,e).map(function(t){return t.indexes=n,t}))},[]);return t.concat(r)},[])}function n(t,e){return v(t,e)<=e.r+1e-10}function i(e,t){return!t.some(function(t){return!n(e,t)})}function u(e){return r(e).filter(function(t){return i(t,e)})}return{getAreaOfCircle:s,getAreaOfIntersectionBetweenCircles:function(f){var t,e,r,n,i=u(f);return 1<i.length&&(e=o(i),r=(i=i.map(function(t){return t.angle=h(e,t),t}).sort(function(t,e){return e.angle-t.angle}))[i.length-1],0===(n=i.reduce(function(t,c){var e,u=t.startPoint,l=o([u,c]),r=c.indexes.filter(function(t){return-1<u.indexes.indexOf(t)}).reduce(function(t,e){var r=f[e],n=h(r,c),i=h(r,u),o=i-(i-n+(i<n?2*Math.PI:0))/2,s=v(l,{x:r.x+r.r*Math.sin(o),y:r.y+r.r*Math.cos(o)}),a=r.r;return 2*a<s&&(s=2*a),(!t||t.width>s)&&(t={r:a,largeArc:a<s?1:0,width:s,x:c.x,y:c.y}),t},null);return r&&(e=r.r,t.arcs.push(["A",e,e,0,r.largeArc,1,r.x,r.y]),t.startPoint=c),t},{startPoint:r,arcs:[]}).arcs).length||1===n.length||(n.unshift(["M",r.x,r.y]),t={center:e,d:n})),t},getCircleCircleIntersection:c,getCirclesIntersectionPoints:r,getCirclesIntersectionPolygon:u,getCircularSegmentArea:a,getOverlapBetweenCircles:function(t,e,r){var n,i,o=0;return r<t+e&&(o=x(o=r<=Math.abs(e-t)?s(t<e?t:e):(i=r-(n=(t*t-e*e+r*r)/(2*r)),a(t,t-n)+a(e,e-i)),14)),o},isCircle1CompletelyOverlappingCircle2:function(t,e){return v(t,e)+e.r<t.r+1e-10},isPointInsideCircle:n,isPointInsideAllCircles:i,isPointOutsideAllCircles:function(e,t){return!t.some(function(t){return n(e,t)})},round:x}}),r(e,"mixins/nelder-mead.js",[],function(){function d(t){for(var e=t.slice(0,-1),r=e.length,n=[],i=function(t,e){return t.sum+=e[t.i],t},o=0;o<r;o++)n[o]=e.reduce(i,{sum:0,i:o}).sum/r;return n}return{getCentroid:d,nelderMead:function(o,t){for(var e=function(t,e){return t.fx-e.fx},s=function(r,t,n,i){return t.map(function(t,e){return r*t+n*i[e]})},r=function(t,e){return e.fx=o(e),t[t.length-1]=e,t},n=function(t){var r=t[0];return t.map(function(t){var e=s(.5,r,.5,t);return e.fx=o(e),e})},i=function(t,e,r,n){var i=s(r,t,n,e);return i.fx=o(i),i},a=function(t){var e=t.length,r=new Array(e+1);r[0]=t,r[0].fx=o(t);for(var n=0;n<e;++n){var i=t.slice();i[n]=i[n]?1.05*i[n]:.001,i.fx=o(i),r[n+1]=i}return r}(t),c=0;c<100;c++){a.sort(e);var u,l,f=a[a.length-1],h=d(a),p=i(h,f,2,-1);a=p.fx<a[0].fx?r(a,(u=i(h,f,3,-2)).fx<p.fx?u:p):p.fx>=a[a.length-2].fx?p.fx>f.fx?(l=i(h,f,.5,.5)).fx<f.fx?r(a,l):n(a):(l=i(h,f,1.5,-.5)).fx<p.fx?r(a,l):n(a):r(a,p)}return a[0]}}}),r(e,"modules/venn.src.js",[e["parts/Color.js"],e["parts/Globals.js"],e["parts/Utilities.js"],e["mixins/draw-point.js"],e["mixins/geometry.js"],e["mixins/geometry-circles.js"],e["mixins/nelder-mead.js"]],function(t,e,r,n,i,o,s){function p(c,t){return t.reduce(function(t,e){var r,n,i,o,s,a=0;return 1<e.sets.length&&(r=e.value-(n=e.sets.map(function(t){return c[t]}),s=0,2===n.length&&(i=n[0],o=n[1],s=P(i.r,o.r,D(i,o))),s),a=Math.round(r*r*1e11)/1e11),t+a},0)}function c(t,e,r,n,i){var o,s,a=t(e),c=t(r),u=i||100,l=n||1e-10,f=r-e,h=1;if(r<=e)throw new Error("a must be smaller than b.");if(0<a*c)throw new Error("f(a) and f(b) must have opposite signs.");if(0===a)o=e;else if(0===c)o=r;else for(;h++<=u&&0!==s&&l<f;)0<a*(s=t(o=e+(f=(r-e)/2)))?e=o:r=o;return o}function d(r,n,i){var t=r+n,e=i<=0?t:x(r<n?r:n)<=i?0:c(function(t){var e=P(r,n,t);return i-e},0,t);return e}function u(t){return m(t.sets)&&1===t.sets.length}function a(n,t,e){var r=t.reduce(function(t,e){var r=e.r-D(n,e);return r<=t?r:t},Number.MAX_VALUE);return r=e.reduce(function(t,e){var r=D(n,e)-e.r;return r<=t?r:t},r)}var l=t.parse,f=r.addEvent,h=r.animObject,g=r.extend,m=r.isArray,b=r.isNumber,C=r.isObject,y=r.isString,A=r.merge,v=r.seriesType,x=o.getAreaOfCircle,O=o.getAreaOfIntersectionBetweenCircles,w=o.getCircleCircleIntersection,M=o.getCirclesIntersectionPolygon,P=o.getOverlapBetweenCircles,j=o.isCircle1CompletelyOverlappingCircle2,E=o.isPointInsideAllCircles,I=o.isPointInsideCircle,B=o.isPointOutsideAllCircles,T=s.nelderMead,L=i.getCenterOfPoints,D=i.getDistanceBetweenPoints,V=e.seriesTypes,N=function(n,i){var t=n.reduce(function(t,e){var r=e.r/2;return[{x:e.x,y:e.y},{x:e.x+r,y:e.y},{x:e.x-r,y:e.y},{x:e.x,y:e.y+r},{x:e.x,y:e.y-r}].reduce(function(t,e){var r=a(e,n,i);return t.margin<r&&(t.point=e,t.margin=r),t},t)},{point:void 0,margin:-Number.MAX_VALUE}).point,e=T(function(t){return-a({x:t[0],y:t[1]},n,i)},[t.x,t.y]),t={x:e[0],y:e[1]};return E(t,n)&&B(t,i)||(t=1<n.length?L(M(n)):{x:n[0].x,y:n[0].y}),t},X=function(o,s,t){function e(n,i){return c(function(t){var e={x:o.x+i*t,y:o.y},r=E(e,s)&&B(e,a);return-(n-t)+(r?0:Number.MAX_VALUE)},0,n)}var r=s.reduce(function(t,e){return Math.min(e.r,t)},1/0),a=t.filter(function(t){return!I(o,t)});return 2*Math.min(e(r,-1),e(r,1))};function S(t){var r=t.filter(function(t){return 2===t.sets.length}).reduce(function(n,i){return i.sets.forEach(function(t,e,r){C(n[t])||(n[t]={overlapping:{},totalOverlap:0}),n[t].totalOverlap+=i.value,n[t].overlapping[r[1-e]]=i.value}),n},{});return t.filter(u).forEach(function(t){var e=r[t.sets[0]];g(t,e)}),t}function k(t,e){return e.totalOverlap-t.totalOverlap}function U(t){var l=[],f={};function r(t,e){var r=t.circle;r.x=e.x,r.y=e.y,l.push(t)}t.filter(function(t){return 1===t.sets.length}).forEach(function(t){f[t.sets[0]]=t.circle={x:Number.MAX_VALUE,y:Number.MAX_VALUE,r:Math.sqrt(t.value/Math.PI)}}),S(t);var e=t.filter(u).sort(k);r(e.shift(),{x:0,y:0});var h=t.filter(function(t){return 2===t.sets.length});return e.forEach(function(t){var a=t.circle,c=a.r,u=t.overlapping,e=l.reduce(function(r,t,e){var i=t.circle,n=u[t.sets[0]],o=d(c,i.r,n),s=[{x:i.x+o,y:i.y},{x:i.x-o,y:i.y},{x:i.x,y:i.y+o},{x:i.x,y:i.y-o}];return l.slice(e+1).forEach(function(t){var e=t.circle,r=u[t.sets[0]],n=d(c,e.r,r);s=s.concat(w({x:i.x,y:i.y,r:o},{x:e.x,y:e.y,r:n}))}),s.forEach(function(t){a.x=t.x,a.y=t.y;var e=p(f,h);e<r.loss&&(r.loss=e,r.coordinates=t)}),r},{loss:Number.MAX_VALUE,coordinates:void 0});r(t,e.coordinates)}),f}function _(t){var i,o,s={},a={};return 0<t.length&&(i=U(t),o=t.filter(u),t.forEach(function(t){var e=t.sets,r=e.join(),n=u(t)?i[r]:O(e.map(function(t){return i[t]}));n&&(s[r]=n,a[r]=function(t,e){var r=t.sets,n=e.reduce(function(t,e){return t[-1<r.indexOf(e.sets[0])?"internal":"external"].push(e.circle),t},{internal:[],external:[]});n.external=n.external.filter(function(e){return n.internal.some(function(t){return!j(e,t)})});var i=N(n.internal,n.external);return{position:i,width:X(i,n.internal,n.external)}}(t,o))})),{mapOfIdToShape:s,mapOfIdToLabelValues:a}}function q(t){var r={};return C(t)&&b(t.value)&&-1<t.value&&m(t.sets)&&0<t.sets.length&&!t.sets.some(function(t){var e=!1;return!r[t]&&y(t)?r[t]=!0:e=!0,e})}function H(t){var e,r=m(t)?t:[],n=r.reduce(function(t,e){var r;return q(r=e)&&u(r)&&0<r.value&&-1===t.indexOf(e.sets[0])&&t.push(e.sets[0]),t},[]).sort(),i=r.reduce(function(t,e){return q(e)&&!e.sets.some(function(t){return-1===n.indexOf(t)})&&(t[e.sets.sort().join()]=e),t},{});return n.reduce(function(e,r,t,n){return n.slice(t+1).forEach(function(t){e.push(r+","+t)}),e},[]).forEach(function(t){var e;i[t]||(e={sets:t.split(","),value:0},i[t]=e)}),e=i,Object.keys(e).map(function(t){return e[t]})}v("venn","scatter",{borderColor:"#cccccc",borderDashStyle:"solid",borderWidth:1,brighten:0,clip:!1,colorByPoint:!0,dataLabels:{enabled:!0,verticalAlign:"middle",formatter:function(){return this.point.name}},inactiveOtherPoints:!0,marker:!1,opacity:.75,showInLegend:!1,states:{hover:{opacity:1,borderColor:"#333333"},select:{color:"#cccccc",borderColor:"#000000",animation:!1},inactive:{opacity:.075}},tooltip:{pointFormat:"{point.name}: {point.value}"}},{isCartesian:!1,axisTypes:[],directTouch:!0,pointArrayMap:["value"],init:function(){V.scatter.prototype.init.apply(this,arguments),delete this.opacity},translate:function(){var t=this.chart;this.processedXData=this.xData,this.generatePoints();var e,r,n,i,o,s,a,c,u,l,f=_(H(this.options.data)),h=f.mapOfIdToShape,p=f.mapOfIdToLabelValues,d=Object.keys(h).filter(function(t){var e=h[t];return e&&b(e.r)}).reduce(function(t,e){return r=t,n=h[e],i=n.x-n.r,o=n.x+n.r,s=n.y+n.r,a=n.y-n.r,(!b(r.left)||r.left>i)&&(r.left=i),(!b(r.right)||r.right<o)&&(r.right=o),(!b(r.top)||r.top>a)&&(r.top=a),(!b(r.bottom)||r.bottom<s)&&(r.bottom=s),r;var r,n,i,o,s,a},{top:0,bottom:0,left:0,right:0}),g=(e=t.plotWidth,r=t.plotHeight,i=(n=d).bottom-n.top,o=n.right-n.left,s=0<o?1/o*e:1,a=0<i?1/i*r:1,c=(n.right+n.left)/2,u=(n.top+n.bottom)/2,{scale:l=Math.min(s,a),centerX:e/2-c*l,centerY:r/2-u*l}),y=g.scale,v=g.centerX,x=g.centerY;this.points.forEach(function(t){var e,r,n=m(t.sets)?t.sets:[],i=n.join(),o=h[i],s=p[i]||{},a=s.width,c=s.position,u=t.options&&t.options.dataLabels;o&&(o.r?e={x:v+o.x*y,y:x+o.y*y,r:o.r*y}:o.d&&((r=o.d).forEach(function(t){"M"===t[0]?(t[1]=v+t[1]*y,t[2]=x+t[2]*y):"A"===t[0]&&(t[1]=t[1]*y,t[2]=t[2]*y,t[6]=v+t[6]*y,t[7]=x+t[7]*y)}),e={d:r}),c?(c.x=v+c.x*y,c.y=x+c.y*y):c={},b(a)&&(a=Math.round(a*y))),t.shapeArgs=e,c&&e&&(t.plotX=c.x,t.plotY=c.y),a&&e&&(t.dlOptions=A(!0,{style:{width:a}},C(u)&&u)),t.name=t.options.name||n.join("∩")})},drawPoints:function(){var n=this,i=n.chart,o=n.group,t=n.points||[],s=i.renderer;t.forEach(function(t){var e={zIndex:m(t.sets)?t.sets.length:0},r=t.shapeArgs;i.styledMode||g(e,n.pointAttribs(t,t.state)),t.draw({isNew:!t.graphic,animatableAttribs:r,attribs:e,group:o,renderer:s,shapeType:r&&r.d?"path":"circle"})})},pointAttribs:function(t,e){var r=this.options||{},n=t&&t.options||{},i=e&&r.states[e]||{},o=A(r,{color:t&&t.color},n,i);return{fill:l(o.color).setOpacity(o.opacity).brighten(o.brightness).get(),stroke:o.borderColor,"stroke-width":o.borderWidth,dashstyle:o.borderDashStyle}},animate:function(t){var i;t||(i=h(this.options.animation),this.points.forEach(function(t){var e,r,n=t.shapeArgs;t.graphic&&n&&(e={},r={},n.d?e.opacity=.001:(e.r=0,r.r=n.r),t.graphic.attr(e).animate(r,i),n.d&&setTimeout(function(){t&&t.graphic&&t.graphic.animate({opacity:1})},i.duration))},this))},utils:{addOverlapToSets:S,geometry:i,geometryCircles:o,getLabelWidth:X,getMarginFromCircles:a,getDistanceBetweenCirclesByOverlap:d,layoutGreedyVenn:U,loss:p,nelderMead:s,processVennData:H,sortByTotalOverlap:k}},{draw:n,shouldDraw:function(){return!!this.shapeArgs},isValid:function(){return b(this.value)}}),f(V.venn,"afterSetOptions",function(t){var e=t.options.states;this.is("venn")&&Object.keys(e).forEach(function(t){e[t].halo=!1})})}),r(e,"masters/modules/venn.src.js",[],function(){})});