"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/funnel",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(m){var t=m?m._modules:{};function e(t,e,i,a){t.hasOwnProperty(e)||(t[e]=a.apply(null,i))}e(t,"modules/funnel.src.js",[t["parts/Chart.js"],t["parts/Globals.js"],t["parts/Utilities.js"]],function(t,e,i){var E=e.noop,a=e.seriesType,h=e.seriesTypes,n=i.addEvent,P=i.fireEvent,o=i.isArray,C=i.pick;a("funnel","pie",{animation:!1,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,size:!0,dataLabels:{connectorWidth:1,verticalAlign:"middle"},states:{select:{color:"#cccccc",borderColor:"#000000"}}},{animate:E,translate:function(){var e,i,a,n,o,l,s,r,h,d,c=0,p=this,t=p.chart,g=p.options,u=g.reversed,f=g.ignoreHiddenPoint,b=t.plotWidth,m=t.plotHeight,L=0,y=g.center,v=j(y[0],b),W=j(y[1],m),A=j(g.width,b),x=j(g.height,m),D=j(g.neckWidth,b),H=j(g.neckHeight,m),k=W-x/2+x-H,w=p.data,Y="left"===g.dataLabels.position?1:0;function j(t,e){return/%$/.test(t)?e*parseInt(t,10)/100:parseInt(t,10)}p.getWidthAt=function(t){return k<t||x===H?D:D+(A-D)*(1-(t-(W-x/2))/(x-H))},p.getX=function(t,e,i){return v+(e?-1:1)*(p.getWidthAt(u?2*W-t:t)/2+i.labelDistance)},p.center=[v,W,x],p.centerX=v,w.forEach(function(t){f&&!1===t.visible||(c+=t.y)}),w.forEach(function(t){d=null,a=c?t.y/c:0,r=(o=W-x/2+L*x)+a*x,e=p.getWidthAt(o),l=(n=v-e/2)+e,e=p.getWidthAt(r),h=(s=v-e/2)+e,k<o?(n=s=v-D/2,l=h=v+D/2):k<r&&(d=r,e=p.getWidthAt(k),h=(s=v-e/2)+e,r=k),u&&(o=2*W-o,r=2*W-r,null!==d&&(d=2*W-d)),i=[["M",n,o],["L",l,o],["L",h,r]],null!==d&&i.push(["L",h,d],["L",s,d]),i.push(["L",s,r],["Z"]),t.shapeType="path",t.shapeArgs={d:i},t.percentage=100*a,t.plotX=v,t.plotY=(o+(d||r))/2,t.tooltipPos=[v,t.plotY],t.dlBox={x:s,y:o,topWidth:l-n,bottomWidth:h-s,height:Math.abs(C(d,r)-o),width:NaN},t.slice=E,t.half=Y,f&&!1===t.visible||(L+=a)}),P(p,"afterTranslate")},sortByAngle:function(t){t.sort(function(t,e){return t.plotY-e.plotY})},drawDataLabels:function(){var t,e,i,a,n,o=this,l=o.data,s=o.options.dataLabels.distance,r=l.length;for(o.center[2]-=2*s;r--;)e=(t=(i=l[r]).half)?1:-1,n=i.plotY,i.labelDistance=C(i.options.dataLabels&&i.options.dataLabels.distance,s),o.maxLabelDistance=Math.max(i.labelDistance,o.maxLabelDistance||0),a=o.getX(n,t,i),i.labelPosition={natural:{x:0,y:n},final:{},alignment:t?"right":"left",connectorPosition:{breakAt:{x:a+(i.labelDistance-5)*e,y:n},touchingSliceAt:{x:a+i.labelDistance*e,y:n}}};h[o.options.dataLabels.inside?"column":"pie"].prototype.drawDataLabels.call(this)},alignDataLabel:function(t,e,i,a,n){var o=t.series,l=o.options.reversed,s=t.dlBox||t.shapeArgs,r=i.align,h=i.verticalAlign,d=((o.options||{}).dataLabels||{}).inside,c=o.center[1],p=l?2*c-t.plotY:t.plotY,g=o.getWidthAt(p-s.height/2+e.height),u="middle"===h?(s.topWidth-s.bottomWidth)/4:(g-s.bottomWidth)/2,f=s.y,b=s.x;"middle"===h?f=s.y-s.height/2+e.height/2:"top"===h&&(f=s.y-s.height+e.height+i.padding),("top"===h&&!l||"bottom"===h&&l||"middle"===h)&&("right"===r?b=s.x-i.padding+u:"left"===r&&(b=s.x+i.padding-u)),a={x:b,y:l?f-s.height:f,width:s.bottomWidth,height:s.height},i.verticalAlign="bottom",d&&!t.visible||m.Series.prototype.alignDataLabel.call(this,t,e,i,a,n),d&&(!t.visible&&t.dataLabel&&(t.dataLabel.placed=!1),t.contrastColor&&e.css({color:t.contrastColor}))}}),n(t,"afterHideAllOverlappingLabels",function(){this.series.forEach(function(t){var e=t.options&&t.options.dataLabels;o(e)&&(e=e[0]),t.is("pie")&&t.placeDataLabels&&e&&!e.inside&&t.placeDataLabels()})}),a("pyramid","funnel",{neckWidth:"0%",neckHeight:"0%",reversed:!0})}),e(t,"masters/modules/funnel.src.js",[],function(){})});