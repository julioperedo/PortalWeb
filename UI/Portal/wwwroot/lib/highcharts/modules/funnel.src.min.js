!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/funnel",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,i,s){t.hasOwnProperty(e)||(t[e]=s.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Series/Funnel/FunnelSeriesDefaults.js",[],function(){return{animation:!1,borderRadius:0,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,size:!0,dataLabels:{connectorWidth:1,verticalAlign:"middle"},states:{select:{color:"#cccccc",borderColor:"#000000"}}}}),e(t,"Series/Funnel/FunnelSeries.js",[t["Series/Funnel/FunnelSeriesDefaults.js"],t["Core/Globals.js"],t["Extensions/BorderRadius.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,X,i,s){const U=e["noop"],{column:n,pie:a}=i.seriesTypes,{addEvent:d,extend:o,fireEvent:q,isArray:r,merge:l,pick:G,pushUnique:h,relativeLength:N,splat:c}=s,m=i.series.prototype.alignDataLabel;function V(t,e){return/%$/.test(t)?e*parseInt(t,10)/100:parseInt(t,10)}class p extends a{constructor(){super(...arguments),this.data=void 0,this.options=void 0,this.points=void 0}alignDataLabel(t,e,i,s,n){const a=t.series,d=a.options.reversed,o=t.dlBox||t.shapeArgs,r=i.align,l=i.verticalAlign,h=((a.options||{}).dataLabels||{}).inside,c=a.center[1],p=d?2*c-t.plotY:t.plotY,u=a.getWidthAt(p-o.height/2+e.height),g="middle"===l?(o.topWidth-o.bottomWidth)/4:(u-o.bottomWidth)/2;let y=o.y,f=o.x;var x=G(e.height,e.getBBox().height);"middle"===l?y=o.y-o.height/2+x/2:"top"===l&&(y=o.y-o.height+x+(i.padding||0)),("top"===l&&!d||"bottom"===l&&d||"middle"===l)&&("right"===r?f=o.x-i.padding+g:"left"===r&&(f=o.x+i.padding-g)),s={x:f,y:d?y-o.height:y,width:o.bottomWidth,height:o.height},i.verticalAlign="bottom",h&&!t.visible||m.call(a,t,e,i,s,n),h&&(!t.visible&&t.dataLabel&&(t.dataLabel.placed=!1),t.contrastColor&&e.css({color:t.contrastColor}))}drawDataLabels(){(c(this.options.dataLabels)[0].inside?n:a).prototype.drawDataLabels.call(this)}getDataLabelPosition(t,e){var i=t.plotY||0,s=t.half?1:-1,n=this.getX(i,!!t.half,t);return{distance:e,natural:{x:0,y:i},computed:{},alignment:t.half?"right":"left",connectorPosition:{breakAt:{x:n+(e-5)*s,y:i},touchingSliceAt:{x:n+e*s,y:i}}}}translate(){const s=this,t=s.chart,e=s.options,o=e.reversed,i=e.ignoreHiddenPoint,n=X.optionsToObject(e.borderRadius),a=t.plotWidth,d=t.plotHeight,Y=e.center,r=V(Y[0],a),l=V(Y[1],d),h=V(e.width,a),c=V(e.height,d),p=V(e.neckWidth,a),u=V(e.neckHeight,d),g=l-c/2+c-u,y=s.data,B=N(n.radius,h),f=n.scope,E="left"===e.dataLabels.position?1:0,x=t=>{var e=Math.tan(t/2),i=Math.cos(S),s=Math.sin(S);let n=B,a=n/e,d=Math.tan((Math.PI-t)/3.2104);return a>C&&(a=C,n=a*e),d*=n,{dx:[a*i,(a-d)*i,a-d,a],dy:[a*s,(a-d)*s,a-d,a].map(t=>o?-t:t)}};let m=0,T=0,b,L,v,S,C,M,j,P,W,A,k,D;s.getWidthAt=function(t){var e=l-c/2;return t>g||c===u?p:p+(h-p)*(1-(t-e)/(c-u))},s.getX=function(t,e,i){return r+(e?-1:1)*(s.getWidthAt(o?2*l-t:t)/2+(i.dataLabel?.dataLabelPosition?.distance??N(this.options.dataLabels?.distance||0,h)))},s.center=[r,l,c],s.centerX=r;for(const I of y)!I.y||!I.isValid()||i&&!1===I.visible||(m+=I.y);for(const O of y){if(D=null,v=m?O.y/m:0,j=l-c/2+T*c,A=j+v*c,b=s.getWidthAt(j),M=r-b/2,P=M+b,b=s.getWidthAt(A),W=r-b/2,k=W+b,j>g?(M=W=r-p/2,P=k=r+p/2):A>g&&(D=A,b=s.getWidthAt(g),W=r-b/2,k=W+b,A=g),o&&(j=2*l-j,A=2*l-A,null!==D&&(D=2*l-D)),!B||"point"!==f&&0!==O.index&&O.index!==y.length-1&&null===D)L=[["M",M,j],["L",P,j],["L",k,A]],null!==D&&L.push(["L",k,D],["L",W,D]),L.push(["L",W,A]);else{var w=Math.abs(A-j),F=P-k,H=k-W,R=Math.sqrt(F*F+w*w);S=Math.atan(w/F),C=R/2,null!==D&&(C=Math.min(C,Math.abs(D-A)/2)),1<=H&&(C=Math.min(C,H/2));let t=x(S);L="stack"===f&&0!==O.index?[["M",M,j],["L",P,j]]:[["M",M+t.dx[0],j+t.dy[0]],["C",M+t.dx[1],j+t.dy[1],M+t.dx[2],j,M+t.dx[3],j],["L",P-t.dx[3],j],["C",P-t.dx[2],j,P-t.dx[1],j+t.dy[1],P-t.dx[0],j+t.dy[0]]],null!==D?(w=x(Math.PI/2),t=x(Math.PI/2+S),L.push(["L",k+t.dx[0],A-t.dy[0]],["C",k+t.dx[1],A-t.dy[1],k,A+t.dy[2],k,A+t.dy[3]]),"stack"===f&&O.index!==y.length-1?L.push(["L",k,D],["L",W,D]):L.push(["L",k,D-w.dy[3]],["C",k,D-w.dy[2],k-w.dx[2],D,k-w.dx[3],D],["L",W+w.dx[3],D],["C",W+w.dx[2],D,W,D-w.dy[2],W,D-w.dy[3]]),L.push(["L",W,A+t.dy[3]],["C",W,A+t.dy[2],W-t.dx[1],A-t.dy[1],W-t.dx[0],A-t.dy[0]])):1<=H?(t=x(Math.PI-S),"stack"===f&&0===O.index?L.push(["L",k,A],["L",W,A]):L.push(["L",k+t.dx[0],A-t.dy[0]],["C",k+t.dx[1],A-t.dy[1],k-t.dx[2],A,k-t.dx[3],A],["L",W+t.dx[3],A],["C",W+t.dx[2],A,W-t.dx[1],A-t.dy[1],W-t.dx[0],A-t.dy[0]])):(t=x(Math.PI-2*S),L.push(["L",W+t.dx[0],A-t.dy[0]],["C",W+t.dx[1],A-t.dy[1],W-t.dx[1],A-t.dy[1],W-t.dx[0],A-t.dy[0]]))}L.push(["Z"]),O.shapeType="path",O.shapeArgs={d:L},O.percentage=100*v,O.plotX=r,O.plotY=(j+(D||A))/2,O.tooltipPos=[r,O.plotY],O.dlBox={x:W,y:j,topWidth:P-M,bottomWidth:k-W,height:Math.abs(G(D,A)-j),width:NaN},O.slice=U,O.half=E,!O.isValid()||i&&!1===O.visible||(T+=v)}q(s,"afterTranslate")}sortByAngle(t){t.sort((t,e)=>t.plotY-e.plotY)}}p.defaultOptions=l(a.defaultOptions,t),o(p.prototype,{animate:U});{e=p=p||{};const g=[];function u(){for(const e of this.series){let t=e.options&&e.options.dataLabels;r(t)&&(t=t[0]),e.is("pie")&&e.placeDataLabels&&t&&!t.inside&&e.placeDataLabels()}}e.compose=function(t){h(g,t)&&d(t,"afterHideAllOverlappingLabels",u)}}return i.registerSeriesType("funnel",p),p}),e(t,"Series/Pyramid/PyramidSeriesDefaults.js",[],function(){return{neckWidth:"0%",neckHeight:"0%",reversed:!0}}),e(t,"Series/Pyramid/PyramidSeries.js",[t["Series/Funnel/FunnelSeries.js"],t["Series/Pyramid/PyramidSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,i,s){const n=s["merge"];class a extends t{constructor(){super(...arguments),this.data=void 0,this.options=void 0,this.points=void 0}}return a.defaultOptions=n(t.defaultOptions,e),i.registerSeriesType("pyramid",a),a}),e(t,"masters/modules/funnel.src.js",[t["Core/Globals.js"],t["Series/Funnel/FunnelSeries.js"]],function(t,e){e.compose(t.Chart)})});