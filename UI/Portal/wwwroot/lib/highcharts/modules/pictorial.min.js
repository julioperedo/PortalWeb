!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/pictorial",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,i,r){t.hasOwnProperty(e)||(t[e]=r.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Extensions/PatternFill.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Chart/Chart.js"],t["Core/Globals.js"],t["Core/Defaults.js"],t["Core/Series/Point.js"],t["Core/Series/Series.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,e,i,r,n,s,a,f){let u=t["animObject"],o=r["getOptions"],{addEvent:h,defined:d,erase:l,merge:p,pick:g,removeEvent:m,wrap:c}=f,x=i.patterns=(()=>{let i=[],r=o().colors;return["M 0 0 L 5 5 M 4.5 -0.5 L 5.5 0.5 M -0.5 4.5 L 0.5 5.5","M 0 5 L 5 0 M -0.5 0.5 L 0.5 -0.5 M 4.5 5.5 L 5.5 4.5","M 2 0 L 2 5 M 4 0 L 4 5","M 0 2 L 5 2 M 0 4 L 5 4","M 0 1.5 L 2.5 1.5 L 2.5 0 M 2.5 5 L 2.5 3.5 L 5 3.5"].forEach((t,e)=>{i.push({path:t,color:r[e],width:5,height:5,patternTransform:"scale(1.4 1.4)"})}),["M 0 0 L 5 10 L 10 0","M 3 3 L 8 3 L 8 8 L 3 8 Z","M 5 5 m -4 0 a 4 4 0 1 1 8 0 a 4 4 0 1 1 -8 0","M 0 0 L 10 10 M 9 -1 L 11 1 M -1 9 L 1 11","M 0 10 L 10 0 M -1 1 L 1 -1 M 9 11 L 11 9"].forEach((t,e)=>{i.push({path:t,color:r[e+5],width:10,height:10})}),i})();function w(t,e){let i=JSON.stringify(t),r=i.length||0,s=0,a=0,o;if(e){o=Math.max(Math.floor(r/500),1);for(let t=0;t<r;t+=o)s+=i.charCodeAt(t);s&=s}for(;a<r;++a)s=(s<<5)-s+i.charCodeAt(a),s&=s;return s.toString(16).replace("-","1")}n.prototype.calculatePatternDimensions=function(i){if(!i.width||!i.height){let t=this.graphic&&(this.graphic.getBBox&&this.graphic.getBBox(!0)||this.graphic.element&&this.graphic.element.getBBox())||{},e=this.shapeArgs;if(e&&(t.width=e.width||t.width,t.height=e.height||t.height,t.x=e.x||t.x,t.y=e.y||t.y),i.image){var r;if(!t.width||!t.height)return i._width="defer",i._height="defer",r=this.series.chart.mapView&&this.series.chart.mapView.getSVGTransform().scaleY,void(d(r)&&r<0&&(i._inverted=!0));i.aspectRatio&&(t.aspectRatio=t.width/t.height,i.aspectRatio>t.aspectRatio?t.aspectWidth=t.height*i.aspectRatio:t.aspectHeight=t.width/i.aspectRatio),i._width=i.width||Math.ceil(t.aspectWidth||t.width),i._height=i.height||Math.ceil(t.aspectHeight||t.height)}i.width||(i._x=i.x||0,i._x+=t.x-Math.round(t.aspectWidth?Math.abs(t.aspectWidth-t.width)/2:0)),i.height||(i._y=i.y||0,i._y+=t.y-Math.round(t.aspectHeight?Math.abs(t.aspectHeight-t.height)/2:0))}},a.prototype.addPattern=function(e,i){let r,s=g(i,!0),a=u(s),o,n=e.width||e._width||32,h=e.height||e._height||32,d=e.color||"#343434",l=e.id,p=this,c;if(l||(this.idCounter=this.idCounter||0,l="highcharts-pattern-"+this.idCounter+"-"+(this.chartIndex||0),++this.idCounter),this.forExport&&(l+="-export"),this.defIds=this.defIds||[],!(-1<this.defIds.indexOf(l))){this.defIds.push(l);let t={id:l,patternUnits:"userSpaceOnUse",patternContentUnits:e.patternContentUnits||"userSpaceOnUse",width:n,height:h,x:e._x||e.x||0,y:e._y||e.y||0};return e._inverted&&(t.patternTransform="scale(1, -1)",e.patternTransform&&(e.patternTransform+=" scale(1, -1)")),e.patternTransform&&(t.patternTransform=e.patternTransform),(r=this.createElement("pattern").attr(t).add(this.defs)).id=l,e.path?(o=f.isObject(e.path)?e.path:{d:e.path},e.backgroundColor&&(i=e.backgroundColor,p.rect(0,0,n,h).attr({fill:i}).add(r)),c={d:o.d},this.styledMode||(c.stroke=o.stroke||d,c["stroke-width"]=g(o.strokeWidth,2),c.fill=o.fill||"none"),o.transform&&(c.transform=o.transform),this.createElement("path").attr(c).add(r),r.color=d):e.image&&(s?this.image(e.image,0,0,n,h,function(){this.animate({opacity:g(e.opacity,1)},a),m(this.element,"load")}).attr({opacity:0}):this.image(e.image,0,0,n,h)).add(r),e.image&&s||void 0===e.opacity||[].forEach.call(r.element.childNodes,function(t){t.setAttribute("opacity",e.opacity)}),this.patternElements=this.patternElements||{},this.patternElements[l]=r}},c(s.prototype,"getColor",function(t){let e=this.options.color;e&&e.pattern&&!e.pattern.color?(delete this.options.color,t.apply(this,Array.prototype.slice.call(arguments,1)),e.pattern.color=this.color,this.color=this.options.color=e):t.apply(this,Array.prototype.slice.call(arguments,1))}),h(s,"render",function(){let i=this.chart.isResizing;!this.isDirtyData&&!i&&this.chart.hasRendered||(this.points||[]).forEach(function(t){let e=t.options&&t.options.color;e&&e.pattern&&(!i||t.shapeArgs&&t.shapeArgs.width&&t.shapeArgs.height?t.calculatePatternDimensions(e.pattern):(e.pattern._width="defer",e.pattern._height="defer"))})}),h(n,"afterInit",function(){let t=this.options.color;t&&t.pattern&&("string"==typeof t.pattern.path&&(t.pattern.path={d:t.pattern.path}),this.color=this.options.color=p(this.series.options.color,t))}),h(a,"complexColor",function(t){let e=t.args[0],i=t.args[1],r=t.args[2],s=this.chartIndex||0,a=e.pattern,o="#343434";if(!(a=void 0!==e.patternIndex&&x?x[e.patternIndex]:a))return!0;if(a.image||"string"==typeof a.path||a.path&&a.path.d){let t=r.parentNode&&r.parentNode.getAttribute("class");t=t&&-1<t.indexOf("highcharts-legend"),"defer"!==a._width&&"defer"!==a._height||n.prototype.calculatePatternDimensions.call({graphic:{element:r}},a),!t&&a.id||((a=p({},a)).id="highcharts-pattern-"+s+"-"+w(a)+w(a,!0)),this.addPattern(a,!this.forExport&&g(a.animation,this.globalAnimation,{duration:100})),o=`url(${this.url}#${a.id+(this.forExport?"-export":"")})`}else o=a.color||o;return r.setAttribute(i,o),!(e.toString=function(){return o})}),h(e,"endResize",function(){(this.renderer&&this.renderer.defIds||[]).filter(function(t){return t&&t.indexOf&&0===t.indexOf("highcharts-pattern-")}).length&&(this.series.forEach(function(t){t.visible&&t.points.forEach(function(t){let e=t.options&&t.options.color;e&&e.pattern&&(e.pattern._width="defer",e.pattern._height="defer")})}),this.redraw(!1))}),h(e,"redraw",function(){let i={},r=this.renderer,t=(r.defIds||[]).filter(function(t){return t.indexOf&&0===t.indexOf("highcharts-pattern-")});t.length&&([].forEach.call(this.renderTo.querySelectorAll('[color^="url("], [fill^="url("], [stroke^="url("]'),function(t){let e=t.getAttribute("fill")||t.getAttribute("color")||t.getAttribute("stroke");e&&(t=e.replace(r.url,"").replace("url(#","").replace(")",""),i[t]=!0)}),t.forEach(function(t){i[t]||(l(r.defIds,t),r.patternElements[t]&&(r.patternElements[t].destroy(),delete r.patternElements[t]))}))})}),e(t,"Series/Pictorial/PictorialUtilities.js",[t["Core/Utilities.js"]],function(t){let s=t["defined"];return{rescalePatternFill:function(n,h,d,l,p=1){let t=n&&n.attr("fill"),e=t&&t.match(/url\(([^)]+)\)/);if(e){let o=document.querySelector(e[1]+" path");if(o){let e=o.getBBox();if(0===e.width){let t=o.parentElement;n.renderer.box.appendChild(o),e=o.getBBox(),t.appendChild(o)}let t=1/(e.width+p),i=h/l/e.height,r=e.width/e.height,s=d/h,a=-e.width/2;r<s&&(t=t*r/s),o.setAttribute("stroke-width",p/(d*t)),o.setAttribute("transform",`translate(0.5, 0)scale(${t} ${i}) translate(${a+p*t/2}, ${-e.y})`)}}},invertShadowGroup:function(t,e){e=e.chart.inverted;e&&t.attr({rotation:e?90:0,scaleX:e?-1:1})},getStackMetrics:function(t,e){let i=t.len,r=0;return e&&s(e.max)&&(r=t.toPixels(e.max,!0),i=t.len-r),{height:i,y:r}}}}),e(t,"Series/Pictorial/PictorialPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Series/Pictorial/PictorialUtilities.js"]],function(t,e){let i=t.seriesTypes.column.prototype.pointClass,{rescalePatternFill:r,getStackMetrics:s}=e;return class extends i{constructor(){super(...arguments),this.options=void 0,this.series=void 0,this.pathDef=void 0}setState(){super.setState.apply(this,arguments);var t=this.series,e=t.options.paths;this.graphic&&this.shapeArgs&&e&&(e=e[this.index%e.length],r(this.graphic,s(t.yAxis,e).height,this.shapeArgs.width||0,this.shapeArgs.height||1/0,this.series.options.borderWidth||0))}}}),e(t,"Series/Pictorial/PictorialSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Chart/Chart.js"],t["Series/Pictorial/PictorialPoint.js"],t["Series/Pictorial/PictorialUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(t,e,i,r,s,a,o){let n=s.seriesTypes.column,h=t["animObject"],{getStackMetrics:m,invertShadowGroup:x,rescalePatternFill:w}=r,{addEvent:d,defined:l,merge:p,objectEach:c,pick:y}=o;class f extends n{constructor(){super(...arguments),this.paths=void 0,this.data=void 0,this.options=void 0,this.points=void 0}animate(t){let{chart:e,group:i}=this,r=h(this.options.animation),s=[this.getSharedClipKey(),r.duration,r.easing,r.defer].join(","),a=e.sharedClips[s];if(t&&i){let t=this.getClipBox();a||(t.y=t.height,t.height=0,a=e.renderer.clipRect(t),e.sharedClips[s]=a),i.clip(a)}else a&&!a.hasClass("highcharts-animating")&&(t=this.getClipBox(),a.addClass("highcharts-animating").animate(t,r))}animateDrilldown(){}animateDrillupFrom(){}pointAttribs(t){let e=super.pointAttribs.apply(this,arguments),i=this.options,r=i.paths;var s,a,o;return t&&t.shapeArgs&&r&&(o=r[t.index%r.length],{y:s,height:a}=m(this.yAxis,o),(o=o.definition)!==t.pathDef?(t.pathDef=o,e.fill={pattern:{path:{d:o,fill:e.fill,strokeWidth:e["stroke-width"],stroke:e.stroke},x:t.shapeArgs.x,y:s,width:t.shapeArgs.width||0,height:a,patternContentUnits:"objectBoundingBox",backgroundColor:"none",color:"#ff0000"}}):t.pathDef&&t.graphic&&delete e.fill),delete e.stroke,delete e.strokeWidth,e}getExtremes(){let e=super.getExtremes.apply(this,arguments),t=this.options.paths;return t&&t.forEach(function(t){l(t.max)&&l(e.dataMax)&&t.max>e.dataMax&&(e.dataMax=t.max)}),e}}function u(u){let t=Object.keys(u.points).filter(t=>1<t.split(",").length),e=u.axis.chart.series,i=t.map(t=>parseFloat(t.split(",")[0])),r=-1,g=(i.forEach(t=>{e[t]&&e[t].visible&&(r=t)}),u.axis.chart.series[r]);if(g&&g.is("pictorial")&&u.axis.hasData()&&g.xAxis.hasData()){let i=g.xAxis,t=u.axis.options,r=u.axis.chart,s=u.shadow,e=i.toPixels(u.x,!0),a=r.inverted?i.len-e:e,o=g.options.paths||[],n=u.x%o.length,h=o[n],d=g.getColumnMetrics&&g.getColumnMetrics().width,{height:l,y:p}=m(g.yAxis,h),c=t.stackShadow,f=y(c&&c.borderWidth,g.options.borderWidth,1);if(!s&&c&&c.enabled&&h)u.shadowGroup||(u.shadowGroup=r.renderer.g("shadow-group").add()),u.shadowGroup.attr({translateX:(r.inverted?u.axis:i).pos,translateY:(r.inverted?i:u.axis).pos}),u.shadow=r.renderer.rect(a,p,d,l).attr({fill:{pattern:{path:{d:h.definition,fill:c.color||"#dedede",strokeWidth:f,stroke:c.borderColor||"transparent"},x:a,y:p,width:d,height:l,patternContentUnits:"objectBoundingBox",backgroundColor:"none",color:"#dedede"}}}).add(u.shadowGroup),x(u.shadowGroup,u.axis),w(u.shadow,l,d,l,f),u.setOffset(g.pointXOffset||0,g.barW||0);else if(s&&u.shadowGroup){s.animate({x:a,y:p,width:d,height:l});let t=s.attr("fill"),e=t&&t.match(/url\(([^)]+)\)/);e&&r.renderer.patternElements&&r.renderer.patternElements[e[1].slice(1)].animate({x:a,y:p,width:d,height:l}),u.shadowGroup.animate({translateX:(r.inverted?u.axis:i).pos,translateY:(r.inverted?i:u.axis).pos}),x(u.shadowGroup,u.axis),w(s,l,d,l,f),u.setOffset(g.pointXOffset||0,g.barW||0)}}else u.shadow&&u.shadowGroup&&(u.shadow.destroy(),u.shadow=void 0,u.shadowGroup.destroy(),u.shadowGroup=void 0)}function g(t,e){t.axes&&t.axes.forEach(function(t){t.stacking&&(t=t.stacking.stacks,c(t,function(t){c(t,function(t){e(t)})}))})}function C(t){g(t,function(t){t.shadow&&t.shadowGroup&&(t.shadow.destroy(),t.shadowGroup.destroy(),delete t.shadow,delete t.shadowGroup)})}return f.defaultOptions=p(n.defaultOptions,{borderWidth:0}),d(f,"afterRender",function(){let o=this,n=o.options.paths,h=/url\(([^)]+)\)/;o.points.forEach(function(a){if(a.graphic&&a.shapeArgs&&n){let t=n[a.index%n.length],e=a.graphic.attr("fill"),i=e&&e.match(h),{y:r,height:s}=m(o.yAxis,t);if(i&&o.chart.renderer.patternElements){let t=o.chart.renderer.patternElements[i[1].slice(1)];t&&t.animate({x:a.shapeArgs.x,y:r,width:a.shapeArgs.width||0,height:s})}w(a.graphic,m(o.yAxis,t).height,a.shapeArgs.width||0,a.shapeArgs.height||1/0,o.options.borderWidth||0)}})}),d(e,"render",function(){g(this,u)}),d(a,"afterSetOffset",function(t){var e,i,r;this.shadow&&({chart:r,len:e}=this.axis,{xOffset:t,width:i}=t,t=r.inverted?t-r.xAxis[0].len:t,r=r.inverted?-e:0,this.shadow.attr({translateX:t,translateY:r}),this.shadow.animate({width:i}))}),d(e,"afterDrilldown",function(t){C(this)}),d(e,"afterDrillUp",function(t){C(this)}),f.prototype.pointClass=i,s.registerSeriesType("pictorial",f),f}),e(t,"masters/modules/pictorial.src.js",[],function(){})});