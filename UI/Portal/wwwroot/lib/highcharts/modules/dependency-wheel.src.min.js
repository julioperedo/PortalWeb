!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/dependency-wheel",["highcharts","highcharts/modules/sankey"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){"use strict";e=e?e._modules:{};function t(e,t,s,n){e.hasOwnProperty(t)||(e[t]=n.apply(null,s),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}t(e,"Series/DependencyWheel/DependencyWheelPoint.js",[e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t){var{pointClass:e}=e.seriesTypes["sankey"]["prototype"];const{pInt:r,wrap:d}=t;class s extends e{constructor(){super(...arguments),this.angle=void 0,this.fromNode=void 0,this.index=void 0,this.linksFrom=void 0,this.linksTo=void 0,this.options=void 0,this.series=void 0,this.shapeArgs=void 0,this.toNode=void 0}getDataLabelPath(e){const t=this,s=t.series.chart.renderer,n=t.shapeArgs,o=t.angle<0||t.angle>Math.PI,i=n.start||0,a=n.end||0;return t.dataLabelPath?(t.dataLabelPath=t.dataLabelPath.destroy(),delete t.dataLabelPath):d(e,"destroy",function(e){return t.dataLabelPath&&(t.dataLabelPath=t.dataLabelPath.destroy()),e.call(this)}),t.dataLabelPath=s.arc({open:!0,longArc:Math.abs(Math.abs(i)-Math.abs(a))<Math.PI?0:1}).attr({x:n.x,y:n.y,r:(n.r||0)+r(e.options?.distance||0),start:o?i:a,end:o?a:i,clockwise:+o}).add(s.defs),t.dataLabelPath}isValid(){return!0}}return s}),t(e,"Series/DependencyWheel/DependencyWheelSeriesDefaults.js",[],function(){return{center:[null,null],curveFactor:.6,startAngle:0,dataLabels:{textPath:{enabled:!1,attributes:{dy:5}}}}}),t(e,"Series/DependencyWheel/DependencyWheelSeries.js",[e["Core/Animation/AnimationUtilities.js"],e["Series/DependencyWheel/DependencyWheelPoint.js"],e["Series/DependencyWheel/DependencyWheelSeriesDefaults.js"],e["Core/Globals.js"],e["Series/Sankey/SankeyColumnComposition.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t,s,n,o,i,a){const d=e["animObject"],g=n["deg2rad"];var{pie:e,sankey:n}=i.seriesTypes;const{extend:r,merge:c}=a;class h extends n{constructor(){super(...arguments),this.data=void 0,this.options=void 0,this.nodeColumns=void 0,this.nodes=void 0,this.points=void 0}animate(e){var t=this;if(!e){const s=d(t.options.animation).duration,n=s/2/t.nodes.length;let e=0;for(const o of t.nodes){const i=o.graphic;i&&(i.attr({opacity:0}),setTimeout(()=>{o.graphic&&o.graphic.animate({opacity:1},{duration:n})},n*e++))}for(const a of t.points){const r=a.graphic;!a.isNode&&r&&r.attr({opacity:0}).animate({opacity:1},t.options.animation)}}}createNode(e){const a=super.createNode(e);return a.getSum=()=>a.linksFrom.concat(a.linksTo).reduce((e,t)=>e+t.weight,0),a.offset=t=>{const s=e=>e.fromNode===a?e.toNode:e.fromNode;let n=0,o=a.linksFrom.concat(a.linksTo),i;o.sort((e,t)=>s(e).index-s(t).index);for(let e=0;e<o.length;e++)if(s(o[e]).index>a.index){o=o.slice(0,e).reverse().concat(o.slice(e).reverse()),i=!0;break}i||o.reverse();for(let e=0;e<o.length;e++){if(o[e]===t)return n;n+=o[e].weight}},a}createNodeColumns(){const e=[o.compose([],this)];for(const t of this.nodes)t.column=0,e[0].push(t);return e}getNodePadding(){return this.options.nodePadding/Math.PI}translate(){const a=this.options,r=2*Math.PI/(this.chart.plotHeight+this.getNodePadding()),e=this.getCenter(),d=(a.startAngle-90)*g,t=a.borderRadius,s="object"==typeof t?t.radius:t;super.translate();for(const o of this.nodeColumns[0])if(o.sum){const i=o.shapeArgs,c=e[0],h=e[1],l=e[2]/2,p=l-a.nodeWidth,u=d+r*(i.y||0),y=d+r*((i.y||0)+(i.height||0));o.angle=u+(y-u)/2,o.shapeType="arc",o.shapeArgs={x:c,y:h,r:l,innerR:p,start:u,end:y,borderRadius:s},o.dlBox={x:c+Math.cos((u+y)/2)*(l+p)/2,y:h+Math.sin((u+y)/2)*(l+p)/2,width:1,height:1};for(const f of o.linksFrom)if(f.linkBase){let o,i;var n=f.linkBase.map((e,t)=>{var e=r*e,s=Math.cos(d+e)*(1+p),n=Math.sin(d+e)*(1+p);return o=a.curveFactor||0,(i=Math.abs(f.linkBase[3-t]*r-e))>Math.PI&&(i=2*Math.PI-i),(i*=p)<p&&(o*=i/p),{x:c+s,y:h+n,cpX:c+(1-o)*s,cpY:h+(1-o)*n}});f.shapeArgs={d:[["M",n[0].x,n[0].y],["A",p,p,0,0,1,n[1].x,n[1].y],["C",n[1].cpX,n[1].cpY,n[2].cpX,n[2].cpY,n[2].x,n[2].y],["A",p,p,0,0,1,n[3].x,n[3].y],["C",n[3].cpX,n[3].cpY,n[0].cpX,n[0].cpY,n[0].x,n[0].y]]}}}}}return h.defaultOptions=c(n.defaultOptions,s),r(h.prototype,{orderNodes:!1,getCenter:e.prototype.getCenter}),h.prototype.pointClass=t,i.registerSeriesType("dependencywheel",h),h}),t(e,"masters/modules/dependency-wheel.src.js",[],function(){})});