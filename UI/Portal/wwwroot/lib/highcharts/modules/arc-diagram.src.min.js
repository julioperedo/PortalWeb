!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/arc-diagram",["highcharts","highcharts/modules/sankey"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,i,o){t.hasOwnProperty(e)||(t[e]=o.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Series/ArcDiagram/ArcDiagramPoint.js",[t["Series/NodesComposition.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,i){var{prototype:{pointClass:e}}=e["seriesTypes"]["sankey"];const o=i["extend"];class s extends e{constructor(){super(...arguments),this.fromNode=void 0,this.index=void 0,this.linksFrom=void 0,this.linksTo=void 0,this.options=void 0,this.series=void 0,this.scale=void 0,this.shapeArgs=void 0,this.toNode=void 0}isValid(){return!0}}return o(s.prototype,{setState:t.setNodeState}),s}),e(t,"Series/ArcDiagram/ArcDiagramSeries.js",[t["Series/ArcDiagram/ArcDiagramPoint.js"],t["Series/Sankey/SankeyColumnComposition.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,e,s,i,o,n){const{symbols:m}=o["prototype"],{column:a,sankey:c}=i["seriesTypes"],{extend:r,merge:u,pick:g,relativeLength:p}=n;class l extends c{constructor(){super(...arguments),this.data=void 0,this.options=void 0,this.nodeColumns=void 0,this.nodes=void 0,this.points=void 0}createNodeColumns(){const d=this,m=d.chart,c=e.compose([],d);return c.sankeyColumn.maxLength=m.inverted?m.plotHeight:m.plotWidth,c.sankeyColumn.getTranslationFactor=t=>{const e=c.slice(),i=this.options.minLinkWidth||0;let o,s=0,n,a,r=0,l=1,h=0,d=(m.plotSizeX||0)-(t.options.marker&&t.options.marker.lineWidth||0)-(c.length-1)*t.nodePadding;for(;c.length;){for(s=d/c.sankeyColumn.sum(),o=!1,n=c.length;n--;){a=c[n].getSum()*s*l;var p=Math.min(m.plotHeight,m.plotWidth);a>p?l=Math.min(p/a,l):a<i&&(c.splice(n,1),d-=i,a=i,o=!0),h+=a*(1-l)/2,r=Math.max(r,a)}if(!o)break}return c.length=0,e.forEach(t=>{t.scale=l,c.push(t)}),c.sankeyColumn.maxRadius=r,c.sankeyColumn.scale=l,c.sankeyColumn.additionalSpace=h,s},c.sankeyColumn.offset=function(e,i){var o=e.series.options.equalNodes;let s=c.sankeyColumn.additionalSpace||0,n,a=d.nodePadding,r=Math.min(m.plotWidth,m.plotHeight,(c.sankeyColumn.maxLength||0)/d.nodes.length-a);for(let t=0;t<c.length;t++){var l=c[t].getSum()*(c.sankeyColumn.scale||0),h=o?r:Math.max(l*i,d.options.minLinkWidth||0);if(n=l?h+a:0,c[t]===e)return{relativeLeft:s+p(e.options.offset||0,n)};s+=n}},d.nodes.forEach(function(t){t.column=0,c.push(t)}),[c]}translateLink(i){const t=i.fromNode,e=i.toNode,o=this.chart,s=this.translationFactor,n=i.options,a=this.options,r=g(n.linkWeight,a.linkWeight,Math.max((i.weight||0)*s*t.scale,this.options.minLinkWidth||0)),l=i.series.options.centeredLinks,h=t.nodeY;var d=(t,e)=>{e=(t.offset(i,e)||0)*s;return Math.min(t.nodeX+e,t.nodeX+(t.shapeArgs&&t.shapeArgs.height||0)-r)};let p=l?t.nodeX+((t.shapeArgs.height||0)-r)/2:d(t,"linksFrom"),m=l?e.nodeX+((e.shapeArgs.height||0)-r)/2:d(e,"linksTo"),c=h;r;p>m&&([p,m]=[m,p]),a.reversed&&([p,m]=[m,p],c=(o.plotSizeY||0)-c),i.shapeType="path",i.linkBase=[p,p+r,m,m+r];d=(m+r-p)/Math.abs(m+r-p)*g(a.linkRadius,Math.min(Math.abs(m+r-p)/2,t.nodeY-Math.abs(r)));i.shapeArgs={d:[["M",p,c],["A",(m+r-p)/2,d,0,0,1,m+r,c],["L",m,c],["A",(m-p-r)/2,d-r,0,0,0,p+r,c],["Z"]]},i.dlBox={x:p+(m-p)/2,y:c-d,height:r,width:0},i.tooltipPos=o.inverted?[(o.plotSizeY||0)-i.dlBox.y-r/2,(o.plotSizeX||0)-i.dlBox.x]:[i.dlBox.x,i.dlBox.y+r/2],i.y=i.plotY=1,i.x=i.plotX=1,i.color||(i.color=t.color)}translateNode(e,i){var o=this.translationFactor,s=this.chart,n=s.inverted?s.plotWidth:s.plotHeight,a=this.options,n=Math.min(s.plotWidth,s.plotHeight,n/e.series.nodes.length-this.nodePadding),r=e.getSum()*(i.sankeyColumn.scale||0),n=a.equalNodes?n:Math.max(r*o,this.options.minLinkWidth||0),l=Math.round(a.marker&&a.marker.lineWidth||0)%2/2,h=i.sankeyColumn.offset(e,o),o=Math.floor(g(h&&h.absoluteLeft,(i.sankeyColumn.left(o)||0)+(h&&h.relativeLeft||0)))+l,h=u(a.marker,e.options.marker),d=h.symbol,p=h.radius,h=parseInt(a.offset,10)*((s.inverted?s.plotWidth:s.plotHeight)-(Math.floor(this.colDistance*(e.column||0)+(h.lineWidth||0)/2)+l+(i.sankeyColumn.scale||0)*(i.sankeyColumn.maxRadius||0)/2))/100;if(e.sum=r){e.nodeX=o,e.nodeY=h;l=o,i=e.options.width||a.width||n,r=e.options.height||a.height||n;let t=h;a.reversed&&(t=(s.plotSizeY||0)-h,s.inverted&&(t=(s.plotSizeY||0)-h)),this.mapOptionsToLevel&&(e.dlOptions=c.getDLOptions({level:this.mapOptionsToLevel[e.level],optionsPoint:e.options})),e.plotX=1,e.plotY=1,e.tooltipPos=s.inverted?[(s.plotSizeY||0)-t-r/2,(s.plotSizeX||0)-l-i/2]:[l+i/2,t+r/2],e.shapeType="path",e.shapeArgs={d:m[d||"circle"](l,t-(p||r)/2,p||i,p||r),width:p||i,height:p||r},e.dlBox={x:l+i/2,y:t,height:0,width:0}}else e.dlOptions={enabled:!1}}drawDataLabels(){var t;this.options.dataLabels&&(t=this.options.dataLabels.textPath,a.prototype.drawDataLabels.call(this,this.nodes),this.options.dataLabels.textPath=this.options.dataLabels.linkTextPath,a.prototype.drawDataLabels.call(this,this.data),this.options.dataLabels.textPath=t)}pointAttribs(t,e){if(t&&t.isNode){const{opacity:i,...o}=s.prototype.pointAttribs.apply(this,arguments);return o}return super.pointAttribs.apply(this,arguments)}markerAttribs(t){return t.isNode?super.markerAttribs.apply(this,arguments):{}}}return l.defaultOptions=u(c.defaultOptions,{centeredLinks:!1,offset:"100%",equalNodes:!1,reversed:!1,dataLabels:{linkTextPath:{attributes:{startOffset:"25%"}}},marker:{symbol:"circle",fillOpacity:1,lineWidth:0,states:{}}}),r(l.prototype,{orderNodes:!1}),l.prototype.pointClass=t,i.registerSeriesType("arcdiagram",l),l}),e(t,"masters/modules/arc-diagram.src.js",[],function(){})});