!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/series-on-point",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){"use strict";var t=e?e._modules:{};function s(t,e,s,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,s),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}s(t,"Series/SeriesOnPointComposition.js",[t["Core/Series/Point.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(u,a,t,l,d){const{bubble:e,pie:p}=t.seriesTypes,{addEvent:c,defined:m,find:i,isNumber:o}=d;var s;{t=s=s||{};const f=[];t.compose=function(t,e){var{chartGetZData:s,seriesAfterInit:i,seriesAfterRender:o,seriesGetCenter:r,seriesShowOrHide:n,seriesTranslate:h}=y.prototype;return p.prototype.onPointSupported=!0,d.pushUnique(f,t)&&(c(a,"afterInit",i),c(a,"afterRender",o),c(a,"afterGetCenter",r),c(a,"hide",n),c(a,"show",n),c(a,"translate",h)),d.pushUnique(f,e)&&(c(e,"beforeRender",s),c(e,"beforeRedraw",s)),t};class y{constructor(t){this.getRadii=e.prototype.getRadii,this.getRadius=e.prototype.getRadius,this.getPxExtremes=e.prototype.getPxExtremes,this.getZExtremes=e.prototype.getZExtremes,this.chart=t.chart,this.series=t,this.options=t.options.onPoint}drawConnector(){this.connector||(this.connector=this.series.chart.renderer.path().addClass("highcharts-connector-seriesonpoint").attr({zIndex:-1}).add(this.series.markerGroup));var t=this.getConnectorAttributes();t&&this.connector.animate(t)}getConnectorAttributes(){const t=this.series.chart,e=this.options;if(e){var s=e.connectorOptions||{},i=e.position,o=t.get(e.id);if(o instanceof u&&i&&m(o.plotX)&&m(o.plotY)){const r=m(i.x)?i.x:o.plotX,n=m(i.y)?i.y:o.plotY,h=r+(i.offsetX||0),a=n+(i.offsetY||0),d=s.width||1,p=s.stroke||this.series.color,c=s.dashstyle,f={d:l.prototype.crispLine([["M",r,n],["L",h,a]],d,"ceil"),"stroke-width":d};return t.styledMode||(f.stroke=p,f.dashstyle=c),f}}}seriesAfterInit(){this.onPointSupported&&this.options.onPoint&&(this.bubblePadding=!0,this.useMapGeometry=!0,this.onPoint=new y(this))}seriesAfterRender(){delete this.chart.bubbleZExtremes,this.onPoint&&this.onPoint.drawConnector()}seriesGetCenter(t){const e=this.options.onPoint,s=t.positions;e&&((i=this.chart.get(e.id))instanceof u&&m(i.plotX)&&m(i.plotY)&&(s[0]=i.plotX,s[1]=i.plotY),(i=e.position)&&(m(i.x)&&(s[0]=i.x),m(i.y)&&(s[1]=i.y),i.offsetX&&(s[0]+=i.offsetX),i.offsetY&&(s[1]+=i.offsetY)));var i=this.radii&&this.radii[this.index];o(i)&&(s[2]=2*i),t.positions=s}seriesShowOrHide(){const s=this.chart.series;this.points.forEach(e=>{const t=i(s,t=>{t=((t.onPoint||{}).options||{}).id;return!!t&&t===e.id});t&&t.setVisible(!t.visible,!1)})}seriesTranslate(){this.onPoint&&(this.onPoint.getRadii(),this.radii=this.onPoint.radii)}chartGetZData(){const e=[];this.series.forEach(t=>{t=t.options.onPoint;e.push(t&&t.z?t.z:null)}),this.series.forEach(t=>{t.onPoint&&(t.onPoint.zData=t.zData=e)})}}t.Additions=y}return s}),s(t,"masters/modules/series-on-point.src.js",[t["Series/SeriesOnPointComposition.js"]],function(t){t.compose(e.Series,e.Chart)})});