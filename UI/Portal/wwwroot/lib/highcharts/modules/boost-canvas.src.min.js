"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/boost-canvas",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){var e=t?t._modules:{};function o(t,e,o,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,o))}o(e,"modules/boost-canvas.src.js",[e["parts/Chart.js"],e["parts/Globals.js"],e["parts/Color.js"],e["parts/Utilities.js"]],function(t,tt,et,ot){function it(){}var rt,st=et.parse,at=ot.addEvent,nt=ot.extend,ct=ot.fireEvent,lt=ot.isNumber,ht=ot.merge,pt=ot.pick,n=ot.wrap,c=tt.win.document,e=tt.Series,o=tt.seriesTypes;tt.initCanvasBoost=function(){tt.seriesTypes.heatmap&&n(tt.seriesTypes.heatmap.prototype,"drawPoints",function(){var r=this.chart,s=this.getContext(),a=this.chart.inverted,n=this.xAxis,c=this.yAxis;s?(this.points.forEach(function(t){var e,o,i=t.plotY;void 0===i||isNaN(i)||null===t.y||(e=t.shapeArgs,o=r.styledMode?t.series.colorAttribs(t):t.series.pointAttribs(t),s.fillStyle=o.fill,a?s.fillRect(c.len-e.y+n.left,n.len-e.x+c.top,-e.height,-e.width):s.fillRect(e.x+n.left,e.y+c.top,e.width,e.height))}),this.canvasToSVG()):this.chart.showLoading("Your browser doesn't support HTML5 canvas, <br>please use a modern browser")}),nt(e.prototype,{getContext:function(){function e(t,e,o,i,r,s,a){t.call(this,o,e,i,r,s,a)}var o,t=this.chart,i=t.chartWidth,r=t.chartHeight,s=t.seriesGroup||this.group,a=this;return t.isChartSeriesBoosting()&&(s=(a=t).seriesGroup),o=a.ctx,a.canvas?tt.Chart:(a.canvas=c.createElement("canvas"),a.renderTarget=t.renderer.image("",0,0,i,r).addClass("highcharts-boost-canvas").add(s),a.ctx=o=a.canvas.getContext("2d"),t.inverted&&["moveTo","lineTo","rect","arc"].forEach(function(t){n(o,t,e)}),a.boostCopy=function(){a.renderTarget.attr({href:a.canvas.toDataURL("image/png")})},a.boostClear=function(){o.clearRect(0,0,a.canvas.width,a.canvas.height),a===this&&a.renderTarget.attr({href:""})},a.boostClipRect=t.renderer.clipRect(),a.renderTarget.clip(a.boostClipRect)),a.canvas.width!==i&&(a.canvas.width=i),a.canvas.height!==r&&(a.canvas.height=r),a.renderTarget.attr({x:0,y:0,width:i,height:r,style:"pointer-events: none",href:""}),a.boostClipRect.attr(t.getBoostClipRect(a)),o},canvasToSVG:function(){this.chart.isChartSeriesBoosting()?this.boostClear&&this.boostClear():(this.boostCopy||this.chart.boostCopy)&&(this.boostCopy||this.chart.boostCopy)()},cvsLineTo:function(t,e,o){t.lineTo(e,o)},renderCanvas:function(){function r(){W?(s.fillStyle=Q,s.fill()):(s.strokeStyle=T.color,s.lineWidth=t.lineWidth,s.stroke())}function v(t,e,o,i){0===c&&(s.beginPath(),N&&(s.lineJoin="round")),w.scroller&&"highcharts-navigator-series"===T.options.className?(e+=w.scroller.top,o&&(o+=w.scroller.top)):e+=w.plotTop,t+=w.plotLeft,y?s.moveTo(t,e):B?B(s,t,e,o,a):N?N(s,t,e):X&&X.call(T,s,t,e,E,i),(c+=1)===j&&(r(),c=0),a={clientX:t,plotY:e,yBottom:o}}function f(t,e,o){n=Z?t:t+","+e,L&&!u[n]&&(u[n]=!0,w.inverted&&(t=k.len-t,e=S.len-e),i.push({x:!!$&&$[K+o],clientX:t,plotX:t,plotY:e,i:K+o}))}var s,g,i,a,y,b,m,C,x,n,T=this,t=T.options,w=T.chart,k=this.xAxis,S=this.yAxis,e=w.options.boost||{},o=e.timeRendering||!1,c=0,l=T.processedXData,M=T.processedYData,h=t.data,p=k.getExtremes(),D=p.min,P=p.max,d=S.getExtremes(),A=d.min,R=d.max,u={},G=!!T.sampling,E=t.marker&&t.marker.radius,B=this.cvsDrawPoint,N=t.lineWidth?this.cvsLineTo:void 0,X=E&&E<=1?this.cvsMarkerSquare:this.cvsMarkerCircle,j=this.cvsStrokeBatch||1e3,L=!1!==t.enableMouseTracking,Y=t.threshold,O=S.getThreshold(Y),H=lt(Y),V=O,W=this.fill,q=T.pointArrayMap&&"low,high"===T.pointArrayMap.join(","),I=!!t.stacking,K=T.cropStart||0,U=w.options.loading,_=T.requireSorting,z=t.connectNulls,J=!l,F=I?T.data:l||h,Q=T.fillOpacity?new et(T.color).setOpacity(pt(t.fillOpacity,.75)).get():T.color,Z="x"===t.findNearestPointBy,$=this.xData||this.options.xData||this.processedXData||!1;this.renderTarget&&this.renderTarget.attr({href:""}),(this.points||this.graph)&&this.destroyGraphics(),T.plotGroup("group","series",T.visible?"visible":"hidden",t.zIndex,w.seriesGroup),T.markerGroup=T.group,at(T,"destroy",function(){T.markerGroup=null}),i=this.points=[],s=this.getContext(),T.buildKDTree=it,this.boostClear&&this.boostClear(),this.visible&&(99999<h.length&&(w.options.loading=ht(U,{labelStyle:{backgroundColor:st("#ffffff").setOpacity(.75).get(),padding:"1em",borderRadius:"0.5em"},style:{backgroundColor:"none",opacity:1}}),ot.clearTimeout(rt),w.showLoading("Drawing..."),w.options.loading=U),o&&console.time("canvas rendering"),tt.eachAsync(F,function(t,e){var o,i,r,s,a,n,c=!1,l=!1,h=!1,p=!1,d=void 0===w.index,u=!0;return d||(J?(o=t[0],i=t[1],F[e+1]&&(h=F[e+1][0]),F[e-1]&&(p=F[e-1][0])):(o=t,i=M[e],F[e+1]&&(h=F[e+1]),F[e-1]&&(p=F[e-1])),h&&D<=h&&h<=P&&(c=!0),p&&D<=p&&p<=P&&(l=!0),q?(J&&(i=t.slice(1,3)),n=i[0],i=i[1]):I&&(o=t.x,n=(i=t.stackY)-t.y),_||(u=A<=i&&i<=R),!(a=null===i)&&(D<=o&&o<=P&&u||c||l)&&(r=Math.round(k.toPixels(o,!0)),G?(void 0!==C&&r!==g||(q||(n=i),(void 0===x||m<i)&&(m=i,x=e),(void 0===C||n<b)&&(b=n,C=e)),r!==g&&(void 0!==C&&(s=S.toPixels(m,!0),O=S.toPixels(b,!0),v(r,H?Math.min(s,V):s,H?Math.max(O,V):O,e),f(r,s,x),O!==s&&f(r,O,C)),C=x=void 0,g=r)):(s=Math.round(S.toPixels(i,!0)),v(r,s,O,e),f(r,s,e))),y=a&&!z,e%5e4==0&&(T.boostCopy||T.chart.boostCopy)&&(T.boostCopy||T.chart.boostCopy)()),!d},function(){var t=w.loadingDiv,e=w.loadingShown;r(),T.canvasToSVG(),o&&console.timeEnd("canvas rendering"),ct(T,"renderedCanvas"),e&&(nt(t.style,{transition:"opacity 250ms",opacity:0}),w.loadingShown=!1,rt=setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t),w.loadingDiv=w.loadingSpan=null},250)),delete T.buildKDTree,T.buildKDTree()},w.renderer.forExport?Number.MAX_VALUE:void 0))}}),o.scatter.prototype.cvsMarkerCircle=function(t,e,o,i){t.moveTo(e,o),t.arc(e,o,i,0,2*Math.PI,!1)},o.scatter.prototype.cvsMarkerSquare=function(t,e,o,i){t.rect(e-i,o-i,2*i,2*i)},o.scatter.prototype.fill=!0,o.bubble&&(o.bubble.prototype.cvsMarkerCircle=function(t,e,o,i,r){t.moveTo(e,o),t.arc(e,o,this.radii&&this.radii[r],0,2*Math.PI,!1)},o.bubble.prototype.cvsStrokeBatch=1),nt(o.area.prototype,{cvsDrawPoint:function(t,e,o,i,r){r&&e!==r.clientX&&(t.moveTo(r.clientX,r.yBottom),t.lineTo(r.clientX,r.plotY),t.lineTo(e,o),t.lineTo(e,i))},fill:!0,fillOpacity:!0,sampling:!0}),nt(o.column.prototype,{cvsDrawPoint:function(t,e,o,i){t.rect(e-1,o,1,i-o)},fill:!0,sampling:!0}),t.prototype.callbacks.push(function(t){at(t,"predraw",function(){t.renderTarget&&t.renderTarget.attr({href:""}),t.canvas&&t.canvas.getContext("2d").clearRect(0,0,t.canvas.width,t.canvas.height)}),at(t,"render",function(){t.boostCopy&&t.boostCopy()})})}}),o(e,"masters/modules/boost-canvas.src.js",[],function(){})});