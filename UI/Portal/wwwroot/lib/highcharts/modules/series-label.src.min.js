!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/series-label",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,o,r){t.hasOwnProperty(e)||(t[e]=r.apply(null,o),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Extensions/SeriesLabel/SeriesLabelDefaults.js",[],function(){return{enabled:!0,connectorAllowed:!1,connectorNeighbourDistance:24,format:void 0,formatter:void 0,minFontSize:null,maxFontSize:null,onArea:null,style:{fontSize:"0.8em",fontWeight:"bold"},useHTML:!1,boxesToAvoid:[]}}),e(t,"Extensions/SeriesLabel/SeriesLabelUtilities.js",[],function(){function h(t,e,o,r,i,a){a=(a-e)*(o-t)-(r-e)*(i-t);return 0<a||!(a<0)}function l(t,e,o,r,i,a,n,s){return h(t,e,i,a,n,s)!==h(o,r,i,a,n,s)&&h(t,e,o,r,i,a)!==h(t,e,o,r,n,s)}return{boxIntersectLine:function(t,e,o,r,i,a,n,s){return l(t,e,t+o,e,i,a,n,s)||l(t+o,e,t+o,e+r,i,a,n,s)||l(t,e+r,t+o,e+r,i,a,n,s)||l(t,e,t,e+r,i,a,n,s)},intersectRect:function(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}}}),e(t,"Extensions/SeriesLabel/SeriesLabel.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Chart/Chart.js"],t["Core/Templating.js"],t["Core/Defaults.js"],t["Extensions/SeriesLabel/SeriesLabelDefaults.js"],t["Extensions/SeriesLabel/SeriesLabelUtilities.js"],t["Core/Utilities.js"]],function(t,o,e,r,i,a,s){const T=t["animObject"],C=e["format"],n=r["setOptions"],{boxIntersectLine:w,intersectRect:M}=a,{addEvent:h,extend:P,fireEvent:l,isNumber:j,pick:D,syncTimeout:c}=s,p=[],B=3;function z(t,e,o,r,i){var a=t.chart,n=t.options.label||{},s=D(n.onArea,!!t.area),h=s||n.connectorAllowed,l=a.boxesToAvoid;let c=Number.MAX_VALUE,p=Number.MAX_VALUE,u,d,f,x,b,m,g;for(m=0;l&&m<l.length;m+=1)if(M(l[m],{left:e,right:e+r.width,top:o,bottom:o+r.height}))return!1;for(m=0;m<a.series.length;m+=1){const Y=a.series[m],X=Y.interpolatedPoints&&[...Y.interpolatedPoints];if(Y.visible&&X){var y=a.plotHeight/10;for(let t=a.plotTop;t<=a.plotTop+a.plotHeight;t+=y)X.unshift({chartX:a.plotLeft,chartY:t}),X.push({chartX:a.plotLeft+a.plotWidth,chartY:t});for(g=1;g<X.length;g+=1){if(X[g].chartX>=e-16&&X[g-1].chartX<=e+r.width+16){if(w(e,o,r.width,r.height,X[g-1].chartX,X[g-1].chartY,X[g].chartX,X[g].chartY))return!1;t===Y&&!f&&i&&(f=w(e-16,o-16,r.width+32,r.height+32,X[g-1].chartX,X[g-1].chartY,X[g].chartX,X[g].chartY))}!h&&!f||t===Y&&!s||(x=e+r.width/2-X[g].chartX,b=o+r.height/2-X[g].chartY,c=Math.min(c,x*x+b*b))}if(!s&&h&&t===Y&&(i&&!f||c<Math.pow(n.connectorNeighbourDistance||1,2))){for(g=1;g<X.length;g+=1)(u=Math.min(Math.pow(e+r.width/2-X[g].chartX,2)+Math.pow(o+r.height/2-X[g].chartY,2),Math.pow(e-X[g].chartX,2)+Math.pow(o-X[g].chartY,2),Math.pow(e+r.width-X[g].chartX,2)+Math.pow(o-X[g].chartY,2),Math.pow(e+r.width-X[g].chartX,2)+Math.pow(o+r.height-X[g].chartY,2),Math.pow(e-X[g].chartX,2)+Math.pow(o+r.height-X[g].chartY,2)))<p&&(p=u,d=X[g]);f=!0}}}return!(i&&!f)&&{x:e,y:o,weight:c-(d?p:0),connectorPoint:d}}function u(E){E.boxesToAvoid=[];const t=E.labelSeries||[],a=E.boxesToAvoid;E.series.forEach(i=>(i.points||[]).forEach(t=>(t.dataLabels||[]).forEach(t=>{var{width:e,height:o}=t.getBBox(),r=(t.translateX||0)+(i.xAxis?i.xAxis.pos:i.chart.plotLeft),t=(t.translateY||0)+(i.yAxis?i.yAxis.pos:i.chart.plotTop);a.push({left:r,top:t,right:r+e,bottom:t+o})}))),t.forEach(function(t){var e=t.options.label||{};t.interpolatedPoints=function(t){if(t.xAxis||t.yAxis){const f=t.points,x=[],b=t.graph||t.area,m=b&&b.element,g=t.chart.inverted,y=t.xAxis,Y=t.yAxis,X=(g?Y:y).pos,w=(g?y:Y).pos,M=t.options.label||{},S=D(M.onArea,!!t.area),A=Y.getThreshold(t.options.threshold),L={};let e,o,r,i,a,n,s;if(t.getPointSpline&&m&&m.getPointAtLength&&!S&&f.length<(t.chart.plotSizeX||0)/16){t=b.toD&&b.attr("d");for(b.toD&&b.attr({d:b.toD}),a=m.getTotalLength(),e=0;e<a;e+=16){var h=m.getPointAtLength(e);d({chartX:X+h.x,chartY:w+h.y,plotX:h.x,plotY:h.y})}t&&b.attr({d:t});t=f[f.length-1];d({chartX:X+(t.plotX||0),chartY:w+(t.plotY||0)})}else{a=f.length;let t;for(e=0;e<a;e+=1){var l=f[e],{plotX:c,plotY:p,plotHigh:u}=l;if(j(c)&&j(p)){const v={plotX:c,plotY:p,chartX:X+c,chartY:w+p};if(S&&(u&&(v.plotY=u,v.chartY=w+u),v.chartCenterY=w+((u||p)+D(l.yBottom,A))/2),t&&(o=Math.abs(v.chartX-t.chartX),r=Math.abs(v.chartY-t.chartY),16<(i=Math.max(o,r))))for(n=Math.ceil(i/16),s=1;s<n;s+=1)d({chartX:t.chartX+(v.chartX-t.chartX)*(s/n),chartY:t.chartY+(v.chartY-t.chartY)*(s/n),chartCenterY:(t.chartCenterY||0)+((v.chartCenterY||0)-(t.chartCenterY||0))*(s/n),plotX:(t.plotX||0)+(c-(t.plotX||0))*(s/n),plotY:(t.plotY||0)+(p-(t.plotY||0))*(s/n)});d(v),t=v}}}return x;function d(t){var e=Math.round((t.plotX||0)/8)+","+Math.round((t.plotY||0)/8);L[e]||(L[e]=1,x.push(t))}}}(t),a.push(...e.boxesToAvoid||[])}),E.series.forEach(function(c){const p=c.options.label;if(p&&(c.xAxis||c.yAxis)){const x="highcharts-color-"+D(c.colorIndex,"none"),b=!c.labelBySeries,m=p.minFontSize,g=p.maxFontSize,y=E.inverted,Y=(y?c.yAxis:c.xAxis).pos,X=(y?c.xAxis:c.yAxis).pos,w=(E.inverted?c.yAxis:c.xAxis).len,M=(E.inverted?c.xAxis:c.yAxis).len,S=c.interpolatedPoints,A=D(p.onArea,!!c.area),L=[],v=c.xData||[];let t,e,o,r,i,a,n=c.labelBySeries,s,h,l;if(A&&!y&&(s=[c.xAxis.toPixels(v[0]),c.xAxis.toPixels(v[v.length-1])],h=Math.min.apply(Math,s),l=Math.max.apply(Math,s)),c.visible&&!c.boosted&&S){if(!n){let t=c.name;"string"==typeof p.format?t=C(p.format,c,E):p.formatter&&(t=p.formatter.call(c)),c.labelBySeries=n=E.renderer.label(t,0,0,"connector",0,0,p.useHTML).addClass("highcharts-series-label highcharts-series-label-"+c.index+" "+(c.options.className||"")+" "+x),E.renderer.styledMode||(u="string"==typeof c.color?c.color:"#666666",n.css(P({color:A?E.renderer.getContrast(u):u},p.style||{})),n.attr({opacity:E.renderer.forExport?1:0,stroke:c.color,"stroke-width":1})),m&&g&&n.css({fontSize:m+(c.sum||0)/(c.chart.labelSeriesMaxSum||0)*(g-m)+"px"}),n.attr({padding:0,zIndex:3}).add()}for((t=n.getBBox()).width=Math.round(t.width),i=S.length-1;0<i;--i)A?(e=S[i].chartX-t.width/2,o=(S[i].chartCenterY||0)-t.height/2,(a=d(e,o,t)?z(c,e,o,t):a)&&L.push(a)):(e=S[i].chartX+B,o=S[i].chartY-t.height-B,(a=d(e,o,t)?z(c,e,o,t,!0):a)&&L.push(a),e=S[i].chartX+B,o=S[i].chartY+B,(a=d(e,o,t)?z(c,e,o,t,!0):a)&&L.push(a),e=S[i].chartX-t.width-B,o=S[i].chartY+B,(a=d(e,o,t)?z(c,e,o,t,!0):a)&&L.push(a),e=S[i].chartX-t.width-B,o=S[i].chartY-t.height-B,(a=d(e,o,t)?z(c,e,o,t,!0):a)&&L.push(a));if(p.connectorAllowed&&!L.length&&!A)for(e=Y+w-t.width;e>=Y;e-=16)for(o=X;o<X+M-t.height;o+=16)(r=z(c,e,o,t,!0))&&L.push(r);if(L.length){L.sort((t,e)=>e.weight-t.weight),a=L[0],(E.boxesToAvoid||[]).push({left:a.x,right:a.x+t.width,top:a.y,bottom:a.y+t.height});var u=Math.sqrt(Math.pow(Math.abs(a.x-(n.x||0)),2)+Math.pow(Math.abs(a.y-(n.y||0)),2));if(u&&c.labelBySeries){let t={opacity:E.renderer.forExport?1:0,x:a.x,y:a.y},e={opacity:1};u<=10&&(e={x:t.x,y:t.y},t={});let o;b&&((o=T(c.options.animation)).duration*=.2),c.labelBySeries.attr(P(t,{anchorX:a.connectorPoint&&(a.connectorPoint.plotX||0)+Y,anchorY:a.connectorPoint&&(a.connectorPoint.plotY||0)+X})).animate(e,o),c.options.kdNow=!0,c.buildKDTree();u=c.searchPoint({chartX:a.x,chartY:a.y},!0);u&&(n.closest=[u,a.x-(u.plotX||0),a.y-(u.plotY||0)])}}else f()}else f();function d(t,e,o){var r=Math.max(Y,D(h,-1/0)),i=Math.min(Y+w,D(l,1/0));return r<t&&t<=i-o.width&&e>=X&&e<=X+M-o.height}function f(){n&&(c.labelBySeries=n.destroy())}}}),l(E,"afterDrawSeriesLabels")}function d(a){if(this.renderer){const n=this;let i=T(n.renderer.globalAnimation).duration;n.labelSeries=[],n.labelSeriesMaxSum=0,n.seriesLabelTimer&&s.clearTimeout(n.seriesLabelTimer),n.series.forEach(function(t){const e=t.options.label||{},o=t.labelBySeries,r=o&&o.closest;e.enabled&&t.visible&&(t.graph||t.area)&&!t.boosted&&n.labelSeries&&(n.labelSeries.push(t),e.minFontSize&&e.maxFontSize&&t.yData&&(t.sum=t.yData.reduce((t,e)=>(t||0)+(e||0),0),n.labelSeriesMaxSum=Math.max(n.labelSeriesMaxSum||0,t.sum||0)),"load"===a.type&&(i=Math.max(i,T(t.options.animation).duration)),r&&(void 0!==r[0].plotX?o.animate({x:r[0].plotX+r[1],y:r[0].plotY+r[2]}):o.attr({opacity:0})))}),n.seriesLabelTimer=c(function(){n.series&&n.labelSeries&&u(n)},n.renderer.forExport||!i?0:i)}}function f(t,e,o,r,i){var a=i&&i.anchorX,i=i&&i.anchorY;let n,s,h=o/2;return j(a)&&j(i)&&(n=[["M",a,i]],(s=(s=e-i)<0?-r-s:s)<o&&(h=a<t+o/2?s:o-s),e+r<i?n.push(["L",t+h,e+r]):i<e?n.push(["L",t+h,e]):a<t?n.push(["L",t,e+r/2]):t+o<a&&n.push(["L",t+o,e+r/2])),n||[]}return{compose:function(t,e){s.pushUnique(p,t)&&(h(o,"load",d),h(o,"redraw",d)),s.pushUnique(p,e)&&(e.prototype.symbols.connector=f),s.pushUnique(p,n)&&n({plotOptions:{series:{label:i}}})}}}),e(t,"masters/modules/series-label.src.js",[t["Core/Globals.js"],t["Extensions/SeriesLabel/SeriesLabel.js"]],function(t,e){e.compose(t.Chart,t.SVGRenderer)})});