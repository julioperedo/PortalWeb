!function(a){"object"==typeof module&&module.exports?module.exports=a.default=a:"function"==typeof define&&define.amd?define("highcharts/modules/datagrouping",["highcharts"],function(t){return a(t),a.Highcharts=t,a}):a("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function a(t,a,o,e){t.hasOwnProperty(a)||(t[a]=e.apply(null,o))}a(t=t?t._modules:{},"parts/DataGrouping.js",[t["parts/DateTimeAxis.js"],t["parts/Globals.js"],t["parts/Options.js"],t["parts/Point.js"],t["parts/Tooltip.js"],t["parts/Utilities.js"]],function(c,t,r,a,o,e){var i=e.addEvent,n=e.arrayMax,s=e.arrayMin,p=e.correctFloat,A=e.defined,u=e.error,d=e.extend,g=e.format,b=e.isNumber,S=e.merge,f=e.pick,l=t.Axis;e=t.Series;function h(t,a,o,e){var i=this,r=i.data,n=i.options&&i.options.data,s=[],p=[],u=[],l=t.length,h=!!a,d=[],g=i.pointArrayMap,c=g&&g.length,f=["x"].concat(g||["y"]),m=0,D=0;e="function"==typeof e?e:P[e]?P[e]:P[i.getDGApproximation&&i.getDGApproximation()||"average"],c?g.forEach(function(){d.push([])}):d.push([]);for(var y=c||1,v=0;v<=l&&!(t[v]>=o[0]);v++);for(;v<=l;v++){for(;void 0!==o[m+1]&&t[v]>=o[m+1]||v===l;){var x=o[m];i.dataGroupInfo={start:i.cropStart+D,length:d[0].length};var G=e.apply(i,d);for(i.pointClass&&!A(i.dataGroupInfo.options)&&(i.dataGroupInfo.options=S(i.pointClass.prototype.optionsToObject.call({series:i},i.options.data[i.cropStart+D])),f.forEach(function(t){delete i.dataGroupInfo.options[t]})),void 0!==G&&(s.push(x),p.push(G),u.push(i.dataGroupInfo)),D=v,x=0;x<y;x++)d[x].length=0,d[x].hasNulls=!1;if(m+=1,v===l)break}if(v===l)break;if(g)for(x=i.cropStart+v,G=r&&r[x]||i.pointClass.prototype.applyOptions.apply({series:i},[n[x]]),x=0;x<c;x++){var M=G[g[x]];b(M)?d[x].push(M):null===M&&(d[x].hasNulls=!0)}else x=h?a[v]:null,b(x)?d[0].push(x):null===x&&(d[0].hasNulls=!0)}return{groupedXData:s,groupedYData:p,groupMap:u}}var P=t.approximations={sum:function(t){var a=t.length;if(!a&&t.hasNulls)var o=null;else if(a)for(o=0;a--;)o+=t[a];return o},average:function(t){var a=t.length;return t=P.sum(t),b(t)&&a&&(t=p(t/a)),t},averages:function(){var a=[];return[].forEach.call(arguments,function(t){a.push(P.average(t))}),void 0===a[0]?void 0:a},open:function(t){return t.length?t[0]:t.hasNulls?null:void 0},high:function(t){return t.length?n(t):t.hasNulls?null:void 0},low:function(t){return t.length?s(t):t.hasNulls?null:void 0},close:function(t){return t.length?t[t.length-1]:t.hasNulls?null:void 0},ohlc:function(t,a,o,e){if(t=P.open(t),a=P.high(a),o=P.low(o),e=P.close(e),b(t)||b(a)||b(o)||b(e))return[t,a,o,e]},range:function(t,a){return t=P.low(t),a=P.high(a),b(t)||b(a)?[t,a]:null===t&&null===a?null:void 0}},m={approximations:P,groupData:h},D=e.prototype,y=D.processData,v=D.generatePoints,x={groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %b %e, %H:%M:%S.%L","%A, %b %e, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %b %e, %H:%M:%S","%A, %b %e, %H:%M:%S","-%H:%M:%S"],minute:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],hour:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],day:["%A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],week:["Week from %A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},G={line:{},spline:{},area:{},areaspline:{},arearange:{},column:{groupPixelWidth:10},columnrange:{groupPixelWidth:10},candlestick:{groupPixelWidth:10},ohlc:{groupPixelWidth:5}},M=t.defaultDataGroupingUnits=[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]];return D.getDGApproximation=function(){return this.is("arearange")?"range":this.is("ohlc")?"ohlc":this.is("column")?"sum":"average"},D.groupData=h,D.processData=function(){var t,a=this.chart,o=this.options.dataGrouping,e=!1!==this.allowDG&&o&&f(o.enabled,a.options.isStock),i=this.visible||!a.options.chart.ignoreHiddenSeries,r=this.currentDataGrouping,n=!1;if(this.forceCrop=e,this.groupPixelWidth=null,this.hasProcessed=!0,e&&!this.requireSorting&&(this.requireSorting=n=!0),e=!1===y.apply(this,arguments)||!e,n&&(this.requireSorting=!1),!e){this.destroyGroupedData(),e=o.groupAll?this.xData:this.processedXData;var s=o.groupAll?this.yData:this.processedYData,p=a.plotSizeX,u=(a=this.xAxis).options.ordinal;if(h=this.groupPixelWidth=a.getGroupPixelWidth&&a.getGroupPixelWidth()){this.isDirty=t=!0,this.points=null;var l=(n=a.getExtremes()).min,h=h*((n=n.max)-l)/p*(u=u&&a.ordinal&&a.ordinal.getGroupIntervalFactor(l,n,this)||1),p=a.getTimeTicks(c.AdditionsClass.prototype.normalizeTimeTickInterval(h,o.units||M),Math.min(l,e[0]),Math.max(n,e[e.length-1]),a.options.startOfWeek,e,this.closestPointRange),e=(s=D.groupData.apply(this,[e,s,p,o.approximation])).groupedXData;u=s.groupedYData;var d=0;if(o.smoothed&&e.length){var g=e.length-1;for(e[g]=Math.min(e[g],n);g--&&0<g;)e[g]+=h/2;e[0]=Math.max(e[0],l)}for(g=1;g<p.length;g++)p.info.segmentStarts&&-1!==p.info.segmentStarts.indexOf(g)||(d=Math.max(p[g]-p[g-1],d));(l=p.info).gapSize=d,this.closestPointRange=p.info.totalRange,this.groupMap=s.groupMap,A(e[0])&&e[0]<a.min&&i&&((!A(a.options.min)&&a.min<=a.dataMin||a.min===a.dataMin)&&(a.min=Math.min(e[0],a.min)),a.dataMin=Math.min(e[0],a.dataMin)),o.groupAll&&(e=(o=this.cropData(e,u,a.min,a.max,1)).xData,u=o.yData),this.processedXData=e,this.processedYData=u}else this.groupMap=null;this.hasGroupedData=t,this.currentDataGrouping=l,this.preventGraphAnimation=(r&&r.totalRange)!==(l&&l.totalRange)}},D.destroyGroupedData=function(){this.groupedData&&(this.groupedData.forEach(function(t,a){t&&(this.groupedData[a]=t.destroy?t.destroy():null)},this),this.groupedData.length=0)},D.generatePoints=function(){v.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null},i(a,"update",function(){if(this.dataGroup)return u(24,!1,this.series.chart),!1}),i(o,"headerFormatter",function(t){var a,o,e=this.chart,i=e.time,r=t.labelConfig,n=r.series,s=n.tooltipOptions,p=n.options.dataGrouping,u=s.xDateFormat,l=n.xAxis,h=s[(t.isFooter?"footer":"header")+"Format"];l&&"datetime"===l.options.type&&p&&b(r.key)&&(a=n.currentDataGrouping,p=p.dateTimeLabelFormats||x.dateTimeLabelFormats,a?(s=p[a.unitName],1===a.count?u=s[0]:(u=s[1],o=s[2])):!u&&p&&(u=this.getXDateFormat(r,s,l)),u=i.dateFormat(u,r.key),o&&(u+=i.dateFormat(o,r.key+a.totalRange-1)),n.chart.styledMode&&(h=this.styledModeFormat(h)),t.text=g(h,{point:d(r.point,{key:u}),series:n},e),t.preventDefault())}),i(e,"destroy",D.destroyGroupedData),i(e,"afterSetOptions",function(t){t=t.options;var a=this.type,o=this.chart.options.plotOptions,e=r.defaultOptions.plotOptions[a].dataGrouping,i=this.useCommonDataGrouping&&x;(G[a]||i)&&(e=e||S(x,G[a]),t.dataGrouping=S(i,e,o.series&&o.series.dataGrouping,o[a].dataGrouping,this.userOptions.dataGrouping))}),i(l,"afterSetScale",function(){this.series.forEach(function(t){t.hasProcessed=!1})}),l.prototype.getGroupPixelWidth=function(){for(var t,a=this.series,o=a.length,e=0,i=!1,r=o;r--;)(t=a[r].options.dataGrouping)&&(e=Math.max(e,f(t.groupPixelWidth,x.groupPixelWidth)));for(r=o;r--;)(t=a[r].options.dataGrouping)&&a[r].hasProcessed&&(o=(a[r].processedXData||a[r].data).length,a[r].groupPixelWidth||o>this.chart.plotSizeX/e||o&&t.forced)&&(i=!0);return i?e:0},l.prototype.setDataGrouping=function(a,t){var o;if(t=f(t,!0),a=a||{forced:!1,units:null},this instanceof l)for(o=this.series.length;o--;)this.series[o].update({dataGrouping:a},!1);else this.chart.options.series.forEach(function(t){t.dataGrouping=a},!1);this.ordinal&&(this.ordinal.slope=void 0),t&&this.chart.redraw()},t.dataGrouping=m}),a(t,"masters/modules/datagrouping.src.js",[t["parts/DataGrouping.js"]],function(t){return t})});