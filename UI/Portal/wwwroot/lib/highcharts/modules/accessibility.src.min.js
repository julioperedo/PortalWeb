"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/accessibility",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){var e=t?t._modules:{};function i(t,e,i,n){t.hasOwnProperty(e)||(t[e]=n.apply(null,i))}i(e,"modules/accessibility/utils/htmlUtilities.js",[e["parts/Utilities.js"],e["parts/Globals.js"]],function(t,e){var i=t.merge,n=e.win,o=n.document;function r(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}return{addClass:function(t,e){t.classList?t.classList.add(e):t.className.indexOf(e)<0&&(t.className+=e)},escapeStringForHTML:r,getElement:function(t){return o.getElementById(t)},getFakeMouseEvent:function(t){if("function"==typeof n.MouseEvent)return new n.MouseEvent(t);if(o.createEvent){var e=o.createEvent("MouseEvent");if(e.initMouseEvent)return e.initMouseEvent(t,!0,!0,n,"click"===t?1:0,0,0,0,0,!1,!1,!1,!1,0,null),e}return{type:t}},removeElement:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},reverseChildNodes:function(t){for(var e=t.childNodes.length;e--;)t.appendChild(t.childNodes[e])},setElAttrs:function(n,o){Object.keys(o).forEach(function(t){var e,i=o[t];null===i?n.removeAttribute(t):(e=r(""+i),n.setAttribute(t,e))})},stripHTMLTagsFromString:function(t){return"string"==typeof t?t.replace(/<\/?[^>]+(>|$)/g,""):t},visuallyHideElement:function(t){i(!0,t.style,{position:"absolute",width:"1px",height:"1px",overflow:"hidden",whiteSpace:"nowrap",clip:"rect(1px, 1px, 1px, 1px)",marginTop:"-3px","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)",filter:"alpha(opacity=1)",opacity:"0.01"})}}}),i(e,"modules/accessibility/utils/chartUtilities.js",[e["modules/accessibility/utils/htmlUtilities.js"],e["parts/Utilities.js"]],function(t,e){var i=t.stripHTMLTagsFromString,a=e.defined,r=e.find,l=e.fireEvent;function n(t){if(t.points&&t.points.length&&t.points[0].graphic)return t.points[0].graphic.element}function o(t){var e=n(t);return e&&e.parentNode||t.graph&&t.graph.element||t.group&&t.group.element}return{getChartTitle:function(t){return i(t.options.title.text||t.langFormat("accessibility.defaultChartTitle",{chart:t}))},getAxisDescription:function(t){return i(t&&(t.userOptions&&t.userOptions.accessibility&&t.userOptions.accessibility.description||t.axisTitle&&t.axisTitle.textStr||t.options.id||t.categories&&"categories"||t.dateTime&&"Time"||"values"))},getPointFromXY:function(t,e,i){for(var n,o=t.length;o--;)if(n=r(t[o].points||[],function(t){return t.x===e&&t.y===i}))return n},getSeriesFirstPointElement:n,getSeriesFromName:function(t,e){return e?(t.series||[]).filter(function(t){return t.name===e}):t.series},getSeriesA11yElement:o,unhideChartElementFromAT:function t(e,i){i.setAttribute("aria-hidden",!1),i!==e.renderTo&&i.parentNode&&(Array.prototype.forEach.call(i.parentNode.childNodes,function(t){t.hasAttribute("aria-hidden")||t.setAttribute("aria-hidden",!0)}),t(e,i.parentNode))},hideSeriesFromAT:function(t){var e=o(t);e&&e.setAttribute("aria-hidden",!0)},scrollToPoint:function(t){var e,i,n=t.series.xAxis,o=t.series.yAxis,r=null!=n&&n.scrollbar?n:o,s=null==r?void 0:r.scrollbar;s&&a(s.to)&&a(s.from)&&(e=s.to-s.from,i=function(t,e){if(!a(t.dataMin)||!a(t.dataMax))return 0;var i=t.toPixels(t.dataMin),n=t.toPixels(t.dataMax),o="xAxis"===t.coll?"x":"y";return(t.toPixels(e[o]||0)-i)/(n-i)}(r,t),s.updatePosition(i-e/2,i+e/2),l(s,"changed",{from:s.from,to:s.to,trigger:"scrollbar",DOMEvent:null}))}}}),i(e,"modules/accessibility/KeyboardNavigationHandler.js",[e["parts/Utilities.js"]],function(t){var o=t.find;function e(t,e){this.chart=t,this.keyCodeMap=e.keyCodeMap||[],this.validate=e.validate,this.init=e.init,this.terminate=e.terminate,this.response={success:1,prev:2,next:3,noHandler:4,fail:5}}return e.prototype={run:function(t){var e=t.which||t.keyCode,i=this.response.noHandler,n=o(this.keyCodeMap,function(t){return-1<t[0].indexOf(e)});return n?i=n[1].call(this,e,t):9===e&&(i=this.response[t.shiftKey?"prev":"next"]),i}},e}),i(e,"modules/accessibility/utils/EventProvider.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(e,t){function i(){this.eventRemovers=[]}var n=t.addEvent;return(0,t.extend)(i.prototype,{addEvent:function(){var t=n.apply(e,arguments);return this.eventRemovers.push(t),t},removeAddedEvents:function(){this.eventRemovers.forEach(function(t){t()}),this.eventRemovers=[]}}),i}),i(e,"modules/accessibility/utils/DOMElementProvider.js",[e["parts/Globals.js"],e["parts/Utilities.js"],e["modules/accessibility/utils/htmlUtilities.js"]],function(t,e,i){function n(){this.elements=[]}var o=t.win.document,r=e.extend,s=i.removeElement;return r(n.prototype,{createElement:function(){var t=o.createElement.apply(o,arguments);return this.elements.push(t),t},destroyCreatedElements:function(){this.elements.forEach(function(t){s(t)}),this.elements=[]}}),n}),i(e,"modules/accessibility/AccessibilityComponent.js",[e["parts/Globals.js"],e["parts/Utilities.js"],e["modules/accessibility/utils/htmlUtilities.js"],e["modules/accessibility/utils/chartUtilities.js"],e["modules/accessibility/utils/EventProvider.js"],e["modules/accessibility/utils/DOMElementProvider.js"]],function(t,e,i,n,o,r){var s=t.win,a=s.document,l=e.extend,c=e.fireEvent,u=e.merge,h=i.removeElement,d=i.getFakeMouseEvent,p=n.unhideChartElementFromAT;function m(){}return l(m.prototype={initBase:function(t){this.chart=t,this.eventProvider=new o,this.domElementProvider=new r,this.keyCodes={left:37,right:39,up:38,down:40,enter:13,space:32,esc:27,tab:9}},addEvent:function(){return this.eventProvider.addEvent.apply(this.eventProvider,arguments)},createElement:function(){return this.domElementProvider.createElement.apply(this.domElementProvider,arguments)},fireEventOnWrappedOrUnwrappedElement:function(t,e){var i=e.type;a.createEvent&&(t.dispatchEvent||t.fireEvent)?t.dispatchEvent?t.dispatchEvent(e):t.fireEvent(i,e):c(t,i,e)},fakeClickEvent:function(t){var e;t&&(e=d("click"),this.fireEventOnWrappedOrUnwrappedElement(t,e))},addProxyGroup:function(e){this.createOrUpdateProxyContainer();var i=this.createElement("div");return Object.keys(e||{}).forEach(function(t){null!==e[t]&&i.setAttribute(t,e[t])}),this.chart.a11yProxyContainer.appendChild(i),i},createOrUpdateProxyContainer:function(){var t=this.chart,e=t.renderer.box;t.a11yProxyContainer=t.a11yProxyContainer||this.createProxyContainerElement(),e.nextSibling!==t.a11yProxyContainer&&t.container.insertBefore(t.a11yProxyContainer,e.nextSibling)},createProxyContainerElement:function(){var t=a.createElement("div");return t.className="highcharts-a11y-proxy-container",t},createProxyButton:function(t,e,i,n,o){var r=t.element,s=this.createElement("button"),a=u({"aria-label":r.getAttribute("aria-label")},i);return Object.keys(a).forEach(function(t){null!==a[t]&&s.setAttribute(t,a[t])}),s.className="highcharts-a11y-proxy-button",o&&this.addEvent(s,"click",o),this.setProxyButtonStyle(s),this.updateProxyButtonPosition(s,n||t),this.proxyMouseEventsForButton(r,s),e.appendChild(s),a["aria-hidden"]||p(this.chart,s),s},getElementPosition:function(t){var e=t.element,i=this.chart.renderTo;if(i&&e&&e.getBoundingClientRect){var n=e.getBoundingClientRect(),o=i.getBoundingClientRect();return{x:n.left-o.left,y:n.top-o.top,width:n.right-n.left,height:n.bottom-n.top}}return{x:0,y:0,width:1,height:1}},setProxyButtonStyle:function(t){u(!0,t.style,{"border-width":0,"background-color":"transparent",cursor:"pointer",outline:"none",opacity:.001,filter:"alpha(opacity=1)","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)",zIndex:999,overflow:"hidden",padding:0,margin:0,display:"block",position:"absolute"})},updateProxyButtonPosition:function(t,e){var i=this.getElementPosition(e);u(!0,t.style,{width:(i.width||1)+"px",height:(i.height||1)+"px",left:(i.x||0)+"px",top:(i.y||0)+"px"})},proxyMouseEventsForButton:function(n,e){var o=this;["click","touchstart","touchend","touchcancel","touchmove","mouseover","mouseenter","mouseleave","mouseout"].forEach(function(t){var i=0===t.indexOf("touch");o.addEvent(e,t,function(t){var e=i?o.cloneTouchEvent(t):o.cloneMouseEvent(t);n&&o.fireEventOnWrappedOrUnwrappedElement(n,e),t.stopPropagation(),t.preventDefault()})})},cloneMouseEvent:function(t){if("function"==typeof s.MouseEvent)return new s.MouseEvent(t.type,t);if(a.createEvent){var e=a.createEvent("MouseEvent");if(e.initMouseEvent)return e.initMouseEvent(t.type,t.bubbles,t.cancelable,t.view||s,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),e}return d(t.type)},cloneTouchEvent:function(t){function e(t){for(var e=[],i=0;i<t.length;++i){var n=t.item(i);n&&e.push(n)}return e}if("function"==typeof s.TouchEvent){var i=new s.TouchEvent(t.type,{touches:e(t.touches),targetTouches:e(t.targetTouches),changedTouches:e(t.changedTouches),ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,bubbles:t.bubbles,cancelable:t.cancelable,composed:t.composed,detail:t.detail,view:t.view});return t.defaultPrevented&&i.preventDefault(),i}var n=this.cloneMouseEvent(t);return n.touches=t.touches,n.changedTouches=t.changedTouches,n.targetTouches=t.targetTouches,n},destroyBase:function(){h(this.chart.a11yProxyContainer),this.domElementProvider.destroyCreatedElements(),this.eventProvider.removeAddedEvents()}},{init:function(){},getKeyboardNavigation:function(){},onChartUpdate:function(){},onChartRender:function(){},destroy:function(){}}),m}),i(e,"modules/accessibility/KeyboardNavigation.js",[e["parts/Globals.js"],e["parts/Utilities.js"],e["modules/accessibility/utils/htmlUtilities.js"],e["modules/accessibility/utils/EventProvider.js"]],function(e,t,i,o){var r=e.doc,s=e.win,n=t.addEvent,a=t.fireEvent,l=i.getElement;function c(t,e){this.init(t,e)}return n(r,"keydown",function(t){27===(t.which||t.keyCode)&&e.charts&&e.charts.forEach(function(t){t&&t.dismissPopupContent&&t.dismissPopupContent()})}),e.Chart.prototype.dismissPopupContent=function(){var t=this;a(this,"dismissPopupContent",{},function(){t.tooltip&&t.tooltip.hide(0),t.hideExportMenu()})},c.prototype={init:function(t,e){var i=this,n=this.eventProvider=new o;this.chart=t,this.components=e,this.modules=[],this.currentModuleIx=0,this.update(),n.addEvent(t.renderTo,"keydown",function(t){return i.onKeydown(t)}),n.addEvent(this.tabindexContainer,"focus",function(t){return i.onFocus(t)}),n.addEvent(r,"mouseup",function(){return i.onMouseUp()}),n.addEvent(t.renderTo,"mousedown",function(){i.isClickingChart=!0}),n.addEvent(t.renderTo,"mouseover",function(){i.pointerIsOverChart=!0}),n.addEvent(t.renderTo,"mouseout",function(){i.pointerIsOverChart=!1}),this.modules.length&&this.modules[0].init(1)},update:function(t){var e=this.chart.options.accessibility,i=e&&e.keyboardNavigation,n=this.components;this.updateContainerTabindex(),i&&i.enabled&&t&&t.length?(this.modules=t.reduce(function(t,e){var i=n[e].getKeyboardNavigation();return t.concat(i)},[]),this.updateExitAnchor()):(this.modules=[],this.currentModuleIx=0,this.removeExitAnchor())},onFocus:function(t){var e,i=this.chart,n=t.relatedTarget&&i.container.contains(t.relatedTarget);this.isClickingChart||n||null!==(e=this.modules[0])&&void 0!==e&&e.init(1)},onMouseUp:function(){var t,e;delete this.isClickingChart,this.keyboardReset||this.pointerIsOverChart||(t=this.chart,(e=this.modules&&this.modules[this.currentModuleIx||0])&&e.terminate&&e.terminate(),t.focusElement&&t.focusElement.removeFocusBorder(),this.currentModuleIx=0,this.keyboardReset=!0)},onKeydown:function(t){var e,i,n=t||s.event,o=this.modules&&this.modules.length&&this.modules[this.currentModuleIx];this.keyboardReset=!1,o&&((i=o.run(n))===o.response.success?e=!0:i===o.response.prev?e=this.prev():i===o.response.next&&(e=this.next()),e&&(n.preventDefault(),n.stopPropagation()))},prev:function(){return this.move(-1)},next:function(){return this.move(1)},move:function(t){var e=this.modules&&this.modules[this.currentModuleIx];e&&e.terminate&&e.terminate(t),this.chart.focusElement&&this.chart.focusElement.removeFocusBorder(),this.currentModuleIx+=t;var i=this.modules&&this.modules[this.currentModuleIx];if(i){if(i.validate&&!i.validate())return this.move(t);if(i.init)return i.init(t),!0}return(this.currentModuleIx=0)<t?(this.exiting=!0,this.exitAnchor.focus()):this.tabindexContainer.focus(),!1},updateExitAnchor:function(){var t="highcharts-end-of-chart-marker-"+this.chart.index,e=l(t);this.removeExitAnchor(),e?(this.makeElementAnExitAnchor(e),this.exitAnchor=e):this.createExitAnchor()},updateContainerTabindex:function(){var t=this.chart.options.accessibility,e=t&&t.keyboardNavigation,i=!(e&&!1===e.enabled),n=this.chart,o=n.container,r=n.renderTo.hasAttribute("tabindex")?(o.removeAttribute("tabindex"),n.renderTo):o,s=(this.tabindexContainer=r).getAttribute("tabindex");i&&!s?r.setAttribute("tabindex","0"):i||n.container.removeAttribute("tabindex")},makeElementAnExitAnchor:function(t){var e=this.tabindexContainer.getAttribute("tabindex")||0;t.setAttribute("class","highcharts-exit-anchor"),t.setAttribute("tabindex",e),t.setAttribute("aria-hidden",!1),this.addExitAnchorEventsToEl(t)},createExitAnchor:function(){var t=this.chart,e=this.exitAnchor=r.createElement("div");t.renderTo.appendChild(e),this.makeElementAnExitAnchor(e)},removeExitAnchor:function(){this.exitAnchor&&this.exitAnchor.parentNode&&(this.exitAnchor.parentNode.removeChild(this.exitAnchor),delete this.exitAnchor)},addExitAnchorEventsToEl:function(t){var n=this.chart,o=this;this.eventProvider.addEvent(t,"focus",function(t){var e,i=t||s.event;!(i.relatedTarget&&n.container.contains(i.relatedTarget)||o.exiting)?(n.renderTo.focus(),i.preventDefault(),o.modules&&o.modules.length&&(o.currentModuleIx=o.modules.length-1,(e=o.modules[o.currentModuleIx])&&e.validate&&!e.validate()?o.prev():e&&e.init(-1))):o.exiting=!1})},destroy:function(){this.removeExitAnchor(),this.eventProvider.removeAddedEvents(),this.chart.container.removeAttribute("tabindex")}},c}),i(e,"modules/accessibility/components/LegendComponent.js",[e["parts/Globals.js"],e["parts/Legend.js"],e["parts/Utilities.js"],e["modules/accessibility/AccessibilityComponent.js"],e["modules/accessibility/KeyboardNavigationHandler.js"],e["modules/accessibility/utils/htmlUtilities.js"]],function(t,i,e,n,o,r){var s=e.addEvent,a=e.extend,l=e.find,c=e.fireEvent,u=r.stripHTMLTagsFromString,h=r.removeElement;function d(t){var e=t.legend&&t.legend.allItems,i=t.options.legend.accessibility||{};return e&&e.length&&(!t.colorAxis||!t.colorAxis.length)&&!1!==i.enabled}t.Chart.prototype.highlightLegendItem=function(t){var e,i,n,o,r=this.legend.allItems,s=this.highlightedLegendItemIx;return!!r[t]&&(r[s]&&c(r[s].legendGroup.element,"mouseout"),e=this.legend,i=t,n=e.allItems[i].pageIx,o=e.currentPage,void 0!==n&&n+1!==o&&e.scroll(1+n-o),this.setFocusToElement(r[t].legendItem,r[t].a11yProxyElement),c(r[t].legendGroup.element,"mouseover"),!0)},s(i,"afterColorizeItem",function(t){var e=this.chart.options.accessibility,i=t.item;e.enabled&&i&&i.a11yProxyElement&&i.a11yProxyElement.setAttribute("aria-pressed",t.visible?"false":"true")});function p(){}return a(p.prototype=new n,{init:function(){var e=this;this.proxyElementsList=[],this.recreateProxies(),this.addEvent(i,"afterScroll",function(){this.chart===e.chart&&(e.updateProxiesPositions(),e.updateLegendItemProxyVisibility(),this.chart.highlightLegendItem(e.highlightedLegendItemIx))}),this.addEvent(i,"afterPositionItem",function(t){this.chart===e.chart&&this.chart.renderer&&e.updateProxyPositionForItem(t.item)})},updateLegendItemProxyVisibility:function(){var n=this.chart.legend,t=n.allItems||[],o=n.currentPage||1,r=n.clipHeight||0;t.forEach(function(t){var e=t.pageIx||0,i=(t._legendItemPos?t._legendItemPos[1]:0)+(t.legendItem?Math.round(t.legendItem.getBBox().height):0)-n.pages[e]>r||e!==o-1;t.a11yProxyElement&&(t.a11yProxyElement.style.visibility=i?"hidden":"visible")})},onChartRender:function(){d(this.chart)?this.updateProxiesPositions():this.removeProxies()},updateProxiesPositions:function(){for(var t=0,e=this.proxyElementsList;t<e.length;t++){var i=e[t],n=i.element,o=i.posElement;this.updateProxyButtonPosition(n,o)}},updateProxyPositionForItem:function(e){var t=l(this.proxyElementsList,function(t){return t.item===e});t&&this.updateProxyButtonPosition(t.element,t.posElement)},recreateProxies:function(){this.removeProxies(),d(this.chart)&&(this.addLegendProxyGroup(),this.proxyLegendItems(),this.updateLegendItemProxyVisibility())},removeProxies:function(){h(this.legendProxyGroup),this.proxyElementsList=[]},addLegendProxyGroup:function(){var t=this.chart.options.accessibility,e=this.chart.langFormat("accessibility.legend.legendLabel",{}),i="all"===t.landmarkVerbosity?"region":null;this.legendProxyGroup=this.addProxyGroup({"aria-label":e,role:i})},proxyLegendItems:function(){var e=this;(this.chart.legend&&this.chart.legend.allItems||[]).forEach(function(t){t.legendItem&&t.legendItem.element&&e.proxyLegendItem(t)})},proxyLegendItem:function(t){var e,i,n;t.legendItem&&t.legendGroup&&(e=this.chart.langFormat("accessibility.legend.legendItem",{chart:this.chart,itemName:u(t.name)}),i={tabindex:-1,"aria-pressed":!t.visible,"aria-label":e},n=t.legendGroup.div?t.legendItem:t.legendGroup,t.a11yProxyElement=this.createProxyButton(t.legendItem,this.legendProxyGroup,i,n),this.proxyElementsList.push({item:t,element:t.a11yProxyElement,posElement:n}))},getKeyboardNavigation:function(){var t=this.keyCodes,e=this,i=this.chart;return new o(i,{keyCodeMap:[[[t.left,t.right,t.up,t.down],function(t){return e.onKbdArrowKey(this,t)}],[[t.enter,t.space],function(){return e.onKbdClick(this)}]],validate:function(){return e.shouldHaveLegendNavigation()},init:function(t){return e.onKbdNavigationInit(t)}})},onKbdArrowKey:function(t,e){var i=this.keyCodes,n=t.response,o=this.chart,r=o.options.accessibility,s=o.legend.allItems.length,a=e===i.left||e===i.up?-1:1;return o.highlightLegendItem(this.highlightedLegendItemIx+a)?(this.highlightedLegendItemIx+=a,n.success):1<s&&r.keyboardNavigation.wrapAround?(t.init(a),n.success):n[0<a?"next":"prev"]},onKbdClick:function(t){var e=this.chart.legend.allItems[this.highlightedLegendItemIx];return e&&e.a11yProxyElement&&c(e.a11yProxyElement,"click"),t.response.success},shouldHaveLegendNavigation:function(){var t=this.chart,e=t.options.legend||{},i=t.legend&&t.legend.allItems,n=t.colorAxis&&t.colorAxis.length,o=e.accessibility||{};return!!(i&&t.legend.display&&!n&&o.enabled&&o.keyboardNavigation&&o.keyboardNavigation.enabled)},onKbdNavigationInit:function(t){var e=this.chart,i=e.legend.allItems.length-1,n=0<t?0:i;e.highlightLegendItem(n),this.highlightedLegendItemIx=n}}),p}),i(e,"modules/accessibility/components/MenuComponent.js",[e["parts/Globals.js"],e["parts/Utilities.js"],e["modules/accessibility/AccessibilityComponent.js"],e["modules/accessibility/KeyboardNavigationHandler.js"],e["modules/accessibility/utils/chartUtilities.js"],e["modules/accessibility/utils/htmlUtilities.js"]],function(t,e,i,o,n,r){var s=e.extend,a=n.unhideChartElementFromAT,l=r.removeElement,c=r.getFakeMouseEvent;function u(t){return t.exportSVGElements&&t.exportSVGElements[0]}t.Chart.prototype.showExportMenu=function(){var t,e=u(this);!e||(t=e.element).onclick&&t.onclick(c("click"))},t.Chart.prototype.hideExportMenu=function(){var t=this,e=t.exportDivElements;e&&t.exportContextMenu&&(e.forEach(function(t){"highcharts-menu-item"===t.className&&t.onmouseout&&t.onmouseout(c("mouseout"))}),t.highlightedExportItemIx=0,t.exportContextMenu.hideMenu(),t.container.focus())},t.Chart.prototype.highlightExportItem=function(t){var e,i=this.exportDivElements&&this.exportDivElements[t],n=this.exportDivElements&&this.exportDivElements[this.highlightedExportItemIx];return!(!i||"LI"!==i.tagName||i.children&&i.children.length)&&(e=!!(this.renderTo.getElementsByTagName("g")[0]||{}).focus,i.focus&&e&&i.focus(),n&&n.onmouseout&&n.onmouseout(c("mouseout")),i.onmouseover&&i.onmouseover(c("mouseover")),this.highlightedExportItemIx=t,!0)},t.Chart.prototype.highlightLastExportItem=function(){var t;if(this.exportDivElements)for(t=this.exportDivElements.length;t--;)if(this.highlightExportItem(t))return!0;return!1};function h(){}return s(h.prototype=new i,{init:function(){var t=this.chart,e=this;this.addEvent(t,"exportMenuShown",function(){e.onMenuShown()}),this.addEvent(t,"exportMenuHidden",function(){e.onMenuHidden()})},onMenuHidden:function(){var t=this.chart.exportContextMenu;t&&t.setAttribute("aria-hidden","true"),this.isExportMenuShown=!1,this.setExportButtonExpandedState("false")},onMenuShown:function(){var t=this.chart,e=t.exportContextMenu;e&&(this.addAccessibleContextMenuAttribs(),a(t,e)),this.isExportMenuShown=!0,this.setExportButtonExpandedState("true")},setExportButtonExpandedState:function(t){var e=this.exportButtonProxy;e&&e.setAttribute("aria-expanded",t)},onChartRender:function(){var t,e,i,n,o=this.chart,r=o.options.accessibility;l(this.exportProxyGroup),i=(e=o).options.exporting,n=u(e),i&&!1!==i.enabled&&i.accessibility&&i.accessibility.enabled&&n&&n.element&&(this.exportProxyGroup=this.addProxyGroup("all"===r.landmarkVerbosity?{"aria-label":o.langFormat("accessibility.exporting.exportRegionLabel",{chart:o}),role:"region"}:{}),t=u(this.chart),this.exportButtonProxy=this.createProxyButton(t,this.exportProxyGroup,{"aria-label":o.langFormat("accessibility.exporting.menuButtonLabel",{chart:o}),"aria-expanded":"false"}))},addAccessibleContextMenuAttribs:function(){var t,e=this.chart,i=e.exportDivElements;i&&i.length&&(i.forEach(function(t){"LI"!==t.tagName||t.children&&t.children.length?t.setAttribute("aria-hidden","true"):t.setAttribute("tabindex",-1)}),(t=i[0].parentNode).removeAttribute("aria-hidden"),t.setAttribute("aria-label",e.langFormat("accessibility.exporting.chartMenuLabel",{chart:e})))},getKeyboardNavigation:function(){var t=this.keyCodes,i=this.chart,n=this;return new o(i,{keyCodeMap:[[[t.left,t.up],function(){return n.onKbdPrevious(this)}],[[t.right,t.down],function(){return n.onKbdNext(this)}],[[t.enter,t.space],function(){return n.onKbdClick(this)}]],validate:function(){return i.exportChart&&!1!==i.options.exporting.enabled&&!1!==i.options.exporting.accessibility.enabled},init:function(){var t=n.exportButtonProxy,e=i.exportingGroup;e&&t&&i.setFocusToElement(e,t)},terminate:function(){i.hideExportMenu()}})},onKbdPrevious:function(t){for(var e=this.chart,i=e.options.accessibility,n=t.response,o=e.highlightedExportItemIx||0;o--;)if(e.highlightExportItem(o))return n.success;return i.keyboardNavigation.wrapAround?(e.highlightLastExportItem(),n.success):n.prev},onKbdNext:function(t){for(var e=this.chart,i=e.options.accessibility,n=t.response,o=(e.highlightedExportItemIx||0)+1;o<e.exportDivElements.length;++o)if(e.highlightExportItem(o))return n.success;return i.keyboardNavigation.wrapAround?(e.highlightExportItem(0),n.success):n.next},onKbdClick:function(t){var e=this.chart,i=e.exportDivElements[e.highlightedExportItemIx],n=u(e).element;return this.isExportMenuShown?this.fakeClickEvent(i):(this.fakeClickEvent(n),e.highlightExportItem(0)),t.response.success}}),h}),i(e,"modules/accessibility/components/SeriesComponent/SeriesKeyboardNavigation.js",[e["parts/Chart.js"],e["parts/Globals.js"],e["parts/Point.js"],e["parts/Utilities.js"],e["modules/accessibility/KeyboardNavigationHandler.js"],e["modules/accessibility/utils/EventProvider.js"],e["modules/accessibility/utils/chartUtilities.js"]],function(t,i,e,n,o,r,s){var u=n.defined,a=n.extend,l=s.getPointFromXY,c=s.getSeriesFromName,h=s.scrollToPoint;function d(t){var e=t.index,i=t.series.points,n=i.length;if(i[e]===t)return e;for(;n--;)if(i[n]===t)return n}function p(t){var e=t.chart.options.accessibility.keyboardNavigation.seriesNavigation,i=t.options.accessibility||{},n=i.keyboardNavigation;return n&&!1===n.enabled||!1===i.enabled||!1===t.options.enableMouseTracking||!t.visible||e.pointNavigationEnabledThreshold&&e.pointNavigationEnabledThreshold<=t.points.length}function m(t){var e=t.series.chart.options.accessibility;return t.isNull&&e.keyboardNavigation.seriesNavigation.skipNullPoints||!1===t.visible||p(t.series)}function g(t,e,i,n){function o(t){return!(u(t.plotX)&&u(t.plotY))}var r,s,a,l=1/0,c=e.points.length;if(!o(t)){for(;c--;)o(r=e.points[c])||(a=(t.plotX-r.plotX)*(t.plotX-r.plotX)*(i||1)+(t.plotY-r.plotY)*(t.plotY-r.plotY)*(n||1))<l&&(l=a,s=c);return u(s)?e.points[s]:void 0}}function b(t){return delete t.highlightedPoint,t.series.reduce(function(t,e){return t||e.highlightFirstValidPoint()},!1)}function f(t,e){this.keyCodes=e,this.chart=t}return i.Series.prototype.keyboardMoveVertical=!0,["column","pie"].forEach(function(t){i.seriesTypes[t]&&(i.seriesTypes[t].prototype.keyboardMoveVertical=!1)}),e.prototype.highlight=function(){var t=this.series.chart;return this.isNull?t.tooltip&&t.tooltip.hide(0):this.onMouseOver(),h(this),this.graphic&&t.setFocusToElement(this.graphic),t.highlightedPoint=this},t.prototype.highlightAdjacentPoint=function(t){var e,i,n=this,o=n.series,r=n.highlightedPoint,s=r&&d(r)||0,a=r&&r.series.points,l=n.series&&n.series[n.series.length-1],c=l&&l.points&&l.points[l.points.length-1];if(!o[0]||!o[0].points)return!1;if(r){if(e=o[r.series.index+(t?1:-1)],!(i=a[s+(t?1:-1)])&&e&&(i=e.points[t?0:e.points.length-1]),!i)return!1}else i=t?o[0].points[0]:c;return m(i)?(p(e=i.series)?n.highlightedPoint=t?e.points[e.points.length-1]:e.points[0]:n.highlightedPoint=i,n.highlightAdjacentPoint(t)):i.highlight()},i.Series.prototype.highlightFirstValidPoint=function(){var t=this.chart.highlightedPoint,e=(t&&t.series)===this?d(t):0,i=this.points,n=i.length;if(i&&n){for(var o=e;o<n;++o)if(!m(i[o]))return i[o].highlight();for(var r=e;0<=r;--r)if(!m(i[r]))return i[r].highlight()}return!1},t.prototype.highlightAdjacentSeries=function(t){var e,i,n=this,o=n.highlightedPoint,r=n.series&&n.series[n.series.length-1],s=r&&r.points&&r.points[r.points.length-1];return n.highlightedPoint?!!(e=n.series[o.series.index+(t?-1:1)])&&(!!(i=g(o,e,4))&&(p(e)?(i.highlight(),n.highlightAdjacentSeries(t)||(o.highlight(),!1)):(i.highlight(),i.series.highlightFirstValidPoint()))):(e=t?n.series&&n.series[0]:r,!!(i=t?e&&e.points&&e.points[0]:s)&&i.highlight())},t.prototype.highlightAdjacentPointVertical=function(r){var s,a=this.highlightedPoint,l=1/0;return!(!u(a.plotX)||!u(a.plotY))&&(this.series.forEach(function(o){p(o)||o.points.forEach(function(t){var e,i,n;u(t.plotY)&&u(t.plotX)&&t!==a&&(e=t.plotY-a.plotY,i=Math.abs(t.plotX-a.plotX),n=Math.abs(e)*Math.abs(e)+i*i*4,o.yAxis&&o.yAxis.reversed&&(e*=-1),e<=0&&r||0<=e&&!r||n<5||m(t)||n<l&&(l=n,s=t))})}),!!s&&s.highlight())},a(f.prototype,{init:function(){var n=this,t=this.chart,e=this.eventProvider=new r;e.addEvent(i.Series,"destroy",function(){return n.onSeriesDestroy(this)}),e.addEvent(t,"afterDrilldown",function(){var t;b(t=this),t.focusElement&&t.focusElement.removeFocusBorder()}),e.addEvent(t,"drilldown",function(t){var e=t.point,i=e.series;n.lastDrilledDownPoint={x:e.x,y:e.y,seriesName:i?i.name:""}}),e.addEvent(t,"drillupall",function(){setTimeout(function(){n.onDrillupAll()},10)})},onDrillupAll:function(){var t,e=this.lastDrilledDownPoint,i=this.chart,n=e&&c(i,e.seriesName);e&&n&&u(e.x)&&u(e.y)&&(t=l(n,e.x,e.y)),i.container&&i.container.focus(),t&&t.highlight&&t.highlight(),i.focusElement&&i.focusElement.removeFocusBorder()},getKeyboardNavigationHandler:function(){var e=this,t=this.keyCodes,i=this.chart,n=i.inverted;return new o(i,{keyCodeMap:[[n?[t.up,t.down]:[t.left,t.right],function(t){return e.onKbdSideways(this,t)}],[n?[t.left,t.right]:[t.up,t.down],function(t){return e.onKbdVertical(this,t)}],[[t.enter,t.space],function(){return i.highlightedPoint&&i.highlightedPoint.firePointEvent("click"),this.response.success}]],init:function(t){return e.onHandlerInit(this,t)},terminate:function(){return e.onHandlerTerminate()}})},onKbdSideways:function(t,e){var i=this.keyCodes,n=e===i.right||e===i.down;return this.attemptHighlightAdjacentPoint(t,n)},onKbdVertical:function(t,e){var i=this.chart,n=this.keyCodes,o=e===n.down||e===n.right,r=i.options.accessibility.keyboardNavigation.seriesNavigation;return r.mode&&"serialize"===r.mode?this.attemptHighlightAdjacentPoint(t,o):(i[i.highlightedPoint&&i.highlightedPoint.series.keyboardMoveVertical?"highlightAdjacentPointVertical":"highlightAdjacentSeries"](o),t.response.success)},onHandlerInit:function(t,e){var i=this.chart;return(0<e?b:function(t){for(var e=t.series.length,i=!1;e--&&(t.highlightedPoint=t.series[e].points[t.series[e].points.length-1],!(i=t.series[e].highlightFirstValidPoint())););})(i),t.response.success},onHandlerTerminate:function(){var t,e,i=this.chart,n=i.highlightedPoint;null!==(t=i.tooltip)&&void 0!==t&&t.hide(0),null!==(e=null==n?void 0:n.onMouseOut)&&void 0!==e&&e.call(n),delete i.highlightedPoint},attemptHighlightAdjacentPoint:function(t,e){var i=this.chart,n=i.options.accessibility.keyboardNavigation.wrapAround;return i.highlightAdjacentPoint(e)?t.response.success:n?t.init(e?1:-1):t.response[e?"next":"prev"]},onSeriesDestroy:function(t){var e=this.chart;e.highlightedPoint&&e.highlightedPoint.series===t&&(delete e.highlightedPoint,e.focusElement&&e.focusElement.removeFocusBorder())},destroy:function(){this.eventProvider.removeAddedEvents()}}),f}),i(e,"modules/accessibility/components/AnnotationsA11y.js",[e["parts/Utilities.js"],e["modules/accessibility/utils/htmlUtilities.js"]],function(t,e){var i=t.inArray,n=e.escapeStringForHTML,o=e.stripHTMLTagsFromString;function r(t){return(t.annotations||[]).reduce(function(t,e){var i;return!1!==(null===(i=e.options)||void 0===i?void 0:i.visible)&&(t=t.concat(e.labels)),t},[])}function h(t){var e,i,n,o,r=null===(i=null===(e=t.options)||void 0===e?void 0:e.accessibility)||void 0===i?void 0:i.description;return r||((null===(o=null===(n=t.graphic)||void 0===n?void 0:n.text)||void 0===o?void 0:o.textStr)||"")}function s(t){var e,i,n=null===(i=null===(e=t.options)||void 0===e?void 0:e.accessibility)||void 0===i?void 0:i.description;if(n)return n;var o=t.chart,r=h(t),s=t.points,a=s.filter(function(t){return!!t.graphic}).map(function(t){var e,i,n,o,r=(null===(e=null==t?void 0:t.accessibility)||void 0===e?void 0:e.valueDescription)||((null===(o=null===(n=null==(i=t)?void 0:i.graphic)||void 0===n?void 0:n.element)||void 0===o?void 0:o.getAttribute("aria-label"))||""),s=(null==t?void 0:t.series.name)||"";return(s?s+", ":"")+"data point "+r}).filter(function(t){return!!t}),l=a.length,c="accessibility.screenReaderSection.annotations.description"+(1<l?"MultiplePoints":l?"SinglePoint":"NoPoints"),u={annotationText:r,numPoints:l,annotationPoint:a[0],additionalAnnotationPoints:a.slice(1)};return o.langFormat(c,u)}function a(t){return r(t).map(function(t){var e=n(o(s(t)));return e?"<li>"+e+"</li>":""})}return{getAnnotationsInfoHTML:function(t){var e=t.annotations;return e&&e.length?"<ul>"+a(t).join(" ")+"</ul>":""},getAnnotationLabelDescription:s,getAnnotationListItems:a,getPointAnnotationTexts:function(e){var t=r(e.series.chart).filter(function(t){return-1<i(e,t.points)});return t.length?t.map(function(t){return""+h(t)}):[]}}}),i(e,"modules/accessibility/components/SeriesComponent/SeriesDescriber.js",[e["parts/Utilities.js"],e["modules/accessibility/components/AnnotationsA11y.js"],e["modules/accessibility/utils/htmlUtilities.js"],e["modules/accessibility/utils/chartUtilities.js"],e["parts/Tooltip.js"]],function(t,e,i,n,s){var h=t.find,a=t.format,l=t.isNumber,c=t.numberFormat,d=t.pick,p=t.defined,m=e.getPointAnnotationTexts,f=i.escapeStringForHTML,y=i.reverseChildNodes,v=i.stripHTMLTagsFromString,o=n.getAxisDescription,x=n.getSeriesFirstPointElement,w=n.getSeriesA11yElement,A=n.unhideChartElementFromAT;function g(t){var e,i,n,o,r=t.series,s=(o=(n=t).index,n.series&&n.series.data&&p(o)&&h(n.series.data,function(t){return!!(t&&void 0!==t.index&&t.index>o&&t.graphic&&t.graphic.element)})||null),a=s&&s.graphic,l=a?a.parentGroup:r.graph||r.group,c=s?{x:d(t.plotX,s.plotX,0),y:d(t.plotY,s.plotY,0)}:{x:d(t.plotX,0),y:d(t.plotY,0)},u=(e=c,(i=t.series.chart.renderer.rect(e.x,e.y,1,1)).attr({class:"highcharts-a11y-dummy-point",fill:"none",opacity:0,"fill-opacity":0,"stroke-opacity":0}),i);if(l&&l.element)return t.graphic=u,t.hasDummyGraphic=!0,u.add(l),l.element.insertBefore(u.element,a?a.element:null),u.element}function E(t){var e=t.chart.options.accessibility.series.pointDescriptionEnabledThreshold;return!!(!1!==e&&t.points&&t.points.length>=e)}function u(t,e){var i=t.series.chart,n=i.options.accessibility.point||{},o=t.series.tooltipOptions||{},r=i.options.lang;return l(e)?c(e,n.valueDecimals||o.valueDecimals||-1,r.decimalPoint,r.accessibility.thousandsSep||r.thousandsSep):e}function b(t,e){var i=t[e];return t.chart.langFormat("accessibility.series."+e+"Description",{name:o(i),series:t})}function r(t){var e=t.series,i=e.chart,n=i.options.accessibility.point||{};if(e.xAxis&&e.xAxis.dateTime){var o=s.prototype.getXDateFormat.call({getDateFormat:s.prototype.getDateFormat,chart:i},t,i.options.tooltip,e.xAxis),r=n.dateFormatter&&n.dateFormatter(t)||n.dateFormat||o;return i.time.dateFormat(r,t.x,void 0)}}function T(t){var e=r(t),i=(t.series.xAxis||{}).categories&&p(t.category)&&(""+t.category).replace("<br/>"," "),n=t.id&&t.id.indexOf("highcharts-")<0,o="x, "+t.x;return t.name||e||i||(n?t.id:o)}function C(o,t,e){var r=t||"",s=e||"";return o.series.pointArrayMap.reduce(function(t,e){return t+(t.length?", ":"")+(n=u(o,d(o[i=e],o.options[i])),i+": "+r+n+s);var i,n},"")}function S(t){var e=t.series,i=e.chart.options.accessibility.point||{},n=e.tooltipOptions||{},o=i.valuePrefix||n.valuePrefix||"",r=i.valueSuffix||n.valueSuffix||"",s=u(t,t[void 0!==t.value?"value":"y"]);return t.isNull?e.chart.langFormat("accessibility.series.nullPointValue",{point:t}):e.pointArrayMap?C(t,o,r):o+s+r}function P(t){var e=t.series,i=e.chart,n=i.options.accessibility.point.valueDescriptionFormat,o=d(e.xAxis&&e.xAxis.options.accessibility&&e.xAxis.options.accessibility.enabled,!i.angular),r=o?T(t):"",s={point:t,index:p(t.index)?t.index+1:"",xDescription:r,value:S(t),separator:o?", ":""};return a(n,s,i)}function k(t){var e,i,n,o,r=t.series,s=r.chart,a=P(t),l=t.options&&t.options.accessibility&&t.options.accessibility.description,c=l?" "+l:"",u=1<s.series.length&&r.name?" "+r.name+".":"",h=(i=(e=t).series.chart,n=m(e),o={point:e,annotations:n},n.length?i.langFormat("accessibility.series.pointAnnotationsDescription",o):""),d=h?" "+h:"";return t.accessibility=t.accessibility||{},(t.accessibility.valueDescription=a)+c+u+d}function D(t){var e,i,n,o,u=(o=(n=t).options.accessibility||{},!E(n)&&!o.exposeAsGroupOnly),r=(i=(e=t).chart.options.accessibility.keyboardNavigation.seriesNavigation,!(!e.points||!(e.points.length<i.pointNavigationEnabledThreshold||!1===i.pointNavigationEnabledThreshold)));(u||r)&&t.points.forEach(function(t){var e,i,n,o,r,s,a,l,c=t.graphic&&t.graphic.element||(i=(e=t).series&&e.series.is("sunburst"),e.isNull&&!i&&g(t));c&&(c.setAttribute("tabindex","-1"),c.style.outline="0",u?(o=c,r=(n=t).series,s=r.chart.options.accessibility.point||{},a=r.options.accessibility||{},l=f(v(a.pointDescriptionFormatter&&a.pointDescriptionFormatter(n)||s.descriptionFormatter&&s.descriptionFormatter(n)||k(n))),o.setAttribute("role","img"),o.setAttribute("aria-label",l)):c.setAttribute("aria-hidden",!0))})}function M(e){function t(t){return o[t]&&1<o[t].length&&e[t]}var i,n,o=e.chart,r=o.types||[],s=(n=((i=e).options.accessibility||{}).description)&&i.chart.langFormat("accessibility.series.description",{description:n,series:i})||"",a=b(e,"xAxis"),l=b(e,"yAxis"),c={name:e.name||"",ix:e.index+1,numSeries:o.series&&o.series.length,numPoints:e.points&&e.points.length,series:e},u=1<r.length?"Combination":"";return(o.langFormat("accessibility.series.summary."+e.type+u,c)||o.langFormat("accessibility.series.summary.default"+u,c))+(s?" "+s:"")+(t("yAxis")?" "+l:"")+(t("xAxis")?" "+a:"")}return{describeSeries:function(t){var e,i,n,o,r,s,a,l,c,u,h,d,p=t.chart,m=x(t),g=w(t),b=p.is3d&&p.is3d();g&&(g.lastChild!==m||b||y(g),D(t),A(p,g),a=(s=t).chart,l=a.options.chart||{},c=l.options3d&&l.options3d.enabled,u=1<a.series.length,h=a.options.accessibility.series.describeSingleSeries,d=(s.options.accessibility||{}).exposeAsGroupOnly,c&&u||!(u||h||d||E(s))?g.setAttribute("aria-label",""):(i=g,n=(e=t).options.accessibility||{},o=e.chart.options.accessibility,r=o.landmarkVerbosity,n.exposeAsGroupOnly?i.setAttribute("role","img"):"all"===r&&i.setAttribute("role","region"),i.setAttribute("tabindex","-1"),i.style.outline="0",i.setAttribute("aria-label",f(v(o.series.descriptionFormatter&&o.series.descriptionFormatter(e)||M(e))))))},defaultPointDescriptionFormatter:k,defaultSeriesDescriptionFormatter:M,getPointA11yTimeDescription:r,getPointXDescription:T,getPointValue:S,getPointValueDescription:P}}),i(e,"modules/accessibility/utils/Announcer.js",[e["parts/Globals.js"],e["modules/accessibility/utils/DOMElementProvider.js"],e["modules/accessibility/utils/htmlUtilities.js"]],function(t,i,e){var n=e.visuallyHideElement,o=(r.prototype.destroy=function(){this.domElementProvider.destroyCreatedElements()},r.prototype.announce=function(t){var e=this;this.announceRegion.innerHTML=t,this.clearAnnouncementRegionTimer&&clearTimeout(this.clearAnnouncementRegionTimer),this.clearAnnouncementRegionTimer=setTimeout(function(){e.announceRegion.innerHTML="",delete e.clearAnnouncementRegionTimer},1e3)},r.prototype.addAnnounceRegion=function(t){var e=this.chart.renderTo,i=this.domElementProvider.createElement("div");return i.setAttribute("aria-hidden",!1),i.setAttribute("aria-live",t),n(i),e.insertBefore(i,e.firstChild),i},r);function r(t,e){this.chart=t,this.domElementProvider=new i,this.announceRegion=this.addAnnounceRegion(e)}return t.Announcer=o}),i(e,"modules/accessibility/components/SeriesComponent/NewDataAnnouncer.js",[e["parts/Globals.js"],e["parts/Utilities.js"],e["modules/accessibility/utils/chartUtilities.js"],e["modules/accessibility/components/SeriesComponent/SeriesDescriber.js"],e["modules/accessibility/utils/Announcer.js"],e["modules/accessibility/utils/EventProvider.js"]],function(c,t,e,i,n,o){var r=t.extend,s=t.defined,u=e.getChartTitle,h=i.defaultPointDescriptionFormatter,d=i.defaultSeriesDescriptionFormatter;function a(t){return t.options.accessibility.announceNewData.enabled}function l(t){this.chart=t}return r(l.prototype,{init:function(){var t=this.chart,e=t.options.accessibility.announceNewData.interruptUser?"assertive":"polite";this.lastAnnouncementTime=0,this.dirty={allSeries:{}},this.eventProvider=new o,this.announcer=new n(t,e),this.addEventListeners()},destroy:function(){this.eventProvider.removeAddedEvents(),this.announcer.destroy()},addEventListeners:function(){var e=this,t=this.chart,i=this.eventProvider;i.addEvent(t,"afterDrilldown",function(){e.lastAnnouncementTime=0}),i.addEvent(c.Series,"updatedData",function(){e.onSeriesUpdatedData(this)}),i.addEvent(t,"afterAddSeries",function(t){e.onSeriesAdded(t.series)}),i.addEvent(c.Series,"addPoint",function(t){e.onPointAdded(t.point)}),i.addEvent(t,"redraw",function(){e.announceDirtyData()})},onSeriesUpdatedData:function(t){var e=this.chart;t.chart===e&&a(e)&&(this.dirty.hasDirty=!0,this.dirty.allSeries[t.name+t.index]=t)},onSeriesAdded:function(t){a(this.chart)&&(this.dirty.hasDirty=!0,this.dirty.allSeries[t.name+t.index]=t,this.dirty.newSeries=s(this.dirty.newSeries)?void 0:t)},onPointAdded:function(t){var e=t.series.chart;this.chart===e&&a(e)&&(this.dirty.newPoint=s(this.dirty.newPoint)?void 0:t)},announceDirtyData:function(){var t,e,i,n=this.chart,o=this;n.options.accessibility.announceNewData&&this.dirty.hasDirty&&(t=(t=this.dirty.newPoint)&&(1===(i=(e=t).series.data.filter(function(t){return e.x===t.x&&e.y===t.y})).length?i[0]:e),this.queueAnnouncement(Object.keys(this.dirty.allSeries).map(function(t){return o.dirty.allSeries[t]}),this.dirty.newSeries,t),this.dirty={allSeries:{}})},queueAnnouncement:function(t,e,i){var n,o,r,s,a,l,c,u=this,h=this.chart.options.accessibility.announceNewData;h.enabled&&(o=(n=+new Date)-this.lastAnnouncementTime,r=Math.max(0,h.minAnnounceInterval-o),l=this.queuedAnnouncement&&this.queuedAnnouncement.series,c=(l||[]).concat(t||[]).reduce(function(t,e){return t[e.name+e.index]=e,t},{}),s=Object.keys(c).map(function(t){return c[t]}),(a=this.buildAnnouncementMessage(s,e,i))&&(this.queuedAnnouncement&&clearTimeout(this.queuedAnnouncementTimer),this.queuedAnnouncement={time:n,message:a,series:s},this.queuedAnnouncementTimer=setTimeout(function(){u&&u.announcer&&(u.lastAnnouncementTime=+new Date,u.announcer.announce(u.queuedAnnouncement.message),delete u.queuedAnnouncement,delete u.queuedAnnouncementTimer)},r)))},buildAnnouncementMessage:function(t,e,i){var n=this.chart,o=n.options.accessibility.announceNewData;if(o.announcementFormatter){var r=o.announcementFormatter(t,e,i);if(!1!==r)return r.length?r:null}var s=c.charts&&1<c.charts.length?"Multiple":"Single",a=e?"newSeriesAnnounce"+s:i?"newPointAnnounce"+s:"newDataAnnounce",l=u(n);return n.langFormat("accessibility.announceNewData."+a,{chartTitle:l,seriesDesc:e?d(e):null,pointDesc:i?h(i):null,point:i,series:e})}}),l}),i(e,"modules/accessibility/components/SeriesComponent/forcedMarkers.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(t,e){var i=e.addEvent,c=e.merge;function u(t){return t._hasPointMarkers&&t.points&&t.points.length}function h(t){c(!0,t,{marker:{enabled:!0,states:{normal:{opacity:0}}}})}return function(){i(t.Series,"render",function(){var t,e,i,n,o,r,s,a=this,l=a.options;r=(i=a).chart.options.accessibility.enabled,s=!1!==(i.options.accessibility&&i.options.accessibility.enabled),r&&s&&(o=(n=i).chart.options.accessibility,n.points.length<o.series.pointDescriptionEnabledThreshold||!1===o.series.pointDescriptionEnabledThreshold)?(l.marker&&!1===l.marker.enabled&&(a.a11yMarkersForced=!0,h(a.options)),u(a)&&function(t){for(var e,i,n=t.points.length;n--;){var o=t.points[n],r=o.options;delete o.hasForcedA11yMarker,r.marker&&(r.marker.enabled?(c(!(i=void 0),(e=r).marker,{states:{normal:{opacity:(i=e).marker.states&&i.marker.states.normal&&i.marker.states.normal.opacity||1}}}),o.hasForcedA11yMarker=!1):(h(r),o.hasForcedA11yMarker=!0))}}(a)):a.a11yMarkersForced&&(delete a.a11yMarkersForced,(e=(t=a).resetA11yMarkerOptions)&&c(!0,t.options,{marker:{enabled:e.enabled,states:{normal:{opacity:e.states&&e.states.normal&&e.states.normal.opacity}}}}))}),i(t.Series,"afterSetOptions",function(t){this.resetA11yMarkerOptions=c(t.options.marker||{},this.userOptions.marker||{})}),i(t.Series,"afterRender",function(){var t=this;t.chart.styledMode&&(t.markerGroup&&t.markerGroup[t.a11yMarkersForced?"addClass":"removeClass"]("highcharts-a11y-markers-hidden"),u(t)&&t.points.forEach(function(t){t.graphic&&(t.graphic[t.hasForcedA11yMarker?"addClass":"removeClass"]("highcharts-a11y-marker-hidden"),t.graphic[!1===t.hasForcedA11yMarker?"addClass":"removeClass"]("highcharts-a11y-marker-visible"))}))})}}),i(e,"modules/accessibility/components/SeriesComponent/SeriesComponent.js",[e["parts/Globals.js"],e["parts/Utilities.js"],e["modules/accessibility/AccessibilityComponent.js"],e["modules/accessibility/components/SeriesComponent/SeriesKeyboardNavigation.js"],e["modules/accessibility/components/SeriesComponent/NewDataAnnouncer.js"],e["modules/accessibility/components/SeriesComponent/forcedMarkers.js"],e["modules/accessibility/utils/chartUtilities.js"],e["modules/accessibility/components/SeriesComponent/SeriesDescriber.js"],e["parts/Tooltip.js"]],function(t,e,i,n,o,r,s,a,l){var c=e.extend,u=s.hideSeriesFromAT,h=a.describeSeries;t.SeriesAccessibilityDescriber=a,r();function d(){}return c(d.prototype=new i,{init:function(){this.newDataAnnouncer=new o(this.chart),this.newDataAnnouncer.init(),this.keyboardNavigation=new n(this.chart,this.keyCodes),this.keyboardNavigation.init(),this.hideTooltipFromATWhenShown(),this.hideSeriesLabelsFromATWhenShown()},hideTooltipFromATWhenShown:function(){var t=this;this.addEvent(l,"refresh",function(){this.chart===t.chart&&this.label&&this.label.element&&this.label.element.setAttribute("aria-hidden",!0)})},hideSeriesLabelsFromATWhenShown:function(){this.addEvent(this.chart,"afterDrawSeriesLabels",function(){this.series.forEach(function(t){t.labelBySeries&&t.labelBySeries.attr("aria-hidden",!0)})})},onChartRender:function(){this.chart.series.forEach(function(t){(!1!==(t.options.accessibility&&t.options.accessibility.enabled)&&t.visible?h:u)(t)})},getKeyboardNavigation:function(){return this.keyboardNavigation.getKeyboardNavigationHandler()},destroy:function(){this.newDataAnnouncer.destroy(),this.keyboardNavigation.destroy()}}),d}),i(e,"modules/accessibility/components/ZoomComponent.js",[e["parts/Globals.js"],e["parts/Utilities.js"],e["modules/accessibility/AccessibilityComponent.js"],e["modules/accessibility/KeyboardNavigationHandler.js"],e["modules/accessibility/utils/chartUtilities.js"],e["modules/accessibility/utils/htmlUtilities.js"]],function(t,e,i,s,n,o){var r=e.extend,a=e.pick,l=n.unhideChartElementFromAT,c=o.setElAttrs,u=o.removeElement;t.Axis.prototype.panStep=function(t,e){var i=e||3,n=this.getExtremes(),o=(n.max-n.min)/i*t,r=n.max+o,s=n.min+o,a=r-s;t<0&&s<n.dataMin?r=(s=n.dataMin)+a:0<t&&r>n.dataMax&&(s=(r=n.dataMax)-a),this.setExtremes(s,r)};function h(){}return r(h.prototype=new i,{init:function(){var e=this,i=this.chart;["afterShowResetZoom","afterDrilldown","drillupall"].forEach(function(t){e.addEvent(i,t,function(){e.updateProxyOverlays()})})},onChartUpdate:function(){var i=this.chart,n=this;i.mapNavButtons&&i.mapNavButtons.forEach(function(t,e){l(i,t.element),n.setMapNavButtonAttrs(t.element,"accessibility.zoom.mapZoom"+(e?"Out":"In"))})},setMapNavButtonAttrs:function(t,e){var i=this.chart,n=i.langFormat(e,{chart:i});c(t,{tabindex:-1,role:"button","aria-label":n})},onChartRender:function(){this.updateProxyOverlays()},updateProxyOverlays:function(){var t=this.chart;u(this.drillUpProxyGroup),u(this.resetZoomProxyGroup),t.resetZoomButton&&this.recreateProxyButtonAndGroup(t.resetZoomButton,"resetZoomProxyButton","resetZoomProxyGroup",t.langFormat("accessibility.zoom.resetZoomButton",{chart:t})),t.drillUpButton&&this.recreateProxyButtonAndGroup(t.drillUpButton,"drillUpProxyButton","drillUpProxyGroup",t.langFormat("accessibility.drillUpButton",{chart:t,buttonText:t.getDrilldownBackText()}))},recreateProxyButtonAndGroup:function(t,e,i,n){u(this[i]),this[i]=this.addProxyGroup(),this[e]=this.createProxyButton(t,this[i],{"aria-label":n,tabindex:-1})},getMapZoomNavigation:function(){var t=this.keyCodes,e=this.chart,i=this;return new s(e,{keyCodeMap:[[[t.up,t.down,t.left,t.right],function(t){return i.onMapKbdArrow(this,t)}],[[t.tab],function(t,e){return i.onMapKbdTab(this,e)}],[[t.space,t.enter],function(){return i.onMapKbdClick(this)}]],validate:function(){return!!((t=e).mapZoom&&t.mapNavButtons&&t.mapNavButtons.length);var t},init:function(t){return i.onMapNavInit(t)}})},onMapKbdArrow:function(t,e){var i=this.keyCodes,n=e===i.up||e===i.down?"yAxis":"xAxis",o=e===i.left||e===i.up?-1:1;return this.chart[n][0].panStep(o),t.response.success},onMapKbdTab:function(t,e){var i,n=this.chart,o=t.response,r=e.shiftKey,s=r&&!this.focusedMapNavButtonIx||!r&&this.focusedMapNavButtonIx;return n.mapNavButtons[this.focusedMapNavButtonIx].setState(0),s?(n.mapZoom(),o[r?"prev":"next"]):(this.focusedMapNavButtonIx+=r?-1:1,i=n.mapNavButtons[this.focusedMapNavButtonIx],n.setFocusToElement(i.box,i.element),i.setState(2),o.success)},onMapKbdClick:function(t){return this.fakeClickEvent(this.chart.mapNavButtons[this.focusedMapNavButtonIx].element),t.response.success},onMapNavInit:function(t){var e=this.chart,i=e.mapNavButtons[0],n=e.mapNavButtons[1],o=0<t?i:n;e.setFocusToElement(o.box,o.element),o.setState(2),this.focusedMapNavButtonIx=0<t?0:1},simpleButtonNavigation:function(t,e,i){var n=this.keyCodes,o=this,r=this.chart;return new s(r,{keyCodeMap:[[[n.tab,n.up,n.down,n.left,n.right],function(t,e){var i=t===n.tab&&e.shiftKey||t===n.left||t===n.up;return this.response[i?"prev":"next"]}],[[n.space,n.enter],function(){var t=i(this,r);return a(t,this.response.success)}]],validate:function(){return r[t]&&r[t].box&&o[e]},init:function(){r.setFocusToElement(r[t].box,o[e])}})},getKeyboardNavigation:function(){return[this.simpleButtonNavigation("resetZoomButton","resetZoomProxyButton",function(t,e){e.zoomOut()}),this.simpleButtonNavigation("drillUpButton","drillUpProxyButton",function(t,e){return e.drillUp(),t.response.prev}),this.getMapZoomNavigation()]}}),h}),i(e,"modules/accessibility/components/RangeSelectorComponent.js",[e["parts/Globals.js"],e["parts/Utilities.js"],e["modules/accessibility/AccessibilityComponent.js"],e["modules/accessibility/KeyboardNavigationHandler.js"],e["modules/accessibility/utils/chartUtilities.js"],e["modules/accessibility/utils/htmlUtilities.js"]],function(t,e,i,r,n,o){var s=e.extend,a=n.unhideChartElementFromAT,l=o.setElAttrs;t.Chart.prototype.highlightRangeSelectorButton=function(t){var e=this.rangeSelector.buttons,i=this.highlightedRangeSelectorItemIx;return void 0!==i&&e[i]&&e[i].setState(this.oldRangeSelectorItemState||0),!!e[this.highlightedRangeSelectorItemIx=t]&&(this.setFocusToElement(e[t].box,e[t].element),this.oldRangeSelectorItemState=e[t].state,e[t].setState(2),!0)};function c(){}return s(c.prototype=new i,{onChartUpdate:function(){var n=this.chart,o=this,r=n.rangeSelector;r&&(r.buttons&&r.buttons.length&&r.buttons.forEach(function(t){a(n,t.element),o.setRangeButtonAttrs(t)}),r.maxInput&&r.minInput&&["minInput","maxInput"].forEach(function(t,e){var i=r[t];i&&(a(n,i),o.setRangeInputAttrs(i,"accessibility.rangeSelector."+(e?"max":"min")+"InputLabel"))}))},setRangeButtonAttrs:function(t){var e=this.chart,i=e.langFormat("accessibility.rangeSelector.buttonText",{chart:e,buttonText:t.text&&t.text.textStr});l(t.element,{tabindex:-1,role:"button","aria-label":i})},setRangeInputAttrs:function(t,e){var i=this.chart;l(t,{tabindex:-1,role:"textbox","aria-label":i.langFormat(e,{chart:i})})},getRangeSelectorButtonNavigation:function(){var i=this.chart,t=this.keyCodes,e=this;return new r(i,{keyCodeMap:[[[t.left,t.right,t.up,t.down],function(t){return e.onButtonNavKbdArrowKey(this,t)}],[[t.enter,t.space],function(){return e.onButtonNavKbdClick(this)}]],validate:function(){return i.rangeSelector&&i.rangeSelector.buttons&&i.rangeSelector.buttons.length},init:function(t){var e=i.rangeSelector.buttons.length-1;i.highlightRangeSelectorButton(0<t?0:e)}})},onButtonNavKbdArrowKey:function(t,e){var i=t.response,n=this.keyCodes,o=this.chart,r=o.options.accessibility.keyboardNavigation.wrapAround,s=e===n.left||e===n.up?-1:1;return o.highlightRangeSelectorButton(o.highlightedRangeSelectorItemIx+s)?i.success:r?(t.init(s),i.success):i[0<s?"next":"prev"]},onButtonNavKbdClick:function(t){var e=t.response,i=this.chart;return 3===i.oldRangeSelectorItemState||this.fakeClickEvent(i.rangeSelector.buttons[i.highlightedRangeSelectorItemIx].element),e.success},getRangeSelectorInputNavigation:function(){var e=this.chart,n=this.keyCodes,o=this;return new r(e,{keyCodeMap:[[[n.tab,n.up,n.down],function(t,e){var i=t===n.tab&&e.shiftKey||t===n.up?-1:1;return o.onInputKbdMove(this,i)}]],validate:function(){return(t=e).rangeSelector&&t.rangeSelector.inputGroup&&"hidden"!==t.rangeSelector.inputGroup.element.getAttribute("visibility")&&!1!==t.options.rangeSelector.inputEnabled&&t.rangeSelector.minInput&&t.rangeSelector.maxInput;var t},init:function(t){o.onInputNavInit(t)},terminate:function(){o.onInputNavTerminate()}})},onInputKbdMove:function(t,e){var i=this.chart,n=t.response,o=i.highlightedInputRangeIx=i.highlightedInputRangeIx+e;return 1<o||o<0?n[0<e?"next":"prev"]:(i.rangeSelector[o?"maxInput":"minInput"].focus(),n.success)},onInputNavInit:function(t){var e=this.chart,i=0<t?0:1;e.highlightedInputRangeIx=i,e.rangeSelector[i?"maxInput":"minInput"].focus()},onInputNavTerminate:function(){var t=this.chart.rangeSelector||{};t.maxInput&&t.hideInput("max"),t.minInput&&t.hideInput("min")},getKeyboardNavigation:function(){return[this.getRangeSelectorButtonNavigation(),this.getRangeSelectorInputNavigation()]}}),c}),i(e,"modules/accessibility/components/InfoRegionsComponent.js",[e["parts/Globals.js"],e["parts/Utilities.js"],e["modules/accessibility/AccessibilityComponent.js"],e["modules/accessibility/utils/Announcer.js"],e["modules/accessibility/components/AnnotationsA11y.js"],e["modules/accessibility/utils/chartUtilities.js"],e["modules/accessibility/utils/htmlUtilities.js"]],function(h,t,e,i,n,o,r){var s=h.doc,a=t.extend,l=t.format,c=t.pick,d=n.getAnnotationsInfoHTML,u=o.unhideChartElementFromAT,p=o.getChartTitle,m=o.getAxisDescription,g=r.addClass,b=r.setElAttrs,f=r.escapeStringForHTML,y=r.stripHTMLTagsFromString,v=r.getElement,x=r.visuallyHideElement;function w(t){return e=f(t),e.replace(/&lt;(h[1-7]|p|div|ul|ol|li)&gt;/g,"<$1>").replace(/&lt;&#x2F;(h[1-7]|p|div|ul|ol|li|a|button)&gt;/g,"</$1>").replace(/&lt;(div|a|button) id=&quot;([a-zA-Z\-0-9#]*?)&quot;&gt;/g,'<$1 id="$2">').replace(/<(\w+)[^>]*?>\s*<\/\1>/g,"");var e}h.Chart.prototype.getTypeDescription=function(t){var e,i,n,o,r,s,a,l,c,u=t[0],h=this.series&&this.series[0]||{},d={numSeries:this.series.length,numPoints:h.points&&h.points.length,chart:this,mapTitle:h.mapTitle};return u?"map"===u?(i=this,(n=d).mapTitle?i.langFormat("accessibility.chartTypes.mapTypeDescription",n):i.langFormat("accessibility.chartTypes.unknownMap",n)):1<this.types.length?(o=d,this.langFormat("accessibility.chartTypes.combinationChart",o)):(r=this,s=d,a=t[0],l=r.langFormat("accessibility.seriesTypeDescriptions."+a,s),c=r.series&&r.series.length<2?"Single":"Multiple",(r.langFormat("accessibility.chartTypes."+a+c,s)||r.langFormat("accessibility.chartTypes.default"+c,s))+(l?" "+l:"")):(e=d,this.langFormat("accessibility.chartTypes.emptyChart",e))};function A(){}return a(A.prototype=new e,{init:function(){var t=this.chart,e=this;this.initRegionsDefinitions(),this.addEvent(t,"afterGetTable",function(t){e.onDataTableCreated(t)}),this.addEvent(t,"afterViewData",function(t){e.dataTableDiv=t,setTimeout(function(){e.focusDataTable()},300)}),this.announcer=new i(t,"assertive")},initRegionsDefinitions:function(){var i=this;this.screenReaderSections={before:{element:null,buildContent:function(t){var e=t.options.accessibility.screenReaderSection.beforeChartFormatter;return e?e(t):i.defaultBeforeChartFormatter(t)},insertIntoDOM:function(t,e){e.renderTo.insertBefore(t,e.renderTo.firstChild)},afterInserted:function(){void 0!==i.sonifyButtonId&&i.initSonifyButton(i.sonifyButtonId),void 0!==i.dataTableButtonId&&i.initDataTableButton(i.dataTableButtonId)}},after:{element:null,buildContent:function(t){var e=t.options.accessibility.screenReaderSection.afterChartFormatter;return e?e(t):i.defaultAfterChartFormatter()},insertIntoDOM:function(t,e){e.renderTo.insertBefore(t,e.container.nextSibling)}}}},onChartRender:function(){var e=this;this.linkedDescriptionElement=this.getLinkedDescriptionElement(),this.setLinkedDescriptionAttrs(),Object.keys(this.screenReaderSections).forEach(function(t){e.updateScreenReaderSection(t)})},getLinkedDescriptionElement:function(){var t=this.chart.options.accessibility.linkedDescription;if(t){if("string"!=typeof t)return t;var e=l(t,this.chart),i=s.querySelectorAll(e);return 1===i.length?i[0]:void 0}},setLinkedDescriptionAttrs:function(){var t=this.linkedDescriptionElement;t&&(t.setAttribute("aria-hidden","true"),g(t,"highcharts-linked-description"))},updateScreenReaderSection:function(t){var e=this.chart,i=this.screenReaderSections[t],n=i.buildContent(e),o=i.element=i.element||this.createElement("div"),r=o.firstChild||this.createElement("div");this.setScreenReaderSectionAttribs(o,t),r.innerHTML=n,o.appendChild(r),i.insertIntoDOM(o,e),x(r),u(e,r),i.afterInserted&&i.afterInserted()},setScreenReaderSectionAttribs:function(t,e){var i="accessibility.screenReaderSection."+e+"RegionLabel",n=this.chart,o=n.langFormat(i,{chart:n}),r="highcharts-screen-reader-region-"+e+"-"+n.index;b(t,{id:r,"aria-label":o}),t.style.position="relative","all"===n.options.accessibility.landmarkVerbosity&&o&&t.setAttribute("role","region")},defaultBeforeChartFormatter:function(){var t,e=this.chart,i=e.options.accessibility.screenReaderSection.beforeChartFormat,n=this.getAxesDescription(),o=e.sonify&&(null===(t=e.options.sonification)||void 0===t?void 0:t.enabled),r="highcharts-a11y-sonify-data-btn-"+e.index,s="hc-linkto-highcharts-data-table-"+e.index,a=d(e),l=e.langFormat("accessibility.screenReaderSection.annotations.heading",{chart:e}),c={chartTitle:p(e),typeDescription:this.getTypeDescriptionText(),chartSubtitle:this.getSubtitleText(),chartLongdesc:this.getLongdescText(),xAxisDescription:n.xAxis,yAxisDescription:n.yAxis,playAsSoundButton:o?this.getSonifyButtonText(r):"",viewTableButton:e.getCSV?this.getDataTableButtonText(s):"",annotationsTitle:a?l:"",annotationsList:a},u=h.i18nFormat(i,c,e);return this.dataTableButtonId=s,this.sonifyButtonId=r,w(u)},defaultAfterChartFormatter:function(){var t=this.chart,e=t.options.accessibility.screenReaderSection.afterChartFormat,i={endOfChartMarker:this.getEndOfChartMarkerText()};return w(h.i18nFormat(e,i,t))},getLinkedDescription:function(){var t=this.linkedDescriptionElement,e=t&&t.innerHTML||"";return y(e)},getLongdescText:function(){var t=this.chart.options,e=t.caption,i=e&&e.text,n=this.getLinkedDescription();return t.accessibility.description||n||i||""},getTypeDescriptionText:function(){var t=this.chart;return t.types?t.options.accessibility.typeDescription||t.getTypeDescription(t.types):""},getDataTableButtonText:function(t){var e=this.chart;return'<a id="'+t+'">'+e.langFormat("accessibility.table.viewAsDataTableButtonText",{chart:e,chartTitle:p(e)})+"</a>"},getSonifyButtonText:function(t){var e,i=this.chart;return!1===(null===(e=i.options.sonification)||void 0===e?void 0:e.enabled)?"":'<button id="'+t+'">'+i.langFormat("accessibility.sonification.playAsSoundButtonText",{chart:i,chartTitle:p(i)})+"</button>"},getSubtitleText:function(){var t=this.chart.options.subtitle;return y(t&&t.text||"")},getEndOfChartMarkerText:function(){var t=this.chart,e=t.langFormat("accessibility.screenReaderSection.endOfChartMarker",{chart:t});return'<div id="'+("highcharts-end-of-chart-marker-"+t.index)+'">'+e+"</div>"},onDataTableCreated:function(t){var e,i=this.chart;i.options.accessibility.enabled&&(this.viewDataTableButton&&this.viewDataTableButton.setAttribute("aria-expanded","true"),t.html=t.html.replace("<table ",'<table tabindex="-1" summary="'+(e=i).langFormat("accessibility.table.tableSummary",{chart:e})+'"'))},focusDataTable:function(){var t=this.dataTableDiv,e=t&&t.getElementsByTagName("table")[0];e&&e.focus&&e.focus()},initSonifyButton:function(t){var i=this,n=this.sonifyButton=v(t),o=this.chart;n&&o&&(b(n,{tabindex:"-1"}),n.onclick=function(t){var e;((null===(e=o.options.accessibility)||void 0===e?void 0:e.screenReaderSection.onPlayAsSoundClick)||function(t){null!=n&&n.setAttribute("aria-hidden","true"),null!=n&&n.setAttribute("aria-label",""),t.preventDefault(),t.stopPropagation();var e=o.langFormat("accessibility.sonification.playAsSoundClickAnnouncement",{chart:o});i.announcer.announce(e),setTimeout(function(){null!=n&&n.removeAttribute("aria-hidden"),null!=n&&n.removeAttribute("aria-label"),o.sonify&&o.sonify()},1e3)}).call(this,t,o)})},initDataTableButton:function(t){var e=this.viewDataTableButton=v(t),i=this.chart,n=t.replace("hc-linkto-","");e&&(b(e,{role:"button",tabindex:"-1","aria-expanded":!!v(n),href:"#"+n}),e.onclick=i.options.accessibility.screenReaderSection.onViewDataTableClick||function(){i.viewData()})},getAxesDescription:function(){function t(t,e){var i=n[t];return 1<i.length||i[0]&&c(i[0].options.accessibility&&i[0].options.accessibility.enabled,e)}var n=this.chart,e=!!n.types&&n.types.indexOf("map")<0,i=!!n.hasCartesianSeries,o=t("xAxis",!n.angular&&i&&e),r=t("yAxis",i&&e),s={};return o&&(s.xAxis=this.getAxisDescriptionText("xAxis")),r&&(s.yAxis=this.getAxisDescriptionText("yAxis")),s},getAxisDescriptionText:function(t){var e=this,i=this.chart,n=i[t];return i.langFormat("accessibility.axis."+t+"Description"+(1<n.length?"Plural":"Singular"),{chart:i,names:n.map(function(t){return m(t)}),ranges:n.map(function(t){return e.getAxisRangeDescription(t)}),numAxes:n.length})},getAxisRangeDescription:function(t){var e=t.options||{};return e.accessibility&&void 0!==e.accessibility.rangeDescription?e.accessibility.rangeDescription:t.categories?this.getCategoryAxisRangeDesc(t):!t.dateTime||0!==t.min&&0!==t.dataMin?this.getAxisFromToDescription(t):this.getAxisTimeLengthDesc(t)},getCategoryAxisRangeDesc:function(t){var e=this.chart;return t.dataMax&&t.dataMin?e.langFormat("accessibility.axis.rangeCategories",{chart:e,axis:t,numCategories:t.dataMax-t.dataMin+1}):""},getAxisTimeLengthDesc:function(t){var e=this.chart,i={},n="Seconds";i.Seconds=((t.max||0)-(t.min||0))/1e3,i.Minutes=i.Seconds/60,i.Hours=i.Minutes/60,i.Days=i.Hours/24,["Minutes","Hours","Days"].forEach(function(t){2<i[t]&&(n=t)});var o=i[n].toFixed("Seconds"!==n&&"Minutes"!==n?1:0);return e.langFormat("accessibility.axis.timeRange"+n,{chart:e,axis:t,range:o.replace(".0","")})},getAxisFromToDescription:function(e){function t(t){return e.dateTime?i.time.dateFormat(n,e[t]):e[t]}var i=this.chart,n=i.options.accessibility.screenReaderSection.axisRangeDateFormat;return i.langFormat("accessibility.axis.rangeFromTo",{chart:i,axis:e,rangeFrom:t("min"),rangeTo:t("max")})},destroy:function(){var t;null!==(t=this.announcer)&&void 0!==t&&t.destroy()}}),A}),i(e,"modules/accessibility/components/ContainerComponent.js",[e["parts/Globals.js"],e["parts/Utilities.js"],e["modules/accessibility/utils/htmlUtilities.js"],e["modules/accessibility/utils/chartUtilities.js"],e["modules/accessibility/AccessibilityComponent.js"]],function(t,e,i,n,o){function r(){}var s=t.win.document,a=e.extend,l=i.stripHTMLTagsFromString,c=n.unhideChartElementFromAT,u=n.getChartTitle;return a(r.prototype=new o,{onChartUpdate:function(){this.handleSVGTitleElement(),this.setSVGContainerLabel(),this.setGraphicContainerAttrs(),this.setRenderToAttrs(),this.makeCreditsAccessible()},handleSVGTitleElement:function(){var t,e=this.chart,i="highcharts-title-"+e.index,n=l(e.langFormat("accessibility.svgContainerTitle",{chartTitle:u(e)}));n.length&&((t=this.svgTitleElement=this.svgTitleElement||s.createElementNS("http://www.w3.org/2000/svg","title")).textContent=n,t.id=i,e.renderTo.insertBefore(t,e.renderTo.firstChild))},setSVGContainerLabel:function(){var t=this.chart,e=l(t.langFormat("accessibility.svgContainerLabel",{chartTitle:u(t)}));t.renderer.box&&e.length&&t.renderer.box.setAttribute("aria-label",e)},setGraphicContainerAttrs:function(){var t=this.chart,e=t.langFormat("accessibility.graphicContainerLabel",{chartTitle:u(t)});e.length&&t.container.setAttribute("aria-label",e)},setRenderToAttrs:function(){var t=this.chart;"disabled"!==t.options.accessibility.landmarkVerbosity?t.renderTo.setAttribute("role","region"):t.renderTo.removeAttribute("role"),t.renderTo.setAttribute("aria-label",t.langFormat("accessibility.chartContainerLabel",{title:u(t),chart:t}))},makeCreditsAccessible:function(){var t=this.chart,e=t.credits;e&&(e.textStr&&e.element.setAttribute("aria-label",l(t.langFormat("accessibility.credits",{creditsStr:e.textStr}))),c(t,e.element))},destroy:function(){this.chart.renderTo.setAttribute("aria-hidden",!0)}}),r}),i(e,"modules/accessibility/high-contrast-mode.js",[e["parts/Globals.js"]],function(t){var n=t.isMS,o=t.win,r=o.document;return{isHighContrastModeActive:function(){var t=/(Edg)/.test(o.navigator.userAgent);if(o.matchMedia&&t)return o.matchMedia("(-ms-high-contrast: active)").matches;if(n&&o.getComputedStyle){var e=r.createElement("div");e.style.backgroundImage="url(data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==)",r.body.appendChild(e);var i=(e.currentStyle||o.getComputedStyle(e)).backgroundImage;return r.body.removeChild(e),"none"===i}return!1},setHighContrastTheme:function(t){t.highContrastModeActive=!0;var i=t.options.accessibility.highContrastTheme;t.update(i,!1),t.series.forEach(function(t){var e=i.plotOptions[t.type]||{};t.update({color:e.color||"windowText",colors:[e.color||"windowText"],borderColor:e.borderColor||"window"}),t.points.forEach(function(t){t.options&&t.options.color&&t.update({color:e.color||"windowText",borderColor:e.borderColor||"window"},!1)})}),t.redraw()}}}),i(e,"modules/accessibility/high-contrast-theme.js",[],function(){return{chart:{backgroundColor:"window"},title:{style:{color:"windowText"}},subtitle:{style:{color:"windowText"}},colorAxis:{minColor:"windowText",maxColor:"windowText",stops:[]},colors:["windowText"],xAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},yAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},tooltip:{backgroundColor:"window",borderColor:"windowText",style:{color:"windowText"}},plotOptions:{series:{lineColor:"windowText",fillColor:"window",borderColor:"windowText",edgeColor:"windowText",borderWidth:1,dataLabels:{connectorColor:"windowText",color:"windowText",style:{color:"windowText",textOutline:"none"}},marker:{lineColor:"windowText",fillColor:"windowText"}},pie:{color:"window",colors:["window"],borderColor:"windowText",borderWidth:1},boxplot:{fillColor:"window"},candlestick:{lineColor:"windowText",fillColor:"window"},errorbar:{fillColor:"window"}},legend:{backgroundColor:"window",itemStyle:{color:"windowText"},itemHoverStyle:{color:"windowText"},itemHiddenStyle:{color:"#555"},title:{style:{color:"windowText"}}},credits:{style:{color:"windowText"}},labels:{style:{color:"windowText"}},drilldown:{activeAxisLabelStyle:{color:"windowText"},activeDataLabelStyle:{color:"windowText"}},navigation:{buttonOptions:{symbolStroke:"windowText",theme:{fill:"window"}}},rangeSelector:{buttonTheme:{fill:"window",stroke:"windowText",style:{color:"windowText"},states:{hover:{fill:"window",stroke:"windowText",style:{color:"windowText"}},select:{fill:"#444",stroke:"windowText",style:{color:"windowText"}}}},inputBoxBorderColor:"windowText",inputStyle:{backgroundColor:"window",color:"windowText"},labelStyle:{color:"windowText"}},navigator:{handles:{backgroundColor:"window",borderColor:"windowText"},outlineColor:"windowText",maskFill:"transparent",series:{color:"windowText",lineColor:"windowText"},xAxis:{gridLineColor:"windowText"}},scrollbar:{barBackgroundColor:"#444",barBorderColor:"windowText",buttonArrowColor:"windowText",buttonBackgroundColor:"window",buttonBorderColor:"windowText",rifleColor:"windowText",trackBackgroundColor:"window",trackBorderColor:"windowText"}}}),i(e,"modules/accessibility/options/options.js",[],function(){return{accessibility:{enabled:!0,screenReaderSection:{beforeChartFormat:"<h5>{chartTitle}</h5><div>{typeDescription}</div><div>{chartSubtitle}</div><div>{chartLongdesc}</div><div>{playAsSoundButton}</div><div>{viewTableButton}</div><div>{xAxisDescription}</div><div>{yAxisDescription}</div><div>{annotationsTitle}{annotationsList}</div>",afterChartFormat:"{endOfChartMarker}",axisRangeDateFormat:"%Y-%m-%d %H:%M:%S"},series:{describeSingleSeries:!1,pointDescriptionEnabledThreshold:200},point:{valueDescriptionFormat:"{index}. {xDescription}{separator}{value}."},landmarkVerbosity:"all",linkedDescription:'*[data-highcharts-chart="{index}"] + .highcharts-description',keyboardNavigation:{enabled:!0,focusBorder:{enabled:!0,hideBrowserFocusOutline:!0,style:{color:"#335cad",lineWidth:2,borderRadius:3},margin:2},order:["series","zoom","rangeSelector","legend","chartMenu"],wrapAround:!0,seriesNavigation:{skipNullPoints:!0,pointNavigationEnabledThreshold:!1}},announceNewData:{enabled:!1,minAnnounceInterval:5e3,interruptUser:!1}},legend:{accessibility:{enabled:!0,keyboardNavigation:{enabled:!0}}},exporting:{accessibility:{enabled:!0}}}}),i(e,"modules/accessibility/options/langOptions.js",[],function(){return{accessibility:{defaultChartTitle:"Chart",chartContainerLabel:"{title}. Highcharts interactive chart.",svgContainerLabel:"Interactive chart",drillUpButton:"{buttonText}",credits:"Chart credits: {creditsStr}",thousandsSep:",",svgContainerTitle:"",graphicContainerLabel:"",screenReaderSection:{beforeRegionLabel:"Chart screen reader information.",afterRegionLabel:"",annotations:{heading:"Chart annotations summary",descriptionSinglePoint:"{annotationText}. Related to {annotationPoint}",descriptionMultiplePoints:"{annotationText}. Related to {annotationPoint}{ Also related to, #each(additionalAnnotationPoints)}",descriptionNoPoints:"{annotationText}"},endOfChartMarker:"End of interactive chart."},sonification:{playAsSoundButtonText:"Play as sound, {chartTitle}",playAsSoundClickAnnouncement:"Play"},legend:{legendLabel:"Toggle series visibility",legendItem:"Toggle visibility of {itemName}"},zoom:{mapZoomIn:"Zoom chart",mapZoomOut:"Zoom out chart",resetZoomButton:"Reset zoom"},rangeSelector:{minInputLabel:"Select start date.",maxInputLabel:"Select end date.",buttonText:"Select range {buttonText}"},table:{viewAsDataTableButtonText:"View as data table, {chartTitle}",tableSummary:"Table representation of chart."},announceNewData:{newDataAnnounce:"Updated data for chart {chartTitle}",newSeriesAnnounceSingle:"New data series: {seriesDesc}",newPointAnnounceSingle:"New data point: {pointDesc}",newSeriesAnnounceMultiple:"New data series in chart {chartTitle}: {seriesDesc}",newPointAnnounceMultiple:"New data point in chart {chartTitle}: {pointDesc}"},seriesTypeDescriptions:{boxplot:"Box plot charts are typically used to display groups of statistical data. Each data point in the chart can have up to 5 values: minimum, lower quartile, median, upper quartile, and maximum.",arearange:"Arearange charts are line charts displaying a range between a lower and higher value for each point.",areasplinerange:"These charts are line charts displaying a range between a lower and higher value for each point.",bubble:"Bubble charts are scatter charts where each data point also has a size value.",columnrange:"Columnrange charts are column charts displaying a range between a lower and higher value for each point.",errorbar:"Errorbar series are used to display the variability of the data.",funnel:"Funnel charts are used to display reduction of data in stages.",pyramid:"Pyramid charts consist of a single pyramid with item heights corresponding to each point value.",waterfall:"A waterfall chart is a column chart where each column contributes towards a total end value."},chartTypes:{emptyChart:"Empty chart",mapTypeDescription:"Map of {mapTitle} with {numSeries} data series.",unknownMap:"Map of unspecified region with {numSeries} data series.",combinationChart:"Combination chart with {numSeries} data series.",defaultSingle:"Chart with {numPoints} data {#plural(numPoints, points, point)}.",defaultMultiple:"Chart with {numSeries} data series.",splineSingle:"Line chart with {numPoints} data {#plural(numPoints, points, point)}.",splineMultiple:"Line chart with {numSeries} lines.",lineSingle:"Line chart with {numPoints} data {#plural(numPoints, points, point)}.",lineMultiple:"Line chart with {numSeries} lines.",columnSingle:"Bar chart with {numPoints} {#plural(numPoints, bars, bar)}.",columnMultiple:"Bar chart with {numSeries} data series.",barSingle:"Bar chart with {numPoints} {#plural(numPoints, bars, bar)}.",barMultiple:"Bar chart with {numSeries} data series.",pieSingle:"Pie chart with {numPoints} {#plural(numPoints, slices, slice)}.",pieMultiple:"Pie chart with {numSeries} pies.",scatterSingle:"Scatter chart with {numPoints} {#plural(numPoints, points, point)}.",scatterMultiple:"Scatter chart with {numSeries} data series.",boxplotSingle:"Boxplot with {numPoints} {#plural(numPoints, boxes, box)}.",boxplotMultiple:"Boxplot with {numSeries} data series.",bubbleSingle:"Bubble chart with {numPoints} {#plural(numPoints, bubbles, bubble)}.",bubbleMultiple:"Bubble chart with {numSeries} data series."},axis:{xAxisDescriptionSingular:"The chart has 1 X axis displaying {names[0]}. {ranges[0]}",xAxisDescriptionPlural:"The chart has {numAxes} X axes displaying {#each(names, -1) }and {names[-1]}.",yAxisDescriptionSingular:"The chart has 1 Y axis displaying {names[0]}. {ranges[0]}",yAxisDescriptionPlural:"The chart has {numAxes} Y axes displaying {#each(names, -1) }and {names[-1]}.",timeRangeDays:"Range: {range} days.",timeRangeHours:"Range: {range} hours.",timeRangeMinutes:"Range: {range} minutes.",timeRangeSeconds:"Range: {range} seconds.",rangeFromTo:"Range: {rangeFrom} to {rangeTo}.",rangeCategories:"Range: {numCategories} categories."},exporting:{chartMenuLabel:"Chart menu",menuButtonLabel:"View chart menu",exportRegionLabel:"Chart menu"},series:{summary:{default:"{name}, series {ix} of {numSeries} with {numPoints} data {#plural(numPoints, points, point)}.",defaultCombination:"{name}, series {ix} of {numSeries} with {numPoints} data {#plural(numPoints, points, point)}.",line:"{name}, line {ix} of {numSeries} with {numPoints} data {#plural(numPoints, points, point)}.",lineCombination:"{name}, series {ix} of {numSeries}. Line with {numPoints} data {#plural(numPoints, points, point)}.",spline:"{name}, line {ix} of {numSeries} with {numPoints} data {#plural(numPoints, points, point)}.",splineCombination:"{name}, series {ix} of {numSeries}. Line with {numPoints} data {#plural(numPoints, points, point)}.",column:"{name}, bar series {ix} of {numSeries} with {numPoints} {#plural(numPoints, bars, bar)}.",columnCombination:"{name}, series {ix} of {numSeries}. Bar series with {numPoints} {#plural(numPoints, bars, bar)}.",bar:"{name}, bar series {ix} of {numSeries} with {numPoints} {#plural(numPoints, bars, bar)}.",barCombination:"{name}, series {ix} of {numSeries}. Bar series with {numPoints} {#plural(numPoints, bars, bar)}.",pie:"{name}, pie {ix} of {numSeries} with {numPoints} {#plural(numPoints, slices, slice)}.",pieCombination:"{name}, series {ix} of {numSeries}. Pie with {numPoints} {#plural(numPoints, slices, slice)}.",scatter:"{name}, scatter plot {ix} of {numSeries} with {numPoints} {#plural(numPoints, points, point)}.",scatterCombination:"{name}, series {ix} of {numSeries}, scatter plot with {numPoints} {#plural(numPoints, points, point)}.",boxplot:"{name}, boxplot {ix} of {numSeries} with {numPoints} {#plural(numPoints, boxes, box)}.",boxplotCombination:"{name}, series {ix} of {numSeries}. Boxplot with {numPoints} {#plural(numPoints, boxes, box)}.",bubble:"{name}, bubble series {ix} of {numSeries} with {numPoints} {#plural(numPoints, bubbles, bubble)}.",bubbleCombination:"{name}, series {ix} of {numSeries}. Bubble series with {numPoints} {#plural(numPoints, bubbles, bubble)}.",map:"{name}, map {ix} of {numSeries} with {numPoints} {#plural(numPoints, areas, area)}.",mapCombination:"{name}, series {ix} of {numSeries}. Map with {numPoints} {#plural(numPoints, areas, area)}.",mapline:"{name}, line {ix} of {numSeries} with {numPoints} data {#plural(numPoints, points, point)}.",maplineCombination:"{name}, series {ix} of {numSeries}. Line with {numPoints} data {#plural(numPoints, points, point)}.",mapbubble:"{name}, bubble series {ix} of {numSeries} with {numPoints} {#plural(numPoints, bubbles, bubble)}.",mapbubbleCombination:"{name}, series {ix} of {numSeries}. Bubble series with {numPoints} {#plural(numPoints, bubbles, bubble)}."},description:"{description}",xAxisDescription:"X axis, {name}",yAxisDescription:"Y axis, {name}",nullPointValue:"No value",pointAnnotationsDescription:"{Annotation: #each(annotations). }"}}}}),i(e,"modules/accessibility/options/deprecatedOptions.js",[e["parts/Utilities.js"]],function(t){var c=t.error,s=t.pick;function u(t,e,i){for(var n,o=t,r=0;r<e.length-1;++r)o=o[n=e[r]]=s(o[n],{});o[e[e.length-1]]=i}function e(n,o,r,s){function t(t,e){return e.reduce(function(t,e){return t[e]},t)}var a=t(n.options,o),l=t(n.options,r);Object.keys(s).forEach(function(t){var e,i=a[t];void 0!==i&&(u(l,s[t],i),c(32,!1,n,((e={})[o.join(".")+"."+t]=r.join(".")+"."+s[t].join("."),e)))})}return function(t){var i,n,o,r,s,a;n=(i=t).options.chart||{},o=i.options.accessibility||{},["description","typeDescription"].forEach(function(t){var e;n[t]&&(o[t]=n[t],c(32,!1,i,((e={})["chart."+t]="use accessibility."+t,e)))}),(r=t).axes.forEach(function(t){var e=t.options;e&&e.description&&(e.accessibility=e.accessibility||{},e.accessibility.description=e.description,c(32,!1,r,{"axis.description":"use axis.accessibility.description"}))}),t.series&&(a={description:["accessibility","description"],exposeElementToA11y:["accessibility","exposeAsGroupOnly"],pointDescriptionFormatter:["accessibility","pointDescriptionFormatter"],skipKeyboardNavigation:["accessibility","keyboardNavigation","enabled"]},(s=t).series.forEach(function(n){Object.keys(a).forEach(function(t){var e,i=n.options[t];void 0!==i&&(u(n.options,a[t],"skipKeyboardNavigation"===t?!i:i),c(32,!1,s,((e={})["series."+t]="series."+a[t].join("."),e)))})})),e(t,["accessibility"],["accessibility"],{pointDateFormat:["point","dateFormat"],pointDateFormatter:["point","dateFormatter"],pointDescriptionFormatter:["point","descriptionFormatter"],pointDescriptionThreshold:["series","pointDescriptionEnabledThreshold"],pointNavigationThreshold:["keyboardNavigation","seriesNavigation","pointNavigationEnabledThreshold"],pointValueDecimals:["point","valueDecimals"],pointValuePrefix:["point","valuePrefix"],pointValueSuffix:["point","valueSuffix"],screenReaderSectionFormatter:["screenReaderSection","beforeChartFormatter"],describeSingleSeries:["series","describeSingleSeries"],seriesDescriptionFormatter:["series","descriptionFormatter"],onTableAnchorClick:["screenReaderSection","onViewDataTableClick"],axisRangeDateFormat:["screenReaderSection","axisRangeDateFormat"]}),e(t,["accessibility","keyboardNavigation"],["accessibility","keyboardNavigation","seriesNavigation"],{skipNullPoints:["skipNullPoints"],mode:["mode"]}),e(t,["lang","accessibility"],["lang","accessibility"],{legendItem:["legend","legendItem"],legendLabel:["legend","legendLabel"],mapZoomIn:["zoom","mapZoomIn"],mapZoomOut:["zoom","mapZoomOut"],resetZoomButton:["zoom","resetZoomButton"],screenReaderRegionLabel:["screenReaderSection","beforeRegionLabel"],rangeSelectorButton:["rangeSelector","buttonText"],rangeSelectorMaxInput:["rangeSelector","maxInputLabel"],rangeSelectorMinInput:["rangeSelector","minInputLabel"],svgContainerEnd:["screenReaderSection","endOfChartMarker"],viewAsDataTable:["table","viewAsDataTableButtonText"],tableSummary:["table","tableSummary"]})}}),i(e,"modules/accessibility/a11y-i18n.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(r,t){var l=t.format,w=t.pick;r.i18nFormat=function(t,e,i){for(var n,o,r=function(t,e){var i=t.slice(e||0),n=i.indexOf("{"),o=i.indexOf("}");if(-1<n&&n<o)return{statement:i.substring(n+1,o),begin:e+n+1,end:e+o}},s=[],a=0;n=r(t,a),(o=t.substring(a,n&&n.begin-1)).length&&s.push({value:o,type:"constant"}),n&&s.push({value:n.statement,type:"statement"}),a=n?n.end+1:a+1,n;);return s.forEach(function(t){"statement"===t.type&&(t.value=function(t,e){var i,n=t.indexOf("#each("),o=t.indexOf("#plural("),r=t.indexOf("["),s=t.indexOf("]");if(-1<n){var a,l,c=t.slice(n).indexOf(")")+n,u=t.substring(0,n),h=t.substring(c+1),d=t.substring(n+6,c).split(","),p=Number(d[1]),m="";if(l=e[d[0]]){a=(p=isNaN(p)?l.length:p)<0?l.length+p:Math.min(p,l.length);for(var g=0;g<a;++g)m+=u+l[g]+h}return m.length?m:""}if(-1<o){var b=t.slice(o).indexOf(")")+o,f=t.substring(o+8,b).split(",");switch(Number(e[f[0]])){case 0:m=w(f[4],f[1]);break;case 1:m=w(f[2],f[1]);break;case 2:m=w(f[3],f[1]);break;default:m=f[1]}return m?(i=m).trim&&i.trim()||i.replace(/^\s+|\s+$/g,""):""}if(-1<r){var y,v=t.substring(0,r),x=Number(t.substring(r+1,s));return l=e[v],!isNaN(x)&&l&&(x<0?void 0===(y=l[l.length+x])&&(y=l[0]):void 0===(y=l[x])&&(y=l[l.length-1])),void 0!==y?y:""}return"{"+t+"}"}(t.value,e))}),l(s.reduce(function(t,e){return t+e.value},""),e,i)},r.Chart.prototype.langFormat=function(t,e){for(var i=t.split("."),n=this.options.lang,o=0;o<i.length;++o)n=n&&n[i[o]];return"string"==typeof n?r.i18nFormat(n,e,this):""}}),i(e,"modules/accessibility/focusBorder.js",[e["parts/Globals.js"],e["parts/SVGElement.js"],e["parts/SVGLabel.js"],e["parts/Utilities.js"]],function(f,t,y,e){var o=e.addEvent,i=e.extend,v=e.pick,x=["x","y","transform","width","height","r","d","stroke-width"];i(t.prototype,{addFocusBorder:function(t,e){this.focusBorder&&this.removeFocusBorder();var i=this.getBBox(),n=v(t,3);i.x+=this.translateX?this.translateX:0,i.y+=this.translateY?this.translateY:0;var o=i.x-n,r=i.y-n,s=i.width+2*n,a=i.height+2*n;var l,c,u,h,d,p,m,g,b=this instanceof y;"text"!==this.element.nodeName&&!b||(l=!!this.rotation,c=b?{x:l?1:0,y:0}:(p=d=0,"middle"===(h=this).attr("text-anchor")?(d=f.isFirefox&&h.rotation?.25:.5,p=f.isFirefox&&!h.rotation?.75:.5):h.rotation?d=.25:p=.75,{x:d,y:p}),o=this.attr("x")-i.width*c.x-n,r=this.attr("y")-i.height*c.y-n,b&&l&&(u=s,s=a,a=u,o=this.attr("x")-i.height*c.x-n,r=this.attr("y")-i.width*c.y-n)),this.focusBorder=this.renderer.rect(o,r,s,a,parseInt((e&&e.borderRadius||0).toString(),10)).addClass("highcharts-focus-border").attr({zIndex:99}).add(this.parentGroup),this.renderer.styledMode||this.focusBorder.attr({stroke:e&&e.stroke,"stroke-width":e&&e.strokeWidth}),function(n){for(var o=[],t=1;t<arguments.length;t++)o[t-1]=arguments[t];n.focusBorderUpdateHooks||(n.focusBorderUpdateHooks={},x.forEach(function(t){var e=t+"Setter",i=n[e]||n._defaultSetter;n.focusBorderUpdateHooks[e]=i,n[e]=function(){var t=i.apply(n,arguments);return n.addFocusBorder.apply(n,o),t}}))}(this,t,e),(m=this).focusBorderDestroyHook||(g=m.destroy,m.destroy=function(){var t,e;return null!==(e=null===(t=m.focusBorder)||void 0===t?void 0:t.destroy)&&void 0!==e&&e.call(t),g.apply(m,arguments)},m.focusBorderDestroyHook=g)},removeFocusBorder:function(){var i,t;(i=this).focusBorderUpdateHooks&&(Object.keys(i.focusBorderUpdateHooks).forEach(function(t){var e=i.focusBorderUpdateHooks[t];e===i._defaultSetter?delete i[t]:i[t]=e}),delete i.focusBorderUpdateHooks),(t=this).focusBorderDestroyHook&&(t.destroy=t.focusBorderDestroyHook,delete t.focusBorderDestroyHook),this.focusBorder&&(this.focusBorder.destroy(),delete this.focusBorder)}}),f.Chart.prototype.renderFocusBorder=function(){var t=this.focusElement,e=this.options.accessibility.keyboardNavigation.focusBorder;t&&(t.removeFocusBorder(),e.enabled&&t.addFocusBorder(e.margin,{stroke:e.style.color,strokeWidth:e.style.lineWidth,borderRadius:e.style.borderRadius}))},f.Chart.prototype.setFocusToElement=function(t,e){var i=this.options.accessibility.keyboardNavigation.focusBorder,n=e||t.element;n&&n.focus&&(n.hcEvents&&n.hcEvents.focusin||o(n,"focusin",function(){}),n.focus(),i.hideBrowserFocusOutline&&(n.style.outline="none")),this.focusElement&&this.focusElement.removeFocusBorder(),this.focusElement=t,this.renderFocusBorder()}}),i(e,"modules/accessibility/accessibility.js",[e["modules/accessibility/utils/chartUtilities.js"],e["parts/Globals.js"],e["modules/accessibility/KeyboardNavigationHandler.js"],e["parts/Options.js"],e["parts/Point.js"],e["parts/Utilities.js"],e["modules/accessibility/AccessibilityComponent.js"],e["modules/accessibility/KeyboardNavigation.js"],e["modules/accessibility/components/LegendComponent.js"],e["modules/accessibility/components/MenuComponent.js"],e["modules/accessibility/components/SeriesComponent/SeriesComponent.js"],e["modules/accessibility/components/ZoomComponent.js"],e["modules/accessibility/components/RangeSelectorComponent.js"],e["modules/accessibility/components/InfoRegionsComponent.js"],e["modules/accessibility/components/ContainerComponent.js"],e["modules/accessibility/high-contrast-mode.js"],e["modules/accessibility/high-contrast-theme.js"],e["modules/accessibility/options/options.js"],e["modules/accessibility/options/langOptions.js"],e["modules/accessibility/options/deprecatedOptions.js"]],function(t,e,i,n,o,r,s,a,l,c,u,h,d,p,m,g,b,f,y,v){var x=n.defaultOptions,w=r.addEvent,A=r.extend,E=r.fireEvent,T=r.merge,C=e.win.document;function S(t){this.init(t)}T(!0,x,f,{accessibility:{highContrastTheme:b},lang:y}),e.A11yChartUtilities=t,e.KeyboardNavigationHandler=i,e.AccessibilityComponent=s,S.prototype={init:function(t){this.chart=t,C.addEventListener&&t.renderer.isSVG?(v(t),this.initComponents(),this.keyboardNavigation=new a(t,this.components),this.update()):t.renderTo.setAttribute("aria-hidden",!0)},initComponents:function(){var e=this.chart,t=e.options.accessibility;this.components={container:new m,infoRegions:new p,legend:new l,chartMenu:new c,rangeSelector:new d,series:new u,zoom:new h},t.customComponents&&A(this.components,t.customComponents);var i=this.components;this.getComponentOrder().forEach(function(t){i[t].initBase(e),i[t].init()})},getComponentOrder:function(){if(!this.components)return[];if(!this.components.series)return Object.keys(this.components);var t=Object.keys(this.components).filter(function(t){return"series"!==t});return["series"].concat(t)},update:function(){var e=this.components,i=this.chart,t=i.options.accessibility;E(i,"beforeA11yUpdate"),i.types=this.getChartTypes(),this.getComponentOrder().forEach(function(t){e[t].onChartUpdate(),E(i,"afterA11yComponentUpdate",{name:t,component:e[t]})}),this.keyboardNavigation.update(t.keyboardNavigation.order),!i.highContrastModeActive&&g.isHighContrastModeActive()&&g.setHighContrastTheme(i),E(i,"afterA11yUpdate",{accessibility:this})},destroy:function(){var t=this.chart||{},e=this.components;Object.keys(e).forEach(function(t){e[t].destroy(),e[t].destroyBase()}),this.keyboardNavigation&&this.keyboardNavigation.destroy(),t.renderTo&&t.renderTo.setAttribute("aria-hidden",!0),t.focusElement&&t.focusElement.removeFocusBorder()},getChartTypes:function(){var e={};return this.chart.series.forEach(function(t){e[t.type]=1}),Object.keys(e)}},e.Chart.prototype.updateA11yEnabled=function(){var t=this.accessibility,e=this.options.accessibility;e&&e.enabled?t?t.update():this.accessibility=t=new S(this):t?(t.destroy&&t.destroy(),delete this.accessibility):this.renderTo.setAttribute("aria-hidden",!0)},w(e.Chart,"render",function(t){this.a11yDirty&&this.renderTo&&(delete this.a11yDirty,this.updateA11yEnabled());var e=this.accessibility;e&&e.getComponentOrder().forEach(function(t){e.components[t].onChartRender()})}),w(e.Chart,"update",function(t){var e=t.options.accessibility;e&&(e.customComponents&&(this.options.accessibility.customComponents=e.customComponents,delete e.customComponents),T(!0,this.options.accessibility,e),this.accessibility&&this.accessibility.destroy&&(this.accessibility.destroy(),delete this.accessibility)),this.a11yDirty=!0}),w(o,"update",function(){this.series.chart.accessibility&&(this.series.chart.a11yDirty=!0)}),["addSeries","init"].forEach(function(t){w(e.Chart,t,function(){this.a11yDirty=!0})}),["update","updatedData","remove"].forEach(function(t){w(e.Series,t,function(){this.chart.accessibility&&(this.chart.a11yDirty=!0)})}),["afterDrilldown","drillupall"].forEach(function(t){w(e.Chart,t,function(){this.accessibility&&this.accessibility.update()})}),w(e.Chart,"destroy",function(){this.accessibility&&this.accessibility.destroy()})}),i(e,"masters/modules/accessibility.src.js",[],function(){})});