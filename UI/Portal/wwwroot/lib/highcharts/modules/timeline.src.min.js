!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/timeline",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,i,s){t.hasOwnProperty(e)||(t[e]=s.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Series/Timeline/TimelinePoint.js",[t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,t,e){const{line:{prototype:{pointClass:s}},pie:{prototype:{pointClass:n}}}=t.seriesTypes,{defined:h,isNumber:p,merge:o,objectEach:c,pick:r}=e;class a extends s{constructor(){super(...arguments),this.options=void 0,this.series=void 0}alignConnector(){const t=this,e=t.series,i=t.dataLabel,s=i.connector,n=i.options||{},o=n.connectorWidth||0,r=t.series.chart,a=s.getBBox(),l={x:a.x+(i.translateX||0),y:a.y+(i.translateY||0)};r.inverted?l.y-=o/2:l.x+=o/2;var d=r.isInsidePlot(l.x,l.y);s[d?"animate":"attr"]({d:t.getConnectorPath()}),s.addClass("highcharts-color-"+t.colorIndex),e.chart.styledMode||s.attr({stroke:n.connectorColor||t.color,"stroke-width":n.connectorWidth,opacity:i[h(i.newOpacity)?"newOpacity":"opacity"]})}drawConnector(){const t=this,{dataLabel:e,series:i}=t;e&&(e.connector||(e.connector=i.chart.renderer.path(t.getConnectorPath()).attr({zIndex:-1}).add(e)),t.series.chart.isInsidePlot(e.x||0,e.y||0)&&t.alignConnector())}getConnectorPath(){const{plotX:t=0,plotY:e=0,series:s,dataLabel:n}=this,o=s.chart,r=s.xAxis.len,a=o.inverted,l=a?"x2":"y2";if(n){var d=n.targetPosition,h=(n.alignAttr||n)[l[0]]<s.yAxis.len/2;let i={x1:t,y1:e,x2:t,y2:(p(d.y)?d:n).y};return a&&(i={x1:e,y1:r-t,x2:d.x||n.x,y2:r-t}),h&&(i[l]+=n[a?"width":"height"]||0),c(i,(t,e)=>{i[e]-=(n.alignAttr||n)[e[0]]}),o.renderer.crispLine([["M",i.x1,i.y1],["L",i.x2,i.y2]],n.options?.connectorWidth||0)}return[]}init(){const t=super.init.apply(this,arguments);return t.name=r(t.name,"Event"),t.y=1,t}isValid(){return null!==this.options.y}setState(){const t=super.setState;this.isNull||t.apply(this,arguments)}setVisible(t,e){const i=this.series;e=r(e,i.options.ignoreHiddenPoint),n.prototype.setVisible.call(this,t,!1),i.processData(),e&&i.chart.redraw()}applyOptions(t,e){return t=i.prototype.optionsToObject.call(this,t),this.userDLOptions=o(this.userDLOptions,t.dataLabels),super.applyOptions(t,e)}}return a}),e(t,"Series/Timeline/TimelineSeriesDefaults.js",[],function(){return{colorByPoint:!0,stickyTracking:!1,ignoreHiddenPoint:!0,legendType:"point",lineWidth:4,tooltip:{headerFormat:'<span style="color:{point.color}">●</span> <span style="font-size: 0.8em"> {point.key}</span><br/>',pointFormat:"{point.description}"},states:{hover:{lineWidthPlus:0}},dataLabels:{enabled:!0,allowOverlap:!0,alternate:!0,backgroundColor:"#ffffff",borderWidth:1,borderColor:"#999999",borderRadius:3,color:"#333333",connectorWidth:1,distance:void 0,formatter:function(){let t;return t=this.series.chart.styledMode?'<span class="highcharts-color-'+this.point.colorIndex+'">● </span>':'<span style="color:'+this.point.color+'">● </span>',t+='<span class="highcharts-strong">'+(this.key||"")+"</span><br/>"+(this.point.label||"")},style:{textOutline:"none",fontWeight:"normal",fontSize:"0.8em"},shadow:!1,verticalAlign:"middle"},marker:{enabledThreshold:0,symbol:"square",radius:6,lineWidth:2,height:15},showInLegend:!1,colorKey:"x",legendSymbol:"rectangle"}}),e(t,"Series/Timeline/TimelineSeries.js",[t["Core/Series/SeriesRegistry.js"],t["Series/Timeline/TimelinePoint.js"],t["Series/Timeline/TimelineSeriesDefaults.js"],t["Core/Utilities.js"]],function(t,e,i,s){var{column:n,line:o}=t.seriesTypes;const{addEvent:r,arrayMax:a,arrayMin:l,defined:d,extend:h,merge:p,pick:x}=s;class c extends o{constructor(){super(...arguments),this.data=void 0,this.options=void 0,this.points=void 0,this.userOptions=void 0,this.visibilityMap=void 0}alignDataLabel(t,e,i,s){const n=this,o=n.chart.inverted,r=n.visibilityMap.filter(t=>!!t),a=n.visiblePointsCount||0,l=r.indexOf(t),d=!l||l===a-1,h=n.options.dataLabels,p=t.userDLOptions||{},c=h.alternate?d?1.5:2:1,u=Math.floor(n.xAxis.len/a),y=e.padding;let f,g,b;t.visible&&(f=Math.abs(p.x||t.options.dataLabels.x),b=o?(g=2*(f-y)-(t.itemHeight||0)/2,{width:x(h.style?.width,.4*n.yAxis.len+"px"),textOverflow:(e.width||0)/g*(e.height||0)/2>u*c?"ellipsis":"none"}):{width:(p.width||h.width||u*c-2*y)+"px"},e.css(b),n.chart.styledMode||e.shadow(h.shadow)),super.alignDataLabel.apply(n,arguments)}bindAxes(){super.bindAxes(),this.xAxis.userOptions.type||(this.xAxis.categories=this.xAxis.hasNames=!0)}distributeDL(){var t=this.options.dataLabels,e=this.chart.inverted;let i=1;if(t){var s=x(t.distance,e?20:100);for(const n of this.points){const o={[e?"x":"y"]:t.alternate&&i%2?-s:s};e&&(o.align=t.alternate&&i%2?"right":"left"),n.options.dataLabels=p(o,n.userDLOptions),i++}}}generatePoints(){super.generatePoints();const i=this.points;for(let t=0,e=i.length;t<e;++t)i[t].applyOptions({x:this.xData[t]},this.xData[t])}getVisibilityMap(){return(this.data.length?this.data:this.userOptions.data||[]).map(t=>!(!t||!1===t.visible||t.isNull)&&t)}getXExtremes(t){const i=this,e=t.filter((t,e)=>i.points[e].isValid()&&i.points[e].visible);return{min:l(e),max:a(e)}}init(){const s=this;super.init.apply(s,arguments),s.eventsToUnbind.push(r(s,"afterTranslate",function(){let t,e=Number.MAX_VALUE;for(const i of s.points)i.isInside=i.isInside&&i.visible,i.visible&&!i.isNull&&(d(t)&&(e=Math.min(e,Math.abs(i.plotX-t))),t=i.plotX);s.closestPointRangePx=e})),s.eventsToUnbind.push(r(s,"drawDataLabels",function(){s.distributeDL()})),s.eventsToUnbind.push(r(s,"afterDrawDataLabels",function(){let t;for(const e of s.points)(t=e.dataLabel)&&(t.animate=function(t){return this.targetPosition&&(this.targetPosition=t),this.renderer.Element.prototype.animate.apply(this,arguments)},t.targetPosition||(t.targetPosition={}),e.drawConnector())})),s.eventsToUnbind.push(r(s.chart,"afterHideOverlappingLabel",function(){for(const t of s.points)t.dataLabel&&t.dataLabel.connector&&t.dataLabel.oldOpacity!==t.dataLabel.newOpacity&&t.alignConnector()}))}markerAttribs(t,e){const i=this,s=i.options.marker,n=t.marker||{},o=n.symbol||s.symbol,r=x(n.width,s.width,i.closestPointRangePx),a=x(n.height,s.height);let l,d,h=0;if(i.xAxis.dateTime)return super.markerAttribs(t,e);e&&(l=s.states[e]||{},d=n.states&&n.states[e]||{},h=x(d.radius,l.radius,h+(l.radiusPlus||0))),t.hasImage=o&&0===o.indexOf("url");e={x:Math.floor(t.plotX)-r/2-h/2,y:t.plotY-a/2-h/2,width:r+h,height:a+h};return i.chart.inverted?{y:e.x&&e.width&&i.xAxis.len-e.x-e.width,x:e.y,width:e.height,height:e.width}:e}processData(){var t=this;let e=0,i;t.visibilityMap=t.getVisibilityMap();for(const s of t.visibilityMap)s&&e++;for(t.visiblePointsCount=e,i=0;i<t.xData.length;i++)t.yData[i]=1;super.processData.call(this,arguments)}}return c.defaultOptions=p(o.defaultOptions,i),h(c.prototype,{drawTracker:n.prototype.drawTracker,pointClass:e,trackerGroups:["markerGroup","dataLabelsGroup"]}),t.registerSeriesType("timeline",c),c}),e(t,"masters/modules/timeline.src.js",[],function(){})});