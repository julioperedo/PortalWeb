"use strict";import EditGlobals from"./EditGlobals.js";import U from"../../Core/Utilities.js";const{merge,createElement,defined}=U;function renderContextButton(e,t){let n;return t.options.contextMenu&&((n=createElement("button",{className:EditGlobals.classNames.contextMenuBtn,onclick:function(){t.onContextBtnClick()}},{"background-image":"url("+t.options.contextMenu.icon+")"},e)).setAttribute("aria-label",t.lang.accessibility.contextMenu.button),n.setAttribute("aria-expanded","false")),n}function renderCollapseHeader(e,t){var{name:t,showToggle:n,onchange:a,isEnabled:l,isNested:s,lang:r}=t,s=createElement("div",{className:EditGlobals.classNames[s?"accordionNestedWrapper":"accordionContainer"]+" "+EditGlobals.classNames.collapsableContentHeader},{},e),e=createElement("div",{className:EditGlobals.classNames.accordionHeader},{},s);const c=createElement("button",{className:EditGlobals.classNames.accordionHeaderBtn},{},e),o=(createElement("span",{textContent:r[t]||t},{},c),n&&renderToggle(e,{enabledOnOffLabels:!0,id:t,name:"",onchange:a,value:l||!1,lang:r}),createElement("span",{className:EditGlobals.classNames.accordionHeaderIcon+" "+EditGlobals.classNames.collapsedElement},{},c)),d=createElement("div",{className:EditGlobals.classNames.accordionContent+" "+EditGlobals.classNames.hiddenElement},{},s);return c.addEventListener("click",function(){d.classList.toggle(EditGlobals.classNames.hiddenElement),o.classList.toggle(EditGlobals.classNames.collapsedElement)}),{outerElement:s,content:d}}function renderSelect(e,a){if(e){a.name&&renderText(e,{title:a.name,isLabel:!0});var l=a.iconsURLPrefix||"",e=createElement("div",{className:EditGlobals.classNames.dropdown+" "+EditGlobals.classNames.collapsableContentHeader},{},e);const c=createElement("button",{className:EditGlobals.classNames.dropdownButton},{},e);var t=createElement("div",{className:EditGlobals.classNames.dropdownButtonContent},{},c),s=(U.find(a.selectOptions,e=>e.name===a.value)||{}).iconURL;let n;s&&(n=createElement("img",{src:l+s,className:EditGlobals.classNames.icon},{},t));var r=createElement("span",{textContent:a.value,id:a.id||""},{},t);const o=createElement("img",{className:EditGlobals.classNames.dropdownIcon+" "+EditGlobals.classNames.collapsedElement,src:l+"dropdown-pointer.svg"},{},c),d=createElement("ul",{className:EditGlobals.classNames.dropdownContent+" "+EditGlobals.classNames.hiddenElement},{},e);c.addEventListener("click",function(){d.classList.toggle(EditGlobals.classNames.hiddenElement),o.classList.toggle(EditGlobals.classNames.collapsedElement)});for(let e=0,t=a.selectOptions.length;e<t;++e)renderSelectElement(merge(a.selectOptions[e]||{},{iconsURLPrefix:l}),d,r,a.id,o,n,a.onchange);return e}}function renderSelectElement(e,t,n,a,l,s,r){const c=e.iconsURLPrefix+e.iconURL;var o=createElement("li",{},{},t);const d=createElement("button",{className:EditGlobals.classNames.customSelectButton},{},o);e.iconURL&&createElement("img",{src:c},{},d),createElement("span",{textContent:e.name||""},{},d),d.addEventListener("click",function(){if(t.classList.add(EditGlobals.classNames.hiddenElement),l.classList.toggle(EditGlobals.classNames.collapsedElement),n.textContent=e.name||"",s&&e.iconURL&&(s.src=c),r)return r(e.name)})}function renderToggle(e,t){if(e){var{value:n,lang:a}=t,l=t.title||t.name;const s=createElement("div",{className:EditGlobals.classNames.toggleContainer},{},e);l&&renderText(s,{title:l}),t.enabledOnOffLabels&&EditRenderer.renderText(s,{title:a.off,className:EditGlobals.classNames.toggleLabels});e=createElement("label",{className:EditGlobals.classNames.toggleWrapper+" "+(t.className||"")},{},s);const r=renderCheckbox(e,n),c=t.onchange,o=(r&&c&&s.addEventListener("click",e=>{c(!r.checked),r.checked=!r.checked}),createElement("span",{className:EditGlobals.classNames.toggleSlider},{},e));return c&&o.addEventListener("click",e=>{e.preventDefault()}),t.enabledOnOffLabels&&EditRenderer.renderText(s,{title:a.on,className:EditGlobals.classNames.toggleLabels}),s}}function renderText(e,t){let n;var a,{title:t,className:l,isLabel:s}=t;return e&&(a=s?{htmlFor:t}:{},n=createElement(s?"label":"div",{className:EditGlobals.classNames.labelText+" "+(l||""),textContent:t,...a},{},e)),n}function renderIcon(e,t){var{icon:n,callback:a}=t;if(e){const l=createElement("div",{onclick:a,className:t.className||""},{},e),s=(l.style["background-image"]="url("+n+")",t.mousedown),r=t.click;return s&&(l.onmousedown=function(){s.apply(this,arguments)}),r&&l.addEventListener("click",function(){r.apply(this,arguments)}),l}}function renderInput(e,t){if(e){t.name&&renderText(e,{title:t.name,isLabel:!0});const n=createElement("input",{type:"text",onclick:t.callback,id:t.id||"",name:t.name||"",value:defined(t.value)&&t.value.toString().replace(/\"/g,"")||""},{},e),a=t.onchange;return a&&n.addEventListener("change",function(e){a(e.target.value)}),n}}function renderTextarea(e,t){if(e){t.name&&renderText(e,{title:t.name,isLabel:!0});const n=createElement("textarea",{id:t.id,name:t.name,value:t.value||""},{},e),a=t.onchange;return a&&n.addEventListener("change",function(e){a(e.target.value)}),n}}function renderCheckbox(e,t){let n;return n=e?createElement("input",{type:"checkbox",checked:!!t},{},e):n}function renderButton(e,t){let n;if(e)return n=createElement("button",{className:EditGlobals.classNames.button+" "+(t.className||""),onclick:t.callback,textContent:t.text},t.style||{},e),t.icon&&(n.style["background-image"]="url("+t.icon+")"),n}function getRendererFunction(e){return{select:renderSelect,toggle:renderToggle,text:renderText,collapse:renderCollapseHeader,icon:renderIcon,contextButton:renderContextButton,input:renderInput,textarea:renderTextarea,checkbox:renderCheckbox,button:renderButton}[e]}const EditRenderer={renderSelect:renderSelect,renderToggle:renderToggle,renderText:renderText,renderCollapseHeader:renderCollapseHeader,renderIcon:renderIcon,renderContextButton:renderContextButton,renderInput:renderInput,renderTextarea:renderTextarea,renderCheckbox:renderCheckbox,renderButton:renderButton,getRendererFunction:getRendererFunction};export default EditRenderer;