import U from"../../Core/Utilities.js";import GUIElement from"../Layout/GUIElement.js";const defined=U["defined"];class ContextDetection{static isGUIElementOnParentEdge(e,t){var o="top"===t||"bottom"===t?e.row.layout.getVisibleRows():"left"===t||"right"===t?e.row.getVisibleCells():[],l=o.length-1;return o[l]===e&&"right"===t||o[l]===e.row&&"bottom"===t||o[0]===e&&"left"===t||o[0]===e.row&&"top"===t}static getContextLevel(e,t,o,l){l=e.getOverlappingLevels(l,t/2),t/=l.length,l=l[l.length-1];let n=e.row.layout.level-Math.floor(o/t);return n=n<l?l:n>e.row.layout.level?e.row.layout.level:n}static getContext(e,t,o){let l;var n=GUIElement.getOffsets(e),{width:r,height:i}=GUIElement.getDimFromOffsets(n),s=t.clientX-n.left,a=t.clientY-n.top,t=-(o=r<2*o?r/2:o)<=s&&s<=o?"left":-o<=s-r&&s-r<=o?"right":"",n=t||(-o<=a&&a<=o?"top":-o<=a-i&&a-i<=o?"bottom":"");switch(n){case"right":l=s-r+o;break;case"left":l=o-s;break;case"top":l=o-a;break;case"bottom":l=a-i+o}const g={cell:e,side:n};return 0!==e.row.layout.level&&n&&ContextDetection.isGUIElementOnParentEdge(e,n)&&defined(l)&&(t=ContextDetection.getContextLevel(e,o,l,n),(n=e.getParentCell(t))&&(g.cell=n)),g}}export default ContextDetection;