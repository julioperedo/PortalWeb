import EditGlobals from"../EditGlobals.js";import U from"../../../Core/Utilities.js";import MenuItem from"./MenuItem.js";import MenuItemBindings from"./MenuItemBindings.js";const{createElement,merge}=U;class Menu{constructor(t,e,i,s){this.parentElement=t,this.isVisible=!1,this.activeItems=[],this.options=e,this.items={},this.editMode=i,s&&(this.parent=s),this.container=this.setContainer()}setContainer(){return createElement("div",{className:EditGlobals.classNames.menu+" "+(this.options.className||"")},{},this.parentElement)}initItems(i,s){var n=this,m=n.options.items||[];let a,o,r,c;for(let t=0,e=m.length;t<e;++t)a="string"==typeof(o=m[t])?i[o]:o.id?i[o.id]:{},(c="string"==typeof o?merge(a,{id:o}):merge(a,o)).id&&(r=new MenuItem(n,c),n.items[r.options.id]=r,s&&(r.activate(),n.activeItems.push(r)))}setActiveItems(i){var s=this;let n;for(let t=0,e=s.activeItems.length;t<e;++t)-1===i.indexOf(s.activeItems[t].options.id)&&s.activeItems[t].deactivate();for(let t=s.activeItems.length=0,e=i.length;t<e;++t)(n=s.items[i[t]])&&(n.isActive?n.update():n.activate(),s.activeItems.push(n))}deactivateActiveItems(){for(let t=0,e=this.activeItems.length;t<e;++t)this.activeItems[t].deactivate()}updateActiveItems(){const i=this.activeItems;for(let t=0,e=i.length;t<e;++t)i[t].update()}destroy(){this.activeItems.length=0,this.container.remove(),this.items={},this.options={}}}Menu.items=MenuItemBindings;export default Menu;