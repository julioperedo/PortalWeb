import EditGlobals from"./EditGlobals.js";import U from"../../Core/Utilities.js";import Menu from"./Menu/Menu.js";const{addEvent,merge}=U;class EditContextMenu extends Menu{constructor(t,e,i,s){if(super(i.board.container,merge(EditContextMenu.defaultOptions,e||{}),i),this.editMode=i,this.options=merge(EditContextMenu.defaultOptions,e||{}),this.container.style.width=this.options.width+"px",super.initItems(EditContextMenu.items),this.options.items){const o=[];for(let t=0,e=this.options.items.length;t<e;++t)"string"==typeof this.options.items[t]?o.push(this.options.items[t]):this.options.items[t].id&&o.push(this.options.items[t].id);this.setActiveItems(o)}this.initEvents()}initEvents(){const e=this;addEvent(document,"click",t=>{t.target!==this.container&&t.target!==e.editMode.tools.contextButtonElement&&!t.target.classList.contains(EditGlobals.classNames.toggleSlider)&&"INPUT"!==t.target.tagName&&this.isVisible&&this.setVisible(!1)})}setVisible(t){const e=this,i=e.editMode.tools.contextButtonElement;e.container&&i&&(t?(e.container.style.display="block",e.isVisible=!0,i.setAttribute("aria-expanded","true")):(e.container.style.display="none",e.isVisible=!1,i.setAttribute("aria-expanded","false")))}updatePosition(t,e,i){var s=this,o=s.options.width||0,o=t?t.offsetLeft-o+t.offsetWidth:e,e=t?t.offsetTop+t.offsetHeight:i;o&&e&&(s.container.style.left=o+"px",s.container.style.top=e+"px")}}EditContextMenu.defaultOptions={enabled:!0,width:150,className:EditGlobals.classNames.contextMenu,itemsClassName:EditGlobals.classNames.contextMenuItem,items:["editMode"]},EditContextMenu.items=merge(Menu.items,{editMode:{id:"editMode",type:"toggle",getValue:function(t){return t.menu.editMode.isActive()},langKey:"editMode",events:{click:function(){this.menu.editMode.onEditModeToggle()}}}});export default EditContextMenu;