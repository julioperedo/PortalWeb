import U from"../../Core/Utilities.js";import Globals from"../Globals.js";const{addEvent,createElement,uniqueKey,objectEach,error}=U;class GUIElement{static getOffsets(e,t){const i={left:0,top:0,right:0,bottom:0};return e.container&&(e=e.container.getBoundingClientRect(),t=t?t.getBoundingClientRect():{left:0,top:0},i.left=e.left-t.left,i.top=e.top-t.top,i.right=e.right-t.left,i.bottom=e.bottom-t.top),i}static getDimFromOffsets(e){return{width:e.right-e.left,height:e.bottom-e.top}}static createElementId(e){return Globals.classNamePrefix+e+"-"+uniqueKey().slice(11)}static getPercentageWidth(e){const t=/^([0-9]{1})[\-\/\.]([0-9]{1,2})$/;let i;var n,o;return t.test(e)?(o=+(n=e.match(t)||[])[1],n=+n[2],i=((i=100*o/n)<=100?i:100)+"%"):-1!==e.indexOf("%")&&(o=parseFloat(e),i=(o<=100?0<=o?o:0:100)+"%"),i}getElementContainer(e){const t=this;let i;var n;return e.render?e.attribs&&!e.attribs.id&&delete e.attribs.id:"string"==typeof e.elementId&&((n=document.getElementById(e.elementId))?t.container=n:error("Element "+e.elementId+" does not exist")),i=e.element instanceof HTMLElement?e.element:createElement("div",e.attribs||{},e.style||{},e.parentContainer),t.removeBindedEventFn=addEvent(i,"bindedGUIElement",function(e){e.guiElement=t,e.stopImmediatePropagation()}),i}destroy(){const i=this;i.removeBindedEventFn&&i.removeBindedEventFn(),i.container&&i.container.parentNode&&i.container.parentNode.removeChild(i.container),objectEach(i,function(e,t){delete i[t]})}getType(){return this.type}changeVisibility(e=!0,t){var i=this.isVisible&&!e||!this.isVisible&&e;this.container&&i&&(this.container.style.display=e?t||"block":"none",this.isVisible=e)}hide(){this.changeVisibility(!1)}show(){this.changeVisibility()}}export default GUIElement;