!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("dashboards/modules/dashboards-plugin",["dashboards"],function(t){return e(t),e.Dashboards=t,e}):e("undefined"!=typeof Dashboards?Dashboards:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,s,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,s),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("DashboardsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Dashboards/Plugins/DataGridSyncHandlers.js",[t["Core/Utilities.js"]],function(t){const n=t["addEvent"];t={emitters:{highlightEmitter:["highlightEmitter",function(){if("DataGrid"===this.type){var{dataGrid:t,board:e}=this;if(e){const i=e["dataCursor"],s=[];if(t)return s.push(n(t.container,"dataGridHover",t=>{var e=this.connector&&this.connector.table;if(e){const s=t.row;t=s.querySelector(`.highcharts-datagrid-cell[data-original-data="${s.dataset.rowXIndex}"]`);i.emitCursor(e,{type:"position",row:parseInt(s.dataset.rowIndex,10),column:t?t.dataset.columnName:void 0,state:"dataGrid.hoverRow"})}})),s.push(n(t.container,"mouseout",()=>{var t=this.connector&&this.connector.table;t&&i.emitCursor(t,{type:"position",state:"dataGrid.hoverOut"})})),function(){s.forEach(t=>t())}}}}]},handlers:{highlightHandler:["highlightHandler",void 0,function(){const s=this["board"],i=t=>{t=t.cursor;if("position"===t.type){var t=t["row"];const e=this["dataGrid"];void 0===t||!e||(t=e.container.querySelector(`.highcharts-datagrid-row[data-row-index="${t}"]`))&&(e.toggleRowHighlight(t),e.hoveredRow=t)}},n=()=>{const t=this["dataGrid"];t&&t.toggleRowHighlight(void 0)},t=()=>{const t=s["dataCursor"];var e;!t||(e=this.connector&&this.connector.table)&&(t.addListener(e.id,"point.mouseOver",i),t.addListener(e.id,"point.mouseOut",n))},e=()=>{const t=s.dataCursor;var e=this.connector&&this.connector.table;e&&(t.addListener(e.id,"point.mouseOver",i),t.addListener(e.id,"point.mouseOut",n))};s&&(t(),this.on("setConnector",()=>e()),this.on("afterSetConnector",()=>t()))}],extremesHandler:function(){const s=this["board"],i=t=>{var t=t.cursor;"position"===t.type&&this.dataGrid&&"number"==typeof t?.row&&(t=t["row"],this.dataGrid.scrollToRow(t))},t=()=>{const t=s["dataCursor"];var e;!t||(e=this.connector&&this.connector.table)&&t.addListener(e.id,"xAxis.extremes.min",i)},e=()=>{var t=this.connector&&this.connector.table;const e=s["dataCursor"];t&&e.removeListener(t.id,"xAxis.extremes.min",i)};s&&(t(),this.on("setConnector",()=>e()),this.on("afterSetConnector",()=>t()))},visibilityHandler:function(){const i=this,s=i["board"],n=t=>{const e=t.cursor,s=i.dataGrid;s&&"position"===e.type&&e.column&&(t=e.column,s.update({columns:{[t]:{show:"series.hide"!==e.state}}}))},t=()=>{const t=s["dataCursor"];var e;!t||(e=this.connector&&this.connector.table)&&(t.addListener(e.id,"series.show",n),t.addListener(e.id,"series.hide",n))},e=()=>{var t=this.connector&&this.connector.table;const e=s["dataCursor"];t&&(e.removeListener(t.id,"series.show",n),e.removeListener(t.id,"series.hide",n))};s&&(t(),this.on("setConnector",()=>e()),this.on("afterSetConnector",()=>t()))}}};return{highlight:{emitter:t.emitters.highlightEmitter,handler:t.handlers.highlightHandler},extremes:{handler:t.handlers.extremesHandler},visibility:{handler:t.handlers.visibilityHandler}}}),e(t,"Dashboards/Plugins/DataGridComponent.js",[t["Dashboards/Components/Component.js"],t["Data/Converters/DataConverter.js"],t["Dashboards/Plugins/DataGridSyncHandlers.js"],t["Core/Utilities.js"]],function(t,r,e,s){const{diffObjects:i,merge:o,uniqueKey:n}=s;class a extends t{static onUpdate(e,t){const s=e.target;if(s){var e=s.closest(".highcharts-datagrid-row"),i=s.closest(".highcharts-datagrid-cell");const n=new r;if(e&&e instanceof HTMLElement&&i&&i instanceof HTMLElement){e=e.dataset.rowIndex,i=i.dataset["columnName"];if(void 0!==e&&void 0!==i){const o=t.table;if(o){let t=n.asGuessedType(s.value);t instanceof Date&&(t=t.toString()),o.setCell(i,parseInt(e,10),t)}}}}}static fromJSON(t,e){var s=t.options,i=JSON.parse(t.options.dataGridOptions||"");const n=new a(e,o(s,{dataGridOptions:i,syncHandlers:a.syncHandlers}));return n.emit({type:"fromJSON",json:t}),n}constructor(t,e){super(t,e=o(a.defaultOptions,e)),this.connectorListeners=[],this.options=e,this.type="DataGrid",this.options.dataGridClassName&&this.contentElement.classList.add(this.options.dataGridClassName),this.options.dataGridID&&(this.contentElement.id=this.options.dataGridID),this.sync=new a.Sync(this,this.syncHandlers),this.dataGridOptions=this.options.dataGridOptions||{},this.innerResizeTimeouts=[],this.on("afterSetConnector",t=>{this.disableEditingModifiedColumns(t.connector)})}onTableChanged(){this.dataGrid&&!this.dataGrid?.cellInputEl&&this.dataGrid.update({dataTable:this.filterColumns()})}disableEditingModifiedColumns(t){t=this.getColumnOptions(t);this.dataGrid?.update({columns:t})}getColumnOptions(t){t=t.options.dataModifier;if(!t||"Math"!==t.type)return{};var s=t.columnFormulas;if(!s)return{};const i={};for(let t=0,e=s.length;t<e;++t){var n=s[t].column;i[n]={editable:!1}}return i}async load(){if(this.emit({type:"load"}),await super.load(),this.connector&&!this.connectorListeners.length){const t=this.connectorListeners;t.push(this.connector.on("afterLoad",t=>{t.table&&this.connector&&this.connector.table.setColumns(t.table.getColumns())})),t.push(this.connector.table.on("afterSetCell",s=>{var e=this.dataGrid;let i=!0;if(e){e=e.rowElements[s.rowIndex];let t=[];(t=e?Array.prototype.slice.call(e.childNodes):t).forEach(t=>{var e;0<t.childElementCount&&(e=t.childNodes[0],e="string"==typeof s.cellValue?e.value:+e.value,t.dataset.columnName===s.columnName&&e===s.cellValue&&(i=!1))})}i&&this.update({})}))}return this.emit({type:"afterLoad"}),this}render(){return super.render(),this.dataGrid||(this.dataGrid=this.constructDataGrid()),this.connector&&this.dataGrid&&this.dataGrid.dataTable.modified!==this.connector.table.modified&&this.dataGrid.update({dataTable:this.filterColumns()}),this.sync.start(),this.emit({type:"afterRender"}),this.setupConnectorUpdate(),this}resize(t,e){this.dataGrid&&super.resize(t,e)}async update(t){if(t.connector?.id!==this.connectorId){const s=this.connectorListeners;for(let t=0,e=s.length;t<e;++t)s[t]();s.length=0}await super.update(t),this.dataGrid&&(this.filterAndAssignSyncOptions(e),this.dataGrid.update(this.options.dataGridOptions||{})),this.emit({type:"afterUpdate"})}constructDataGrid(){var t;if(a.DataGridConstructor)return t=this.connector?this.getColumnOptions(this.connector):{},this.dataGrid=new a.DataGridConstructor(this.contentElement,{...this.options.dataGridOptions,dataTable:this.options.dataGridOptions?.dataTable||this.filterColumns(),columns:o(t,this.options.dataGridOptions?.columns)}),this.dataGrid;throw new Error("DataGrid not connected.")}setupConnectorUpdate(){const{connector:e,dataGrid:t}=this;e&&t&&t.on("cellClick",t=>{"input"in t&&t.input.addEventListener("keyup",t=>this.options.onUpdate(t,e))})}filterColumns(){const t=this.connector?.table.modified,e=this.options.visibleColumns;if(t){if(!e?.length)return t;var s=t.getColumnNames().filter(t=>0<e?.length&&!e.includes(t));const i=t.clone();return i.deleteColumns(s),i}}toJSON(){var t=JSON.stringify(this.options.dataGridOptions),e=super.toJSON(),e={...e,options:{...e.options,dataGridOptions:t}};return this.emit({type:"toJSON",json:e}),e}getOptions(){return{...i(this.options,a.defaultOptions),type:"DataGrid"}}destroy(){this.dataGrid?.containerResizeObserver.disconnect(),super.destroy()}}return a.syncHandlers=e,a.defaultOptions=o(t.defaultOptions,{dataGridClassName:"dataGrid-container",dataGridID:"dataGrid-"+n(),dataGridOptions:{},editableOptions:[{name:"connectorName",propertyPath:["connector","id"],type:"select"}],syncHandlers:e,onUpdate:a.onUpdate}),a}),e(t,"Dashboards/Plugins/DataGridPlugin.js",[t["Dashboards/Plugins/DataGridComponent.js"]],function(s){return{custom:{connectDataGrid:function(t){s.DataGridConstructor=t}},name:"DataGrid.DashboardsPlugin",onRegister:function(t){const e=t["ComponentRegistry"];e.registerComponent("DataGrid",s)},onUnregister:function(t){var{}=t}}}),e(t,"Dashboards/Plugins/HighchartsSyncHandlers.js",[t["Core/Utilities.js"]],function(t){const c=t["addEvent"];function r(t,e){const s=e["ranges"];if(s){e=s.reduce((t,e)=>t=e.minValue>t.minValue?e:t,s[0]),t=t.getRowIndexBy(e.column,e.minValue);if(t)return t}return 0}t={emitters:{highlightEmitter:["highlightEmitter",function(){if("Highcharts"===this.type){const{chart:t,board:e}=this;if(e){const n=e["dataCursor"];return this.on("afterRender",()=>{const i=this.connector&&this.connector.table;t&&t.series&&i&&t.series.forEach(s=>{s.update({point:{events:{mouseOver:function(){let t=0;var e=i.getModifier();e&&"Range"===e.options.type&&(t=r(i,e.options)),n.emitCursor(i,{type:"position",row:t+this.index,column:s.name,state:"point.mouseOver"})},mouseOut:function(){let t=0;var e=i.getModifier();e&&"Range"===e.options.type&&(t=r(i,e.options)),n.emitCursor(i,{type:"position",row:t+this.index,column:s.name,state:"point.mouseOut"})}}}})})}),function(){t&&t.series&&t.series.forEach(t=>{t.update({point:{events:{mouseOver:void 0,mouseOut:void 0}}})})}}}}],seriesVisibilityEmitter:function(){if("Highcharts"===this.type){const r=this;return this.on("afterRender",()=>{var{chart:t,connector:e,board:s}=r;const i=e&&e.table;if(i&&s&&t){const n=s["dataCursor"],o=t["series"];o.forEach(t=>{t.update({events:{show:function(){n.emitCursor(i,{type:"position",state:"series.show",column:this.name})},hide:function(){n.emitCursor(i,{type:"position",state:"series.hide",column:this.name})}}})})}})}},extremesEmitter:function(){if("Highcharts"===this.type){const r=this,h=[];return this.on("afterRender",()=>{const{chart:t,connector:e,board:s}=r,a=e&&e.table,l=s["dataCursor"];if(a&&t){const i=t=>{var e=!!t.resetSelection;if((!t.trigger||t.trigger&&"dashboards-sync"!==t.trigger)&&!e){const i=t.target;e=i.series.filter(t=>a.hasColumns([t.name]));const[n]=e.length?e:i.series;if(n){var s=n.points.filter(t=>t.isInside||!1);const o={type:"position",state:i.coll+".extremes.min"},r={type:"position",state:i.coll+".extremes.max"};e.length&&"xAxis"===i.coll&&s.length&&(e=i.dateTime&&a.hasColumns(["x"])?"x":n.name,o.row=s[0].index,o.column=e,r.row=s[s.length-1].index,r.column=e),l.emitCursor(a,o,t,!0).emitCursor(a,r,t,!0)}}},n=()=>t.axes.map(t=>c(t,"afterSetExtremes",i));let e=n();const o=()=>{e.forEach(t=>{t()}),e=[]};h.push(c(t,"selection",t=>{t.resetSelection&&(o(),l.emitCursor(a,{type:"position",state:"chart.zoomOut"},t),e.push(...n()))})),h.push(()=>{l.remitCursor(a.id,{type:"position",state:"xAxis.extremes.min"}),l.remitCursor(a.id,{type:"position",state:"xAxis.extremes.max"}),o()})}}),function(){h.forEach(t=>t())}}}},handlers:{seriesVisibilityHandler:function(){const i=this,s=this["board"],n=(t,e)=>{for(const s of t)if(s.name===e)return s},o=t=>{var e=i.chart;if(e&&"position"===t.cursor.type&&void 0!==t.cursor.column){const s=n(e.series,t.cursor.column);s&&s.setVisible(!0,!0)}},r=t=>{var e=i.chart;if(e&&"position"===t.cursor.type&&void 0!==t.cursor.column){const s=n(e.series,t.cursor.column);s&&s.setVisible(!1,!0)}},t=()=>{const t=s["dataCursor"];var e;!t||(e=this.connector&&this.connector.table)&&(t.addListener(e.id,"series.show",o),t.addListener(e.id,"series.hide",r))},e=()=>{var t=this.connector&&this.connector.table;t&&(s.dataCursor.removeListener(t.id,"series.show",o),s.dataCursor.removeListener(t.id,"series.hide",r))};s&&(t(),this.on("setConnector",()=>e()),this.on("afterSetConnector",()=>t()))},highlightHandler:function(){const{chart:o,board:s}=this,i=e=>{const s=this.connector&&this.connector.table;if(s){let t=0;var i=s.getModifier();if(i&&"Range"===i.options.type&&(t=r(s,i.options)),o&&o.series.length){const n=e.cursor;"position"===n.type&&([i]=1<o.series.length&&n.column?o.series.filter(t=>t.name===n.column):o.series,i&&i.visible&&void 0!==n.row&&((e=i.points[n.row-t])&&o.tooltip&&o.tooltip.refresh(e)))}}},n=()=>{o&&o.series.length&&o.tooltip&&o.tooltip.hide()},t=()=>{const t=s["dataCursor"];var e;t&&(e=this.connector&&this.connector.table)&&(t.addListener(e.id,"point.mouseOver",i),t.addListener(e.id,"dataGrid.hoverRow",i),t.addListener(e.id,"point.mouseOut",n),t.addListener(e.id,"dataGrid.hoverOut",n))},e=()=>{var t=this.connector&&this.connector.table;t&&(s.dataCursor.removeListener(t.id,"point.mouseOver",i),s.dataCursor.removeListener(t.id,"dataGrid.hoverRow",i),s.dataCursor.removeListener(t.id,"point.mouseOut",n),s.dataCursor.removeListener(t.id,"dataGrid.hoverOut",n))};s&&(t(),this.on("setConnector",()=>e()),this.on("afterSetConnector",()=>t()))},extremesHandler:function(){const{chart:a,board:l}=this;if(a&&l&&a.zooming?.type){const t=a.zooming.type.split("").map(t=>t+"Axis");t.forEach(n=>{const o=[],r=t=>{var{cursor:t,event:e}=t;if("position"===t.type){const s=e&&e.target;if(s&&a){const i=a[n];let e=!1;i.forEach(t=>{s.coll!==t.coll||s===t||null===s.min||null===s.max||t.max===s.max&&t.min===s.min||(t.setExtremes(s.min,s.max,!1,void 0,{trigger:"dashboards-sync"}),e=!0)}),e&&!a.resetZoomButton&&a.showResetZoom(),a.redraw()}}},t=()=>{const t=l["dataCursor"];var e=this["connector"];if(e){const s=e["table"],i=(t.addListener(s.id,n+".extremes.min",r),t.addListener(s.id,n+".extremes.max",r),()=>{a.zoomOut(),setTimeout(()=>{const t=this.element.querySelectorAll(".highcharts-reset-zoom");t.forEach(t=>{t.remove()})})});t.addListener(s.id,"chart.zoomOut",i),o.push(()=>{t.removeListener(s.id,n+".extremes.min",r),t.removeListener(s.id,n+".extremes.max",r),t.removeListener(s.id,"chart.zoomOut",i)})}};l&&(t(),this.on("setConnector",()=>{o.forEach(t=>t())}),this.on("afterSetConnector",()=>t()))})}}}};return{extremes:{emitter:t.emitters.extremesEmitter,handler:t.handlers.extremesHandler},highlight:{emitter:t.emitters.highlightEmitter,handler:t.handlers.highlightHandler},visibility:{emitter:t.emitters.seriesVisibilityEmitter,handler:t.handlers.seriesVisibilityHandler}}}),e(t,"Dashboards/Plugins/HighchartsComponent.js",[t["Dashboards/Components/Component.js"],t["Data/Converters/DataConverter.js"],t["Data/DataTable.js"],t["Dashboards/Globals.js"],t["Dashboards/Plugins/HighchartsSyncHandlers.js"],t["Core/Utilities.js"]],function(t,a,o,s,i,e){const{addEvent:n,createElement:r,error:l,diffObjects:h,isString:c,merge:d,splat:u,uniqueKey:p}=e;class m extends t{static fromJSON(t,e){var s=t.options,i=JSON.parse(t.options.chartOptions||"{}");const n=new m(e,d(s,{chartOptions:i,syncHandlers:m.syncHandlers}));return n.emit({type:"fromJSON",json:t}),n}constructor(t,e){super(t,e=d(m.defaultOptions,e)),this.options=e,this.chartConstructor=this.options.chartConstructor,this.type="Highcharts",this.chartContainer=r("figure",void 0,void 0,this.contentElement,!0),this.setOptions(),this.sync=new m.Sync(this,this.syncHandlers),this.chartOptions=d(this.options.chartOptions||{chart:{}},{tooltip:{}}),this.connector&&this.connector.on("afterLoad",t=>{t.table&&this.connector&&this.connector.table.setColumns(t.table.getColumns())}),this.innerResizeTimeouts=[]}onTableChanged(){this.updateSeries()}async load(){return this.emit({type:"load"}),await super.load(),this.emit({type:"afterLoad"}),this}render(){var t=this;return super.render(),t.chart=t.getChart(),t.updateSeries(),this.sync.start(),t.emit({type:"afterRender"}),t.setupConnectorUpdate(),this}resize(t,e){for(super.resize(t,e);this.innerResizeTimeouts.length;){var s=this.innerResizeTimeouts.pop();s&&clearTimeout(s)}return this.innerResizeTimeouts.push(setTimeout(()=>{this.chart&&this.chart.setSize(null,this.contentElement.clientHeight,!1)},33)),this}setupConnectorUpdate(){const{connector:e,chart:t}=this;e&&t&&this.options.allowConnectorUpdate&&t.series.forEach(t=>{t.points.forEach(t=>{n(t,"drag",()=>{this.onChartUpdate(t,e)})})})}setOptions(){this.options.chartClassName&&this.chartContainer.classList.add(this.options.chartClassName),this.options.chartID&&(this.chartContainer.id=this.options.chartID)}onChartUpdate(t,e){const s=e.table,i=t.series.name,n=t.index,o=new a,r=o.asNumber(t.y);s.setCell(i,n,r)}async update(t,e=!0){await super.update(t,!1),this.setOptions(),this.filterAndAssignSyncOptions(i),this.chart&&this.chart.update(d(this.options.chartOptions)||{}),this.emit({type:"afterUpdate"}),e&&this.render()}updateSeries(){if(this.chart&&this.connector){this.presentationTable=this.presentationModifier?this.connector.table.modified.clone():this.connector.table;const a=this.connector.table["id"],l=this["chart"],i=(this.presentationModifier&&(this.presentationTable=this.presentationModifier.modifyTable(this.presentationTable).modified),this.presentationTable),h=i.getModifier()?.options;var t=i.modified.getColumnNames();const e=this.options.columnAssignment||this.getDefaultColumnAssignment(t),n={},c=(this.emit({type:"afterPresentationModifier",table:i}),i.modified.getColumnNames().filter(t=>{return!(this.activeGroup&&!1===this.activeGroup.getSharedState().getColumnVisibility(t)||!e[t])&&("x"!==e[t]||(n[t]=t,!1))})),s=c.map((e,t)=>{let s=0;for(;s<l.series.length;){const r=l.series[s];var i=r.options.id===a+"-series-"+t,n=-1!==c.indexOf(r.name);if(s++,n&&i)return r;!n&&i&&r.destroy()}var o=!("Math"===h?.type&&h.columnFormulas?.some(t=>t.column===e));return l.addSeries({name:e,id:a+"-series-"+t,dragDrop:{draggableY:o}},!1)});s.forEach(t=>{var e=Object.keys(n)[0];const s=new o({columns:i.modified.getColumns([e,t.name])});s.renameColumn(t.name,"y"),e&&s.renameColumn(e,"x");e=s.getRowObjects().reduce((t,e)=>(t.push([e.x,e.y]),t),[]);t.setData(e)})}}getChart(){return this.chart||this.createChart()}getDefaultColumnAssignment(s=[]){const i={};for(let t=0,e=s.length;t<e;++t){var n;i[s[t]]="y",0!==t||(n=this.presentationTable?.getColumn(s[t],!0))&&c(n[0])&&(i[s[t]]="x")}return i}createChart(){const t=m.charter||s.win.Highcharts;if("chart"!==this.chartConstructor){const e=t[this.chartConstructor];if(e)try{return e(this.chartContainer,this.chartOptions)}catch{l("The Highcharts component is misconfigured: `"+this.cell.id+"`")}}if("function"!=typeof t.chart)throw new Error("Chart constructor not found");return this.chart=t.chart(this.chartContainer,this.chartOptions),this.chart}registerChartEvents(){if(this.chart&&this.chart.options){const e=this.chart.options,t=["chart","series","yAxis","xAxis","colorAxis","annotations","navigation"].map(i=>{let t=e[i]||{};return(t=!Array.isArray(t)&&t.events?[t]:t)&&"object"==typeof t&&Array.isArray(t)&&t.reduce((t,e,s)=>(e&&e.events&&(t[e.id||i+"-"+s]=e.events),t),{})||{}});t.forEach(t=>{Object.keys(t).forEach(e=>{const s=t[e];Object.keys(s).forEach(t=>{this.callbackRegistry.addCallback(e+"-"+t,{type:"seriesEvent",func:s[t]})})})})}}setConnector(t){var e=this.chart;if(this.connector&&e&&e.series&&this.connector.table.id!==t?.table.id){var s=this.connector.table.id;for(let t=e.series.length-1;0<=t;t--){const i=e.series[t];-1!==i.options.id?.indexOf(s)&&i.remove(!1)}}return super.setConnector(t),this}toJSON(){var t=JSON.stringify(this.options.chartOptions),e=this.options.chartConstructor,s=(this.registerChartEvents(),super.toJSON()),s={...s,type:"Highcharts",options:{...s.options,chartOptions:t,chartConstructor:e,type:"Highcharts",sync:{}}};return this.emit({type:"toJSON",json:s}),s}getOptions(){return{...h(this.options,m.defaultOptions),type:"Highcharts"}}getEditableOptions(){var t=this.options,e=this.chart,s=e&&e.options,i=s&&s.chart?.type||"line";return d(t,{chartOptions:s},{chartOptions:{yAxis:u(e&&e.yAxis[0].options),xAxis:u(e&&e.xAxis[0].options),plotOptions:{series:(s&&s.plotOptions||{})[i]}}})}getEditableOptionValue(t){if(t)return 1===t.length&&"chartOptions"===t[0]?JSON.stringify(this.options.chartOptions,null,2):super.getEditableOptionValue.call(this,t)}}return m.syncHandlers=i,m.defaultOptions=d(t.defaultOptions,{allowConnectorUpdate:!0,className:[t.defaultOptions.className,t.defaultOptions.className+"-highcharts"].join(" "),chartClassName:"chart-container",chartID:"chart-"+p(),chartOptions:{chart:{styledMode:!0,zooming:{mouseWheel:{enabled:!1}}},series:[]},chartConstructor:"",editableOptions:(t.defaultOptions.editableOptions||[]).concat([{name:"chartOptions",type:"nested",nestedOptions:[{name:"chart",options:[{name:"title",propertyPath:["chartOptions","title","text"],type:"input"},{name:"subtitle",propertyPath:["chartOptions","subtitle","text"],type:"input"},{name:"type",propertyPath:["chartOptions","chart","type"],type:"select",selectOptions:[{name:"column",iconURL:"series-types/icon-column.svg"},{name:"line",iconURL:"series-types/icon-line.svg"},{name:"scatter",iconURL:"series-types/icon-scatter.svg"},{name:"pie",iconURL:"series-types/icon-pie.svg"}]}]},{name:"xAxis",options:[{name:"title",propertyPath:["chartOptions","xAxis","title","text"],type:"input"},{name:"type",propertyPath:["chartOptions","xAxis","type"],type:"select",selectOptions:[{name:"linear"},{name:"datetime"},{name:"logarithmic"}]}]},{name:"yAxis",options:[{name:"title",propertyPath:["chartOptions","yAxis","title","text"],type:"input"},{name:"type",propertyPath:["chartOptions","yAxis","type"],type:"select",selectOptions:[{name:"linear"},{name:"datetime"},{name:"logarithmic"}]}]},{name:"legend",showToggle:!0,propertyPath:["chartOptions","legend","enabled"],options:[{name:"align",propertyPath:["chartOptions","legend","align"],type:"select",selectOptions:[{name:"left"},{name:"center"},{name:"right"}]}]},{name:"tooltip",showToggle:!0,propertyPath:["chartOptions","tooltip","enabled"],options:[{name:"split",propertyPath:["chartOptions","tooltip","split"],type:"toggle"}]},{name:"dataLabels",propertyPath:["chartOptions","plotOptions","series","dataLabels","enabled"],showToggle:!0,options:[{name:"align",propertyPath:["chartOptions","plotOptions","series","dataLabels","align"],type:"select",selectOptions:[{name:"left"},{name:"center"},{name:"right"}]}]},{name:"credits",showToggle:!0,propertyPath:["chartOptions","credits","enabled"],options:[{name:"name",propertyPath:["chartOptions","credits","text"],type:"input"},{name:"url",propertyPath:["chartOptions","credits","href"],type:"input"}]}]},{name:"chartConfig",propertyPath:["chartOptions"],type:"textarea"},{name:"chartClassName",propertyPath:["chartClassName"],type:"input"},{name:"chartID",propertyPath:["chartID"],type:"input"}]),syncHandlers:i,editableOptionsBindings:d(t.defaultOptions.editableOptionsBindings,{skipRedraw:["chartOptions","chartConfig"]}),columnAssignment:void 0}),m}),e(t,"Core/Chart/ChartDefaults.js",[],function(){return{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{},position:{}},reflow:!0,type:"line",zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"}}),e(t,"Core/Color/Palettes.js",[],function(){return{colors:["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"]}}),e(t,"Core/Time.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(m,t){const n=m["win"],{defined:b,error:o,extend:C,isObject:e,merge:s,objectEach:f,pad:g,pick:v,splat:i,timeUnits:O}=t,r=m.isSafari&&n.Intl&&n.Intl.DateTimeFormat.prototype.formatRange,h=m.isSafari&&n.Intl&&!n.Intl.DateTimeFormat.prototype.formatRange;return class{constructor(t){this.options={},this.useUTC=!1,this.variableTimezone=!1,this.Date=n.Date,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.update(t)}get(t,e){var s,i;return this.variableTimezone||this.timezoneOffset?(i=(s=e.getTime())-this.getTimezoneOffset(e),e.setTime(i),i=e["getUTC"+t](),e.setTime(s),i):this.useUTC?e["getUTC"+t]():e["get"+t]()}set(t,e,s){if(this.variableTimezone||this.timezoneOffset){if("Milliseconds"===t||"Seconds"===t||"Minutes"===t&&this.getTimezoneOffset(e)%36e5==0)return e["setUTC"+t](s);var i=this.getTimezoneOffset(e),i=e.getTime()-i,n=(e.setTime(i),e["setUTC"+t](s),this.getTimezoneOffset(e)),i=e.getTime()+n;return e.setTime(i)}return this.useUTC||r&&"FullYear"===t?e["setUTC"+t](s):e["set"+t](s)}update(t={}){var e=v(t.useUTC,!0);this.options=t=s(!0,this.options,t),this.Date=t.Date||n.Date||Date,this.useUTC=e,this.timezoneOffset=e&&t.timezoneOffset||void 0,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.variableTimezone=e&&!(!t.getTimezoneOffset&&!t.timezone)}makeTime(t,e,s,i,n,o){let r,a,l;return this.useUTC?(r=this.Date.UTC.apply(0,arguments),a=this.getTimezoneOffset(r),r+=a,a!==(l=this.getTimezoneOffset(r))?r+=l-a:a-36e5!==this.getTimezoneOffset(r-36e5)||h||(r-=36e5)):r=new this.Date(t,e,v(s,1),v(i,0),v(n,0),v(o,0)).getTime(),r}timezoneOffsetFunction(){const t=this,e=this.options,s=e.getTimezoneOffset,i=e.moment||n.moment;if(!this.useUTC)return function(t){return 6e4*new Date(t.toString()).getTimezoneOffset()};if(e.timezone){if(i)return function(t){return 6e4*-i.tz(t,e.timezone).utcOffset()};o(25)}return this.useUTC&&s?function(t){return 6e4*s(t.valueOf())}:function(){return 6e4*(t.timezoneOffset||0)}}dateFormat(s,i,t){if(!b(i)||isNaN(i))return m.defaultOptions.lang&&m.defaultOptions.lang.invalidDate||"";s=v(s,"%Y-%m-%d %H:%M:%S");const n=this,e=new this.Date(i),o=this.get("Hours",e),r=this.get("Day",e),a=this.get("Date",e),l=this.get("Month",e),h=this.get("FullYear",e),c=m.defaultOptions.lang,d=c&&c.weekdays,u=c&&c.shortWeekdays,p=C({a:u?u[r]:d[r].substr(0,3),A:d[r],d:g(a),e:g(a,2," "),w:r,b:c.shortMonths[l],B:c.months[l],m:g(l+1),o:l+1,y:h.toString().substr(2,2),Y:h,H:g(o),k:o,I:g(o%12||12),l:o%12||12,M:g(this.get("Minutes",e)),p:o<12?"AM":"PM",P:o<12?"am":"pm",S:g(this.get("Seconds",e)),L:g(Math.floor(i%1e3),3)},m.dateFormats);return f(p,function(t,e){for(;-1!==s.indexOf("%"+e);)s=s.replace("%"+e,"function"==typeof t?t.call(n,i):t)}),t?s.substr(0,1).toUpperCase()+s.substr(1):s}resolveDTLFormat(t){return e(t,!0)?t:{main:(t=i(t))[0],from:t[1],to:t[2]}}getTimeTicks(t,e,s,i){const n=this,o=n.Date,r=[],a={},l=new o(e),h=t.unitRange,c=t.count||1;let d,u,p,m;if(i=v(i,1),b(e)){n.set("Milliseconds",l,h>=O.second?0:c*Math.floor(n.get("Milliseconds",l)/c)),h>=O.second&&n.set("Seconds",l,h>=O.minute?0:c*Math.floor(n.get("Seconds",l)/c)),h>=O.minute&&n.set("Minutes",l,h>=O.hour?0:c*Math.floor(n.get("Minutes",l)/c)),h>=O.hour&&n.set("Hours",l,h>=O.day?0:c*Math.floor(n.get("Hours",l)/c)),h>=O.day&&n.set("Date",l,h>=O.month?1:Math.max(1,c*Math.floor(n.get("Date",l)/c))),h>=O.month&&(n.set("Month",l,h>=O.year?0:c*Math.floor(n.get("Month",l)/c)),u=n.get("FullYear",l)),h>=O.year&&(u-=u%c,n.set("FullYear",l,u)),h===O.week&&(m=n.get("Day",l),n.set("Date",l,n.get("Date",l)-m+i+(m<i?-7:0))),u=n.get("FullYear",l);var f=n.get("Month",l),g=n.get("Date",l),y=n.get("Hours",l);e=l.getTime(),!n.variableTimezone&&n.useUTC||!b(s)||(p=s-e>4*O.month||n.getTimezoneOffset(e)!==n.getTimezoneOffset(s));let t=l.getTime();for(d=1;t<s;)r.push(t),h===O.year?t=n.makeTime(u+d*c,0):h===O.month?t=n.makeTime(u,f+d*c):!p||h!==O.day&&h!==O.week?p&&h===O.hour&&1<c?t=n.makeTime(u,f,g,y+d*c):t+=h*c:t=n.makeTime(u,f,g+d*c*(h===O.day?1:7)),d++;r.push(t),h<=O.hour&&r.length<1e4&&r.forEach(function(t){t%18e5==0&&"000000000"===n.dateFormat("%H%M%S%L",t)&&(a[t]="day")})}return r.info=C(t,{higherRanks:a,totalRange:h*c}),r}getDateFormat(t,e,s,i){const n=this.dateFormat("%m-%d %H:%M:%S.%L",e),o="01-01 00:00:00.000",r={millisecond:15,second:12,minute:9,hour:6,day:3};let a="millisecond",l=a;for(a in O){if(t===O.week&&+this.dateFormat("%w",e)===s&&n.substr(6)===o.substr(6)){a="week";break}if(O[a]>t){a=l;break}if(r[a]&&n.substr(r[a])!==o.substr(r[a]))break;"week"!==a&&(l=a)}return this.resolveDTLFormat(i[a]).main}}}),e(t,"Core/Defaults.js",[t["Core/Chart/ChartDefaults.js"],t["Core/Globals.js"],t["Core/Color/Palettes.js"],t["Core/Time.js"],t["Core/Utilities.js"]],function(t,e,s,i,n){var{isTouchDevice:o,svg:r}=e;const a=n["merge"],l={colors:s.colors,symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{},time:{Date:void 0,getTimezoneOffset:void 0,timezone:void 0,timezoneOffset:0,useUTC:!0},chart:t,title:{style:{color:"#333333",fontWeight:"bold"},text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{style:{color:"#666666",fontSize:"0.8em"},text:"",align:"center",widthAdjust:-44},caption:{margin:15,style:{color:"#666666",fontSize:"0.8em"},text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:r,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %e %b, %H:%M:%S.%L",second:"%A, %e %b, %H:%M:%S",minute:"%A, %e %b, %H:%M",hour:"%A, %e %b, %H:%M",day:"%A, %e %b %Y",week:"Week from %A, %e %b %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,shape:"callout",shared:!1,snap:o?25:10,headerFormat:'<span style="font-size: 0.8em">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",borderWidth:void 0,shadow:!0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}},h=(l.chart.styledMode=!1,new i(l.time));return{defaultOptions:l,defaultTime:h,getOptions:function(){return l},setOptions:function(t){return a(!0,l,t),(t.time||t.global)&&(e.time?e.time.update(a(l.global,l.time,t.global,t.time)):e.time=h),l}}}),e(t,"Core/Templating.js",[t["Core/Defaults.js"],t["Core/Utilities.js"]],function(t,e){const{defaultOptions:v,defaultTime:d}=t,{extend:n,getNestedProperty:O,isArray:o,isNumber:p,isObject:r,pick:x,pInt:m}=e,w={add:(t,e)=>t+e,divide:(t,e)=>0!==e?t/e:"",eq:(t,e)=>t==e,each:function(s){const i=arguments[arguments.length-1];return!!o(s)&&s.map((t,e)=>S(i.body,n(r(t)?t:{"@this":t},{"@index":e,"@first":0===e,"@last":e===s.length-1}))).join("")},ge:(t,e)=>e<=t,gt:(t,e)=>e<t,if:t=>!!t,le:(t,e)=>t<=e,lt:(t,e)=>t<e,multiply:(t,e)=>t*e,ne:(t,e)=>t!=e,subtract:(t,e)=>t-e,unless:t=>!t};function S(u="",p,t){const e=/\{([a-zA-Z0-9\:\.\,;\-\/<>%_@"'= #\(\)]+)\}/g,s=/\(([a-zA-Z0-9\:\.\,;\-\/<>%_@"'= ]+)\)/g,i=[],m=/f$/,f=/\.([0-9])/,g=v.lang,y=t&&t.time||d,b=t&&t.numberFormatter||T,C=(t="")=>{let e;return"true"===t||"false"!==t&&((e=Number(t)).toString()===t?e:O(t,p))};let n,o,r=0,a;for(;null!==(n=e.exec(u));){var l,h=s.exec(n[1]),c=(h&&(n=h,a=!0),o&&o.isBlock||(o={ctx:p,expression:n[1],find:n[0],isBlock:"#"===n[1].charAt(0),start:n.index,startInner:n.index+n[0].length,length:n[0].length}),n[1].split(" ")[0].replace("#","")),c=(w[c]&&(o.isBlock&&c===o.fn&&r++,o.fn||(o.fn=c)),"else"===n[1]);if(o.isBlock&&o.fn&&(n[1]==="/"+o.fn||c)?r?c||r--:(l=o.startInner,l=u.substr(l,n.index-l),void 0===o.body?(o.body=l,o.startInner=n.index+n[0].length):o.elseBody=l,o.find+=l+n[0],c||(i.push(o),o=void 0)):o.isBlock||i.push(o),h&&!o?.isBlock)break}return i.forEach(t=>{const{body:e,elseBody:s,expression:i,fn:n}=t;let o,r;if(n){const l=[t],h=i.split(" ");for(r=w[n].length;r--;)l.unshift(C(h[r+1]));o=w[n].apply(p,l),t.isBlock&&"boolean"==typeof o&&(o=S(o?e:s,p))}else{const c=i.split(":");if(o=C(c.shift()||""),c.length&&"number"==typeof o){const d=c.join(":");var a;m.test(d)?(a=parseInt((d.match(f)||["","-1"])[1],10),null!==o&&(o=b(o,a,g.decimalPoint,-1<d.indexOf(",")?g.thousandsSep:""))):o=y.dateFormat(d,o)}}u=u.replace(t.find,x(o,""))}),a?S(u,p,t):u}function T(t,e,s,i){t=+t||0,e=+e;let n,o;const r=v.lang,a=(t.toString().split(".")[1]||"").split("e")[0].length,l=t.toString().split("e"),h=e,c=(-1===e?e=Math.min(a,20):p(e)?e&&l[1]&&l[1]<0&&(0<=(o=e+ +l[1])?(l[0]=(+l[0]).toExponential(o).split("e")[0],e=o):(l[0]=l[0].split(".")[0]||0,t=e<20?(l[0]*Math.pow(10,l[1])).toFixed(e):0,l[1]=0)):e=2,(Math.abs(l[1]?l[0]:t)+Math.pow(10,-Math.max(e,a)-1)).toFixed(e)),d=String(m(c));var u=3<d.length?d.length%3:0;return s=x(s,r.decimalPoint),i=x(i,r.thousandsSep),n=t<0?"-":"",n+=u?d.substr(0,u)+i:"",+l[1]<0&&!h?n="0":n+=d.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+i),e&&(n+=s+c.slice(-e)),l[1]&&0!=+n&&(n+="e"+l[1]),n}return{dateFormat:function(t,e,s){return d.dateFormat(t,e,s)},format:S,helpers:w,numberFormat:T}}),e(t,"Dashboards/Plugins/KPISyncHandlers.js",[t["Core/Utilities.js"]],function(t){const n=t["defined"];return{extremes:{handler:{emitters:{},handlers:{extremesHandler:function(){const s=this["board"],i=t=>{var t=t.cursor;"position"===t.type&&"number"==typeof t?.row&&n(t.column)&&this.connector&&!n(this.options.value)&&(t=this.connector.table.modified.getCellAsString(t.column,t.row),this.setValue(t))},t=()=>{const t=s["dataCursor"];var e;!t||(e=this.connector&&this.connector.table)&&t.addListener(e.id,"xAxis.extremes.max",i)},e=()=>{var t=this.connector&&this.connector.table;const e=s["dataCursor"];t&&e.removeListener(t.id,"xAxis.extremes.max",i)};s&&(t(),this.on("setConnector",()=>e()),this.on("afterSetConnector",()=>t()))}}}.handlers.extremesHandler}}}),e(t,"Dashboards/Plugins/KPIComponent.js",[t["Core/Renderer/HTML/AST.js"],t["Dashboards/Components/Component.js"],t["Core/Templating.js"],t["Dashboards/Plugins/KPISyncHandlers.js"],t["Core/Utilities.js"]],function(n,e,t,s,i){const o=t["format"],{createElement:r,css:a,defined:l,isArray:h,isNumber:c,merge:d,diffObjects:u}=i;class p extends e{static fromJSON(t,e){var t=t.options,s=t.chartOptions&&JSON.parse(t.chartOptions),i=JSON.parse(t.subtitle||"{}"),n=t.title&&JSON.parse(t.title);return new p(e,d(t,{chartOptions:s,title:n,subtitle:i}))}constructor(t,e){super(t,e=d(p.defaultOptions,e)),this.options=e,this.type="KPI",this.sync=new p.Sync(this,this.syncHandlers),this.value=r("span",{className:e.className+"-value"},{},this.contentElement),this.subtitle=r("span",{className:this.getSubtitleClassName()},{},this.contentElement),this.options.chartOptions&&(this.chartContainer=r("div",{className:e.className+"-chart-container"},{},this.contentElement))}async load(){return await super.load(),this.contentElement.style.display="flex",this.contentElement.style.flexDirection="column",this}resize(t,e){return super.resize(t,e),this.chart&&this.chart.reflow(),this}render(){super.render(),this.updateElements();const t=p.charter;return t&&this.options.chartOptions&&!this.chart&&this.chartContainer?this.chart=t.chart(this.chartContainer,d(p.defaultChartOptions,this.options.chartOptions)):this.chart&&!this.options.chartOptions&&"chartOptions"in this.options&&(this.chart.destroy(),this.chart=void 0),this.sync.start(),this.emit({type:"afterRender"}),this}setOptions(){this.filterAndAssignSyncOptions(s)}async update(t,e=!0){await super.update(t),this.setOptions(),t.chartOptions&&this.chart&&this.chart.update(t.chartOptions),e&&this.render()}onTableChanged(){this.setValue()}getValue(){if(this.options.value)return this.options.value;if(this.connector&&this.options.columnName){const t=this.connector?.table.modified,e=t.getColumn(this.options.columnName),s=e?.length||0;return t.getCellAsString(this.options.columnName,s-1)}}setValue(e=this.getValue()){const{valueFormat:s,valueFormatter:i}=this.options;if(l(e)){let t;c(e)&&(t=e),i?e=i.call(this,e):s?e=o(s,{value:e}):c(e)&&(e=e.toLocaleString()),n.setElementHTML(this.value,""+e),this.prevValue=t}}updateElements(){var{style:t,subtitle:e}=this.options;this.setValue(),n.setElementHTML(this.subtitle,this.getSubtitle()),t&&a(this.element,t),"object"==typeof e&&(e.style&&a(this.subtitle,e.style),this.subtitle.className=this.getSubtitleClassName()),this.chartContainer&&(this.chartContainer.style.flex=this.options.chartOptions?"1":"0"),this.chart&&this.chart.reflow(),this.value.style.color=this.getValueColor()}getSubtitle(){var{subtitle:e,value:s}=this.options;if("string"==typeof e)return e;if(e){if(c(this.prevValue)&&c(s)){const i=s-this.prevValue;let t="";if(0<i)t='<span style="color:green">&#9650;</span> +';else{if(!(i<0))return this.subtitle.innerHTML;t='<span style="color:red">&#9660;</span> '}if("diff"===e.type)return t+i.toLocaleString();if("diffpercent"===e.type)return t+o("{v:,.2f}%",{v:i/this.prevValue*100})}return e.text||""}return""}getSubtitleClassName(){var t=this.options["subtitle"];return e.defaultOptions.className+"-subtitle"+("object"==typeof t&&t.className||"")}getValueColor(){var{threshold:e,thresholdColors:s,value:i}=this.options;if(s&&e&&c(i)){if(h(e)){for(let t=e.length-1;0<=t;t--)if(i>=e[t])return t+1<s.length?s[t+1]:s[s.length-1]}else if(e<=i)return s[1];return s[0]}return""}toJSON(){var t=super.toJSON(),e={...t,type:"KPI",options:{...t.options,type:"KPI",value:this.options.value,subtitle:JSON.stringify(this.options.subtitle),title:JSON.stringify(this.options.title),threshold:this.options.threshold,thresholdColors:this.options.thresholdColors,chartOptions:JSON.stringify(this.options.chartOptions),valueFormat:this.options.valueFormat}};return this.emit({type:"toJSON",json:t}),e}getOptions(){return{...u(this.options,p.defaultOptions),type:"KPI"}}}return p.syncHandlers=s,p.defaultOptions=d(e.defaultOptions,{type:"KPI",className:[e.defaultOptions.className,e.defaultOptions.className+"-kpi"].join(" "),minFontSize:20,syncHandlers:s,thresholdColors:["#f45b5b","#90ed7d"],editableOptions:(e.defaultOptions.editableOptions||[]).concat([{name:"Value",type:"input",propertyPath:["value"]},{name:"Column name",type:"input",propertyPath:["columnName"]},{name:"Value format",type:"input",propertyPath:["valueFormat"]}])}),p.defaultChartOptions={chart:{type:"spline",styledMode:!0,zooming:{mouseWheel:{enabled:!1}}},title:{text:void 0},xAxis:{visible:!1},yAxis:{visible:!1,title:{text:null}},legend:{enabled:!1},credits:{enabled:!1},tooltip:{outside:!0},plotOptions:{series:{marker:{enabled:!1}}}},p}),e(t,"Dashboards/Plugins/NavigatorComponentDefaults.js",[t["Dashboards/Components/Component.js"]],function(t){return{type:"Navigator",chartOptions:{chart:{animation:!1,height:200,styledMode:!0,type:"column",zooming:{mouseWheel:{enabled:!1}}},credits:{enabled:!1},legend:{enabled:!1},navigator:{enabled:!0,outlineWidth:0,series:{animation:!1,lineWidth:0},xAxis:{endOnTick:!0,gridZIndex:4,labels:{x:1,y:22},opposite:!0,showFirstLabel:!0,showLastLabel:!0,startOnTick:!0,tickPosition:"inside"},yAxis:{maxPadding:.5}},plotOptions:{series:{borderRadius:0,marker:{enabled:!1},states:{hover:{enabled:!1}}}},scrollbar:{enabled:!0},title:{text:""},tooltip:{enabled:!1},xAxis:{visible:!1},yAxis:{visible:!1}},editableOptions:(t.defaultOptions.editableOptions||[]).concat()}}),e(t,"Dashboards/Plugins/NavigatorComponent.js",[t["Dashboards/Components/Component.js"],t["Data/Modifiers/DataModifier.js"],t["Dashboards/Globals.js"],t["Dashboards/Plugins/NavigatorComponentDefaults.js"],t["Core/Utilities.js"]],function(t,e,i,s,n){const p=e.types["Range"],{addEvent:o,diffObjects:r,isNumber:h,merge:a,pick:c}=n,l={crossfilter:{emitter:function(){const u=this,e=async(e,s)=>{if(u.connector){const a=u.connector.table,l=u.board.dataCursor,h=u.getColumnAssignment()[0],[c,d]=m(e,s);let t=a.getModifier();if(t instanceof p){var i=t.options.ranges;var n=h;var o=c;var r=d;let s=!1;for(let t=0,e=i.length;t<e;++t)if(i[t].column===n){i[t].maxValue=r,i[t].minValue=o,s=!0;break}s||i.push({column:n,maxValue:r,minValue:o})}else t=new p({ranges:[{column:h,maxValue:d,minValue:c}]});await a.setModifier(t),l.emitCursor(a,{type:"range",columns:[h],firstRow:0,lastRow:a.getRowCount()-1,state:"crossfilter"},s)}};let s;return o(u.chart.xAxis[0],"afterSetExtremes",function(t){clearTimeout(s),s=setTimeout(e,50,this,t)})}},extremes:{emitter:function(){const a=this,e=(t,e)=>{if(a.connector){const s=a.connector.table,i=a.board.dataCursor,n=a.getColumnAssignment()[0],[o,r]=m(t,e);i.emitCursor(s,{type:"position",column:n,row:s.getRowIndexBy(n,o),state:"xAxis.extremes.min"},e),i.emitCursor(s,{type:"position",column:n,row:s.getRowIndexBy(n,r),state:"xAxis.extremes.max"},e)}};let s;return o(a.chart.xAxis[0],"afterSetExtremes",function(t){clearTimeout(s),s=setTimeout(e,50,this,t)})},handler:function(){const l=this,e=l.board.dataCursor,s=i=>{i=i.cursor;if(l.connector){const n=l.connector.table;let t=n.getColumnNames()[0],e=n.getRowCount(),s=0;"range"===i.type?(e=i.lastRow,s=i.firstRow,i.columns&&(t=c(i.columns[0],t))):"xAxis.extremes.max"===i.state?(t=c(i.column,t),e=c(i.row,e)):(t=c(i.column,t),s=c(i.row,s));i=n.getModifier();if("string"==typeof t&&i instanceof p){const o=i.options.ranges,r=n.getCell(t,s),a=n.getCell(t,e);null!=a&&null!=r&&(!function(s,i){for(let t=0,e=s.length;t<e;++t)if(s[t].column===i)return s.splice(t,1)[0]}(o,t),o.unshift({column:t,maxValue:a,minValue:r}),n.setModifier(i))}}},t=()=>{var t=l.connector&&l.connector.table;t&&(e.addListener(t.id,"xAxis.extremes",s),e.addListener(t.id,"xAxis.extremes.max",s),e.addListener(t.id,"xAxis.extremes.min",s))};t(),l.on("setConnector",()=>{var t=l.connector&&l.connector.table;t&&(e.removeListener(t.id,"xAxis.extremes",s),e.removeListener(t.id,"xAxis.extremes.max",s),e.removeListener(t.id,"xAxis.extremes.min",s))}),l.on("afterSetConnector",()=>t())}}};function m(t,e){var s="number"==typeof e.max?e.max:e.dataMax,e="number"==typeof e.min?e.min:e.dataMin;return t.hasNames?[t.names[Math.round(e)],t.names[Math.round(s)]]:[e,s]}class d extends t{static fromJSON(t,e){const s=t.options,i=new d(e,s);return i.emit({type:"fromJSON",json:t}),i}constructor(t,e){super(t,e),this.options=a(d.defaultOptions,e);const s=d.charter||i.win.Highcharts;this.chartContainer=i.win.document.createElement("div"),this.chart=s.chart(this.chartContainer,this.options.chartOptions||{}),this.chartContainer.classList.add(i.classNamePrefix+"navigator"),this.filterAndAssignSyncOptions(l),this.sync=new d.Sync(this,this.syncHandlers),this.options.sync.crossfilter&&this.chart.update({navigator:{xAxis:{labels:{format:"{value}"}}}},!1)}adjustNavigator(){const t=this.chart,e=c(t.chartHeight,this.contentElement.clientHeight),s=this.contentElement.clientWidth,i={};if(t.chartHeight===e&&t.chartWidth===s||(i.chart={height:e,width:s}),t.navigator){const n=t.navigator,o=n.top-t.plotTop+n.height;n.height!==o&&(i.navigator={handles:{height:Math.round(e/4)},height:o}),Object.keys(i).length&&t.update(i,!1),n.series&&n.series[0]&&n.series[0].update({type:t.series[0].type},!1)}else Object.keys(i).length&&t.update(i,!1)}getColumnAssignment(){var t,e=this.options.columnAssignments||{};for(const i of Object.keys(e))if(null!==(t=e[i]))return[i,t];if(this.connector){var s=this.connector.table.getColumnNames();if(s.length)return[s[0],"y"]}return["","y"]}getOptions(){return{...r(this.options,s),type:"Navigator"}}async load(){return await super.load(),this.contentElement.appendChild(this.chartContainer),this.parentElement.appendChild(this.element),this.adjustNavigator(),this.emit({type:"afterLoad"}),this}onTableChanged(){this.renderNavigator()}redrawNavigator(){const s=this.resizeTimeouts;for(let t=0,e=s.length;t<e;++t)clearTimeout(s[t]);s.length=0,s.push(setTimeout(()=>{this.adjustNavigator(),this.chart.redraw()},33))}render(){return super.render(),this.renderNavigator(),this.sync.start(),this.emit({type:"afterRender"}),this}renderNavigator(){const t=this.chart;if(this.connector){const i=this.connector.table,n=this.options,o=this.getColumnAssignment(),r=i.getColumn(o[0],!0)||[];let e;if(n.sync.crossfilter){const a=[],l=[];let t;for(var s of r)null!==s&&(h(s)||(s=""+s),-1===(t=l.indexOf(s))?(t=l.length,l[t]=s,a[t]=[s,1]):a[t][1]=a[t][1]+1);a.sort((t,e)=>c(t[0],NaN)<c(e[0],NaN)?-1:t[0]===e[0]?0:1),e=a}else e=(r[0],r.slice());t.series[0]?t.series[0].setData(e,!1):t.addSeries({id:i.id,data:e},!1)}this.redrawNavigator()}resize(t,e){return super.resize(t,e),this.redrawNavigator(),this}async update(t,e=!0){const s=this.chart;await super.update(t,!1),t.sync&&this.filterAndAssignSyncOptions(l),t.chartOptions&&s.update(a(this.options.sync.crossfilter?{navigator:{xAxis:{labels:{format:"{value}"}}}}:{},t.chartOptions),!1),this.emit({type:"afterUpdate"}),e&&this.render()}}return d.defaultOptions=a(t.defaultOptions,s),d}),e(t,"Dashboards/Plugins/HighchartsPlugin.js",[t["Dashboards/Plugins/HighchartsComponent.js"],t["Dashboards/Plugins/HighchartsSyncHandlers.js"],t["Dashboards/Plugins/KPIComponent.js"],t["Dashboards/Plugins/NavigatorComponent.js"]],function(i,n,o,r){return{custom:{connectHighcharts:function(t){i.charter=t,o.charter=t,r.charter=t}},name:"Highcharts.DashboardsPlugin",onRegister:function(t){const{Sync:e,ComponentRegistry:s}=t;s.registerComponent("Highcharts",i),s.registerComponent("KPI",o),s.registerComponent("Navigator",r),e.defaultHandlers={...e.defaultHandlers,...n}},onUnregister:function(t){const e=t["Sync"];Object.keys(n).forEach(t=>{e.defaultHandlers[t]===n[t]&&delete e.defaultHandlers[t]})}}}),e(t,"masters/modules/dashboards-plugin.src.js",[t["Dashboards/Plugins/DataGridPlugin.js"],t["Dashboards/Globals.js"],t["Dashboards/Plugins/HighchartsPlugin.js"]],function(t,e,s){const i=e;return i.DataGridPlugin=t,i.HighchartsPlugin=s,i.win.Highcharts&&(s.custom.connectHighcharts(i.win.Highcharts),i.PluginHandler.addPlugin(s)),i.win.DataGrid&&(t.custom.connectDataGrid(i.win.DataGrid.DataGrid),i.PluginHandler.addPlugin(t)),i})});