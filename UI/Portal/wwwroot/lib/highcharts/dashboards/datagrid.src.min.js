!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("dashboards/datagrid",["dashboards"],function(e){return t(e),t.Dashboards=e,t}):t("undefined"!=typeof Dashboards?Dashboards:void 0)}(function(e){"use strict";e=e?e._modules:{};function t(e,t,i,s){e.hasOwnProperty(t)||(e[t]=s.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("DashboardsModuleLoaded",{detail:{path:t,module:e[t]}})))}t(e,"DataGrid/Globals.js",[],function(){var e,t;return(t=e=e||{}).classNamePrefix="highcharts-datagrid-",t.classNames={gridContainer:t.classNamePrefix+"container",outerContainer:t.classNamePrefix+"outer-container",scrollContainer:t.classNamePrefix+"scroll-container",innerContainer:t.classNamePrefix+"inner-container",cell:t.classNamePrefix+"cell",cellInput:t.classNamePrefix+"cell-input",row:t.classNamePrefix+"row",columnHeader:t.classNamePrefix+"column-header"},t.win=window,e}),t(e,"DataGrid/DataGridUtils.js",[],function(){return{dataTableCellToString(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e?""+e:""},emptyHTMLElement(e){for(;e.firstChild;)e.removeChild(e.firstChild)},makeDiv:(e,t)=>{const i=document.createElement("div");return i.className=e,t&&(i.id=t),i}}}),t(e,"Core/Chart/ChartDefaults.js",[],function(){return{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{},position:{}},reflow:!0,type:"line",zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"}}),t(e,"Core/Color/Palettes.js",[],function(){return{colors:["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"]}}),t(e,"Core/Time.js",[e["Core/Globals.js"],e["Core/Utilities.js"]],function(f,e){const n=f["win"],{defined:b,error:o,extend:y,isObject:t,merge:i,objectEach:g,pad:p,pick:v,splat:s,timeUnits:T}=e,r=f.isSafari&&n.Intl&&n.Intl.DateTimeFormat.prototype.formatRange,h=f.isSafari&&n.Intl&&!n.Intl.DateTimeFormat.prototype.formatRange;return class{constructor(e){this.options={},this.useUTC=!1,this.variableTimezone=!1,this.Date=n.Date,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.update(e)}get(e,t){var i,s;return this.variableTimezone||this.timezoneOffset?(s=(i=t.getTime())-this.getTimezoneOffset(t),t.setTime(s),s=t["getUTC"+e](),t.setTime(i),s):this.useUTC?t["getUTC"+e]():t["get"+e]()}set(e,t,i){if(this.variableTimezone||this.timezoneOffset){if("Milliseconds"===e||"Seconds"===e||"Minutes"===e&&this.getTimezoneOffset(t)%36e5==0)return t["setUTC"+e](i);var s=this.getTimezoneOffset(t),s=t.getTime()-s,n=(t.setTime(s),t["setUTC"+e](i),this.getTimezoneOffset(t)),s=t.getTime()+n;return t.setTime(s)}return this.useUTC||r&&"FullYear"===e?t["setUTC"+e](i):t["set"+e](i)}update(e={}){var t=v(e.useUTC,!0);this.options=e=i(!0,this.options,e),this.Date=e.Date||n.Date||Date,this.useUTC=t,this.timezoneOffset=t&&e.timezoneOffset||void 0,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.variableTimezone=t&&!(!e.getTimezoneOffset&&!e.timezone)}makeTime(e,t,i,s,n,o){let r,a,l;return this.useUTC?(r=this.Date.UTC.apply(0,arguments),a=this.getTimezoneOffset(r),r+=a,a!==(l=this.getTimezoneOffset(r))?r+=l-a:a-36e5!==this.getTimezoneOffset(r-36e5)||h||(r-=36e5)):r=new this.Date(e,t,v(i,1),v(s,0),v(n,0),v(o,0)).getTime(),r}timezoneOffsetFunction(){const e=this,t=this.options,i=t.getTimezoneOffset,s=t.moment||n.moment;if(!this.useUTC)return function(e){return 6e4*new Date(e.toString()).getTimezoneOffset()};if(t.timezone){if(s)return function(e){return 6e4*-s.tz(e,t.timezone).utcOffset()};o(25)}return this.useUTC&&i?function(e){return 6e4*i(e.valueOf())}:function(){return 6e4*(e.timezoneOffset||0)}}dateFormat(i,s,e){if(!b(s)||isNaN(s))return f.defaultOptions.lang&&f.defaultOptions.lang.invalidDate||"";i=v(i,"%Y-%m-%d %H:%M:%S");const n=this,t=new this.Date(s),o=this.get("Hours",t),r=this.get("Day",t),a=this.get("Date",t),l=this.get("Month",t),h=this.get("FullYear",t),d=f.defaultOptions.lang,c=d&&d.weekdays,m=d&&d.shortWeekdays,u=y({a:m?m[r]:c[r].substr(0,3),A:c[r],d:p(a),e:p(a,2," "),w:r,b:d.shortMonths[l],B:d.months[l],m:p(l+1),o:l+1,y:h.toString().substr(2,2),Y:h,H:p(o),k:o,I:p(o%12||12),l:o%12||12,M:p(this.get("Minutes",t)),p:o<12?"AM":"PM",P:o<12?"am":"pm",S:p(this.get("Seconds",t)),L:p(Math.floor(s%1e3),3)},f.dateFormats);return g(u,function(e,t){for(;-1!==i.indexOf("%"+t);)i=i.replace("%"+t,"function"==typeof e?e.call(n,s):e)}),e?i.substr(0,1).toUpperCase()+i.substr(1):i}resolveDTLFormat(e){return t(e,!0)?e:{main:(e=s(e))[0],from:e[1],to:e[2]}}getTimeTicks(e,t,i,s){const n=this,o=n.Date,r=[],a={},l=new o(t),h=e.unitRange,d=e.count||1;let c,m,u,f;if(s=v(s,1),b(t)){n.set("Milliseconds",l,h>=T.second?0:d*Math.floor(n.get("Milliseconds",l)/d)),h>=T.second&&n.set("Seconds",l,h>=T.minute?0:d*Math.floor(n.get("Seconds",l)/d)),h>=T.minute&&n.set("Minutes",l,h>=T.hour?0:d*Math.floor(n.get("Minutes",l)/d)),h>=T.hour&&n.set("Hours",l,h>=T.day?0:d*Math.floor(n.get("Hours",l)/d)),h>=T.day&&n.set("Date",l,h>=T.month?1:Math.max(1,d*Math.floor(n.get("Date",l)/d))),h>=T.month&&(n.set("Month",l,h>=T.year?0:d*Math.floor(n.get("Month",l)/d)),m=n.get("FullYear",l)),h>=T.year&&(m-=m%d,n.set("FullYear",l,m)),h===T.week&&(f=n.get("Day",l),n.set("Date",l,n.get("Date",l)-f+s+(f<s?-7:0))),m=n.get("FullYear",l);var g=n.get("Month",l),p=n.get("Date",l),C=n.get("Hours",l);t=l.getTime(),!n.variableTimezone&&n.useUTC||!b(i)||(u=i-t>4*T.month||n.getTimezoneOffset(t)!==n.getTimezoneOffset(i));let e=l.getTime();for(c=1;e<i;)r.push(e),h===T.year?e=n.makeTime(m+c*d,0):h===T.month?e=n.makeTime(m,g+c*d):!u||h!==T.day&&h!==T.week?u&&h===T.hour&&1<d?e=n.makeTime(m,g,p,C+c*d):e+=h*d:e=n.makeTime(m,g,p+c*d*(h===T.day?1:7)),c++;r.push(e),h<=T.hour&&r.length<1e4&&r.forEach(function(e){e%18e5==0&&"000000000"===n.dateFormat("%H%M%S%L",e)&&(a[e]="day")})}return r.info=y(e,{higherRanks:a,totalRange:h*d}),r}getDateFormat(e,t,i,s){const n=this.dateFormat("%m-%d %H:%M:%S.%L",t),o="01-01 00:00:00.000",r={millisecond:15,second:12,minute:9,hour:6,day:3};let a="millisecond",l=a;for(a in T){if(e===T.week&&+this.dateFormat("%w",t)===i&&n.substr(6)===o.substr(6)){a="week";break}if(T[a]>e){a=l;break}if(r[a]&&n.substr(r[a])!==o.substr(r[a]))break;"week"!==a&&(l=a)}return this.resolveDTLFormat(s[a]).main}}}),t(e,"Core/Defaults.js",[e["Core/Chart/ChartDefaults.js"],e["Core/Globals.js"],e["Core/Color/Palettes.js"],e["Core/Time.js"],e["Core/Utilities.js"]],function(e,t,i,s,n){var{isTouchDevice:o,svg:r}=t;const a=n["merge"],l={colors:i.colors,symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{},time:{Date:void 0,getTimezoneOffset:void 0,timezone:void 0,timezoneOffset:0,useUTC:!0},chart:e,title:{style:{color:"#333333",fontWeight:"bold"},text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{style:{color:"#666666",fontSize:"0.8em"},text:"",align:"center",widthAdjust:-44},caption:{margin:15,style:{color:"#666666",fontSize:"0.8em"},text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:r,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %e %b, %H:%M:%S.%L",second:"%A, %e %b, %H:%M:%S",minute:"%A, %e %b, %H:%M",hour:"%A, %e %b, %H:%M",day:"%A, %e %b %Y",week:"Week from %A, %e %b %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,shape:"callout",shared:!1,snap:o?25:10,headerFormat:'<span style="font-size: 0.8em">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">‚óè</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",borderWidth:void 0,shadow:!0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}},h=(l.chart.styledMode=!1,new s(l.time));return{defaultOptions:l,defaultTime:h,getOptions:function(){return l},setOptions:function(e){return a(!0,l,e),(e.time||e.global)&&(t.time?t.time.update(a(l.global,l.time,e.global,e.time)):t.time=h),l}}}),t(e,"Core/Templating.js",[e["Core/Defaults.js"],e["Core/Utilities.js"]],function(e,t){const{defaultOptions:v,defaultTime:c}=e,{extend:n,getNestedProperty:T,isArray:o,isNumber:u,isObject:r,pick:w,pInt:f}=t,x={add:(e,t)=>e+t,divide:(e,t)=>0!==t?e/t:"",eq:(e,t)=>e==t,each:function(i){const s=arguments[arguments.length-1];return!!o(i)&&i.map((e,t)=>H(s.body,n(r(e)?e:{"@this":e},{"@index":t,"@first":0===t,"@last":t===i.length-1}))).join("")},ge:(e,t)=>t<=e,gt:(e,t)=>t<e,if:e=>!!e,le:(e,t)=>e<=t,lt:(e,t)=>e<t,multiply:(e,t)=>e*t,ne:(e,t)=>e!=t,subtract:(e,t)=>e-t,unless:e=>!e};function H(m="",u,e){const t=/\{([a-zA-Z0-9\:\.\,;\-\/<>%_@"'= #\(\)]+)\}/g,i=/\(([a-zA-Z0-9\:\.\,;\-\/<>%_@"'= ]+)\)/g,s=[],f=/f$/,g=/\.([0-9])/,p=v.lang,C=e&&e.time||c,b=e&&e.numberFormatter||D,y=(e="")=>{let t;return"true"===e||"false"!==e&&((t=Number(e)).toString()===e?t:T(e,u))};let n,o,r=0,a;for(;null!==(n=t.exec(m));){var l,h=i.exec(n[1]),d=(h&&(n=h,a=!0),o&&o.isBlock||(o={ctx:u,expression:n[1],find:n[0],isBlock:"#"===n[1].charAt(0),start:n.index,startInner:n.index+n[0].length,length:n[0].length}),n[1].split(" ")[0].replace("#","")),d=(x[d]&&(o.isBlock&&d===o.fn&&r++,o.fn||(o.fn=d)),"else"===n[1]);if(o.isBlock&&o.fn&&(n[1]==="/"+o.fn||d)?r?d||r--:(l=o.startInner,l=m.substr(l,n.index-l),void 0===o.body?(o.body=l,o.startInner=n.index+n[0].length):o.elseBody=l,o.find+=l+n[0],d||(s.push(o),o=void 0)):o.isBlock||s.push(o),h&&!o?.isBlock)break}return s.forEach(e=>{const{body:t,elseBody:i,expression:s,fn:n}=e;let o,r;if(n){const l=[e],h=s.split(" ");for(r=x[n].length;r--;)l.unshift(y(h[r+1]));o=x[n].apply(u,l),e.isBlock&&"boolean"==typeof o&&(o=H(o?t:i,u))}else{const d=s.split(":");if(o=y(d.shift()||""),d.length&&"number"==typeof o){const c=d.join(":");var a;f.test(c)?(a=parseInt((c.match(g)||["","-1"])[1],10),null!==o&&(o=b(o,a,p.decimalPoint,-1<c.indexOf(",")?p.thousandsSep:""))):o=C.dateFormat(c,o)}}m=m.replace(e.find,w(o,""))}),a?H(m,u,e):m}function D(e,t,i,s){e=+e||0,t=+t;let n,o;const r=v.lang,a=(e.toString().split(".")[1]||"").split("e")[0].length,l=e.toString().split("e"),h=t,d=(-1===t?t=Math.min(a,20):u(t)?t&&l[1]&&l[1]<0&&(0<=(o=t+ +l[1])?(l[0]=(+l[0]).toExponential(o).split("e")[0],t=o):(l[0]=l[0].split(".")[0]||0,e=t<20?(l[0]*Math.pow(10,l[1])).toFixed(t):0,l[1]=0)):t=2,(Math.abs(l[1]?l[0]:e)+Math.pow(10,-Math.max(t,a)-1)).toFixed(t)),c=String(f(d));var m=3<c.length?c.length%3:0;return i=w(i,r.decimalPoint),s=w(s,r.thousandsSep),n=e<0?"-":"",n+=m?c.substr(0,m)+s:"",+l[1]<0&&!h?n="0":n+=c.substr(m).replace(/(\d{3})(?=\d)/g,"$1"+s),t&&(n+=i+d.slice(-t)),l[1]&&0!=+n&&(n+="e"+l[1]),n}return{dateFormat:function(e,t,i){return c.dateFormat(e,t,i)},format:H,helpers:x,numberFormat:D}}),t(e,"DataGrid/DataGridDefaults.js",[],function(){return{cellHeight:49,columnHeaders:{enabled:!0},columns:{},defaultHeight:400,editable:!0,resizableColumns:!0}}),t(e,"DataGrid/DataGrid.js",[e["Data/DataTable.js"],e["DataGrid/DataGridUtils.js"],e["DataGrid/Globals.js"],e["Core/Templating.js"],e["DataGrid/DataGridDefaults.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],function(e,t,r,a,i,d,s){const{dataTableCellToString:l,emptyHTMLElement:h,makeDiv:c}=t,n=d["doc"],{addEvent:o,clamp:m,defined:u,fireEvent:f,isNumber:g,merge:p,pick:C}=s;class b{constructor(e,t){var i;this.columnNames=[],this.prevTop=-1,this.scrollEndRowCount=0,this.scrollEndTop=0,this.bottom=!1,this.overflowHeaderWidths=[],"string"==typeof e?(i=n.getElementById(e),this.container=i||c(r.classNames.gridContainer,e)):this.container=e,this.gridContainer=c(r.classNames.gridContainer),this.outerContainer=c(r.classNames.outerContainer),this.scrollContainer=c(r.classNames.scrollContainer),this.innerContainer=c(r.classNames.innerContainer),this.outerContainer.appendChild(this.scrollContainer),this.gridContainer.appendChild(this.outerContainer),this.container.appendChild(this.gridContainer),this.options=p(b.defaultOptions,t),this.gridContainer.style.height=this.getDataGridSize()+"px",this.gridContainer.role="figure",this.dataTable=this.initDataTable(),this.rowElements=[],this.draggedResizeHandle=null,this.draggedColumnRightIx=null,this.render(),(this.containerResizeObserver=new ResizeObserver(()=>{this.updateGridElements()})).observe(this.container)}update(e){this.options=p(this.options,e),this.options.dataTable!==this.dataTable&&(this.dataTable=this.initDataTable()),this.scrollContainer.removeChild(this.innerContainer),this.render()}resizeColumn(e,t){const i=this.columnHeadersContainer;var s="string"==typeof t?this.columnNames.indexOf(t):t,n=""+e;if(g(s)){if(-1!==s){if(i){const o=i.children[s];o&&(o.style.flex=n)}for(let e=0;e<this.rowElements.length;e++){const r=this.rowElements[e].children[s];r&&(r.style.flex=n)}}}else{if(i)for(let e=0;e<i.children.length;e++)i.children[e].style.flex=n;for(let e=0;e<this.rowElements.length;e++){const a=this.rowElements[e];for(let e=0;e<a.children.length;e++)a.children[e].style.flex=n}}this.renderColumnDragHandles(),this.emit({type:"afterResizeColumn",width:e,index:s,name:g(s)?this.columnNames[s]:void 0})}emit(e){f(this,e.type,e)}toggleRowHighlight(e){this.hoveredRow&&this.hoveredRow.classList.contains("hovered")&&this.hoveredRow.classList.remove("hovered"),e&&(e.classList.contains("hovered")?e.classList.remove("hovered"):e.classList.add("hovered"))}on(e,t){return o(this,e,t)}scrollToRow(e){this.outerContainer.scrollTop=e*this.options.cellHeight}getColumnsToDisplay(){const t=this.options.columns,i=this.dataTable.modified.getColumnNames(),s=[];for(let e=0;e<i.length;e++){var n=i[e],o=t[n];(!o||!u(o.show)||t[n].show)&&s.push(n)}return s}isColumnEditable(e){e=this.options.columns[e]||{};return C(e.editable,this.options.editable)}initDataTable(){return this.options.dataTable||new e}render(){var e=this["options"];this.prevTop=-1,this.bottom=!1,h(this.innerContainer),e.columnHeaders.enabled?(this.columnNames=this.getColumnsToDisplay(),this.renderColumnHeaders()):this.outerContainer.style.top="0",this.renderInitialRows(),this.addEvents(),this.updateScrollingLength(),this.updateVisibleCells(),e.columnHeaders.enabled&&e.resizableColumns&&this.renderColumnDragHandles(),this.updateGridElements(),this.gridContainer.ariaLabel=`Grid with ${this.dataTable.getColumnNames().length} columns and ${this.dataTable.getRowCount()} rows.`}addEvents(){this.outerContainer.addEventListener("scroll",e=>{this.onScroll(e)}),document.addEventListener("click",e=>{this.onDocumentClick(e)}),this.container.addEventListener("mouseover",e=>{this.handleMouseOver(e)})}updateVisibleCells(e=!1){let t=this.outerContainer.scrollTop,i=(d.isSafari&&(t=m(t,0,this.outerContainer.scrollHeight-this.outerContainer.clientHeight)),Math.floor(t/this.options.cellHeight));if(i!==this.prevTop||e){this.prevTop=i;var s=this.columnNames,n=this.dataTable.modified.getRowCount();for(let e=0;e<this.rowElements.length&&i<n;e++,i++){const r=this.rowElements[e];r.dataset.rowIndex=String(i);var o=r.childNodes;for(let e=0,t=s.length;e<t;e++){const a=o[e],l=s[e],h=this.dataTable.modified.getCell(s[e],i);a.textContent=this.formatCell(h,l),a.dataset.originalData=""+h,a.dataset.columnName=s[e],a.dataset.dataType=typeof h,0===e&&(r.dataset.rowXIndex=String(g(h)?h:i))}}this.prevTop+this.scrollEndRowCount===n?!this.bottom&&this.scrollEndTop&&(this.bottom=!0,this.innerContainer.scrollTop=this.scrollEndTop):this.bottom&&(this.bottom=!1,this.innerContainer.scrollTop=0)}}onScroll(e){e.preventDefault(),window.requestAnimationFrame(this.updateVisibleCells.bind(this,!1))}onCellClick(t,i){if(this.isColumnEditable(i)){let e=t.querySelector("input");var s,i=t.getAttribute("data-original-data");e||(this.removeCellInputElement(),s=t.clientHeight,t.textContent="",(e=this.cellInputEl=document.createElement("input")).style.height=s+"px",e.className=r.classNames.cellInput,t.appendChild(e),e.focus(),e.value=i||""),this.emit({type:"cellClick",input:e})}}onDocumentClick(e){if(this.cellInputEl&&e.target){const t=this.cellInputEl.parentNode;t&&t.contains(e.target)||this.removeCellInputElement()}}handleMouseOver(e){const t=e.target;t&&t.classList.contains(r.classNames.cell)?(e=t.parentElement,this.toggleRowHighlight(e),this.hoveredRow=e,f(this.container,"dataGridHover",{row:e})):this.hoveredRow&&(this.toggleRowHighlight(),this.hoveredRow=void 0)}removeCellInputElement(){const t=this.cellInputEl;if(t){const n=t.parentNode;if(n){var i=n.getAttribute("data-data-type"),s=n.getAttribute("data-column-name");let e=t.value;"number"===i&&(e=parseFloat(e)),n.textContent=this.formatCell(e,s||"")}t.remove(),delete this.cellInputEl}}updateScrollingLength(){var i=this.columnNames;let s=this.dataTable.modified.getRowCount()-1,t=0;var n=s-this.getNumRowsToDraw(),o=this.outerContainer.clientHeight;this.innerContainer.style.height=o+"px";for(let t=0;t<this.rowElements.length;t++){const r=this.rowElements[t].childNodes;for(let e=0;e<i.length;e++)r[e].textContent=l(this.dataTable.modified.getCell(i[e],s-t))}this.scrollContainer.appendChild(this.innerContainer);for(let e=0;s>n;s--,e++)if((t+=this.rowElements[e].offsetHeight)>o){s--;break}var e=s-n,e=(this.scrollEndRowCount=this.rowElements.length-e,this.scrollEndTop=t-o,(this.dataTable.modified.getRowCount()+e)*this.options.cellHeight);this.scrollContainer.style.height=e+"px"}getNumRowsToDraw(){return Math.min(this.dataTable.modified.getRowCount(),Math.ceil(this.outerContainer.offsetHeight/this.options.cellHeight))}getDataGridSize(){var e=this.options,t=this.container.getBoundingClientRect()["height"];return 2<t?t:e.defaultHeight}renderCell(e,t){let i=r.classNames.cell;this.isColumnEditable(t)||(i+=` ${i}-readonly`);const s=c(i);s.style.minHeight=this.options.cellHeight+"px",s.addEventListener("click",()=>this.onCellClick(s,t)),e.appendChild(s)}renderRow(){var t=c(r.classNames.row);for(let e=0;e<this.columnNames.length;e++)this.renderCell(t,this.columnNames[e]);this.innerContainer.appendChild(t),this.rowElements.push(t)}formatHeaderCell(e){var t=this.options.columns[e],t=t&&t.headerFormat;return t?a.format(t,{text:e}):e}formatCell(e,t){const i=this.options,s=i.columns[t],n=s&&s.cellFormat,o=s&&s.cellFormatter;let r=u(e)?e:"";return n&&("number"==typeof e&&-1<n.indexOf("value")?r=a.format(n,{value:e}):"string"==typeof e&&-1<n.indexOf("text")&&(r=a.format(n,{text:e}))),o?o.call({value:e}):r.toString()}renderColumnHeader(e,t){let i=r.classNames.columnHeader;this.isColumnEditable(t)||(i+=` ${i}-readonly`);const s=c(i);s.style.minHeight=this.options.cellHeight+"px",s.style.maxHeight=2*this.options.cellHeight+"px",s.textContent=this.formatHeaderCell(t),e.appendChild(s)}renderColumnHeaders(){const e=this.columnNames,t=this.columnHeadersContainer=this.columnHeadersContainer||c(r.classNamePrefix+"column-headers");h(t),e.forEach(this.renderColumnHeader.bind(this,t)),this.headerContainer||(this.headerContainer=c(r.classNamePrefix+"header-container"),this.headerContainer.appendChild(t)),this.gridContainer.insertBefore(this.headerContainer,this.outerContainer),this.updateColumnHeaders()}updateGridElements(){this.updateColumnHeaders(),this.redrawRowElements(),this.updateDragHandlesPosition()}updateColumnHeaders(){const t=this.columnHeadersContainer;if(t){for(let e=0;e<this.columnNames.length;e++){const i=this.columnNames[e],s=t.children[e],n=this.overflowHeaderWidths[e];s.scrollWidth>s.clientWidth?(this.overflowHeaderWidths[e]=s.scrollWidth,s.textContent=this.formatHeaderCell(i).split(" ").map(e=>e.length<4?e:e.slice(0,2)+"...").join(" ")):g(n)&&n<=s.clientWidth&&(this.overflowHeaderWidths[e]=null,s.textContent=this.formatHeaderCell(i))}this.outerContainer.style.top=t.clientHeight+"px",t.lastChild&&(t.lastChild.style.marginRight=this.outerContainer.offsetWidth-this.outerContainer.clientWidth+"px")}}redrawRowElements(){if(this.rowElements.length){const t=[],i=this.rowElements[0].children;for(let e=0;e<i.length;e++)t.push(i[e].style.flex);h(this.innerContainer),this.renderInitialRows(),this.updateScrollingLength(),this.updateVisibleCells(!0);for(let e=0;e<this.rowElements.length;e++){const s=this.rowElements[e];for(let e=0;e<s.childElementCount;e++)s.children[e].style.flex=t[e]}}}updateDragHandlesPosition(){var t=this.columnHeadersContainer,i=this.columnDragHandlesContainer;if(i&&t)for(let e=0;e<i.childElementCount-1;e++){const s=i.children[e],n=t.children[e+1];s.style.height=t.clientHeight+"px",s.style.left=n.offsetLeft-2+"px"}}renderInitialRows(){this.rowElements=[];var t=this.getNumRowsToDraw();for(let e=0;e<t;e++)this.renderRow()}renderColumnDragHandles(){if(this.columnHeadersContainer){const n=this.columnDragHandlesContainer=this.columnDragHandlesContainer||c(r.classNamePrefix+"col-resize-container");var t=this.columnHeadersContainer.children,i=this.options.cellHeight;h(n);for(let e=1;e<t.length;++e){var s=t[e];const o=c(r.classNamePrefix+"col-resize-handle");o.style.height=i+"px",o.style.left=s.offsetLeft-2+"px",o.addEventListener("mouseover",()=>{this.draggedResizeHandle||(o.style.opacity="1")}),o.addEventListener("mouseleave",()=>{this.draggedResizeHandle||(o.style.opacity="0")}),o.addEventListener("mousedown",this.onHandleMouseDown.bind(this,o,e)),n.appendChild(o)}this.renderColumnResizeCrosshair(n),document.addEventListener("mouseup",e=>{this.draggedResizeHandle&&this.stopColumnResize(this.draggedResizeHandle,e)}),document.addEventListener("mousemove",e=>{this.draggedResizeHandle&&this.updateColumnResizeDrag(e)}),this.headerContainer&&this.headerContainer.appendChild(n)}}renderColumnResizeCrosshair(e){const t=this.columnResizeCrosshair=this.columnResizeCrosshair||c(r.classNamePrefix+"col-resize-crosshair");var i=this.options.cellHeight;t.style.top=i+"px",t.style.height=this.innerContainer.offsetHeight+"px",e.appendChild(t)}onHandleMouseDown(e,t,i){if(!this.draggedResizeHandle){i.preventDefault(),this.draggedResizeHandle=e,this.draggedColumnRightIx=t,this.dragResizeStart=i.pageX;const s=this.columnResizeCrosshair;s&&(s.style.left=e.offsetLeft+e.offsetWidth/2-s.offsetWidth/2+"px",s.style.opacity="1")}}updateColumnResizeDrag(e){const t=this.draggedResizeHandle,i=this.columnResizeCrosshair;var s=this.draggedColumnRightIx,n=this.columnHeadersContainer;t&&i&&null!==s&&n&&this.dragResizeStart&&(n=n.children[s],s=e.pageX-this.dragResizeStart,e=n.offsetLeft+s,t.style.left=e-t.offsetWidth/2+"px",i.style.left=e-i.offsetWidth/2+"px")}stopColumnResize(e,t){const i=this.columnResizeCrosshair;var s,n=this.draggedColumnRightIx,o=this.columnHeadersContainer;i&&o&&this.dragResizeStart&&null!==n&&(e.style.opacity="0",i.style.opacity="0",e=o.children[n-1],o=o.children[n],t=t.pageX-this.dragResizeStart,s=e.offsetWidth+t,t=o.offsetWidth-t,s=s/e.offsetWidth,t=t/o.offsetWidth,e=(e.style.flex?parseFloat(e.style.flex):1)*s,s=(o.style.flex?parseFloat(o.style.flex):1)*t,this.resizeColumn(e,n-1),this.resizeColumn(s,n),this.draggedResizeHandle=null,this.draggedColumnRightIx=null,this.updateGridElements())}setSize(e,t){e&&(this.innerContainer.style.width=e+"px"),t&&(this.gridContainer.style.height=this.getDataGridSize()+"px",this.outerContainer.style.height=t-(this.options.cellHeight+this.getMarginHeight(t))+"px"),this.render()}getMarginHeight(e){return e-this.gridContainer.getBoundingClientRect().height}}return b.defaultOptions=i,b}),t(e,"masters/datagrid.src.js",[e["DataGrid/Globals.js"],e["DataGrid/DataGrid.js"]],function(e,t){const i=e;return i.DataGrid=t,i.win.DataGrid||(i.win.DataGrid=i),i})});