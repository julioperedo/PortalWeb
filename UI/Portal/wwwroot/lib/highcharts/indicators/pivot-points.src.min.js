!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/indicators/pivot-points",["highcharts","highcharts/modules/stock"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,o,a){t.hasOwnProperty(e)||(t[e]=a.apply(null,o),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Stock/Indicators/PivotPoints/PivotPointsPoint.js",[t["Core/Series/SeriesRegistry.js"]],function(n){function t(t,e){var o=t.series.pointArrayMap;let a,i=o.length;for(n.seriesTypes.sma.prototype.pointClass.prototype[e].call(t);i--;)t[a="dataLabel"+o[i]]&&t[a].element&&t[a].destroy(),t[a]=null}class e extends n.seriesTypes.sma.prototype.pointClass{constructor(){super(...arguments),this.P=void 0,this.pivotLine=void 0,this.series=void 0}destroyElements(){t(this,"destroyElements")}destroy(){t(this,"destroyElements")}}return e}),e(t,"Stock/Indicators/PivotPoints/PivotPointsIndicator.js",[t["Stock/Indicators/PivotPoints/PivotPointsPoint.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,o){var a=e.seriesTypes["sma"];const{merge:i,extend:n,defined:d,isArray:m}=o;class s extends a{constructor(){super(...arguments),this.data=void 0,this.options=void 0,this.points=void 0,this.endPoint=void 0,this.plotEndPoint=void 0}toYData(t){return[t.P]}translate(){const o=this;super.translate.apply(o),o.points.forEach(function(e){o.pointArrayMap.forEach(function(t){d(e[t])&&(e["plot"+t]=o.yAxis.toPixels(e[t],!0))})}),o.plotEndPoint=o.xAxis.toPixels(o.endPoint,!0)}getGraphPath(t){const e=this,o=[[],[],[],[],[],[],[],[],[]],a=e.pointArrayMap.length;let i=e.plotEndPoint,n=[],s,r,l=t.length,p;for(;l--;){for(r=t[l],p=0;p<a;p++)s=e.pointArrayMap[p],d(r[s])&&o[p].push({plotX:r.plotX,plotY:r["plot"+s],isNull:!1},{plotX:i,plotY:r["plot"+s],isNull:!1},{plotX:i,plotY:null,isNull:!0});i=r.plotX}return o.forEach(t=>{n=n.concat(super.getGraphPath.call(e,t))}),n}drawDataLabels(){const o=this,a=o.pointArrayMap;let i,n,s,r;o.options.dataLabels.enabled&&(n=o.points.length,a.concat([!1]).forEach((t,e)=>{for(r=n;r--;)s=o.points[r],t?(s.y=s[t],s.pivotLine=t,s.plotY=s["plot"+t],i=s["dataLabel"+t],e&&(s["dataLabel"+a[e-1]]=s.dataLabel),s.dataLabels||(s.dataLabels=[]),s.dataLabels[0]=s.dataLabel=i=i&&i.element?i:null):s["dataLabel"+a[e-1]]=s.dataLabel;super.drawDataLabels.call(o)}))}getValues(t,e){const o=e.period,a=t.xData,i=t.yData,n=i?i.length:0,s=this[e.algorithm+"Placement"],r=[],l=[],p=[];let d,c,u,h,f,P,v,y;if(!(a.length<o)&&m(i[0])&&4===i[0].length){for(y=o+1;y<=n+o;y+=o)u=a.slice(y-o-1,y),h=i.slice(y-o-1,y),c=u.length,d=u[c-1],P=this.getPivotAndHLC(h),v=s(P),f=r.push([d].concat(v)),l.push(d),p.push(r[f-1].slice(1));return this.endPoint=u[0]+(d-u[0])/c*o,{values:r,xData:l,yData:p}}}getPivotAndHLC(t){var e=t[t.length-1][3];let o=-1/0,a=1/0;return t.forEach(function(t){o=Math.max(o,t[1]),a=Math.min(a,t[2])}),[(o+a+e)/3,o,a,e]}standardPlacement(t){var e=t[1]-t[2];return[null,null,t[0]+e,2*t[0]-t[2],t[0],2*t[0]-t[1],t[0]-e,null,null]}camarillaPlacement(t){var e=t[1]-t[2];return[t[3]+1.5*e,t[3]+1.25*e,t[3]+1.1666*e,t[3]+1.0833*e,t[0],t[3]-1.0833*e,t[3]-1.1666*e,t[3]-1.25*e,t[3]-1.5*e]}fibonacciPlacement(t){var e=t[1]-t[2];return[null,t[0]+e,t[0]+.618*e,t[0]+.382*e,t[0],t[0]-.382*e,t[0]-.618*e,t[0]-e,null]}}return s.defaultOptions=i(a.defaultOptions,{params:{index:void 0,period:28,algorithm:"standard"},marker:{enabled:!1},enableMouseTracking:!1,dataLabels:{enabled:!0,format:"{point.pivotLine}"},dataGrouping:{approximation:"averages"}}),n(s.prototype,{nameBase:"Pivot Points",pointArrayMap:["R4","R3","R2","R1","P","S1","S2","S3","S4"],pointValKey:"P",pointClass:t}),e.registerSeriesType("pivotpoints",s),s}),e(t,"masters/indicators/pivot-points.src.js",[],function(){})});