"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/indicators/supertrend",["highcharts","highcharts/modules/stock"],function(o){return e(o),e.Highcharts=o,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(o){var e=o?o._modules:{};function t(o,e,t,r){o.hasOwnProperty(e)||(o[e]=r.apply(null,t))}t(e,"indicators/supertrend.src.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(o,e){var b=e.correctFloat,D=e.merge,t=e.seriesType,S=e.isArray,v=e.objectEach,j=o.seriesTypes.atr,L=o.seriesTypes.sma;function N(o,e,t){return{index:e,close:o.yData[e][t],x:o.xData[e]}}t("supertrend","sma",{params:{multiplier:3,period:10},risingTrendColor:"#06B535",fallingTrendColor:"#F21313",changeTrendLine:{styles:{lineWidth:1,lineColor:"#333333",dashStyle:"LongDash"}}},{nameBase:"Supertrend",nameComponents:["multiplier","period"],requiredIndicators:["atr"],init:function(){var o,e;L.prototype.init.apply(this,arguments),o=this.options,e=this.linkedParent.options,o.cropThreshold=e.cropThreshold-(o.params.period-1)},drawGraph:function(){for(var o,e,t,r,i,l,n,s,a,p=this,c=p.options,d=p.linkedParent,h=d?d.points:[],u=p.points,y=p.graph,g=u.length,x=h.length-g,f=0<x?x:0,m={options:{gapSize:c.gapSize}},T={top:[],bottom:[],intersect:[]},C={top:{styles:{lineWidth:c.lineWidth,lineColor:c.fallingTrendColor||c.color,dashStyle:c.dashStyle}},bottom:{styles:{lineWidth:c.lineWidth,lineColor:c.risingTrendColor||c.color,dashStyle:c.dashStyle}},intersect:c.changeTrendLine};g--;)o=u[g],e=u[g-1],t=h[g-1+f],r=h[g-2+f],i=h[g+f],l=h[g+f+1],n=o.options.color,s={x:o.x,plotX:o.plotX,plotY:o.plotY,isNull:!1},!r&&t&&d.yData[t.index-1]&&(r=N(d,t.index-1,3)),!l&&i&&d.yData[i.index+1]&&(l=N(d,i.index+1,3)),!t&&r&&d.yData[r.index+1]?t=N(d,r.index+1,3):!t&&i&&d.yData[i.index-1]&&(t=N(d,i.index-1,3)),o&&t&&i&&r&&o.x!==t.x&&(o.x===i.x?(r=t,t=i):o.x===r.x?(t=r,r={close:d.yData[t.index-1][3],x:d.xData[t.index-1]}):l&&o.x===l.x&&(t=l,r=i)),e&&r&&t?(a={x:e.x,plotX:e.plotX,plotY:e.plotY,isNull:!1},o.y>=t.close&&e.y>=r.close?(o.color=n||c.fallingTrendColor||c.color,T.top.push(s)):o.y<t.close&&e.y<r.close?(o.color=n||c.risingTrendColor||c.color,T.bottom.push(s)):(T.intersect.push(s),T.intersect.push(a),T.intersect.push(D(a,{isNull:!0})),o.y>=t.close&&e.y<r.close?(o.color=n||c.fallingTrendColor||c.color,e.color=n||c.risingTrendColor||c.color,T.top.push(s),T.top.push(D(a,{isNull:!0}))):o.y<t.close&&e.y>=r.close&&(o.color=n||c.risingTrendColor||c.color,e.color=n||c.fallingTrendColor||c.color,T.bottom.push(s),T.bottom.push(D(a,{isNull:!0}))))):t&&(o.y>=t.close?(o.color=n||c.fallingTrendColor||c.color,T.top.push(s)):(o.color=n||c.risingTrendColor||c.color,T.bottom.push(s)));v(T,function(o,e){p.points=o,p.options=D(C[e].styles,m),p.graph=p["graph"+e+"Line"],L.prototype.drawGraph.call(p),p["graph"+e+"Line"]=p.graph}),p.points=u,p.options=c,p.graph=y},getValues:function(o,e){var t,r,i,l,n,s,a,p,c,d,h=e.period,u=e.multiplier,y=o.xData,g=o.yData,x=[],f=[],m=[],T=0===h?0:h-1,C=[],D=[];if(!(y.length<=h||!S(g[0])||4!==g[0].length||h<0)){for(t=j.prototype.getValues.call(this,o,{period:h}).yData,d=0;d<t.length;d++)c=g[T+d],p=g[T+d-1]||[],n=C[d-1],s=D[d-1],a=m[d-1],0===d&&(n=s=a=0),r=b((c[1]+c[2])/2+u*t[d]),i=b((c[1]+c[2])/2-u*t[d]),C[d]=r<n||n<p[3]?r:n,D[d]=s<i||p[3]<s?i:s,a===n&&c[3]<C[d]||a===s&&c[3]<D[d]?l=C[d]:(a===n&&c[3]>C[d]||a===s&&c[3]>D[d])&&(l=D[d]),x.push([y[T+d],l]),f.push(y[T+d]),m.push(l);return{values:x,xData:f,yData:m}}}})}),t(e,"masters/indicators/supertrend.src.js",[],function(){})});