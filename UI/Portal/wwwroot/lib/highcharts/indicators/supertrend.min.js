!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/indicators/supertrend",["highcharts","highcharts/modules/stock"],function(o){return e(o),e.Highcharts=o,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(o){function e(o,e,t,r){o.hasOwnProperty(e)||(o[e]=r.apply(null,t))}e(o=o?o._modules:{},"indicators/supertrend.src.js",[o["parts/Globals.js"],o["parts/Utilities.js"]],function(o,e){function T(o,e,t){return{index:e,close:o.yData[e][t],x:o.xData[e]}}var C=e.correctFloat,D=e.merge,t=e.seriesType,b=e.isArray,v=e.objectEach,S=o.seriesTypes.atr,j=o.seriesTypes.sma;t("supertrend","sma",{params:{multiplier:3,period:10},risingTrendColor:"#06B535",fallingTrendColor:"#F21313",changeTrendLine:{styles:{lineWidth:1,lineColor:"#333333",dashStyle:"LongDash"}}},{nameBase:"Supertrend",nameComponents:["multiplier","period"],requiredIndicators:["atr"],init:function(){j.prototype.init.apply(this,arguments);var o=this.options;o.cropThreshold=this.linkedParent.options.cropThreshold-(o.params.period-1)},drawGraph:function(){for(var o,e,t,r,i,l,n,s,a=this,p=a.options,c=a.linkedParent,d=c?c.points:[],h=a.points,u=a.graph,y=h.length,g=0<(g=d.length-y)?g:0,x={options:{gapSize:p.gapSize}},f={top:[],bottom:[],intersect:[]},m={top:{styles:{lineWidth:p.lineWidth,lineColor:p.fallingTrendColor||p.color,dashStyle:p.dashStyle}},bottom:{styles:{lineWidth:p.lineWidth,lineColor:p.risingTrendColor||p.color,dashStyle:p.dashStyle}},intersect:p.changeTrendLine};y--;)o=h[y],e=h[y-1],t=d[y-1+g],r=d[y-2+g],i=d[y+g],l=d[y+g+1],n=o.options.color,s={x:o.x,plotX:o.plotX,plotY:o.plotY,isNull:!1},!r&&t&&c.yData[t.index-1]&&(r=T(c,t.index-1,3)),!l&&i&&c.yData[i.index+1]&&(l=T(c,i.index+1,3)),!t&&r&&c.yData[r.index+1]?t=T(c,r.index+1,3):!t&&i&&c.yData[i.index-1]&&(t=T(c,i.index-1,3)),o&&t&&i&&r&&o.x!==t.x&&(o.x===i.x?(r=t,t=i):o.x===r.x?(t=r,r={close:c.yData[t.index-1][3],x:c.xData[t.index-1]}):l&&o.x===l.x&&(t=l,r=i)),e&&r&&t?(i={x:e.x,plotX:e.plotX,plotY:e.plotY,isNull:!1},o.y>=t.close&&e.y>=r.close?(o.color=n||p.fallingTrendColor||p.color,f.top.push(s)):o.y<t.close&&e.y<r.close?(o.color=n||p.risingTrendColor||p.color,f.bottom.push(s)):(f.intersect.push(s),f.intersect.push(i),f.intersect.push(D(i,{isNull:!0})),o.y>=t.close&&e.y<r.close?(o.color=n||p.fallingTrendColor||p.color,e.color=n||p.risingTrendColor||p.color,f.top.push(s),f.top.push(D(i,{isNull:!0}))):o.y<t.close&&e.y>=r.close&&(o.color=n||p.risingTrendColor||p.color,e.color=n||p.fallingTrendColor||p.color,f.bottom.push(s),f.bottom.push(D(i,{isNull:!0}))))):t&&(o.y>=t.close?(o.color=n||p.fallingTrendColor||p.color,f.top.push(s)):(o.color=n||p.risingTrendColor||p.color,f.bottom.push(s)));v(f,function(o,e){a.points=o,a.options=D(m[e].styles,x),a.graph=a["graph"+e+"Line"],j.prototype.drawGraph.call(a),a["graph"+e+"Line"]=a.graph}),a.points=h,a.options=p,a.graph=u},getValues:function(o,e){var t=e.period;e=e.multiplier;var r,i=o.xData,l=o.yData,n=[],s=[],a=[],p=0===t?0:t-1,c=[],d=[];if(!(i.length<=t||!b(l[0])||4!==l[0].length||t<0)){for(o=S.prototype.getValues.call(this,o,{period:t}).yData,r=0;r<o.length;r++){var h=l[p+r],u=l[p+r-1]||[],y=c[r-1],g=d[r-1],x=a[r-1];0===r&&(y=g=x=0),t=C((h[1]+h[2])/2+e*o[r]);var f,m=C((h[1]+h[2])/2-e*o[r]);c[r]=t<y||y<u[3]?t:y,d[r]=g<m||u[3]<g?m:g,x===y&&h[3]<c[r]||x===g&&h[3]<d[r]?f=c[r]:(x===y&&h[3]>c[r]||x===g&&h[3]>d[r])&&(f=d[r]),n.push([i[p+r],f]),s.push(i[p+r]),a.push(f)}return{values:n,xData:s,yData:a}}}})}),e(o,"masters/indicators/supertrend.src.js",[],function(){})});