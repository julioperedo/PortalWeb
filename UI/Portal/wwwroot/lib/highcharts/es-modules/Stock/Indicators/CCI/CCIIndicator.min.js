"use strict";import SeriesRegistry from"../../../Core/Series/SeriesRegistry.js";const SMAIndicator=SeriesRegistry.seriesTypes["sma"];import U from"../../../Core/Utilities.js";const{isArray,merge}=U;function sumArray(e){return e.reduce(function(e,t){return e+t},0)}function meanDeviation(e,t){var r=e.length;let i=0,s;for(s=0;s<r;s++)i+=Math.abs(t-e[s]);return i}class CCIIndicator extends SMAIndicator{constructor(){super(...arguments),this.data=void 0,this.points=void 0,this.options=void 0}getValues(e,t){const r=t.period,i=e.xData,s=e.yData,a=s?s.length:0,o=[],n=[],u=[],c=[];let d,p,l,h,f=1,g,m,y;if(!(i.length<=r)&&isArray(s[0])&&4===s[0].length){for(;f<r;)p=s[f-1],o.push((p[1]+p[2]+p[3])/3),f++;for(y=r;y<=a;y++)m=((p=s[y-1])[1]+p[2]+p[3])/3,h=o.push(m),d=(m-(g=sumArray(l=o.slice(h-r))/r))/(.015*(meanDeviation(l,g)/r)),n.push([i[y-1],d]),u.push(i[y-1]),c.push(d);return{values:n,xData:u,yData:c}}}}CCIIndicator.defaultOptions=merge(SMAIndicator.defaultOptions,{params:{index:void 0}}),SeriesRegistry.registerSeriesType("cci",CCIIndicator);export default CCIIndicator;