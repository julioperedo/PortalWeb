import U from"./Utilities.js";var addEvent=U.addEvent,destroyObjectProperties=U.destroyObjectProperties,fireEvent=U.fireEvent,objectEach=U.objectEach,pick=U.pick,StackingAxisAdditions=function(){function t(t){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=t}return t.prototype.buildStacks=function(){var t,i,s=this.axis,o=s.series,e=pick(s.options.reversedStacks,!0),c=o.length;if(!s.isXAxis){for(this.usePercentage=!1,i=c;i--;)(t=o[e?i:c-i-1]).setStackedPoints(),t.setGroupedPoints();for(i=0;i<c;i++)o[i].modifyStacks();fireEvent(s,"afterBuildStacks")}},t.prototype.cleanStacks=function(){var t;this.axis.isXAxis||(this.oldStacks&&(t=this.stacks=this.oldStacks),objectEach(t,function(t){objectEach(t,function(t){t.cumulative=t.total})}))},t.prototype.resetStacks=function(){var t=this,i=t.axis,s=t.stacks;i.isXAxis||objectEach(s,function(i){objectEach(i,function(s,o){s.touched<t.stacksTouched?(s.destroy(),delete i[o]):(s.total=null,s.cumulative=null)})})},t.prototype.renderStackTotals=function(){var t=this.axis.chart,i=t.renderer,s=this.stacks,o=this.stackTotalGroup=this.stackTotalGroup||i.g("stack-labels").attr({visibility:"visible",zIndex:6}).add();o.translate(t.plotLeft,t.plotTop),objectEach(s,function(t){objectEach(t,function(t){t.render(o)})})},t}(),StackingAxis=function(){function t(){}return t.compose=function(i){i.prototype;addEvent(i,"init",t.onInit),addEvent(i,"destroy",t.onDestroy)},t.onDestroy=function(){var t=this.stacking;if(t){var i=t.stacks;objectEach(i,function(t,s){destroyObjectProperties(t),i[s]=null}),t&&t.stackTotalGroup&&t.stackTotalGroup.destroy()}},t.onInit=function(){this.stacking||(this.stacking=new StackingAxisAdditions(this))},t}();export default StackingAxis;