"use strict";import U from"../Core/Utilities.js";const{extend,isNumber,pick}=U;function getListOfParents(e){return e.reduce((e,t)=>{var r=pick(t.parent,"");return void 0===e[r]&&(e[r]=[]),e[r].push(t),e},{})}function getNode(n,e,i,t,s,d){const r=d&&d.after,o=d&&d.before,a={data:t,depth:i-1,id:n,level:i,parent:e||""};let u=0,c=0,f,p;"function"==typeof o&&o(a,d);e=(s[n]||[]).map(e=>{var t=getNode(e.id,n,i+1,e,s,d),r=e.start||NaN,e=!0===e.milestone?r:e.end||NaN;return f=!isNumber(f)||r<f?r:f,p=!isNumber(p)||e>p?e:p,u=u+1+t.descendants,c=Math.max(t.height+1,c),t});return t&&(t.start=pick(t.start,f),t.end=pick(t.end,p)),extend(a,{children:e,descendants:u,height:c}),"function"==typeof r&&r(a,d),a}function getTree(e,t){return getNode("",null,1,null,getListOfParents(e),t)}const Tree={getNode:getNode,getTree:getTree};export default Tree;