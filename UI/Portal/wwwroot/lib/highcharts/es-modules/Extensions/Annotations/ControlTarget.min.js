"use strict";import ControlPoint from"./ControlPoint.js";import MockPoint from"./MockPoint.js";import U from"../../Core/Utilities.js";var ControlTarget;!function(t){const o=[];function n(){const i=this.controlPoints,s=this.options.controlPoints||[];s.forEach((t,o)=>{const n=U.merge(this.options.controlPointOptions,t);n.index||(n.index=o),s[o]=n,i.push(new ControlPoint(this.chart,this,n))})}function i(t){const o=t.series.getPlotBox(),n=t.series.chart,i=t.mock?t.toAnchor():n.tooltip&&n.tooltip.getAnchor.call({chart:t.series.chart},t)||[0,0,0,0],s={x:i[0]+(this.options.x||0),y:i[1]+(this.options.y||0),height:i[2]||0,width:i[3]||0};return{relativePosition:s,absolutePosition:U.merge(s,{x:s.x+(t.mock?o.translateX:n.plotLeft),y:s.y+(t.mock?o.translateY:n.plotTop)})}}function s(){this.controlPoints.forEach(t=>t.destroy()),this.chart=null,this.controlPoints=null,this.points=null,this.options=null,this.annotation&&(this.annotation=null)}function r(){var t=this.options;return t.points||t.point&&U.splat(t.point)}function e(){const t=this.getPointsOptions(),o=this.points,n=t&&t.length||0;let i,s;for(i=0;i<n;i++){if(!(s=this.point(t[i],o[i])))return void(o.length=0);s.mock&&s.refresh(),o[i]=s}return o}function l(t,o){return t&&t.series?t:(o&&null!==o.series||(U.isObject(t)?o=new MockPoint(this.chart,this,t):U.isString(t)?o=this.chart.get(t)||null:"function"==typeof t&&(o=(n=t.call(o,this)).series?n:new MockPoint(this.chart,this,t))),o);var n}function c(o){this.controlPoints.forEach(t=>t.redraw(o))}function h(){this.controlPoints.forEach(t=>t.render())}function a(n,i,s,r,e){var t;this.chart.inverted&&(t=i,i=s,s=t),this.points.forEach((t,o)=>this.transformPoint(n,i,s,r,e,o),this)}function u(t,o,n,i,s,r){let e=this.points[r];(e=e.mock?e:this.points[r]=MockPoint.fromPoint(e))[t](o,n,i,s)}function f(t,o){this.transform("translate",null,null,t,o)}function p(t,o,n){this.transformPoint("translate",null,null,t,o,n)}t.compose=function(t){U.pushUnique(o,t)&&U.merge(!0,t.prototype,{addControlPoints:n,anchor:i,destroyControlTarget:s,getPointsOptions:r,linkPoints:e,point:l,redrawControlPoints:c,renderControlPoints:h,transform:a,transformPoint:u,translate:f,translatePoint:p})}}(ControlTarget=ControlTarget||{});export default ControlTarget;