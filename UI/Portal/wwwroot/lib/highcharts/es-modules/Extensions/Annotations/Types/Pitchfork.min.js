"use strict";import Annotation from"../Annotation.js";import InfinityLine from"./InfinityLine.js";import MockPoint from"../MockPoint.js";import U from"../../../Core/Utilities.js";const merge=U["merge"];class Pitchfork extends InfinityLine{static outerLineEdgePoint(o){return function(t){const i=t.annotation,n=i.points;return Pitchfork.findEdgePoint(n[o],n[0],new MockPoint(i.chart,t,i.midPointOptions()))}}static findEdgePoint(t,i,n){n=Math.atan2(n.plotY-i.plotY,n.plotX-i.plotX);return{x:t.plotX+1e7*Math.cos(n),y:t.plotY+1e7*Math.sin(n)}}static middleLineEdgePoint(t){const i=t.annotation,n=i.points;return InfinityLine.findEdgePoint(n[0],new MockPoint(i.chart,t,i.midPointOptions()))}midPointOptions(){var t=this.points;return{x:(t[1].x+t[2].x)/2,y:(t[1].y+t[2].y)/2,xAxis:t[0].series.xAxis,yAxis:t[0].series.yAxis}}addShapes(){this.addLines(),this.addBackgrounds()}addLines(){this.initShape({type:"path",points:[this.points[0],Pitchfork.middleLineEdgePoint]},0),this.initShape({type:"path",points:[this.points[1],Pitchfork.topLineEdgePoint]},1),this.initShape({type:"path",points:[this.points[2],Pitchfork.bottomLineEdgePoint]},2)}addBackgrounds(){const t=this.shapes,i=this.options.typeOptions;var n=this.initShape(merge(i.innerBackground,{type:"path",points:[function(t){const i=t.annotation,n=i.points,o=i.midPointOptions();return{x:(n[1].x+o.x)/2,y:(n[1].y+o.y)/2,xAxis:o.xAxis,yAxis:o.yAxis}},t[1].points[1],t[2].points[1],function(t){const i=t.annotation,n=i.points,o=i.midPointOptions();return{x:(o.x+n[2].x)/2,y:(o.y+n[2].y)/2,xAxis:o.xAxis,yAxis:o.yAxis}}]}),3),o=this.initShape(merge(i.outerBackground,{type:"path",points:[this.points[1],t[1].points[1],t[2].points[1],this.points[2]]}),4);i.innerBackground=n.options,i.outerBackground=o.options}}Pitchfork.topLineEdgePoint=Pitchfork.outerLineEdgePoint(1),Pitchfork.bottomLineEdgePoint=Pitchfork.outerLineEdgePoint(0),Pitchfork.prototype.defaultOptions=merge(InfinityLine.prototype.defaultOptions,{typeOptions:{innerBackground:{fill:"rgba(130, 170, 255, 0.4)",strokeWidth:0},outerBackground:{fill:"rgba(156, 229, 161, 0.4)",strokeWidth:0}}});export default Annotation.types.pitchfork=Pitchfork;