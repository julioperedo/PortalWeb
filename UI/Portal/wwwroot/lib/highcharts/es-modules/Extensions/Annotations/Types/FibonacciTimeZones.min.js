"use strict";import Annotation from"../Annotation.js";import ControlPoint from"../ControlPoint.js";import CrookedLine from"./CrookedLine.js";import InfinityLine from"./InfinityLine.js";import MockPoint from"../MockPoint.js";import U from"../../../Core/Utilities.js";const merge=U["merge"];function edgePoint(p,a,c){return function(t){var o=t.annotation.chart,i=o.inverted?o.plotTop:o.plotLeft;let n=t.annotation.points;const e=n[0].series.xAxis,s=1<n.length?n[1].plotX-n[0].plotX:0,r=e.toValue(n[0].plotX+i+c*s);return n=[new MockPoint(o,n[0].target,{x:r,y:0,xAxis:n[0].options.xAxis,yAxis:n[0].options.yAxis}),new MockPoint(o,n[0].target,{x:r,y:1,xAxis:n[0].options.xAxis,yAxis:n[0].options.yAxis})],InfinityLine.findEdgePoint(n[p],n[a])}}class FibonacciTimeZones extends CrookedLine{addShapes(){let o=1,i=1;for(let t=0;t<11;t++){var n=t?o:0,n=[edgePoint(1,0,n),edgePoint(0,1,n)];i=o+i,o=i-o,1===t&&(this.secondLineEdgePoints=[n[0],n[1]]),this.initShape(merge(this.options.typeOptions.line,{type:"path",points:n}),t)}}addControlPoints(){const t=this.options,o=t.typeOptions,i=new ControlPoint(this.chart,this,merge(t.controlPointOptions,o.controlPointOptions),0);this.controlPoints.push(i),o.controlPointOptions=i.options}}FibonacciTimeZones.prototype.defaultOptions=merge(CrookedLine.prototype.defaultOptions,{typeOptions:{line:{stroke:"rgba(0, 0, 0, 0.75)",strokeWidth:1,fill:void 0},controlPointOptions:{positioner:function(){const t=this.target,o=this.graphic,i=t.secondLineEdgePoints,n={annotation:t},e=i[0](n).y,s=i[1](n).y,r=this.chart.plotLeft,p=this.chart.plotTop;let a=i[0](n).x,c=(e+s)/2;return this.chart.inverted&&([a,c]=[c,a]),{x:r+a-(o.width||0)/2,y:p+c-(o.height||0)/2}},events:{drag:function(t,o){o.chart.isInsidePlot(t.chartX-o.chart.plotLeft,t.chartY-o.chart.plotTop,{visiblePlotOnly:!0})&&(t=this.mouseMoveToTranslation(t),o.translatePoint(t.x,0,1),o.redraw(!1))}}}}});export default Annotation.types.fibonacciTimeZones=FibonacciTimeZones;