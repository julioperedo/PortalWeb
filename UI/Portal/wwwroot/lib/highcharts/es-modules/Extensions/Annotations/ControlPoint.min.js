"use strict";import EventEmitter from"./EventEmitter.js";import U from"../../Core/Utilities.js";const{merge,pick}=U;class ControlPoint extends EventEmitter{constructor(t,i,s,r){super(),this.graphic=void 0,this.nonDOMEvents=["drag"],this.chart=t,this.target=i,this.options=s,this.index=pick(s.index,r)}destroy(){super.destroy(),this.graphic&&(this.graphic=this.graphic.destroy()),this.chart=null,this.target=null,this.options=null}redraw(t){this.graphic[t?"animate":"attr"](this.options.positioner.call(this,this.target))}render(){const t=this.chart,i=this.options;this.graphic=t.renderer.symbol(i.symbol,0,0,i.width,i.height).add(t.controlPointsGroup).css(i.style),this.setVisibility(i.visible),this.addEvents()}setVisibility(t){this.graphic[t?"show":"hide"](),this.options.visible=t}update(t){var i=this.chart,s=this.target,r=this.index,t=merge(!0,this.options,t);this.destroy(),this.constructor(i,s,t,r),this.render(i.controlPointsGroup),this.redraw()}}export default ControlPoint;