"use strict";import U from"../Core/Utilities.js";const{addEvent,merge,wrap}=U,composedMembers=[],defaultOptions={color:"#ccd3ff",width:2,label:{format:"%a, %b %d %Y, %H:%M",formatter:function(t,e){return this.axis.chart.time.dateFormat(e||"",t)},rotation:0,style:{fontSize:"0.7em"}}};function compose(t,e){U.pushUnique(composedMembers,t)&&addEvent(t,"afterSetOptions",onAxisAfterSetOptions),U.pushUnique(composedMembers,e)&&(addEvent(e,"render",onPlotLineOrBandRender),wrap(e.prototype,"getLabelText",wrapPlotLineOrBandGetLabelText))}function onAxisAfterSetOptions(){const t=this.options,e=t.currentDateIndicator;if(e){const o="object"==typeof e?merge(defaultOptions,e):merge(defaultOptions);o.value=Date.now(),o.className="highcharts-current-date-indicator",t.plotLines||(t.plotLines=[]),t.plotLines.push(o)}}function onPlotLineOrBandRender(){this.label&&this.label.attr({text:this.getLabelText(this.options.label)})}function wrapPlotLineOrBandGetLabelText(t,e){const o=this.options;return o&&o.className&&-1!==o.className.indexOf("highcharts-current-date-indicator")&&o.label&&"function"==typeof o.label.formatter?(o.value=Date.now(),o.label.formatter.call(this,o.value,o.label.format)):t.call(this,e)}const CurrentDateIndication={compose:compose};export default CurrentDateIndication;