"use strict";import H from"../parts/Globals.js";import U from"../parts/Utilities.js";var pick=U.pick,deg2rad=H.deg2rad;function rotate3D(t,e,i,p){return{x:p.cosB*t-p.sinB*i,y:-p.sinA*p.sinB*t+p.cosA*e-p.cosB*p.sinA*i,z:p.cosA*p.sinB*t+p.sinA*e+p.cosA*p.cosB*i}}H.perspective3D=function(t,e,i){var p=i>0&&i<Number.POSITIVE_INFINITY?i/(t.z+e.z+i):1;return{x:t.x*p,y:t.y*p}},H.perspective=function(t,e,i,p){var o=e.options.chart.options3d,r=pick(p,!!i&&e.inverted),s={x:e.plotWidth/2,y:e.plotHeight/2,z:o.depth/2,vd:pick(o.depth,1)*pick(o.viewDistance,0)},n=e.scale3d||1,a=deg2rad*o.beta*(r?-1:1),c=deg2rad*o.alpha*(r?-1:1),h={cosA:Math.cos(c),cosB:Math.cos(-a),sinA:Math.sin(c),sinB:Math.sin(-a)};return i||(s.x+=e.plotLeft,s.y+=e.plotTop),t.map(function(t){var e=rotate3D((r?t.y:t.x)-s.x,(r?t.x:t.y)-s.y,(t.z||0)-s.z,h),i=H.perspective3D(e,s,s.vd);return i.x=i.x*n+s.x,i.y=i.y*n+s.y,i.z=e.z*n+s.z,{x:r?i.y:i.x,y:r?i.x:i.y,z:i.z}})},H.pointCameraDistance=function(t,e){var i=e.options.chart.options3d,p=e.plotWidth/2,o=e.plotHeight/2,r=pick(i.depth,1)*pick(i.viewDistance,0)+i.depth;return Math.sqrt(Math.pow(p-pick(t.plotX,t.x),2)+Math.pow(o-pick(t.plotY,t.y),2)+Math.pow(r-pick(t.plotZ,t.z),2))},H.shapeArea=function(t){var e,i,p=0;for(e=0;e<t.length;e++)i=(e+1)%t.length,p+=t[e].x*t[i].y-t[i].x*t[e].y;return p/2},H.shapeArea3d=function(t,e,i){return H.shapeArea(H.perspective(t,e,i))};