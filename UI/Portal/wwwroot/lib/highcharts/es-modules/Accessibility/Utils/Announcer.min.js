"use strict";import AST from"../../Core/Renderer/HTML/AST.js";import DOMElementProvider from"./DOMElementProvider.js";import H from"../../Core/Globals.js";const doc=H["doc"];import HU from"./HTMLUtilities.js";const{addClass,visuallyHideElement}=HU;import U from"../../Core/Utilities.js";const attr=U["attr"];class Announcer{constructor(e,n){this.chart=e,this.domElementProvider=new DOMElementProvider,this.announceRegion=this.addAnnounceRegion(n)}destroy(){this.domElementProvider.destroyCreatedElements()}announce(e){AST.setElementHTML(this.announceRegion,e),this.clearAnnouncementRegionTimer&&clearTimeout(this.clearAnnouncementRegionTimer),this.clearAnnouncementRegionTimer=setTimeout(()=>{this.announceRegion.innerHTML=AST.emptyHTML,delete this.clearAnnouncementRegionTimer},3e3)}addAnnounceRegion(e){const n=this.chart.announcerContainer||this.createAnnouncerContainer(),t=this.domElementProvider.createElement("div");return attr(t,{"aria-hidden":!1,"aria-live":e,"aria-atomic":!0}),this.chart.styledMode?addClass(t,"highcharts-visually-hidden"):visuallyHideElement(t),n.appendChild(t),t}createAnnouncerContainer(){const e=this.chart,n=doc.createElement("div");return attr(n,{"aria-hidden":!1,class:"highcharts-announcer-container"}),n.style.position="relative",e.renderTo.insertBefore(n,e.renderTo.firstChild),e.announcerContainer=n}}export default Announcer;