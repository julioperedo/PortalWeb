"use strict";import HTMLUtilities from"../Utils/HTMLUtilities.js";const{escapeStringForHTML,stripHTMLTagsFromString}=HTMLUtilities;function getChartAnnotationLabels(t){const n=t.annotations||[];return n.reduce((t,n)=>t=n.options&&!1!==n.options.visible?t.concat(n.labels):t,[])}function getLabelText(t){return t.options&&t.options.accessibility&&t.options.accessibility.description||t.graphic&&t.graphic.text&&t.graphic.text.textStr||""}function getAnnotationLabelDescription(t){var n=t.options&&t.options.accessibility&&t.options.accessibility.description;if(n)return n;const i=t.chart;n=getLabelText(t);const o=t.points;const e=o.filter(t=>!!t.graphic).map(t=>{var n=t.accessibility&&t.accessibility.valueDescription||((n=t).graphic&&n.graphic.element&&n.graphic.element.getAttribute("aria-label")||""),t=t&&t.series.name||"";return(t?t+", ":"")+"data point "+n}).filter(t=>!!t);var s=e.length,a="accessibility.screenReaderSection.annotations.description"+(1<s?"MultiplePoints":s?"SinglePoint":"NoPoints"),n={annotationText:n,annotation:t,numPoints:s,annotationPoint:e[0],additionalAnnotationPoints:e.slice(1)};return i.langFormat(a,n)}function getAnnotationListItems(n){const t=getChartAnnotationLabels(n);return t.map(t=>{t=escapeStringForHTML(stripHTMLTagsFromString(getAnnotationLabelDescription(t),n.renderer.forExport));return t?`<li>${t}</li>`:""})}function getAnnotationsInfoHTML(t){var n=t.annotations;if(!n||!n.length)return"";const i=getAnnotationListItems(t);return`<ul style="list-style-type: none">${i.join(" ")}</ul>`}function getPointAnnotationTexts(n){const t=getChartAnnotationLabels(n.series.chart),i=t.filter(t=>-1<t.points.indexOf(n));return i.length?i.map(t=>""+getLabelText(t)):[]}const AnnotationsA11y={getAnnotationsInfoHTML:getAnnotationsInfoHTML,getAnnotationLabelDescription:getAnnotationLabelDescription,getAnnotationListItems:getAnnotationListItems,getPointAnnotationTexts:getPointAnnotationTexts};export default AnnotationsA11y;