{"version":3,"sources":["PathfinderAlgorithms.js"],"names":["U","extend","pick","min","Math","max","abs","findLastObstacleBefore","obstacles","xMin","startIx","cursor","cmp","left","right","length","pointWithinObstacle","obstacle","point","x","xMax","y","yMax","yMin","findObstacleFromPoint","i","pathFromSegments","segments","path","push","start","end","limitObstacleToBounds","bounds","algorithms","straight","simpleConnect","options","endSegment","startObstacle","prevWaypoint","waypoint","waypoint2","useMax","endPoint","dir","startDirectionX","chartObstacles","startObstacleIx","endObstacleIx","copyFromPoint","from","fromKey","to","toKey","offset","getMeOut","direction","requiresObstacles","fastAvoid","extractedEndPoint","dirIsX","endSegments","forceObstacleBreak","metrics","obstacleMetrics","softMinX","maxWidth","softMaxX","softMinY","maxHeight","softMaxY","pivotPoint","fromPoint","toPoint","directionIsX","firstPoint","lastPoint","highestPoint","lowestPoint","searchDirection","getDodgeDirection","minPivot","maxPivot","softBounds","soft","hardBounds","hard","toPointMax","toPointMin","maxOutOfSoftBounds","minOutOfSoftBounds","maxOutOfHardBounds","minOutOfHardBounds","minDistance","maxDistance","slice","goalPoint","extractFromObstacle","clearPathTo","pivot","waypointUseMax","envelopingObstacle","secondEnvelopingObstacle","envelopWaypoint","obstacleMargin","obstacleOptions","margin","concat","reverse"],"mappings":"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"}