"use strict";import Color from"../parts/Color.js";var color=Color.parse;import H from"../parts/Globals.js";import LegendSymbolMixin from"../mixins/legend-symbol.js";import U from"../parts/Utilities.js";var clamp=U.clamp,extend=U.extend,isNumber=U.isNumber,merge=U.merge,pick=U.pick,pInt=U.pInt,seriesType=U.seriesType,wrap=U.wrap;import"../parts/Options.js";import"../parts-more/GaugeSeries.js";var SolidGaugeAxis,Renderer=H.Renderer;wrap(Renderer.prototype.symbols,"arc",function(t,o,s,e,r,a){var i=t(o,s,e,r,a);if(a.rounded){var n=((a.r||e)-(a.innerR||0))/2,l=i[0],d=i[2];if("M"===l[0]&&"L"===d[0]){var p=["A",n,n,0,1,1,l[1],l[2]],h=["A",n,n,0,1,1,d[1],d[2]];i[2]=h,i[4]=p}}return i}),function(t){var o={initDataClasses:function(t){var o,s=this.chart,e=0,r=this.options;this.dataClasses=o=[],t.dataClasses.forEach(function(a,i){var n;a=merge(a),o.push(a),a.color||("category"===r.dataClassColor?(n=s.options.colors,a.color=n[e++],e===n.length&&(e=0)):a.color=color(r.minColor).tweenTo(color(r.maxColor),i/(t.dataClasses.length-1)))})},initStops:function(t){this.stops=t.stops||[[0,this.options.minColor],[1,this.options.maxColor]],this.stops.forEach(function(t){t.color=color(t[1])})},toColor:function(t,o){var s,e,r,a,i,n,l=this.stops,d=this.dataClasses;if(d){for(n=d.length;n--;)if(e=(i=d[n]).from,r=i.to,(void 0===e||t>=e)&&(void 0===r||t<=r)){a=i.color,o&&(o.dataClass=n);break}}else{for(this.logarithmic&&(t=this.val2lin(t)),s=1-(this.max-t)/(this.max-this.min),n=l.length;n--&&!(s>l[n][0]););e=l[n]||l[n+1],s=1-((r=l[n+1]||e)[0]-s)/(r[0]-e[0]||1),a=e.color.tweenTo(r.color,s)}return a}};t.init=function(t){extend(t,o)}}(SolidGaugeAxis||(SolidGaugeAxis={}));var solidGaugeOptions={colorByPoint:!0,dataLabels:{y:0}};seriesType("solidgauge","gauge",solidGaugeOptions,{drawLegendSymbol:LegendSymbolMixin.drawRectangle,translate:function(){var t=this.yAxis;SolidGaugeAxis.init(t),!t.dataClasses&&t.options.dataClasses&&t.initDataClasses(t.options),t.initStops(t.options),H.seriesTypes.gauge.prototype.translate.call(this)},drawPoints:function(){var t,o=this,s=o.yAxis,e=s.center,r=o.options,a=o.chart.renderer,i=r.overshoot,n=isNumber(i)?i/180*Math.PI:0;isNumber(r.threshold)&&(t=s.startAngleRad+s.translate(r.threshold,null,null,null,!0)),this.thresholdAngleRad=pick(t,s.startAngleRad),o.points.forEach(function(t){if(!t.isNull){var i,l,d,p,h=t.graphic,c=s.startAngleRad+s.translate(t.y,null,null,null,!0),u=pInt(pick(t.options.radius,r.radius,100))*e[2]/200,g=pInt(pick(t.options.innerRadius,r.innerRadius,60))*e[2]/200,m=s.toColor(t.y,t),f=Math.min(s.startAngleRad,s.endAngleRad),C=Math.max(s.startAngleRad,s.endAngleRad);"none"===m&&(m=t.color||o.color||"none"),"none"!==m&&(t.color=m),c=clamp(c,f-n,C+n),!1===r.wrap&&(c=clamp(c,f,C)),d=Math.min(c,o.thresholdAngleRad),(p=Math.max(c,o.thresholdAngleRad))-d>2*Math.PI&&(p=d+2*Math.PI),t.shapeArgs=i={x:e[0],y:e[1],r:u,innerR:g,start:d,end:p,rounded:r.rounded},t.startR=u,h?(l=i.d,h.animate(extend({fill:m},i)),l&&(i.d=l)):t.graphic=h=a.arc(i).attr({fill:m,"sweep-flag":0}).add(o.group),o.chart.styledMode||("square"!==r.linecap&&h.attr({"stroke-linecap":"round","stroke-linejoin":"round"}),h.attr({stroke:r.borderColor||"none","stroke-width":r.borderWidth||0})),h&&h.addClass(t.getClassName(),!0)}})},animate:function(t){t||(this.startAngleRad=this.thresholdAngleRad,H.seriesTypes.pie.prototype.animate.call(this,t))}});export default SolidGaugeAxis;