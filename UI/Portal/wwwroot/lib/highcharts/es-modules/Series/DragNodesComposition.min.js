"use strict";import U from"../Core/Utilities.js";const addEvent=U["addEvent"],composedMembers=[];function compose(o){U.pushUnique(composedMembers,o)&&addEvent(o,"load",onChartLoad)}function onChartLoad(){const t=this;let o,s,i;t.container&&(o=addEvent(t.container,"mousedown",o=>{const e=t.hoverPoint;e&&e.series&&e.series.hasDraggableNodes&&e.series.options.draggable&&(e.series.onMouseDown(e,o),s=addEvent(t.container,"mousemove",o=>e&&e.series&&e.series.onMouseMove(e,o)),i=addEvent(t.container.ownerDocument,"mouseup",o=>(s(),i(),e&&e.series&&e.series.onMouseUp(e,o))))})),addEvent(t,"destroy",function(){o()})}function onMouseDown(o,e){e=this.chart.pointer.normalize(e);o.fixedPosition={chartX:e.chartX,chartY:e.chartY,plotX:o.plotX,plotY:o.plotY},o.inDragMode=!0}function onMouseMove(o,e){if(o.fixedPosition&&o.inDragMode){const s=this.chart,i=s.pointer.normalize(e),n=o.fixedPosition.chartX-i.chartX,a=o.fixedPosition.chartY-i.chartY,r=s.graphLayoutsLookup;var t;(5<Math.abs(n)||5<Math.abs(a))&&(e=o.fixedPosition.plotX-n,t=o.fixedPosition.plotY-a,s.isInsidePlot(e,t)&&(o.plotX=e,o.plotY=t,o.hasDragged=!0,this.redrawHalo(o),r.forEach(o=>{o.restartSimulation()})))}}function onMouseUp(o,e){o.fixedPosition&&(o.hasDragged&&(this.layout.enableSimulation?this.layout.start():this.chart.redraw()),o.inDragMode=o.hasDragged=!1,this.options.fixedDraggable||delete o.fixedPosition)}function redrawHalo(o){o&&this.halo&&this.halo.attr({d:o.haloPath(this.options.states.hover.halo.size)})}const DragNodesComposition={compose:compose,onMouseDown:onMouseDown,onMouseMove:onMouseMove,onMouseUp:onMouseUp,redrawHalo:redrawHalo};export default DragNodesComposition;