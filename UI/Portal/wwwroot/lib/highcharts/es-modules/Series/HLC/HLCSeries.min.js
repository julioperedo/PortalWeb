"use strict";import HLCPoint from"./HLCPoint.js";import HLCSeriesDefaults from"./HLCSeriesDefaults.js";import SeriesRegistry from"../../Core/Series/SeriesRegistry.js";const ColumnSeries=SeriesRegistry.seriesTypes["column"];import U from"../../Core/Utilities.js";const{extend,merge}=U;class HLCSeries extends ColumnSeries{constructor(){super(...arguments),this.data=void 0,this.options=void 0,this.points=void 0,this.yData=void 0}extendStem(t,e,o){const i=t[0],s=t[1];"number"==typeof i[2]&&(i[2]=Math.max(o+e,i[2])),"number"==typeof s[2]&&(s[2]=Math.min(o-e,s[2]))}getPointPath(t,e){const o=e.strokeWidth(),i=t.series,s=o%2/2,r=Math.round(t.plotX)-s,n=Math.round(t.shapeArgs.width/2);t.plotClose;const a=[["M",r,Math.round(t.yBottom)],["L",r,Math.round(t.plotHigh)]];return null!==t.close&&(e=Math.round(t.plotClose)+s,a.push(["M",r,e],["L",r+n,e]),i.extendStem(a,o/2,e)),a}drawSinglePoint(t){const e=t.series,o=e.chart;let i,s=t.graphic;void 0!==t.plotY&&(s||(t.graphic=s=o.renderer.path().add(e.group)),o.styledMode||s.attr(e.pointAttribs(t,t.selected&&"select")),i=e.getPointPath(t,s),s[s?"animate":"attr"]({d:i}).addClass(t.getClassName(),!0))}drawPoints(){this.points.forEach(this.drawSinglePoint)}init(){super.init.apply(this,arguments),this.options.stacking=void 0}pointAttribs(t,e){const o=super.pointAttribs.call(this,t,e);return delete o.fill,o}toYData(t){return[t.high,t.low,t.close]}translate(){const s=this,r=s.yAxis,t=this.pointArrayMap&&this.pointArrayMap.slice()||[],n=t.map(t=>"plot"+(t.charAt(0).toUpperCase()+t.slice(1)));n.push("yBottom"),t.push("low"),super.translate.apply(s),s.points.forEach(function(i){t.forEach(function(t,e){let o=i[t];null!==o&&(s.dataModify&&(o=s.dataModify.modifyValue(o)),i[n[e]]=r.toPixels(o,!0))}),i.tooltipPos[1]=i.plotHigh+r.pos-s.chart.plotTop})}}HLCSeries.defaultOptions=merge(ColumnSeries.defaultOptions,HLCSeriesDefaults),extend(HLCSeries.prototype,{pointClass:HLCPoint,animate:null,directTouch:!1,pointArrayMap:["high","low","close"],pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"},pointValKey:"close"}),SeriesRegistry.registerSeriesType("hlc",HLCSeries);export default HLCSeries;