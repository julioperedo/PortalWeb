"use strict";import BulletPoint from"./BulletPoint.js";import BulletSeriesDefaults from"./BulletSeriesDefaults.js";import ColumnSeries from"../Column/ColumnSeries.js";import SeriesRegistry from"../../Core/Series/SeriesRegistry.js";import U from"../../Core/Utilities.js";const{extend,isNumber,merge,pick,relativeLength}=U;class BulletSeries extends ColumnSeries{constructor(){super(...arguments),this.data=void 0,this.options=void 0,this.points=void 0,this.targetData=void 0}drawPoints(){const a=this,n=a.chart,p=a.options,d=p.animationLimit||250;super.drawPoints.apply(this,arguments);for(const c of a.points){var u=c.options,m=c.target,h=c.y;let e,r=c.targetGraphic,i,o,s,l;if(isNumber(m)&&null!==m){o=(s=merge(p.targetOptions,u.targetOptions)).height;let t=c.shapeArgs;c.dlBox&&t&&!isNumber(t.width)&&(t=c.dlBox),i=relativeLength(s.width,t.width),l=a.yAxis.translate(m,!1,!0,!1,!0)-s.height/2-.5,e=a.crispCol.apply({chart:n,borderWidth:s.borderWidth,options:{crisp:p.crisp}},[t.x+t.width/2-i/2,l,i,o]),r?(r[n.pointCount<d?"animate":"attr"](e),isNumber(h)&&null!==h?r.element.point=c:r.element.point=void 0):c.targetGraphic=r=n.renderer.rect().attr(e).add(a.group),n.styledMode||r.attr({fill:pick(s.color,u.color,a.zones.length&&(c.getZone.call({series:a,x:c.x,y:m,options:{}}).color||a.color)||void 0,c.color,a.color),stroke:pick(s.borderColor,c.borderColor,a.options.borderColor),"stroke-width":s.borderWidth,r:s.borderRadius}),isNumber(h)&&null!==h&&(r.element.point=c),r.addClass(c.getClassName()+" highcharts-bullet-target",!0)}else r&&(c.targetGraphic=r.destroy())}}getExtremes(t){const e=super.getExtremes.call(this,t),r=this.targetData;return r&&r.length&&(t=super.getExtremes.call(this,r),isNumber(t.dataMin)&&(e.dataMin=Math.min(pick(e.dataMin,1/0),t.dataMin)),isNumber(t.dataMax)&&(e.dataMax=Math.max(pick(e.dataMax,-1/0),t.dataMax))),e}}BulletSeries.defaultOptions=merge(ColumnSeries.defaultOptions,BulletSeriesDefaults),extend(BulletSeries.prototype,{parallelArrays:["x","y","target"],pointArrayMap:["y","target"]}),BulletSeries.prototype.pointClass=BulletPoint,SeriesRegistry.registerSeriesType("bullet",BulletSeries);export default BulletSeries;