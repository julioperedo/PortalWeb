"use strict";import H from"../Core/Globals.js";const noop=H["noop"];import Series from"../Core/Series/Series.js";import U from"../Core/Utilities.js";const{addEvent,defined}=U;var DerivedComposition;!function(e){const i=[];function t(){Series.prototype.init.apply(this,arguments),this.initialised=!1,this.baseSeries=null,this.eventRemovers=[],this.addEvents()}function o(){const e=this.chart,s=this.options.baseSeries,i=defined(s)&&(e.series[s]||e.get(s));this.baseSeries=i||null}function r(){this.eventRemovers.push(addEvent(this.chart,"afterLinkSeries",()=>{this.setBaseSeries(),this.baseSeries&&!this.initialised&&(this.setDerivedData(),this.addBaseSeriesEvents(),this.initialised=!0)}))}function n(){this.eventRemovers.push(addEvent(this.baseSeries,"updatedData",()=>{this.setDerivedData()}),addEvent(this.baseSeries,"destroy",()=>{this.baseSeries=null,this.initialised=!1}))}function a(){this.eventRemovers.forEach(e=>{e()}),Series.prototype.destroy.apply(this,arguments)}e.hasDerivedData=!0,e.setDerivedData=noop,e.compose=function(e){if(U.pushUnique(i,e)){const s=e.prototype;s.addBaseSeriesEvents=n,s.addEvents=r,s.destroy=a,s.init=t,s.setBaseSeries=o}return e},e.init=t,e.setBaseSeries=o,e.addEvents=r,e.addBaseSeriesEvents=n,e.destroy=a}(DerivedComposition=DerivedComposition||{});export default DerivedComposition;