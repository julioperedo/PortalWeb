"use strict";import HollowCandlestickPoint from"./HollowCandlestickPoint.js";import SeriesRegistry from"../../Core/Series/SeriesRegistry.js";import U from"../../Core/Utilities.js";import Axis from"../../Core/Axis/Axis.js";const{candlestick:CandlestickSeries}=SeriesRegistry["seriesTypes"],{addEvent,merge}=U;class HollowCandlestickSeries extends CandlestickSeries{constructor(){super(...arguments),this.data=void 0,this.hollowCandlestickData=[],this.options=void 0,this.points=void 0}getPriceMovement(){const i=this,e=i.allGroupedData||i.yData,o=this.hollowCandlestickData;if(!o.length&&e&&e.length){o.push({isBullish:!0,trendDirection:"up"});for(let t=1;t<e.length;t++){var s=e[t],l=e[t-1];o.push(i.isBullish(s,l))}}}getLineColor(t){return"up"===t?this.options.upColor||"#06b535":this.options.color||"#f21313"}getPointFill(t){return t.isBullish?"transparent":"up"===t.trendDirection?this.options.upColor||"#06b535":this.options.color||"#f21313"}init(){super.init.apply(this,arguments),this.hollowCandlestickData=[]}isBullish(t,i){return{isBullish:t[0]<=t[3],trendDirection:t[3]<i[3]?"down":"up"}}pointAttribs(t,i){let e=super.pointAttribs.call(this,t,i),o;t=t.index,t=this.hollowCandlestickData[t];return e.fill=this.getPointFill(t)||e.fill,e.stroke=this.getLineColor(t.trendDirection)||e.stroke,i&&(o=this.options.states[i],e.fill=o.color||e.fill,e.stroke=o.lineColor||e.stroke,e["stroke-width"]=o.lineWidth||e["stroke-width"]),e}}HollowCandlestickSeries.defaultOptions=merge(CandlestickSeries.defaultOptions,{color:"#f21313",dataGrouping:{groupAll:!0,groupPixelWidth:10},lineColor:"#f21313",upColor:"#06b535",upLineColor:"#06b535"}),addEvent(HollowCandlestickSeries,"updatedData",function(){this.hollowCandlestickData.length&&(this.hollowCandlestickData.length=0)}),addEvent(Axis,"postProcessData",function(){const t=this.series;t.forEach(function(t){if(t.is("hollowcandlestick")){const i=t;i.getPriceMovement()}})}),HollowCandlestickSeries.prototype.pointClass=HollowCandlestickPoint,SeriesRegistry.registerSeriesType("hollowcandlestick",HollowCandlestickSeries);export default HollowCandlestickSeries;