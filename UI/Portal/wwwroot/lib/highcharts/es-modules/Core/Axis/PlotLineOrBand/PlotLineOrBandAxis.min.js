"use strict";import U from"../../Utilities.js";const{erase,extend,isNumber}=U;var PlotLineOrBandAxis;!function(t){const i=[];let o;function e(t){return this.addPlotBandOrLine(t,"plotBands")}function s(t,n){const i=this.userOptions;let e=new o(this,t);if(e=this.visible?e.render():e){if(this._addedPlotLB||(this._addedPlotLB=!0,(i.plotLines||[]).concat(i.plotBands||[]).forEach(t=>{this.addPlotBandOrLine(t)})),n){const s=i[n]||[];s.push(t),i[n]=s}this.plotLinesAndBands.push(e)}return e}function r(t){return this.addPlotBandOrLine(t,"plotLines")}function a(t,n,i){i=i||this.options;const e=this.getPlotLinePath({value:n,force:!0,acrossPanes:i.acrossPanes}),s=[],o=this.horiz,r=!isNumber(this.min)||!isNumber(this.max)||t<this.min&&n<this.min||t>this.max&&n>this.max;let a=this.getPlotLinePath({value:t,force:!0,acrossPanes:i.acrossPanes}),d,l=1,h;if(a&&e)for(r&&(h=a.toString()===e.toString(),l=0),d=0;d<a.length;d+=2){const u=a[d],L=a[d+1],c=e[d],P=e[d+1];"M"!==u[0]&&"L"!==u[0]||"M"!==L[0]&&"L"!==L[0]||"M"!==c[0]&&"L"!==c[0]||"M"!==P[0]&&"L"!==P[0]||(o&&c[1]===u[1]?(c[1]+=l,P[1]+=l):o||c[2]!==u[2]||(c[2]+=l,P[2]+=l),s.push(["M",u[1],u[2]],["L",L[1],L[2]],["L",P[1],P[2]],["L",c[1],c[2]],["Z"])),s.isFlat=h}else a=null;return s}function d(t){this.removePlotBandOrLine(t)}function l(i){const t=this.plotLinesAndBands,e=this.options,s=this.userOptions;if(t){let n=t.length;for(;n--;)t[n].id===i&&t[n].destroy();[e.plotLines||[],s.plotLines||[],e.plotBands||[],s.plotBands||[]].forEach(function(t){for(n=t.length;n--;)(t[n]||{}).id===i&&erase(t,t[n])})}}function h(t){this.removePlotBandOrLine(t)}t.compose=function(t,n){return o=o||t,U.pushUnique(i,n)&&extend(n.prototype,{addPlotBand:e,addPlotLine:r,addPlotBandOrLine:s,getPlotBandPath:a,removePlotBand:d,removePlotLine:h,removePlotBandOrLine:l}),n}}(PlotLineOrBandAxis=PlotLineOrBandAxis||{});export default PlotLineOrBandAxis;