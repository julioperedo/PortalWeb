"use strict";import U from"../Utilities.js";const{addEvent,defined,pick,pushUnique}=U;var ScrollbarAxis;!function(i){const o=[];let e;function c(i){var t=pick(i.options&&i.options.min,i.min),o=pick(i.options&&i.options.max,i.max);return{axisMin:t,axisMax:o,scrollMin:defined(i.dataMin)?Math.min(t,i.min,i.dataMin,pick(i.threshold,1/0)):t,scrollMax:defined(i.dataMax)?Math.max(o,i.max,i.dataMax,pick(i.threshold,-1/0)):o}}function s(){var i=this,t=i.scrollbar,o=t&&!t.options.opposite,o=i.horiz?2:o?3:1;t&&(i.chart.scrollbarsOffsets=[0,0],i.chart.axisOffset[o]+=t.size+(t.options.margin||0))}function r(){const a=this;a.options&&a.options.scrollbar&&a.options.scrollbar.enabled&&(a.options.scrollbar.vertical=!a.horiz,a.options.startOnTick=a.options.endOnTick=!1,a.scrollbar=new e(a.chart.renderer,a.options.scrollbar,a.chart),addEvent(a.scrollbar,"changed",function(i){var{axisMin:t,axisMax:o,scrollMin:e,scrollMax:s}=c(a),s=s-e;let r,n;defined(t)&&defined(o)&&(n=a.horiz&&!a.reversed||!a.horiz&&a.reversed?(r=e+s*this.to,e+s*this.from):(r=e+s*(1-this.from),e+s*(1-this.to)),this.shouldUpdateExtremes(i.DOMType)?(t="mousemove"!==i.DOMType&&"touchmove"!==i.DOMType&&void 0,a.setExtremes(n,r,!0,t,i)):this.setRange(this.from,this.to))}))}function n(){const t=this,{scrollMin:i,scrollMax:o}=c(t),e=t.scrollbar,s=t.axisTitleMargin+(t.titleOffset||0),r=t.chart.scrollbarsOffsets,n=t.options.margin||0;let a,l,p;if(e&&r){if(t.horiz)t.opposite||(r[1]+=s),e.position(t.left,t.top+t.height+2+r[1]-(t.opposite?n:0),t.width,t.height),t.opposite||(r[1]+=n),a=1;else{t.opposite&&(r[0]+=s);let i;i=e.options.opposite?t.left+t.width+2+r[0]-(t.opposite?0:n):t.opposite?0:n,e.position(i,t.top,t.width,t.height),t.opposite&&(r[0]+=n),a=0}r[a]+=e.size+(e.options.margin||0),isNaN(i)||isNaN(o)||!defined(t.min)||!defined(t.max)||t.min===t.max?e.setRange(0,1):(l=(t.min-i)/(o-i),p=(t.max-i)/(o-i),t.horiz&&!t.reversed||!t.horiz&&t.reversed?e.setRange(l,p):e.setRange(1-p,1-l))}}i.compose=function(i,t){pushUnique(o,t)&&(e=t),pushUnique(o,i)&&(addEvent(i,"afterGetOffset",s),addEvent(i,"afterInit",r),addEvent(i,"afterRender",n))}}(ScrollbarAxis=ScrollbarAxis||{});export default ScrollbarAxis;