"use strict";import U from"../parts/Utilities.js";var seriesType=U.seriesType;seriesType("cmf","sma",{params:{period:14,volumeSeriesID:"volume"}},{nameBase:"Chaikin Money Flow",isValid:function(){var e=this.chart,t=this.options,s=this.linkedParent,a=this.volumeSeries||(this.volumeSeries=e.get(t.params.volumeSeriesID)),i=s&&s.yData&&4===s.yData[0].length;function r(e){return e.xData&&e.xData.length>=t.params.period}return!!(s&&a&&r(s)&&r(a)&&i)},getValues:function(e,t){if(this.isValid())return this.getMoneyFlow(e.xData,e.yData,this.volumeSeries.yData,t.period)},getMoneyFlow:function(e,t,s,a){var i,r,n=t.length,l=[],u=0,o=0,h=[],p=[],m=[],f=-1;function v(e,t){var s,a,r,n=e[1],l=e[2],u=e[3];return null!==t&&null!==n&&null!==l&&null!==u&&n!==l?((r=u)-(a=l)-((s=n)-r))/(s-a)*t:(f=i,null)}if(a>0&&a<=n){for(i=0;i<a;i++)l[i]=v(t[i],s[i]),u+=s[i],o+=l[i];for(h.push(e[i-1]),p.push(i-f>=a&&0!==u?o/u:null),m.push([h[0],p[0]]);i<n;i++)l[i]=v(t[i],s[i]),u-=s[i-a],u+=s[i],o-=l[i-a],o+=l[i],r=[e[i],i-f>=a?o/u:null],h.push(r[0]),p.push(r[1]),m.push([r[0],r[1]])}return{values:m,xData:h,yData:p}}});