"use strict";import H from"../parts/Globals.js";import U from"../parts/Utilities.js";var correctFloat=U.correctFloat,isArray=U.isArray,seriesType=U.seriesType;import requiredIndicatorMixin from"../mixins/indicator-required.js";var EMAindicator=H.seriesTypes.ema,requiredIndicator=requiredIndicatorMixin;seriesType("dema","ema",{},{init:function(){var r=arguments,i=this;requiredIndicator.isParentLoaded(EMAindicator,"ema",i.type,function(t){t.prototype.init.apply(i,r)})},getEMA:function(r,i,t,e,a,o){return EMAindicator.prototype.calculateEma(o||[],r,void 0===a?1:a,this.chart.series[0].EMApercent,i,void 0===e?-1:e,t)},getValues:function(r,i){var t,e,a,o,s,n=i.period,c=2*n,p=r.xData,d=r.yData,u=d?d.length:0,y=-1,l=0,m=0,A=[],M=[],h=[],E=0,f=[];if(r.EMApercent=2/(n+1),!(u<2*n-1)){for(isArray(d[0])&&(y=i.index?i.index:0),m=(l=EMAindicator.prototype.accumulatePeriodPoints(n,y,d))/n,l=0,o=n;o<u+2;o++)o<u+1&&(E=this.getEMA(d,e,m,y,o)[1],f.push(E)),e=E,o<c?l+=E:(o===c&&(m=l/n),E=f[o-n-1],t=this.getEMA([E],a,m)[1],s=[p[o-2],correctFloat(2*E-t)],A.push(s),M.push(s[0]),h.push(s[1]),a=t);return{values:A,xData:M,yData:h}}}});