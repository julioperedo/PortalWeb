"use strict";import U from"../parts/Utilities.js";var UNDEFINED,isArray=U.isArray,seriesType=U.seriesType;function accumulateAverage(a,e,r,t){var s=e[t],u=r[t];a.push([s,u])}function getTR(a,e){var r=a,t=e,s=r[1]-r[2],u=t===UNDEFINED?0:Math.abs(r[1]-t[3]),p=t===UNDEFINED?0:Math.abs(r[2]-t[3]);return Math.max(s,u,p)}function populateAverage(a,e,r,t,s,u){return[e[t-1],(u*(s-1)+getTR(r[t-1],r[t-2]))/s]}seriesType("atr","sma",{params:{period:14}},{getValues:function(a,e){var r,t,s,u=e.period,p=a.xData,i=a.yData,n=i?i.length:0,h=1,g=0,o=0,l=[],D=[],c=[];if(s=[[p[0],i[0]]],!(p.length<=u)&&isArray(i[0])&&4===i[0].length){for(t=1;t<=n;t++)accumulateAverage(s,p,i,t),u<h?(g=(r=populateAverage(s,p,i,t,u,g))[1],l.push(r),D.push(r[0]),c.push(r[1])):u===h?(g=o/(t-1),l.push([p[t-1],g]),D.push(p[t-1]),c.push(g),h++):(o+=getTR(i[t-1],i[t-2]),h++);return{values:l,xData:D,yData:c}}}});