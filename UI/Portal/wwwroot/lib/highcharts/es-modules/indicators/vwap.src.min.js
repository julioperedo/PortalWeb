"use strict";import U from"../parts/Utilities.js";var error=U.error,isArray=U.isArray,seriesType=U.seriesType;seriesType("vwap","sma",{params:{period:30,volumeSeriesID:"volume"}},{getValues:function(e,r){var a,s=e.chart,t=e.xData,i=e.yData,u=r.period,o=!0;if(a=s.get(r.volumeSeriesID))return isArray(i[0])||(o=!1),this.calculateVWAPValues(o,t,i,a,u);error("Series "+r.volumeSeriesID+" not found! Check `volumeSeriesID`.",!0,s)},calculateVWAPValues:function(e,r,a,s,t){var i,u,o,l,p,h,n=s.yData,v=s.xData.length,D=r.length,c=[],m=[],y=[],f=[],A=[];for(i=D<=v?D:v,p=0,h=0;p<i;p++)u=e?(a[p][1]+a[p][2]+a[p][3])/3:a[p],u*=n[p],o=h?c[p-1]+u:u,l=h?m[p-1]+n[p]:n[p],c.push(o),m.push(l),A.push([r[p],o/l]),y.push(A[p][0]),f.push(A[p][1]),++h===t&&(h=0);return{values:A,xData:y,yData:f}}});