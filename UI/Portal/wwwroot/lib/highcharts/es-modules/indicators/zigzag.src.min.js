"use strict";import U from"../parts/Utilities.js";var UNDEFINED,seriesType=U.seriesType;seriesType("zigzag","sma",{params:{lowIndex:2,highIndex:1,deviation:1}},{nameComponents:["deviation"],nameSuffixes:["%"],nameBase:"Zig Zag",getValues:function(e,s){var a,i,t,n,h,p,u,r=s.lowIndex,o=s.highIndex,g=s.deviation/100,D=1+g,l=1-g,m=e.xData,d=e.yData,f=d?d.length:0,x=[],I=[],v=[],E=!1,N=!1;if(!(!m||m.length<=1||f&&(d[0][r]===UNDEFINED||d[0][o]===UNDEFINED))){for(n=d[0][r],h=d[0][o],a=1;a<f;a++)d[a][r]<=h*l?(x.push([m[0],h]),t=[m[a],d[a][r]],p=!0,E=!0):d[a][o]>=n*D&&(x.push([m[0],n]),t=[m[a],d[a][o]],p=!1,E=!0),E&&(I.push(x[0][0]),v.push(x[0][1]),i=a++,a=f);for(a=i;a<f;a++)p?(d[a][r]<=t[1]&&(t=[m[a],d[a][r]]),d[a][o]>=t[1]*D&&(N=o)):(d[a][o]>=t[1]&&(t=[m[a],d[a][o]]),d[a][r]<=t[1]*l&&(N=r)),!1!==N&&(x.push(t),I.push(t[0]),v.push(t[1]),t=[m[a],d[a][N]],p=!p,N=!1);return 0!==(u=x.length)&&x[u-1][0]<m[f-1]&&(x.push(t),I.push(t[0]),v.push(t[1])),{values:x,xData:I,yData:v}}}});