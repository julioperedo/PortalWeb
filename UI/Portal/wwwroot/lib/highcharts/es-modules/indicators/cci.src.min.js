"use strict";import U from"../parts/Utilities.js";var isArray=U.isArray,seriesType=U.seriesType;function sumArray(r){return r.reduce(function(r,e){return r+e},0)}function meanDeviation(r,e){var a,s=r.length,t=0;for(a=0;a<s;a++)t+=Math.abs(e-r[a]);return t}seriesType("cci","sma",{params:{period:14}},{getValues:function(r,e){var a,s,t,i,n,u,o=e.period,p=r.xData,h=r.yData,y=h?h.length:0,c=[],f=[],l=1,m=[],v=[],D=[];if(!(p.length<=o)&&isArray(h[0])&&4===h[0].length){for(;l<o;)s=h[l-1],c.push((s[1]+s[2]+s[3])/3),l++;for(u=o;u<=y;u++)n=((s=h[u-1])[1]+s[2]+s[3])/3,t=c.push(n),a=(n-(i=sumArray(f=c.slice(t-o))/o))/(.015*(meanDeviation(f,i)/o)),m.push([p[u-1],a]),v.push(p[u-1]),D.push(a);return{values:m,xData:v,yData:D}}}});