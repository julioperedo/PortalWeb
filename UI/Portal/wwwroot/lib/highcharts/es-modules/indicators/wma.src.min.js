"use strict";import U from"../parts/Utilities.js";var isArray=U.isArray,seriesType=U.seriesType;function accumulateAverage(e,r,a,t,u){var s=r[t],i=u<0?a[t]:a[t][u];e.push([s,i])}function weightedSumArray(e,r){var a=(r+1)/2*r;return e.reduce(function(e,r,a){return[null,e[1]+r[1]*(a+1)]})[1]/a}function populateAverage(e,r,a,t){var u=weightedSumArray(e,e.length),s=r[t-1];return e.shift(),[s,u]}seriesType("wma","sma",{params:{index:3,period:9}},{getValues:function(e,r){var a,t,u,s=r.period,i=e.xData,p=e.yData,n=p?p.length:0,l=1,o=i[0],c=p[0],h=[],g=[],v=[],A=-1;if(!(i.length<s)){for(isArray(p[0])&&(A=r.index,c=p[0][A]),t=[[o,c]];l!==s;)accumulateAverage(t,i,p,l,A),l++;for(a=l;a<n;a++)u=populateAverage(t,i,p,a),h.push(u),g.push(u[0]),v.push(u[1]),accumulateAverage(t,i,p,a,A);return u=populateAverage(t,i,p,a),h.push(u),g.push(u[0]),v.push(u[1]),{values:h,xData:g,yData:v}}}});