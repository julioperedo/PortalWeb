"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/highcharts-3d",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){var e=t?t._modules:{};function i(t,e,i,s){t.hasOwnProperty(e)||(t[e]=s.apply(null,i))}i(e,"parts-3d/Math.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(c,t){var d=t.pick,x=c.deg2rad;c.perspective3D=function(t,e,i){var s=0<i&&i<Number.POSITIVE_INFINITY?i/(t.z+e.z+i):1;return{x:t.x*s,y:t.y*s}},c.perspective=function(t,e,i,s){var o=e.options.chart.options3d,n=d(s,!!i&&e.inverted),h={x:e.plotWidth/2,y:e.plotHeight/2,z:o.depth/2,vd:d(o.depth,1)*d(o.viewDistance,0)},l=e.scale3d||1,r=x*o.beta*(n?-1:1),a=x*o.alpha*(n?-1:1),p={cosA:Math.cos(a),cosB:Math.cos(-r),sinA:Math.sin(a),sinB:Math.sin(-r)};return i||(h.x+=e.plotLeft,h.y+=e.plotTop),t.map(function(t){var e,i,s,o,r=(e=(n?t.y:t.x)-h.x,i=(n?t.x:t.y)-h.y,s=(t.z||0)-h.z,{x:(o=p).cosB*e-o.sinB*s,y:-o.sinA*o.sinB*e+o.cosA*i-o.cosB*o.sinA*s,z:o.cosA*o.sinB*e+o.sinA*i+o.cosA*o.cosB*s}),a=c.perspective3D(r,h,h.vd);return a.x=a.x*l+h.x,a.y=a.y*l+h.y,a.z=r.z*l+h.z,{x:n?a.y:a.x,y:n?a.x:a.y,z:a.z}})},c.pointCameraDistance=function(t,e){var i=e.options.chart.options3d,s=e.plotWidth/2,o=e.plotHeight/2,r=d(i.depth,1)*d(i.viewDistance,0)+i.depth;return Math.sqrt(Math.pow(s-d(t.plotX,t.x),2)+Math.pow(o-d(t.plotY,t.y),2)+Math.pow(r-d(t.plotZ,t.z),2))},c.shapeArea=function(t){for(var e,i=0,s=0;s<t.length;s++)e=(s+1)%t.length,i+=t[s].x*t[e].y-t[e].x*t[s].y;return i/2},c.shapeArea3d=function(t,e,i){return c.shapeArea(c.perspective(t,e,i))}}),i(e,"parts-3d/SVGRenderer.js",[e["parts/Color.js"],e["parts/Globals.js"],e["parts/SVGElement.js"],e["parts/SVGRenderer.js"],e["parts/Utilities.js"]],function(t,M,p,e,i){var c,s,r,a=t.parse,d=i.animObject,n=i.defined,x=i.extend,y=i.merge,l=i.objectEach,f=i.pick,X=Math.cos,Y=Math.PI,C=Math.sin,A=M.charts,u=M.deg2rad,P=M.perspective;function W(t,e,i,s,o,r,a,n){var h=[],l=r-o;return o<r&&r-o>Math.PI/2+1e-4?h=(h=h.concat(W(t,e,i,s,o,o+Math.PI/2,a,n))).concat(W(t,e,i,s,o+Math.PI/2,r,a,n)):r<o&&o-r>Math.PI/2+1e-4?h=(h=h.concat(W(t,e,i,s,o,o-Math.PI/2,a,n))).concat(W(t,e,i,s,o-Math.PI/2,r,a,n)):[["C",t+i*Math.cos(o)-i*c*l*Math.sin(o)+a,e+s*Math.sin(o)+s*c*l*Math.cos(o)+n,t+i*Math.cos(r)+i*c*l*Math.sin(r)+a,e+s*Math.sin(r)-s*c*l*Math.cos(r)+n,t+i*Math.cos(r)+a,e+s*Math.sin(r)+n]]}c=4*(Math.sqrt(2)-1)/3/(Y/2),e.prototype.toLinePath=function(t,e){var i=[];return t.forEach(function(t){i.push(["L",t.x,t.y])}),t.length&&(i[0][0]="M",e&&i.push(["Z"])),i},e.prototype.toLineSegments=function(t){var e=[],i=!0;return t.forEach(function(t){e.push(i?["M",t.x,t.y]:["L",t.x,t.y]),i=!i}),e},e.prototype.face3d=function(t){var a=this,e=this.createElement("path");return e.vertexes=[],e.insidePlotArea=!1,e.enabled=!0,e.attr=function(t){var e,i,s,o,r;return"object"==typeof t&&(n(t.enabled)||n(t.vertexes)||n(t.insidePlotArea))&&(this.enabled=f(t.enabled,this.enabled),this.vertexes=f(t.vertexes,this.vertexes),this.insidePlotArea=f(t.insidePlotArea,this.insidePlotArea),delete t.enabled,delete t.vertexes,delete t.insidePlotArea,e=A[a.chartIndex],i=P(this.vertexes,e,this.insidePlotArea),s=a.toLinePath(i,!0),o=M.shapeArea(i),r=this.enabled&&0<o?"visible":"hidden",t.d=s,t.visibility=r),p.prototype.attr.apply(this,arguments)},e.animate=function(t){var e,i,s,o,r;return"object"==typeof t&&(n(t.enabled)||n(t.vertexes)||n(t.insidePlotArea))&&(this.enabled=f(t.enabled,this.enabled),this.vertexes=f(t.vertexes,this.vertexes),this.insidePlotArea=f(t.insidePlotArea,this.insidePlotArea),delete t.enabled,delete t.vertexes,delete t.insidePlotArea,e=A[a.chartIndex],i=P(this.vertexes,e,this.insidePlotArea),s=a.toLinePath(i,!0),o=M.shapeArea(i),r=this.enabled&&0<o?"visible":"hidden",t.d=s,this.attr("visibility",r)),p.prototype.animate.apply(this,arguments)},e.attr(t)},e.prototype.polyhedron=function(t){var r=this,a=this.g(),e=a.destroy;return this.styledMode||a.attr({"stroke-linejoin":"round"}),a.faces=[],a.destroy=function(){for(var t=0;t<a.faces.length;t++)a.faces[t].destroy();return e.call(this)},a.attr=function(t,e,i,s){if("object"==typeof t&&n(t.faces)){for(;a.faces.length>t.faces.length;)a.faces.pop().destroy();for(;a.faces.length<t.faces.length;)a.faces.push(r.face3d().add(a));for(var o=0;o<t.faces.length;o++)r.styledMode&&delete t.faces[o].fill,a.faces[o].attr(t.faces[o],null,i,s);delete t.faces}return p.prototype.attr.apply(this,arguments)},a.animate=function(t,e,i){if(t&&t.faces){for(;a.faces.length>t.faces.length;)a.faces.pop().destroy();for(;a.faces.length<t.faces.length;)a.faces.push(r.face3d().add(a));for(var s=0;s<t.faces.length;s++)a.faces[s].animate(t.faces[s],e,i);delete t.faces}return p.prototype.animate.apply(this,arguments)},a.attr(t)},r=y(s={initArgs:function(t){var e=this,i=e.renderer,s=i[e.pathType+"Path"](t),o=s.zIndexes;e.parts.forEach(function(t){e[t]=i.path(s[t]).attr({class:"highcharts-3d-"+t,zIndex:o[t]||0}).add(e)}),e.attr({"stroke-linejoin":"round",zIndex:o.group}),e.originalDestroy=e.destroy,e.destroy=e.destroyParts,e.forcedSides=s.forcedSides},singleSetterForParts:function(i,t,s,e,o,r){var a={},n=[null,null,e||"attr",o,r],h=s&&s.zIndexes;return s?(h&&h.group&&this.attr({zIndex:h.group}),l(s,function(t,e){a[e]={},a[e][i]=t,h&&(a[e].zIndex=s.zIndexes[e]||0)}),n[1]=a):(a[i]=t,n[0]=a),this.processParts.apply(this,n)},processParts:function(e,i,s,o,r){var a=this;return a.parts.forEach(function(t){i&&(e=f(i[t],!1)),!1!==e&&a[t][s](e,o,r)}),a},destroyParts:function(){return this.processParts(null,null,"destroy"),this.originalDestroy()}},{parts:["front","top","side"],pathType:"cuboid",attr:function(t,e,i,s){var o;return"string"==typeof t&&void 0!==e&&(o=t,(t={})[o]=e),t.shapeArgs||n(t.x)?this.singleSetterForParts("d",null,this.renderer[this.pathType+"Path"](t.shapeArgs||t)):p.prototype.attr.call(this,t,void 0,i,s)},animate:function(t,e,i){var s,o;return n(t.x)&&n(t.y)?(o=(s=this.renderer[this.pathType+"Path"](t)).forcedSides,this.singleSetterForParts("d",null,s,"animate",e,i),this.attr({zIndex:s.zIndexes.group}),o!==this.forcedSides&&(this.forcedSides=o,r.fillSetter.call(this,this.fill))):p.prototype.animate.call(this,t,e,i),this},fillSetter:function(t){var e=this;return e.forcedSides=e.forcedSides||[],e.singleSetterForParts("fill",null,{front:t,top:a(t).brighten(0<=e.forcedSides.indexOf("top")?0:.1).get(),side:a(t).brighten(0<=e.forcedSides.indexOf("side")?0:-.1).get()}),e.color=e.fill=t,e}}),e.prototype.elements3d={base:s,cuboid:r},e.prototype.element3d=function(t,e){var i=this.g();return x(i,this.elements3d[t]),i.initArgs(e),i},e.prototype.cuboid=function(t){return this.element3d("cuboid",t)},e.prototype.cuboidPath=function(t){var e,i,s,o,r,a,n,h,l=t.x,p=t.y,c=t.z||0,d=t.height,x=t.width,y=t.depth,f=A[this.chartIndex],u=f.options.chart.options3d.alpha,z=0,b=[{x:l,y:p,z:c},{x:l+x,y:p,z:c},{x:l+x,y:p+d,z:c},{x:l,y:p+d,z:c},{x:l,y:p+d,z:c+y},{x:l+x,y:p+d,z:c+y},{x:l+x,y:p,z:c+y},{x:l,y:p,z:c+y}],v=[];function g(t){return 0===d&&1<t&&t<6?{x:b[t].x,y:b[t].y+10,z:b[t].z}:b[0].x===b[7].x&&4<=t?{x:b[t].x+10,y:b[t].y,z:b[t].z}:0===y&&t<2||5<t?{x:b[t].x,y:b[t].y,z:b[t].z+10}:b[t]}function m(t){return b[t]}return b=P(b,f,t.insidePlotArea),i=(e=(h=function(t,e,i){var s=[[],-1],o=t.map(m),r=e.map(m),a=t.map(g),n=e.map(g);return M.shapeArea(o)<0?s=[o,0]:M.shapeArea(r)<0?s=[r,1]:i&&(v.push(i),s=!(M.shapeArea(a)<0)&&M.shapeArea(n)<0?[r,1]:[o,0]),s})([3,2,1,0],[7,6,5,4],"front"))[0],r=e[1],s=(e=h([1,6,7,0],[4,5,2,3],"top"))[0],a=e[1],o=(e=h([1,2,5,6],[0,7,4,3],"side"))[0],1===(n=e[1])?z+=1e6*(f.plotWidth-l):n||(z+=1e6*l),z+=10*(!a||0<=u&&u<=180||u<360&&357.5<u?f.plotHeight-p:10+p),1===r?z+=100*c:r||(z+=100*(1e3-c)),{front:this.toLinePath(i,!0),top:this.toLinePath(s,!0),side:this.toLinePath(o,!0),zIndexes:{group:Math.round(z)},forcedSides:v,isFront:r,isTop:a}},e.prototype.arc3d=function(t){var h=this.g(),e=h.renderer,o=["x","y","r","innerR","start","end","depth"];function l(t){var e,i=!1,s={};for(e in t=y(t))-1!==o.indexOf(e)&&(s[e]=t[e],delete t[e],i=!0);return!!i&&[s,t]}return(t=y(t)).alpha=(t.alpha||0)*u,t.beta=(t.beta||0)*u,h.top=e.path(),h.side1=e.path(),h.side2=e.path(),h.inn=e.path(),h.out=e.path(),h.onAdd=function(){var e=h.parentGroup,i=h.attr("class");h.top.add(h),["out","inn","side1","side2"].forEach(function(t){h[t].attr({class:i+" highcharts-3d-side"}).add(e)})},["addClass","removeClass"].forEach(function(i){h[i]=function(){var e=arguments;["top","out","inn","side1","side2"].forEach(function(t){h[t][i].apply(h[t],e)})}}),h.setPaths=function(t){var e=h.renderer.arc3dPath(t),i=100*e.zTop;h.attribs=t,h.top.attr({d:e.top,zIndex:e.zTop}),h.inn.attr({d:e.inn,zIndex:e.zInn}),h.out.attr({d:e.out,zIndex:e.zOut}),h.side1.attr({d:e.side1,zIndex:e.zSide1}),h.side2.attr({d:e.side2,zIndex:e.zSide2}),h.zIndex=i,h.attr({zIndex:i}),t.center&&(h.top.setRadialReference(t.center),delete t.center)},h.setPaths(t),h.fillSetter=function(t){var e=a(t).brighten(-.1).get();return this.fill=t,this.side1.attr({fill:e}),this.side2.attr({fill:e}),this.inn.attr({fill:e}),this.out.attr({fill:e}),this.top.attr({fill:t}),this},["opacity","translateX","translateY","visibility"].forEach(function(t){h[t+"Setter"]=function(e,i){h[i]=e,["out","inn","side1","side2","top"].forEach(function(t){h[t].attr(i,e)})}}),h.attr=function(t){var e,i;return"object"==typeof t&&(i=l(t))&&(e=i[0],arguments[0]=i[1],x(h.attribs,e),h.setPaths(h.attribs)),p.prototype.attr.apply(h,arguments)},h.animate=function(t,e,i){var s,o,r,a=this.attribs,n="data-"+Math.random().toString(26).substring(2,9);return delete t.center,delete t.z,delete t.alpha,delete t.beta,(r=d(f(e,this.renderer.globalAnimation))).duration&&(s=l(t),h[n]=0,t[n]=1,h[n+"Setter"]=M.noop,s&&(o=s[0],r.step=function(t,e){function i(t){return a[t]+(f(o[t],a[t])-a[t])*e.pos}e.prop===n&&e.elem.setPaths(y(a,{x:i("x"),y:i("y"),r:i("r"),innerR:i("innerR"),start:i("start"),end:i("end"),depth:i("depth")}))}),e=r),p.prototype.animate.call(this,t,e,i)},h.destroy=function(){return this.top.destroy(),this.out.destroy(),this.inn.destroy(),this.side1.destroy(),this.side2.destroy(),p.prototype.destroy.call(this)},h.hide=function(){this.top.hide(),this.out.hide(),this.inn.hide(),this.side1.hide(),this.side2.hide()},h.show=function(t){this.top.show(t),this.out.show(t),this.inn.show(t),this.side1.show(t),this.side2.show(t)},h},e.prototype.arc3dPath=function(t){var e=t.x,i=t.y,s=t.start,o=t.end-1e-5,r=t.r,a=t.innerR||0,n=t.depth||0,h=t.alpha,l=t.beta,p=Math.cos(s),c=Math.sin(s),d=Math.cos(o),x=Math.sin(o),y=r*Math.cos(l),f=r*Math.cos(h),u=a*Math.cos(l),z=a*Math.cos(h),b=n*Math.sin(l),v=n*Math.sin(h),g=[["M",e+y*p,i+f*c]];(g=g.concat(W(e,i,y,f,s,o,0,0))).push(["L",e+u*d,i+z*x]),(g=g.concat(W(e,i,u,z,o,s,0,0))).push(["Z"]);var m=0<l?Math.PI/2:0,M=0<h?0:Math.PI/2,A=!(-m<s)&&-m<o?-m:s,P=!(o<Y-M)&&s<Y-M?Y-M:o,k=2*Y-M,S=(S=[["M",e+y*X(A),i+f*C(A)]]).concat(W(e,i,y,f,A,P,0,0));k<o&&s<k?(S.push(["L",e+y*X(P)+b,i+f*C(P)+v]),(S=S.concat(W(e,i,y,f,P,k,b,v))).push(["L",e+y*X(k),i+f*C(k)]),(S=S.concat(W(e,i,y,f,k,o,0,0))).push(["L",e+y*X(o)+b,i+f*C(o)+v]),(S=S.concat(W(e,i,y,f,o,k,b,v))).push(["L",e+y*X(k),i+f*C(k)]),S=S.concat(W(e,i,y,f,k,P,0,0))):Y-M<o&&s<Y-M&&(S.push(["L",e+y*Math.cos(P)+b,i+f*Math.sin(P)+v]),(S=S.concat(W(e,i,y,f,P,o,b,v))).push(["L",e+y*Math.cos(o),i+f*Math.sin(o)]),S=S.concat(W(e,i,y,f,o,P,0,0))),S.push(["L",e+y*Math.cos(P)+b,i+f*Math.sin(P)+v]),(S=S.concat(W(e,i,y,f,P,A,b,v))).push(["Z"]);var L=[["M",e+u*p,i+z*c]];(L=L.concat(W(e,i,u,z,s,o,0,0))).push(["L",e+u*Math.cos(o)+b,i+z*Math.sin(o)+v]),(L=L.concat(W(e,i,u,z,o,s,b,v))).push(["Z"]);var w=[["M",e+y*p,i+f*c],["L",e+y*p+b,i+f*c+v],["L",e+u*p+b,i+z*c+v],["L",e+u*p,i+z*c],["Z"]],j=[["M",e+y*d,i+f*x],["L",e+y*d+b,i+f*x+v],["L",e+u*d+b,i+z*x+v],["L",e+u*d,i+z*x],["Z"]],D=Math.atan2(v,-b),I=Math.abs(o+D),G=Math.abs(s+D),E=Math.abs((s+o)/2+D);function F(t){return(t%=2*Math.PI)>Math.PI&&(t=2*Math.PI-t),t}I=F(I),G=F(G);var T=1e5*(E=F(E)),Z=1e5*G,O=1e5*I;return{top:g,zTop:1e5*Math.PI+1,out:S,zOut:Math.max(T,Z,O),inn:L,zInn:Math.max(T,Z,O),side1:w,zSide1:.99*O,side2:j,zSide2:.99*Z}}}),i(e,"parts-3d/Tick3D.js",[e["parts/Utilities.js"]],function(t){var i=t.addEvent,s=t.extend,o=t.wrap;function r(){}return r.compose=function(t){i(t,"afterGetLabelPosition",r.onAfterGetLabelPosition);var e=t.prototype;o(e,"getMarkPath",r.wrapGetMarkPath)},r.onAfterGetLabelPosition=function(t){var e=this.axis.axis3D;e&&s(t.pos,e.fix3dPosition(t.pos))},r.wrapGetMarkPath=function(t){this.axis.chart;var e=this.axis.axis3D,i=t.apply(this,[].slice.call(arguments,1));if(e){var s=i[0],o=i[1];if("M"===s[0]&&"L"===o[0]){var r=[e.fix3dPosition({x:s[1],y:s[2],z:0}),e.fix3dPosition({x:o[1],y:o[2],z:0})];return this.axis.chart.renderer.toLineSegments(r)}}return i},r}),i(e,"parts-3d/Axis3D.js",[e["parts/Globals.js"],e["parts/Tick.js"],e["parts-3d/Tick3D.js"],e["parts/Utilities.js"]],function(t,i,s,e){var o=e.addEvent,r=e.merge,w=e.pick,a=e.wrap,j=t.deg2rad,D=t.perspective,u=t.perspective3D,I=t.shapeArea,n=(h.prototype.fix3dPosition=function(t,e){var i=this.axis,s=i.chart;if("colorAxis"===i.coll||!s.chart3d||!s.is3d())return t;var o,r,a,n,h,l,p,c,d,x=j*s.options.chart.options3d.alpha,y=j*s.options.chart.options3d.beta,f=w(e&&i.options.title.position3d,i.options.labels.position3d),u=w(e&&i.options.title.skew3d,i.options.labels.skew3d),z=s.chart3d.frame3d,b=s.plotLeft,v=s.plotWidth+b,g=s.plotTop,m=s.plotHeight+g,M=!1,A=0,P=0,k={x:0,y:1,z:0};if(t=i.axis3D.swapZ({x:t.x,y:t.y,z:0}),i.isZAxis)if(i.opposite){if(null===z.axes.z.top)return{};P=t.y-g,t.x=z.axes.z.top.x,t.y=z.axes.z.top.y,o=z.axes.z.top.xDir,M=!z.top.frontFacing}else{if(null===z.axes.z.bottom)return{};P=t.y-m,t.x=z.axes.z.bottom.x,t.y=z.axes.z.bottom.y,o=z.axes.z.bottom.xDir,M=!z.bottom.frontFacing}else if(i.horiz)if(i.opposite){if(null===z.axes.x.top)return{};P=t.y-g,t.y=z.axes.x.top.y,t.z=z.axes.x.top.z,o=z.axes.x.top.xDir,M=!z.top.frontFacing}else{if(null===z.axes.x.bottom)return{};P=t.y-m,t.y=z.axes.x.bottom.y,t.z=z.axes.x.bottom.z,o=z.axes.x.bottom.xDir,M=!z.bottom.frontFacing}else if(i.opposite){if(null===z.axes.y.right)return{};A=t.x-v,t.x=z.axes.y.right.x,t.z=z.axes.y.right.z,o={x:(o=z.axes.y.right.xDir).z,y:o.y,z:-o.x}}else{if(null===z.axes.y.left)return{};A=t.x-b,t.x=z.axes.y.left.x,t.z=z.axes.y.left.z,o=z.axes.y.left.xDir}"chart"===f||("flap"===f?i.horiz?(r=Math.sin(x),a=Math.cos(x),i.opposite&&(r=-r),M&&(r=-r),k={x:o.z*r,y:a,z:-o.x*r}):o={x:Math.cos(y),y:0,z:Math.sin(y)}:"ortho"===f?i.horiz?(n=Math.sin(x),h=Math.cos(x),l=Math.sin(y)*h,p=-n,c=-h*Math.cos(y),k={x:o.y*c-o.z*p,y:o.z*l-o.x*c,z:o.x*p-o.y*l},d=1/Math.sqrt(k.x*k.x+k.y*k.y+k.z*k.z),M&&(d=-d),k={x:d*k.x,y:d*k.y,z:d*k.z}):o={x:Math.cos(y),y:0,z:Math.sin(y)}:i.horiz?k={x:Math.sin(y)*Math.sin(x),y:Math.cos(x),z:-Math.cos(y)*Math.sin(x)}:o={x:Math.cos(y),y:0,z:Math.sin(y)}),t.x+=A*o.x+P*k.x,t.y+=A*o.y+P*k.y,t.z+=A*o.z+P*k.z;var S,L=D([t],i.chart)[0];return u&&(I(D([t,{x:t.x+o.x,y:t.y+o.y,z:t.z+o.z},{x:t.x+k.x,y:t.y+k.y,z:t.z+k.z}],i.chart))<0&&(o={x:-o.x,y:-o.y,z:-o.z}),S=D([{x:t.x,y:t.y,z:t.z},{x:t.x+o.x,y:t.y+o.y,z:t.z+o.z},{x:t.x+k.x,y:t.y+k.y,z:t.z+k.z}],i.chart),L.matrix=[S[1].x-S[0].x,S[1].y-S[0].y,S[2].x-S[0].x,S[2].y-S[0].y,L.x,L.y],L.matrix[4]-=L.x*L.matrix[0]+L.y*L.matrix[2],L.matrix[5]-=L.x*L.matrix[1]+L.y*L.matrix[3]),L},h.prototype.swapZ=function(t,e){var i=this.axis;if(i.isZAxis){var s=e?0:i.chart.plotLeft;return{x:s+t.z,y:t.y,z:t.x-s}}return t},h);function h(t){this.axis=t}function l(){}return l.compose=function(t){r(!0,t.defaultOptions,l.defaultOptions),t.keepProps.push("axis3D"),o(t,"init",l.onInit),o(t,"afterSetOptions",l.onAfterSetOptions),o(t,"drawCrosshair",l.onDrawCrosshair),o(t,"destroy",l.onDestroy);var e=t.prototype;a(e,"getLinePath",l.wrapGetLinePath),a(e,"getPlotBandPath",l.wrapGetPlotBandPath),a(e,"getPlotLinePath",l.wrapGetPlotLinePath),a(e,"getSlotWidth",l.wrapGetSlotWidth),a(e,"getTitlePosition",l.wrapGetTitlePosition),s.compose(i)},l.onAfterSetOptions=function(){var t=this.chart,e=this.options;t.is3d&&t.is3d()&&"colorAxis"!==this.coll&&(e.tickWidth=w(e.tickWidth,0),e.gridLineWidth=w(e.gridLineWidth,1))},l.onDestroy=function(){["backFrame","bottomFrame","sideFrame"].forEach(function(t){this[t]&&(this[t]=this[t].destroy())},this)},l.onDrawCrosshair=function(t){this.chart.is3d()&&"colorAxis"!==this.coll&&t.point&&(t.point.crosshairPos=this.isXAxis?t.point.axisXpos:this.len-t.point.axisYpos)},l.onInit=function(){this.axis3D||(this.axis3D=new n(this))},l.wrapGetLinePath=function(t){return this.chart.is3d()&&"colorAxis"!==this.coll?[]:t.apply(this,[].slice.call(arguments,1))},l.wrapGetPlotBandPath=function(t){if(!this.chart.is3d()||"colorAxis"===this.coll)return t.apply(this,[].slice.call(arguments,1));var e=arguments,i=e[1],s=e[2],o=[],r=this.getPlotLinePath({value:i}),a=this.getPlotLinePath({value:s});if(r&&a)for(var n=0;n<r.length;n+=2){var h=r[n],l=r[n+1],p=a[n],c=a[n+1];"M"===h[0]&&"L"===l[0]&&"M"===p[0]&&"L"===c[0]&&o.push(h,l,c,["L",p[1],p[2]],["Z"])}return o},l.wrapGetPlotLinePath=function(t){var e=this,i=e.axis3D,s=e.chart,o=t.apply(e,[].slice.call(arguments,1));if("colorAxis"===e.coll||!s.chart3d||!s.is3d())return o;if(null===o)return o;var r,a=s.options.chart.options3d,n=e.isZAxis?s.plotWidth:a.depth,h=s.chart3d.frame3d,l=o[0],p=o[1],c=[];return"M"===l[0]&&"L"===p[0]&&(r=[i.swapZ({x:l[1],y:l[2],z:0}),i.swapZ({x:l[1],y:l[2],z:n}),i.swapZ({x:p[1],y:p[2],z:0}),i.swapZ({x:p[1],y:p[2],z:n})],this.horiz?(this.isZAxis?(h.left.visible&&c.push(r[0],r[2]),h.right.visible&&c.push(r[1],r[3])):(h.front.visible&&c.push(r[0],r[2]),h.back.visible&&c.push(r[1],r[3])),h.top.visible&&c.push(r[0],r[1]),h.bottom.visible&&c.push(r[2],r[3])):(h.front.visible&&c.push(r[0],r[2]),h.back.visible&&c.push(r[1],r[3]),h.left.visible&&c.push(r[0],r[1]),h.right.visible&&c.push(r[2],r[3])),c=D(c,this.chart,!1)),s.renderer.toLineSegments(c)},l.wrapGetSlotWidth=function(t,e){var i=this,s=i.chart,o=i.ticks,r=i.gridGroup;if(i.categories&&s.frameShapes&&s.is3d()&&r&&e&&e.label){var a,n,h,l=r.element.childNodes[0].getBBox(),p=s.frameShapes.left.getBBox(),c=s.options.chart.options3d,d={x:s.plotWidth/2,y:s.plotHeight/2,z:c.depth/2,vd:w(c.depth,1)*w(c.viewDistance,0)},x=e.pos,y=o[x-1],f=o[x+1];return 0!==x&&y&&y.label.xy&&(n=u({x:y.label.xy.x,y:y.label.xy.y,z:null},d,d.vd)),f&&f.label.xy&&(h=u({x:f.label.xy.x,y:f.label.xy.y,z:null},d,d.vd)),a={x:e.label.xy.x,y:e.label.xy.y,z:null},a=u(a,d,d.vd),Math.abs(n?a.x-n.x:h?h.x-a.x:l.x-p.x)}return t.apply(i,[].slice.call(arguments,1))},l.wrapGetTitlePosition=function(t){var e=t.apply(this,[].slice.call(arguments,1));return this.axis3D?this.axis3D.fix3dPosition(e,!0):e},l.defaultOptions={labels:{position3d:"offset",skew3d:!1},title:{position3d:null,skew3d:null}},l}),i(e,"parts-3d/ZAxis.js",[e["parts/Axis.js"],e["parts/Utilities.js"]],function(t,e){var s,i=this&&this.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=e.addEvent,r=e.merge,a=e.pick,n=e.splat,h=(l.compose=function(t){o(t,"afterGetAxes",l.onAfterGetAxes);var e=t.prototype;e.addZAxis=l.wrapAddZAxis,e.collectionsWithInit.zAxis=[e.addZAxis],e.collectionsWithUpdate.push("zAxis")},l.onAfterGetAxes=function(){var i=this,t=this.options,e=t.zAxis=n(t.zAxis||{});i.is3d()&&(i.zAxis=[],e.forEach(function(t,e){t.index=e,t.isX=!0,i.addZAxis(t).setScale()}))},l.wrapAddZAxis=function(t){return new c(this,t)},l);function l(){}var p,c=(i(d,p=t),d.prototype.getSeriesExtremes=function(){var s=this,o=s.chart;s.hasVisibleSeries=!1,s.dataMin=s.dataMax=s.ignoreMinPadding=s.ignoreMaxPadding=void 0,s.stacking&&s.stacking.buildStacks(),s.series.forEach(function(t){var e,i;!t.visible&&o.options.chart&&o.options.chart.ignoreHiddenSeries||(i=t.options.threshold,s.hasVisibleSeries=!0,s.positiveValuesOnly&&i<=0&&(i=void 0),(e=t.zData).length&&(s.dataMin=Math.min(a(s.dataMin,e[0]),Math.min.apply(null,e)),s.dataMax=Math.max(a(s.dataMax,e[0]),Math.max.apply(null,e))))})},d.prototype.setAxisSize=function(){var t=this,e=t.chart;p.prototype.setAxisSize.call(this),t.width=t.len=e.options.chart&&e.options.chart.options3d&&e.options.chart.options3d.depth||0,t.right=e.chartWidth-t.width-t.left},d.prototype.setOptions=function(t){t=r({offset:0,lineWidth:0},t),p.prototype.setOptions.call(this,t),this.coll="zAxis"},d.ZChartComposition=h,d);function d(t,e){var i=p.call(this,t,e)||this;return i.isZAxis=!0,i}return c}),i(e,"parts-3d/Chart3D.js",[e["parts/Axis.js"],e["parts-3d/Axis3D.js"],e["parts/Chart.js"],e["parts/Globals.js"],e["parts/Options.js"],e["parts/Utilities.js"],e["parts-3d/ZAxis.js"]],function(t,e,i,w,s,o,r){var a,n,h,l=s.defaultOptions,p=o.addEvent,c=o.Fx,d=o.isArray,x=o.merge,j=o.pick,y=o.wrap,D=w.perspective;function f(t){this.frame3d=void 0,this.chart=t}function u(t){this.is3d()&&"scatter"===t.options.type&&(t.options.type="scatter3d")}function z(){var t,e,i,s,o,r,a,n,h,l,p,c,d,x,y;this.chart3d&&this.is3d()&&(t=this.renderer,e=this.options.chart.options3d,i=this.chart3d.get3dFrame(),s=this.plotLeft,o=this.plotLeft+this.plotWidth,r=this.plotTop,a=this.plotTop+this.plotHeight,n=e.depth,h=s-(i.left.visible?i.left.size:0),l=o+(i.right.visible?i.right.size:0),p=r-(i.top.visible?i.top.size:0),c=a+(i.bottom.visible?i.bottom.size:0),d=0-(i.front.visible?i.front.size:0),x=n+(i.back.visible?i.back.size:0),y=this.hasRendered?"animate":"attr",this.chart3d.frame3d=i,this.frameShapes||(this.frameShapes={bottom:t.polyhedron().add(),top:t.polyhedron().add(),left:t.polyhedron().add(),right:t.polyhedron().add(),back:t.polyhedron().add(),front:t.polyhedron().add()}),this.frameShapes.bottom[y]({class:"highcharts-3d-frame highcharts-3d-frame-bottom",zIndex:i.bottom.frontFacing?-1e3:1e3,faces:[{fill:w.color(i.bottom.color).brighten(.1).get(),vertexes:[{x:h,y:c,z:d},{x:l,y:c,z:d},{x:l,y:c,z:x},{x:h,y:c,z:x}],enabled:i.bottom.visible},{fill:w.color(i.bottom.color).brighten(.1).get(),vertexes:[{x:s,y:a,z:n},{x:o,y:a,z:n},{x:o,y:a,z:0},{x:s,y:a,z:0}],enabled:i.bottom.visible},{fill:w.color(i.bottom.color).brighten(-.1).get(),vertexes:[{x:h,y:c,z:d},{x:h,y:c,z:x},{x:s,y:a,z:n},{x:s,y:a,z:0}],enabled:i.bottom.visible&&!i.left.visible},{fill:w.color(i.bottom.color).brighten(-.1).get(),vertexes:[{x:l,y:c,z:x},{x:l,y:c,z:d},{x:o,y:a,z:0},{x:o,y:a,z:n}],enabled:i.bottom.visible&&!i.right.visible},{fill:w.color(i.bottom.color).get(),vertexes:[{x:l,y:c,z:d},{x:h,y:c,z:d},{x:s,y:a,z:0},{x:o,y:a,z:0}],enabled:i.bottom.visible&&!i.front.visible},{fill:w.color(i.bottom.color).get(),vertexes:[{x:h,y:c,z:x},{x:l,y:c,z:x},{x:o,y:a,z:n},{x:s,y:a,z:n}],enabled:i.bottom.visible&&!i.back.visible}]}),this.frameShapes.top[y]({class:"highcharts-3d-frame highcharts-3d-frame-top",zIndex:i.top.frontFacing?-1e3:1e3,faces:[{fill:w.color(i.top.color).brighten(.1).get(),vertexes:[{x:h,y:p,z:x},{x:l,y:p,z:x},{x:l,y:p,z:d},{x:h,y:p,z:d}],enabled:i.top.visible},{fill:w.color(i.top.color).brighten(.1).get(),vertexes:[{x:s,y:r,z:0},{x:o,y:r,z:0},{x:o,y:r,z:n},{x:s,y:r,z:n}],enabled:i.top.visible},{fill:w.color(i.top.color).brighten(-.1).get(),vertexes:[{x:h,y:p,z:x},{x:h,y:p,z:d},{x:s,y:r,z:0},{x:s,y:r,z:n}],enabled:i.top.visible&&!i.left.visible},{fill:w.color(i.top.color).brighten(-.1).get(),vertexes:[{x:l,y:p,z:d},{x:l,y:p,z:x},{x:o,y:r,z:n},{x:o,y:r,z:0}],enabled:i.top.visible&&!i.right.visible},{fill:w.color(i.top.color).get(),vertexes:[{x:h,y:p,z:d},{x:l,y:p,z:d},{x:o,y:r,z:0},{x:s,y:r,z:0}],enabled:i.top.visible&&!i.front.visible},{fill:w.color(i.top.color).get(),vertexes:[{x:l,y:p,z:x},{x:h,y:p,z:x},{x:s,y:r,z:n},{x:o,y:r,z:n}],enabled:i.top.visible&&!i.back.visible}]}),this.frameShapes.left[y]({class:"highcharts-3d-frame highcharts-3d-frame-left",zIndex:i.left.frontFacing?-1e3:1e3,faces:[{fill:w.color(i.left.color).brighten(.1).get(),vertexes:[{x:h,y:c,z:d},{x:s,y:a,z:0},{x:s,y:a,z:n},{x:h,y:c,z:x}],enabled:i.left.visible&&!i.bottom.visible},{fill:w.color(i.left.color).brighten(.1).get(),vertexes:[{x:h,y:p,z:x},{x:s,y:r,z:n},{x:s,y:r,z:0},{x:h,y:p,z:d}],enabled:i.left.visible&&!i.top.visible},{fill:w.color(i.left.color).brighten(-.1).get(),vertexes:[{x:h,y:c,z:x},{x:h,y:p,z:x},{x:h,y:p,z:d},{x:h,y:c,z:d}],enabled:i.left.visible},{fill:w.color(i.left.color).brighten(-.1).get(),vertexes:[{x:s,y:r,z:n},{x:s,y:a,z:n},{x:s,y:a,z:0},{x:s,y:r,z:0}],enabled:i.left.visible},{fill:w.color(i.left.color).get(),vertexes:[{x:h,y:c,z:d},{x:h,y:p,z:d},{x:s,y:r,z:0},{x:s,y:a,z:0}],enabled:i.left.visible&&!i.front.visible},{fill:w.color(i.left.color).get(),vertexes:[{x:h,y:p,z:x},{x:h,y:c,z:x},{x:s,y:a,z:n},{x:s,y:r,z:n}],enabled:i.left.visible&&!i.back.visible}]}),this.frameShapes.right[y]({class:"highcharts-3d-frame highcharts-3d-frame-right",zIndex:i.right.frontFacing?-1e3:1e3,faces:[{fill:w.color(i.right.color).brighten(.1).get(),vertexes:[{x:l,y:c,z:x},{x:o,y:a,z:n},{x:o,y:a,z:0},{x:l,y:c,z:d}],enabled:i.right.visible&&!i.bottom.visible},{fill:w.color(i.right.color).brighten(.1).get(),vertexes:[{x:l,y:p,z:d},{x:o,y:r,z:0},{x:o,y:r,z:n},{x:l,y:p,z:x}],enabled:i.right.visible&&!i.top.visible},{fill:w.color(i.right.color).brighten(-.1).get(),vertexes:[{x:o,y:r,z:0},{x:o,y:a,z:0},{x:o,y:a,z:n},{x:o,y:r,z:n}],enabled:i.right.visible},{fill:w.color(i.right.color).brighten(-.1).get(),vertexes:[{x:l,y:c,z:d},{x:l,y:p,z:d},{x:l,y:p,z:x},{x:l,y:c,z:x}],enabled:i.right.visible},{fill:w.color(i.right.color).get(),vertexes:[{x:l,y:p,z:d},{x:l,y:c,z:d},{x:o,y:a,z:0},{x:o,y:r,z:0}],enabled:i.right.visible&&!i.front.visible},{fill:w.color(i.right.color).get(),vertexes:[{x:l,y:c,z:x},{x:l,y:p,z:x},{x:o,y:r,z:n},{x:o,y:a,z:n}],enabled:i.right.visible&&!i.back.visible}]}),this.frameShapes.back[y]({class:"highcharts-3d-frame highcharts-3d-frame-back",zIndex:i.back.frontFacing?-1e3:1e3,faces:[{fill:w.color(i.back.color).brighten(.1).get(),vertexes:[{x:l,y:c,z:x},{x:h,y:c,z:x},{x:s,y:a,z:n},{x:o,y:a,z:n}],enabled:i.back.visible&&!i.bottom.visible},{fill:w.color(i.back.color).brighten(.1).get(),vertexes:[{x:h,y:p,z:x},{x:l,y:p,z:x},{x:o,y:r,z:n},{x:s,y:r,z:n}],enabled:i.back.visible&&!i.top.visible},{fill:w.color(i.back.color).brighten(-.1).get(),vertexes:[{x:h,y:c,z:x},{x:h,y:p,z:x},{x:s,y:r,z:n},{x:s,y:a,z:n}],enabled:i.back.visible&&!i.left.visible},{fill:w.color(i.back.color).brighten(-.1).get(),vertexes:[{x:l,y:p,z:x},{x:l,y:c,z:x},{x:o,y:a,z:n},{x:o,y:r,z:n}],enabled:i.back.visible&&!i.right.visible},{fill:w.color(i.back.color).get(),vertexes:[{x:s,y:r,z:n},{x:o,y:r,z:n},{x:o,y:a,z:n},{x:s,y:a,z:n}],enabled:i.back.visible},{fill:w.color(i.back.color).get(),vertexes:[{x:h,y:c,z:x},{x:l,y:c,z:x},{x:l,y:p,z:x},{x:h,y:p,z:x}],enabled:i.back.visible}]}),this.frameShapes.front[y]({class:"highcharts-3d-frame highcharts-3d-frame-front",zIndex:i.front.frontFacing?-1e3:1e3,faces:[{fill:w.color(i.front.color).brighten(.1).get(),vertexes:[{x:h,y:c,z:d},{x:l,y:c,z:d},{x:o,y:a,z:0},{x:s,y:a,z:0}],enabled:i.front.visible&&!i.bottom.visible},{fill:w.color(i.front.color).brighten(.1).get(),vertexes:[{x:l,y:p,z:d},{x:h,y:p,z:d},{x:s,y:r,z:0},{x:o,y:r,z:0}],enabled:i.front.visible&&!i.top.visible},{fill:w.color(i.front.color).brighten(-.1).get(),vertexes:[{x:h,y:p,z:d},{x:h,y:c,z:d},{x:s,y:a,z:0},{x:s,y:r,z:0}],enabled:i.front.visible&&!i.left.visible},{fill:w.color(i.front.color).brighten(-.1).get(),vertexes:[{x:l,y:c,z:d},{x:l,y:p,z:d},{x:o,y:r,z:0},{x:o,y:a,z:0}],enabled:i.front.visible&&!i.right.visible},{fill:w.color(i.front.color).get(),vertexes:[{x:o,y:r,z:0},{x:s,y:r,z:0},{x:s,y:a,z:0},{x:o,y:a,z:0}],enabled:i.front.visible},{fill:w.color(i.front.color).get(),vertexes:[{x:l,y:c,z:d},{x:h,y:c,z:d},{x:h,y:p,z:d},{x:l,y:p,z:d}],enabled:i.front.visible}]}))}function b(){this.styledMode&&(this.renderer.definition({tagName:"style",textContent:".highcharts-3d-top{filter: url(#highcharts-brighter)}\n.highcharts-3d-side{filter: url(#highcharts-darker)}\n"}),[{name:"darker",slope:.6},{name:"brighter",slope:1.4}].forEach(function(t){this.renderer.definition({tagName:"filter",id:"highcharts-"+t.name,children:[{tagName:"feComponentTransfer",children:[{tagName:"feFuncR",type:"linear",slope:t.slope},{tagName:"feFuncG",type:"linear",slope:t.slope},{tagName:"feFuncB",type:"linear",slope:t.slope}]}]})},this))}function v(){var e=this.options;this.is3d()&&(e.series||[]).forEach(function(t){"scatter"===(t.type||e.chart.type||e.chart.defaultSeriesType)&&(t.type="scatter3d")})}function g(){var t,e,i,s,o,r,a=this,n=a.options.chart.options3d;a.chart3d&&a.is3d()&&(n&&(n.alpha=n.alpha%360+(0<=n.alpha?0:360),n.beta=n.beta%360+(0<=n.beta?0:360)),t=a.inverted,e=a.clipBox,i=a.margin,s=t?"x":"y",o=t?"height":"width",r=t?"width":"height",e[t?"y":"x"]=-(i[3]||0),e[s]=-(i[0]||0),e[o]=a.chartWidth+(i[3]||0)+(i[1]||0),e[r]=a.chartHeight+(i[0]||0)+(i[2]||0),a.scale3d=1,!0===n.fitToPlot&&(a.scale3d=a.chart3d.getScale(n.depth)),a.chart3d.frame3d=a.chart3d.get3dFrame())}function m(){this.is3d()&&(this.isDirtyBox=!0)}function M(){this.chart3d&&this.is3d()&&(this.chart3d.frame3d=this.chart3d.get3dFrame())}function A(){this.chart3d||(this.chart3d=new h(this))}function P(t){return this.is3d()||t.apply(this,[].slice.call(arguments,1))}function k(t){var e,i=this.series.length;if(this.is3d())for(;i--;)(e=this.series[i]).translate(),e.render();else t.call(this)}function S(t){t.apply(this,[].slice.call(arguments,1)),this.is3d()&&(this.container.className+=" highcharts-3d-chart")}return n=a=a||{},f.prototype.get3dFrame=function(){function t(t){var e=w.shapeArea3d(t,a);return.5<e?1:e<-.5?-1:0}var a=this.chart,e=a.options.chart.options3d,i=e.frame,s=a.plotLeft,o=a.plotLeft+a.plotWidth,r=a.plotTop,n=a.plotTop+a.plotHeight,h=e.depth,l=t([{x:s,y:n,z:h},{x:o,y:n,z:h},{x:o,y:n,z:0},{x:s,y:n,z:0}]),p=t([{x:s,y:r,z:0},{x:o,y:r,z:0},{x:o,y:r,z:h},{x:s,y:r,z:h}]),c=t([{x:s,y:r,z:0},{x:s,y:r,z:h},{x:s,y:n,z:h},{x:s,y:n,z:0}]),d=t([{x:o,y:r,z:h},{x:o,y:r,z:0},{x:o,y:n,z:0},{x:o,y:n,z:h}]),x=t([{x:s,y:n,z:0},{x:o,y:n,z:0},{x:o,y:r,z:0},{x:s,y:r,z:0}]),y=t([{x:s,y:r,z:h},{x:o,y:r,z:h},{x:o,y:n,z:h},{x:s,y:n,z:h}]),f=!1,u=!1,z=!1,b=!1;function v(t,e,i){for(var s=["size","color","visible"],o={},r=0;r<s.length;r++)for(var a=s[r],n=0;n<t.length;n++)if("object"==typeof t[n]){var h=t[n][a];if(null!=h){o[a]=h;break}}var l=i;return!0===o.visible||!1===o.visible?l=o.visible:"auto"===o.visible&&(l=0<e),{size:j(o.size,1),color:j(o.color,"none"),frontFacing:0<e,visible:l}}[].concat(a.xAxis,a.yAxis,a.zAxis).forEach(function(t){t&&(t.horiz?t.opposite?u=!0:f=!0:t.opposite?b=!0:z=!0)});var g,m,M,A,P,k,S,L={axes:{},bottom:v([i.bottom,i.top,i],l,f),top:v([i.top,i.bottom,i],p,u),left:v([i.left,i.right,i.side,i],c,z),right:v([i.right,i.left,i.side,i],d,b),back:v([i.back,i.front,i],y,!0),front:v([i.front,i.back,i],x,!1)};return"auto"===e.axisLabelPosition?(m=[],(g=function(t,e){return t.visible!==e.visible||t.visible&&e.visible&&t.frontFacing!==e.frontFacing})(L.left,L.front)&&m.push({y:(r+n)/2,x:s,z:0,xDir:{x:1,y:0,z:0}}),g(L.left,L.back)&&m.push({y:(r+n)/2,x:s,z:h,xDir:{x:0,y:0,z:-1}}),g(L.right,L.front)&&m.push({y:(r+n)/2,x:o,z:0,xDir:{x:0,y:0,z:1}}),g(L.right,L.back)&&m.push({y:(r+n)/2,x:o,z:h,xDir:{x:-1,y:0,z:0}}),M=[],g(L.bottom,L.front)&&M.push({x:(s+o)/2,y:n,z:0,xDir:{x:1,y:0,z:0}}),g(L.bottom,L.back)&&M.push({x:(s+o)/2,y:n,z:h,xDir:{x:-1,y:0,z:0}}),A=[],g(L.top,L.front)&&A.push({x:(s+o)/2,y:r,z:0,xDir:{x:1,y:0,z:0}}),g(L.top,L.back)&&A.push({x:(s+o)/2,y:r,z:h,xDir:{x:-1,y:0,z:0}}),P=[],g(L.bottom,L.left)&&P.push({z:(0+h)/2,y:n,x:s,xDir:{x:0,y:0,z:-1}}),g(L.bottom,L.right)&&P.push({z:(0+h)/2,y:n,x:o,xDir:{x:0,y:0,z:1}}),k=[],g(L.top,L.left)&&k.push({z:(0+h)/2,y:r,x:s,xDir:{x:0,y:0,z:-1}}),g(L.top,L.right)&&k.push({z:(0+h)/2,y:r,x:o,xDir:{x:0,y:0,z:1}}),S=function(t,e,i){if(0===t.length)return null;if(1===t.length)return t[0];for(var s=0,o=D(t,a,!1),r=1;r<o.length;r++)(i*o[r][e]>i*o[s][e]||i*o[r][e]==i*o[s][e]&&o[r].z<o[s].z)&&(s=r);return t[s]},L.axes={y:{left:S(m,"x",-1),right:S(m,"x",1)},x:{top:S(A,"y",-1),bottom:S(M,"y",1)},z:{top:S(k,"y",-1),bottom:S(P,"y",1)}}):L.axes={y:{left:{x:s,z:0,xDir:{x:1,y:0,z:0}},right:{x:o,z:0,xDir:{x:0,y:0,z:1}}},x:{top:{y:r,z:0,xDir:{x:1,y:0,z:0}},bottom:{y:n,z:0,xDir:{x:1,y:0,z:0}}},z:{top:{x:z?o:s,y:r,xDir:z?{x:0,y:0,z:1}:{x:0,y:0,z:-1}},bottom:{x:z?o:s,y:n,xDir:z?{x:0,y:0,z:1}:{x:0,y:0,z:-1}}}},L},f.prototype.getScale=function(t){var e=this.chart,i=e.plotLeft,s=e.plotWidth+i,o=e.plotTop,r=e.plotHeight+o,a=i+e.plotWidth/2,n=o+e.plotHeight/2,h={minX:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,minY:Number.MAX_VALUE,maxY:-Number.MAX_VALUE},l=1,p=[{x:i,y:o,z:0},{x:i,y:o,z:t}];return[0,1].forEach(function(t){p.push({x:s,y:p[t].y,z:p[t].z})}),[0,1,2,3].forEach(function(t){p.push({x:p[t].x,y:r,z:p[t].z})}),(p=D(p,e,!1)).forEach(function(t){h.minX=Math.min(h.minX,t.x),h.maxX=Math.max(h.maxX,t.x),h.minY=Math.min(h.minY,t.y),h.maxY=Math.max(h.maxY,t.y)}),i>h.minX&&(l=Math.min(l,1-Math.abs((i+a)/(h.minX+a))%1)),s<h.maxX&&(l=Math.min(l,(s-a)/(h.maxX-a))),o>h.minY&&(l=h.minY<0?Math.min(l,(o+n)/(-h.minY+o+n)):Math.min(l,1-(o+n)/(h.minY+n)%1)),r<h.maxY&&(l=Math.min(l,Math.abs((r-n)/(h.maxY-n)))),l},h=f,n.Composition=h,n.defaultOptions={chart:{options3d:{enabled:!1,alpha:0,beta:0,depth:100,fitToPlot:!0,viewDistance:25,axisLabelPosition:null,frame:{visible:"default",size:1,bottom:{},top:{},left:{},right:{},back:{},front:{}}}}},n.compose=function(t,e){var i=t.prototype,s=e.prototype;i.is3d=function(){return this.options.chart.options3d&&this.options.chart.options3d.enabled},i.propsRequireDirtyBox.push("chart.options3d"),i.propsRequireUpdateSeries.push("chart.options3d"),s.matrixSetter=function(){if(this.pos<1&&(d(this.start)||d(this.end)))for(var t=this.start||[1,0,0,1,0,0],e=this.end||[1,0,0,1,0,0],i=[],s=0;s<6;s++)i.push(this.pos*e[s]+(1-this.pos)*t[s]);else i=this.end;this.elem.attr(this.prop,i,null,!0)},x(!0,l,n.defaultOptions),p(t,"init",A),p(t,"addSeries",u),p(t,"afterDrawChartBox",z),p(t,"afterGetContainer",b),p(t,"afterInit",v),p(t,"afterSetChartSize",g),p(t,"beforeRedraw",m),p(t,"beforeRender",M),y(w.Chart.prototype,"isInsidePlot",P),y(t,"renderSeries",k),y(t,"setClassName",S)},a.compose(i,c),r.ZChartComposition.compose(i),e.compose(t),a}),i(e,"parts-3d/Series.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(t,e){var i=e.addEvent,l=e.pick,p=t.perspective;i(t.Series,"afterTranslate",function(){this.chart.is3d()&&this.translate3dPoints()}),t.Series.prototype.translate3dPoints=function(){for(var t,e,i,s,o=this,r=o.chart,a=l(o.zAxis,r.options.zAxis[0]),n=[],h=0;h<o.data.length;h++)t=o.data[h],a&&a.translate?(s=a.logarithmic&&a.val2lin?a.val2lin(t.z):t.z,t.plotZ=a.translate(s),t.isInside=!!t.isInside&&(s>=a.min&&s<=a.max)):t.plotZ=0,t.axisXpos=t.plotX,t.axisYpos=t.plotY,t.axisZpos=t.plotZ,n.push({x:t.plotX,y:t.plotY,z:t.plotZ});for(e=p(n,r,!0),h=0;h<o.data.length;h++)t=o.data[h],i=e[h],t.plotX=i.x,t.plotY=i.y,t.plotZ=i.z}}),i(e,"parts-3d/Column.js",[e["parts/Globals.js"],e["parts/Stacking.js"],e["parts/Utilities.js"]],function(t,e,i){var s=i.addEvent,y=i.pick,o=i.wrap,x=t.perspective,r=t.Series,f=t.seriesTypes,a=t.svg;function n(t){var e=t.apply(this,[].slice.call(arguments,1));return this.chart.is3d&&this.chart.is3d()&&(e.stroke=this.options.edgeColor||e.fill,e["stroke-width"]=y(this.options.edgeWidth,1)),e}function h(t,e,i){var s=this.chart.is3d&&this.chart.is3d();s&&(this.options.inactiveOtherPoints=!0),t.call(this,e,i),s&&(this.options.inactiveOtherPoints=!1)}function l(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return this.series.chart.is3d()?this.graphic&&"g"!==this.graphic.element.nodeName:t.apply(this,e)}o(f.column.prototype,"translate",function(t){t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&this.translate3dShapes()}),o(t.Series.prototype,"justifyDataLabel",function(t){return!arguments[2].outside3dPlot&&t.apply(this,[].slice.call(arguments,1))}),f.column.prototype.translate3dPoints=function(){},f.column.prototype.translate3dShapes=function(){var e,r=this,a=r.chart,t=r.options,n=t.depth,h=(t.stacking?t.stack||0:r.index)*(n+(t.groupZPadding||1)),l=r.borderWidth%2?.5:0;a.inverted&&!r.yAxis.reversed&&(l*=-1),!1!==t.grouping&&(h=0),h+=t.groupZPadding||1,r.data.forEach(function(i){var s,t,o;(i.outside3dPlot=null)!==i.y&&(s=i.shapeArgs,t=i.tooltipPos,[["x","width"],["y","height"]].forEach(function(t){if((o=s[t[0]]-l)<0&&(s[t[1]]+=s[t[0]]+l,s[t[0]]=-l,o=0),o+s[t[1]]>r[t[0]+"Axis"].len&&0!==s[t[1]]&&(s[t[1]]=r[t[0]+"Axis"].len-s[t[0]]),0!==s[t[1]]&&(s[t[0]]>=r[t[0]+"Axis"].len||s[t[0]]+s[t[1]]<=l)){for(var e in s)s[e]=0;i.outside3dPlot=!0}}),"rect"===i.shapeType&&(i.shapeType="cuboid"),s.z=h,s.depth=n,s.insidePlotArea=!0,e={x:s.x+s.width/2,y:s.y,z:h+n/2},a.inverted&&(e.x=s.height,e.y=i.clientX),i.plot3d=x([e],a,!0,!1)[0],t=x([{x:t[0],y:t[1],z:h+n/2}],a,!0,!1)[0],i.tooltipPos=[t.x,t.y])}),r.z=h},o(f.column.prototype,"animate",function(t){var e,i,s,o;this.chart.is3d()?(e=arguments[1],i=this.yAxis,o=(s=this).yAxis.reversed,a&&(e?s.data.forEach(function(t){null!==t.y&&(t.height=t.shapeArgs.height,t.shapey=t.shapeArgs.y,t.shapeArgs.height=1,o||(t.stackY?t.shapeArgs.y=t.plotY+i.translate(t.stackY):t.shapeArgs.y=t.plotY+(t.negative?-t.height:t.height)))}):(s.data.forEach(function(t){null!==t.y&&(t.shapeArgs.height=t.height,t.shapeArgs.y=t.shapey,t.graphic&&t.graphic.animate(t.shapeArgs,s.options.animation))}),this.drawDataLabels()))):t.apply(this,[].slice.call(arguments,1))}),o(f.column.prototype,"plotGroup",function(t,e,i,s,o,r){return"dataLabelsGroup"!==e&&this.chart.is3d()&&(this[e]&&delete this[e],r&&(this.chart.columnGroup||(this.chart.columnGroup=this.chart.renderer.g("columnGroup").add(r)),this[e]=this.chart.columnGroup,this.chart.columnGroup.attr(this.getPlotBox()),this[e].survive=!0,"group"!==e&&"markerGroup"!==e||(arguments[3]="visible"))),t.apply(this,Array.prototype.slice.call(arguments,1))}),o(f.column.prototype,"setVisible",function(t,e){var i,s=this;s.chart.is3d()&&s.data.forEach(function(t){t.visible=t.options.visible=e=void 0===e?!y(s.visible,t.visible):e,i=e?"visible":"hidden",s.options.data[s.data.indexOf(t)]=t.options,t.graphic&&t.graphic.attr({visibility:i})}),t.apply(this,Array.prototype.slice.call(arguments,1))}),f.column.prototype.handle3dGrouping=!0,s(r,"afterInit",function(){if(this.chart.is3d()&&this.handle3dGrouping){var t=this.options,e=t.grouping,i=t.stacking,s=y(this.yAxis.options.reversedStacks,!0),o=0;if(void 0===e||e){for(var r=(h=this.chart,l=i,c=h.series,d={},x=1,c.forEach(function(t){p=y(t.options.stack,l?0:c.length-1-t.index),d[p]?d[p].series.push(t):(d[p]={series:[t],position:x},x++)}),d.totalStacks=x+1,d),a=t.stack||0,n=0;n<r[a].series.length&&r[a].series[n]!==this;n++);o=10*(r.totalStacks-r[a].position)+(s?n:-n),this.xAxis.reversed||(o=10*r.totalStacks-o)}t.depth=t.depth||25,this.z=this.z||0,t.zIndex=o}var h,l,p,c,d,x}),o(f.column.prototype,"pointAttribs",n),o(f.column.prototype,"setState",h),o(f.column.prototype.pointClass.prototype,"hasNewShapeType",l),f.columnrange&&(o(f.columnrange.prototype,"pointAttribs",n),o(f.columnrange.prototype,"setState",h),o(f.columnrange.prototype.pointClass.prototype,"hasNewShapeType",l),f.columnrange.prototype.plotGroup=f.column.prototype.plotGroup,f.columnrange.prototype.setVisible=f.column.prototype.setVisible),o(r.prototype,"alignDataLabel",function(t,e,i,s,o){var r,a,n,h,l,p=this.chart;s.outside3dPlot=e.outside3dPlot,p.is3d()&&this.is("column")&&(r=this.options,a=y(s.inside,!!this.options.stacking),n=p.options.chart.options3d,h=e.pointWidth/2||0,l={x:o.x+h,y:o.y,z:this.z+r.depth/2},p.inverted&&(a&&(o.width=0,l.x+=e.shapeArgs.height/2),90<=n.alpha&&n.alpha<=270&&(l.y+=e.shapeArgs.width)),l=x([l],p,!0,!1)[0],o.x=l.x-h,o.y=e.outside3dPlot?-9e9:l.y),t.apply(this,[].slice.call(arguments,1))}),o(e.prototype,"getStackBox",function(t,e,i,s,o,r,a,n){var h,l,p,c,d=t.apply(this,[].slice.call(arguments,1));return e.is3d()&&i.base&&(h=+i.base.split(",")[0],l=e.series[h],p=e.options.chart.options3d,l&&l instanceof f.column&&(c={x:d.x+(e.inverted?a:r/2),y:d.y,z:l.options.depth/2},e.inverted&&(d.width=0,90<=p.alpha&&p.alpha<=270&&(c.y+=r)),c=x([c],e,!0,!1)[0],d.x=c.x-r/2,d.y=c.y)),d})}),i(e,"parts-3d/Pie.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(t,e){var n=e.pick,i=e.wrap,c=t.deg2rad,s=t.seriesTypes,h=t.svg;i(s.pie.prototype,"translate",function(t){var s,o,r,e,a,n,h;t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&(o=(s=this).options,r=o.depth||0,e=s.chart.options.chart.options3d,a=e.alpha,n=e.beta,h=o.stacking?(o.stack||0)*r:s._i*r,h+=r/2,!1!==o.grouping&&(h=0),s.data.forEach(function(t){var e,i=t.shapeArgs;t.shapeType="arc3d",i.z=h,i.depth=.75*r,i.alpha=a,i.beta=n,i.center=s.center,e=(i.end+i.start)/2,t.slicedTranslation={translateX:Math.round(Math.cos(e)*o.slicedOffset*Math.cos(a*c)),translateY:Math.round(Math.sin(e)*o.slicedOffset*Math.cos(a*c))}}))}),i(s.pie.prototype.pointClass.prototype,"haloPath",function(t){var e=arguments;return this.series.chart.is3d()?[]:t.call(this,e[1])}),i(s.pie.prototype,"pointAttribs",function(t,e,i){var s=t.call(this,e,i),o=this.options;return this.chart.is3d()&&!this.chart.styledMode&&(s.stroke=o.edgeColor||e.color||this.color,s["stroke-width"]=n(o.edgeWidth,1)),s}),i(s.pie.prototype,"drawDataLabels",function(t){var p;this.chart.is3d()&&(p=this.chart.options.chart.options3d,this.data.forEach(function(t){var e=t.shapeArgs,i=e.r,s=(e.alpha||p.alpha)*c,o=(e.beta||p.beta)*c,r=(e.start+e.end)/2,a=t.labelPosition,n=a.connectorPosition,h=-i*(1-Math.cos(s))*Math.sin(r),l=i*(Math.cos(o)-1)*Math.cos(r);[a.natural,n.breakAt,n.touchingSliceAt].forEach(function(t){t.x+=l,t.y+=h})})),t.apply(this,[].slice.call(arguments,1))}),i(s.pie.prototype,"addPoint",function(t){t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&this.update(this.userOptions,!0)}),i(s.pie.prototype,"animate",function(t){var e,i,s,o,r,a;this.chart.is3d()?(e=arguments[1],i=this.options.animation,o=this.center,r=this.group,a=this.markerGroup,h&&(!0===i&&(i={}),e?(r.oldtranslateX=n(r.oldtranslateX,r.translateX),r.oldtranslateY=n(r.oldtranslateY,r.translateY),s={translateX:o[0],translateY:o[1],scaleX:.001,scaleY:.001},r.attr(s),a&&(a.attrSetters=r.attrSetters,a.attr(s))):(s={translateX:r.oldtranslateX,translateY:r.oldtranslateY,scaleX:1,scaleY:1},r.animate(s,i),a&&a.animate(s,i)))):t.apply(this,[].slice.call(arguments,1))})}),i(e,"parts-3d/Scatter.js",[e["parts/Globals.js"],e["parts/Point.js"],e["parts/Utilities.js"]],function(i,t,e){var s=e.seriesType,o=i.seriesTypes;s("scatter3d","scatter",{tooltip:{pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>z: <b>{point.z}</b><br/>"}},{pointAttribs:function(t){var e=o.scatter.prototype.pointAttribs.apply(this,arguments);return this.chart.is3d()&&t&&(e.zIndex=i.pointCameraDistance(t,this.chart)),e},axisTypes:["xAxis","yAxis","zAxis"],pointArrayMap:["x","y","z"],parallelArrays:["x","y","z"],directTouch:!0},{applyOptions:function(){return t.prototype.applyOptions.apply(this,arguments),void 0===this.z&&(this.z=0),this}})}),i(e,"parts-3d/VMLAxis3D.js",[e["parts/Utilities.js"]],function(t){var e=t.addEvent,i=function(t){this.axis=t};function s(){}return s.compose=function(t){t.keepProps.push("vml"),e(t,"init",s.onInit),e(t,"render",s.onRender)},s.onInit=function(){this.vml||(this.vml=new i(this))},s.onRender=function(){var t=this.vml;t.sideFrame&&(t.sideFrame.css({zIndex:0}),t.sideFrame.front.attr({fill:t.sideFrame.color})),t.bottomFrame&&(t.bottomFrame.css({zIndex:1}),t.bottomFrame.front.attr({fill:t.bottomFrame.color})),t.backFrame&&(t.backFrame.css({zIndex:0}),t.backFrame.front.attr({fill:t.backFrame.color}))},s}),i(e,"parts-3d/VMLRenderer.js",[e["parts/Axis.js"],e["parts/Globals.js"],e["parts/SVGRenderer.js"],e["parts/Utilities.js"],e["parts-3d/VMLAxis3D.js"]],function(t,e,i,s,o){var r=s.setOptions,a=e.VMLRenderer;a&&(r({animate:!1}),a.prototype.face3d=i.prototype.face3d,a.prototype.polyhedron=i.prototype.polyhedron,a.prototype.elements3d=i.prototype.elements3d,a.prototype.element3d=i.prototype.element3d,a.prototype.cuboid=i.prototype.cuboid,a.prototype.cuboidPath=i.prototype.cuboidPath,a.prototype.toLinePath=i.prototype.toLinePath,a.prototype.toLineSegments=i.prototype.toLineSegments,a.prototype.arc3d=function(t){var e=i.prototype.arc3d.call(this,t);return e.css({zIndex:e.zIndex}),e},e.VMLRenderer.prototype.arc3dPath=i.prototype.arc3dPath,o.compose(t))}),i(e,"masters/highcharts-3d.src.js",[],function(){})});