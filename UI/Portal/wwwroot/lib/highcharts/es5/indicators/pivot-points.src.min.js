!function(o){"object"==typeof module&&module.exports?module.exports=o.default=o:"function"==typeof define&&define.amd?define("highcharts/indicators/pivot-points",["highcharts","highcharts/modules/stock"],function(t){return o(t),o.Highcharts=t,o}):o("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function o(t,o,n,e){t.hasOwnProperty(o)||(t[o]=e.apply(null,n),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:o,module:t[o]}})))}o(t,"Stock/Indicators/PivotPoints/PivotPointsPoint.js",[t["Core/Series/SeriesRegistry.js"]],function(a){var e,o,t=this&&this.__extends||(e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])})(t,o)},function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}),n=a.seriesTypes.sma.prototype.pointClass;function i(t,o){var n,e=t.series.pointArrayMap,i=e.length;for(a.seriesTypes.sma.prototype.pointClass.prototype[o].call(t);i--;)t[n="dataLabel"+e[i]]&&t[n].element&&t[n].destroy(),t[n]=null}function r(){var t=null!==o&&o.apply(this,arguments)||this;return t.P=void 0,t.pivotLine=void 0,t.series=void 0,t}return t(r,o=n),r.prototype.destroyElements=function(){i(this,"destroyElements")},r.prototype.destroy=function(){i(this,"destroyElements")},r}),o(t,"Stock/Indicators/PivotPoints/PivotPointsIndicator.js",[t["Stock/Indicators/PivotPoints/PivotPointsPoint.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,o,n){var e,c,i=this&&this.__extends||(e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])})(t,o)},function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}),a=o.seriesTypes.sma,r=n.merge,s=n.extend,u=n.defined,y=n.isArray,n=(i(p,c=a),p.prototype.toYData=function(t){return[t.P]},p.prototype.translate=function(){var n=this;c.prototype.translate.apply(n),n.points.forEach(function(o){n.pointArrayMap.forEach(function(t){u(o[t])&&(o["plot"+t]=n.yAxis.toPixels(o[t],!0))})}),n.plotEndPoint=n.xAxis.toPixels(n.endPoint,!0)},p.prototype.getGraphPath=function(t){for(var o,n,e,i=this,a=[[],[],[],[],[],[],[],[],[]],r=i.pointArrayMap.length,s=i.plotEndPoint,p=[],l=t.length;l--;){for(n=t[l],e=0;e<r;e++)o=i.pointArrayMap[e],u(n[o])&&a[e].push({plotX:n.plotX,plotY:n["plot"+o],isNull:!1},{plotX:s,plotY:n["plot"+o],isNull:!1},{plotX:s,plotY:null,isNull:!0});s=n.plotX}return a.forEach(function(t){p=p.concat(c.prototype.getGraphPath.call(i,t))}),p},p.prototype.drawDataLabels=function(){var n,e,i,a,r=this,s=r.pointArrayMap;r.options.dataLabels.enabled&&(e=r.points.length,s.concat([!1]).forEach(function(t,o){for(a=e;a--;)i=r.points[a],t?(i.y=i[t],i.pivotLine=t,i.plotY=i["plot"+t],n=i["dataLabel"+t],o&&(i["dataLabel"+s[o-1]]=i.dataLabel),i.dataLabels||(i.dataLabels=[]),i.dataLabels[0]=i.dataLabel=n=n&&n.element?n:null):i["dataLabel"+s[o-1]]=i.dataLabel;c.prototype.drawDataLabels.call(r)}))},p.prototype.getValues=function(t,o){var n,e,i,a,r,s=o.period,p=t.xData,l=t.yData,c=l?l.length:0,u=this[o.algorithm+"Placement"],d=[],f=[],h=[];if(!(p.length<s)&&y(l[0])&&4===l[0].length){for(r=s+1;r<=c+s;r+=s)i=p.slice(r-s-1,r),a=l.slice(r-s-1,r),n=i[(e=i.length)-1],a=u(this.getPivotAndHLC(a)),a=d.push([n].concat(a)),f.push(n),h.push(d[a-1].slice(1));return this.endPoint=i[0]+(n-i[0])/e*s,{values:d,xData:f,yData:h}}},p.prototype.getPivotAndHLC=function(t){var o=t[t.length-1][3],n=-1/0,e=1/0;return t.forEach(function(t){n=Math.max(n,t[1]),e=Math.min(e,t[2])}),[(n+e+o)/3,n,e,o]},p.prototype.standardPlacement=function(t){var o=t[1]-t[2];return[null,null,t[0]+o,2*t[0]-t[2],t[0],2*t[0]-t[1],t[0]-o,null,null]},p.prototype.camarillaPlacement=function(t){var o=t[1]-t[2];return[t[3]+1.5*o,t[3]+1.25*o,t[3]+1.1666*o,t[3]+1.0833*o,t[0],t[3]-1.0833*o,t[3]-1.1666*o,t[3]-1.25*o,t[3]-1.5*o]},p.prototype.fibonacciPlacement=function(t){var o=t[1]-t[2];return[null,t[0]+o,t[0]+.618*o,t[0]+.382*o,t[0],t[0]-.382*o,t[0]-.618*o,t[0]-o,null]},p.defaultOptions=r(a.defaultOptions,{params:{index:void 0,period:28,algorithm:"standard"},marker:{enabled:!1},enableMouseTracking:!1,dataLabels:{enabled:!0,format:"{point.pivotLine}"},dataGrouping:{approximation:"averages"}}),p);function p(){var t=null!==c&&c.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t.endPoint=void 0,t.plotEndPoint=void 0,t}return s(n.prototype,{nameBase:"Pivot Points",pointArrayMap:["R4","R3","R2","R1","P","S1","S2","S3","S4"],pointValKey:"P",pointClass:t}),o.registerSeriesType("pivotpoints",n),n}),o(t,"masters/indicators/pivot-points.src.js",[],function(){})});