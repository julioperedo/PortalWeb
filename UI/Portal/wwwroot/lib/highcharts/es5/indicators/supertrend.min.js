!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/indicators/supertrend",["highcharts","highcharts/modules/stock"],function(o){return t(o),t.Highcharts=o,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(o){"use strict";o=o?o._modules:{};function t(o,t,e,r){o.hasOwnProperty(t)||(o[t]=r.apply(null,e),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:o[t]}})))}t(o,"Stock/Indicators/Supertrend/SupertrendIndicator.js",[o["Core/Series/SeriesRegistry.js"],o["Core/Utilities.js"],o["Core/Chart/StockChart.js"]],function(o,t,n){var r,e=this&&this.__extends||(r=function(o,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])})(o,t)},function(o,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}r(o,t),o.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=o.seriesTypes,S=i.atr,v=i.sma,l=t.addEvent,D=t.correctFloat,b=t.isArray,i=t.extend,T=t.merge,_=t.objectEach;function j(o,t,e){return{index:t,close:o.yData[t][e],x:o.xData[t]}}e(a,s=v),a.prototype.init=function(){var e=this,r=(s.prototype.init.apply(e,arguments),l(n,"afterLinkSeries",function(){var o,t;e.options&&(o=e.options,t=e.linkedParent.options,o.cropThreshold=t.cropThreshold-(o.params.period-1)),r()},{order:1}))},a.prototype.drawGraph=function(){for(var o,t,e,r,n,i,l,s,a=this,p=a.options,c=a.linkedParent,d=c?c.points:[],u=a.points,h=a.graph,y=d.length-u.length,f=0<y?y:0,g={options:{gapSize:p.gapSize}},x={top:[],bottom:[],intersect:[]},m={top:{styles:{lineWidth:p.lineWidth,lineColor:p.fallingTrendColor||p.color,dashStyle:p.dashStyle}},bottom:{styles:{lineWidth:p.lineWidth,lineColor:p.risingTrendColor||p.color,dashStyle:p.dashStyle}},intersect:p.changeTrendLine},C=u.length;C--;)o=u[C],t=u[C-1],e=d[C-1+f],r=d[C-2+f],n=d[C+f],s=d[C+f+1],i=o.options.color,l={x:o.x,plotX:o.plotX,plotY:o.plotY,isNull:!1},!r&&e&&c.yData[e.index-1]&&(r=j(c,e.index-1,3)),!s&&n&&c.yData[n.index+1]&&(s=j(c,n.index+1,3)),!e&&r&&c.yData[r.index+1]?e=j(c,r.index+1,3):!e&&n&&c.yData[n.index-1]&&(e=j(c,n.index-1,3)),o&&e&&n&&r&&o.x!==e.x&&(o.x===n.x?(r=e,e=n):o.x===r.x?(e=r,r={close:c.yData[e.index-1][3],x:c.xData[e.index-1]}):s&&o.x===s.x&&(e=s,r=n)),t&&r&&e?(s={x:t.x,plotX:t.plotX,plotY:t.plotY,isNull:!1},o.y>=e.close&&t.y>=r.close?(o.color=i||p.fallingTrendColor||p.color,x.top.push(l)):o.y<e.close&&t.y<r.close?(o.color=i||p.risingTrendColor||p.color,x.bottom.push(l)):(x.intersect.push(l),x.intersect.push(s),x.intersect.push(T(s,{isNull:!0})),o.y>=e.close&&t.y<r.close?(o.color=i||p.fallingTrendColor||p.color,t.color=i||p.risingTrendColor||p.color,x.top.push(l),x.top.push(T(s,{isNull:!0}))):o.y<e.close&&t.y>=r.close&&(o.color=i||p.risingTrendColor||p.color,t.color=i||p.fallingTrendColor||p.color,x.bottom.push(l),x.bottom.push(T(s,{isNull:!0}))))):e&&(o.y>=e.close?(o.color=i||p.fallingTrendColor||p.color,x.top.push(l)):(o.color=i||p.risingTrendColor||p.color,x.bottom.push(l)));_(x,function(o,t){a.points=o,a.options=T(m[t].styles,g),a.graph=a["graph"+t+"Line"],v.prototype.drawGraph.call(a),a["graph"+t+"Line"]=a.graph}),a.points=u,a.options=p,a.graph=h},a.prototype.getValues=function(o,t){var e,r,n,i,l,s,a,p,c,d,u=t.period,h=t.multiplier,y=o.xData,f=o.yData,g=[],x=[],m=[],C=0===u?0:u-1,v=[],T=[];if(!(y.length<=u)&&b(f[0])&&4===f[0].length&&!(u<0)){for(c=0,d=S.prototype.getValues.call(this,o,{period:u}).yData;c<d.length;c++)p=f[C+c],a=f[C+c-1]||[],i=v[c-1],l=T[c-1],s=m[c-1],0===c&&(i=l=s=0),e=D((p[1]+p[2])/2+h*d[c]),r=D((p[1]+p[2])/2-h*d[c]),e<i||a[3]>i?v[c]=e:v[c]=i,l<r||a[3]<l?T[c]=r:T[c]=l,s===i&&p[3]<v[c]||s===l&&p[3]<T[c]?n=v[c]:(s===i&&p[3]>v[c]||s===l&&p[3]>T[c])&&(n=T[c]),g.push([y[C+c],n]),x.push(y[C+c]),m.push(n);return{values:g,xData:x,yData:m}}},a.defaultOptions=T(v.defaultOptions,{params:{index:void 0,multiplier:3,period:10},risingTrendColor:"#06b535",fallingTrendColor:"#f21313",changeTrendLine:{styles:{lineWidth:1,lineColor:"#333333",dashStyle:"LongDash"}}});var s,t=a;function a(){var o=null!==s&&s.apply(this,arguments)||this;return o.data=void 0,o.linkedParent=void 0,o.options=void 0,o.points=void 0,o}return i(t.prototype,{nameBase:"Supertrend",nameComponents:["multiplier","period"]}),o.registerSeriesType("supertrend",t),t}),t(o,"masters/indicators/supertrend.src.js",[],function(){})});