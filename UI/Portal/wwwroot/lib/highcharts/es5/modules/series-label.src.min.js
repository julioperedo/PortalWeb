!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/series-label",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,r,o){t.hasOwnProperty(e)||(t[e]=o.apply(null,r),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Extensions/SeriesLabel/SeriesLabelDefaults.js",[],function(){return{enabled:!0,connectorAllowed:!1,connectorNeighbourDistance:24,format:void 0,formatter:void 0,minFontSize:null,maxFontSize:null,onArea:null,style:{fontSize:"0.8em",fontWeight:"bold"},useHTML:!1,boxesToAvoid:[]}}),e(t,"Extensions/SeriesLabel/SeriesLabelUtilities.js",[],function(){function h(t,e,r,o,a,i){i=(i-e)*(r-t)-(o-e)*(a-t);return 0<i||!(i<0)}function l(t,e,r,o,a,i,n,s){return h(t,e,a,i,n,s)!==h(r,o,a,i,n,s)&&h(t,e,r,o,a,i)!==h(t,e,r,o,n,s)}return{boxIntersectLine:function(t,e,r,o,a,i,n,s){return l(t,e,t+r,e,a,i,n,s)||l(t+r,e,t+r,e+o,a,i,n,s)||l(t,e+o,t+r,e+o,a,i,n,s)||l(t,e,t,e+o,a,i,n,s)},intersectRect:function(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}}}),e(t,"Extensions/SeriesLabel/SeriesLabel.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Chart/Chart.js"],t["Core/Templating.js"],t["Core/Defaults.js"],t["Extensions/SeriesLabel/SeriesLabelDefaults.js"],t["Extensions/SeriesLabel/SeriesLabelUtilities.js"],t["Core/Utilities.js"]],function(t,r,e,o,a,i,s){var A=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var o,a=0,i=e.length;a<i;a++)!o&&a in e||((o=o||Array.prototype.slice.call(e,0,a))[a]=e[a]);return t.concat(o||Array.prototype.slice.call(e))},L=t.animObject,E=e.format,n=o.setOptions,w=i.boxIntersectLine,M=i.intersectRect,h=s.addEvent,T=s.extend,l=s.fireEvent,C=s.isNumber,P=s.pick,c=s.syncTimeout,p=[],j=3;function D(t,e,r,o,a){var i,n,s,h,l,c,p,u=t.chart,d=t.options.label||{},f=P(d.onArea,!!t.area),x=f||d.connectorAllowed,b=u.boxesToAvoid,m=Number.MAX_VALUE,g=Number.MAX_VALUE;for(c=0;b&&c<b.length;c+=1)if(M(b[c],{left:e,right:e+o.width,top:r,bottom:r+o.height}))return!1;for(c=0;c<u.series.length;c+=1){var y=u.series[c],Y=y.interpolatedPoints&&A([],y.interpolatedPoints,!0);if(y.visible&&Y){for(var X=u.plotHeight/10,v=u.plotTop;v<=u.plotTop+u.plotHeight;v+=X)Y.unshift({chartX:u.plotLeft,chartY:v}),Y.push({chartX:u.plotLeft+u.plotWidth,chartY:v});for(p=1;p<Y.length;p+=1){if(Y[p].chartX>=e-16&&Y[p-1].chartX<=e+o.width+16){if(w(e,r,o.width,o.height,Y[p-1].chartX,Y[p-1].chartY,Y[p].chartX,Y[p].chartY))return!1;t===y&&!s&&a&&(s=w(e-16,r-16,o.width+32,o.height+32,Y[p-1].chartX,Y[p-1].chartY,Y[p].chartX,Y[p].chartY))}!x&&!s||t===y&&!f||(h=e+o.width/2-Y[p].chartX,l=r+o.height/2-Y[p].chartY,m=Math.min(m,h*h+l*l))}if(!f&&x&&t===y&&(a&&!s||m<Math.pow(d.connectorNeighbourDistance||1,2))){for(p=1;p<Y.length;p+=1)(i=Math.min(Math.pow(e+o.width/2-Y[p].chartX,2)+Math.pow(r+o.height/2-Y[p].chartY,2),Math.pow(e-Y[p].chartX,2)+Math.pow(r-Y[p].chartY,2),Math.pow(e+o.width-Y[p].chartX,2)+Math.pow(r-Y[p].chartY,2),Math.pow(e+o.width-Y[p].chartX,2)+Math.pow(r+o.height-Y[p].chartY,2),Math.pow(e-Y[p].chartX,2)+Math.pow(r+o.height-Y[p].chartY,2)))<g&&(g=i,n=Y[p]);s=!0}}}return!(a&&!s)&&{x:e,y:r,weight:m-(n?g:0),connectorPoint:n}}function u(S){S.boxesToAvoid=[];var t=S.labelSeries||[],i=S.boxesToAvoid;S.series.forEach(function(a){return(a.points||[]).forEach(function(t){return(t.dataLabels||[]).forEach(function(t){var e=t.getBBox(),r=e.width,e=e.height,o=(t.translateX||0)+(a.xAxis?a.xAxis.pos:a.chart.plotLeft),t=(t.translateY||0)+(a.yAxis?a.yAxis.pos:a.chart.plotTop);i.push({left:o,top:t,right:o+r,bottom:t+e})})})}),t.forEach(function(t){var e=t.options.label||{};t.interpolatedPoints=function(t){if(t.xAxis||t.yAxis){var e,r,o,a,i,n=t.points,s=[],h=t.graph||t.area,l=h&&h.element,c=t.chart.inverted,p=t.xAxis,u=t.yAxis,d=(c?u:p).pos,f=(c?p:u).pos,c=t.options.label||{},x=P(c.onArea,!!t.area),b=u.getThreshold(t.options.threshold),m={};if(t.getPointSpline&&l&&l.getPointAtLength&&!x&&n.length<(t.chart.plotSizeX||0)/16){p=h.toD&&h.attr("d");for(h.toD&&h.attr({d:h.toD}),o=l.getTotalLength(),e=0;e<o;e+=16){var g=l.getPointAtLength(e);M({chartX:d+g.x,chartY:f+g.y,plotX:g.x,plotY:g.y})}p&&h.attr({d:p});var y=n[n.length-1];M({chartX:d+(y.plotX||0),chartY:f+(y.plotY||0)})}else{o=n.length;var Y=void 0;for(e=0;e<o;e+=1){var X=(y=n[e]).plotX,v=y.plotY,A=y.plotHigh;if(C(X)&&C(v)){var w={plotX:X,plotY:v,chartX:d+X,chartY:f+v};if(x&&(A&&(w.plotY=A,w.chartY=f+A),w.chartCenterY=f+((A||v)+P(y.yBottom,b))/2),Y&&(A=Math.abs(w.chartX-Y.chartX),r=Math.abs(w.chartY-Y.chartY),16<(r=Math.max(A,r))))for(a=Math.ceil(r/16),i=1;i<a;i+=1)M({chartX:Y.chartX+(w.chartX-Y.chartX)*(i/a),chartY:Y.chartY+(w.chartY-Y.chartY)*(i/a),chartCenterY:(Y.chartCenterY||0)+((w.chartCenterY||0)-(Y.chartCenterY||0))*(i/a),plotX:(Y.plotX||0)+(X-(Y.plotX||0))*(i/a),plotY:(Y.plotY||0)+(v-(Y.plotY||0))*(i/a)});M(w),Y=w}}}return s}function M(t){var e=Math.round((t.plotX||0)/8)+","+Math.round((t.plotY||0)/8);m[e]||(m[e]=1,s.push(t))}}(t),i.push.apply(i,e.boxesToAvoid||[])}),S.series.forEach(function(t){var e=t.options.label;if(e&&(t.xAxis||t.yAxis)){var r,o,a,i,n,s,h,l,c="highcharts-color-"+P(t.colorIndex,"none"),p=!t.labelBySeries,u=e.minFontSize,d=e.maxFontSize,f=S.inverted,x=(f?t.yAxis:t.xAxis).pos,b=(f?t.xAxis:t.yAxis).pos,m=(S.inverted?t.yAxis:t.xAxis).len,g=(S.inverted?t.xAxis:t.yAxis).len,y=t.interpolatedPoints,Y=P(e.onArea,!!t.area),X=[],v=t.xData||[],A=t.labelBySeries;if(Y&&!f&&(f=[t.xAxis.toPixels(v[0]),t.xAxis.toPixels(v[v.length-1])],h=Math.min.apply(Math,f),l=Math.max.apply(Math,f)),t.visible&&!t.boosted&&y){for(A||(v=t.name,"string"==typeof e.format?v=E(e.format,t,S):e.formatter&&(v=e.formatter.call(t)),t.labelBySeries=A=S.renderer.label(v,0,0,"connector",0,0,e.useHTML).addClass("highcharts-series-label highcharts-series-label-"+t.index+" "+(t.options.className||"")+" "+c),S.renderer.styledMode||(f="string"==typeof t.color?t.color:"#666666",A.css(T({color:Y?S.renderer.getContrast(f):f},e.style||{})),A.attr({opacity:S.renderer.forExport?1:0,stroke:t.color,"stroke-width":1})),u&&d&&A.css({fontSize:u+(t.sum||0)/(t.chart.labelSeriesMaxSum||0)*(d-u)+"px"}),A.attr({padding:0,zIndex:3}).add()),(r=A.getBBox()).width=Math.round(r.width),n=y.length-1;0<n;--n)Y?(s=w(o=y[n].chartX-r.width/2,a=(y[n].chartCenterY||0)-r.height/2,r)?D(t,o,a,r):s)&&X.push(s):((s=w(o=y[n].chartX+j,a=y[n].chartY-r.height-j,r)?D(t,o,a,r,!0):s)&&X.push(s),(s=w(o=y[n].chartX+j,a=y[n].chartY+j,r)?D(t,o,a,r,!0):s)&&X.push(s),(s=w(o=y[n].chartX-r.width-j,a=y[n].chartY+j,r)?D(t,o,a,r,!0):s)&&X.push(s),(s=w(o=y[n].chartX-r.width-j,a=y[n].chartY-r.height-j,r)?D(t,o,a,r,!0):s)&&X.push(s));if(e.connectorAllowed&&!X.length&&!Y)for(o=x+m-r.width;x<=o;o-=16)for(a=b;a<b+g-r.height;a+=16)(i=D(t,o,a,r,!0))&&X.push(i);X.length?(X.sort(function(t,e){return e.weight-t.weight}),s=X[0],(S.boxesToAvoid||[]).push({left:s.x,right:s.x+r.width,top:s.y,bottom:s.y+r.height}),(v=Math.sqrt(Math.pow(Math.abs(s.x-(A.x||0)),2)+Math.pow(Math.abs(s.y-(A.y||0)),2)))&&t.labelBySeries&&(c={opacity:S.renderer.forExport?1:0,x:s.x,y:s.y},f={opacity:1},d=void(v<=10&&(f={x:c.x,y:c.y},c={})),p&&((d=L(t.options.animation)).duration*=.2),t.labelBySeries.attr(T(c,{anchorX:s.connectorPoint&&(s.connectorPoint.plotX||0)+x,anchorY:s.connectorPoint&&(s.connectorPoint.plotY||0)+b})).animate(f,d),t.options.kdNow=!0,t.buildKDTree(),(u=t.searchPoint({chartX:s.x,chartY:s.y},!0))&&(A.closest=[u,s.x-(u.plotX||0),s.y-(u.plotY||0)]))):M()}else M()}function w(t,e,r){var o=Math.max(x,P(h,-1/0)),a=Math.min(x+m,P(l,1/0));return o<t&&t<=a-r.width&&b<=e&&e<=b+g-r.height}function M(){A&&(t.labelBySeries=A.destroy())}}),l(S,"afterDrawSeriesLabels")}function d(a){var i,n;this.renderer&&(n=L((i=this).renderer.globalAnimation).duration,i.labelSeries=[],i.labelSeriesMaxSum=0,i.seriesLabelTimer&&s.clearTimeout(i.seriesLabelTimer),i.series.forEach(function(t){var e=t.options.label||{},r=t.labelBySeries,o=r&&r.closest;e.enabled&&t.visible&&(t.graph||t.area)&&!t.boosted&&i.labelSeries&&(i.labelSeries.push(t),e.minFontSize&&e.maxFontSize&&t.yData&&(t.sum=t.yData.reduce(function(t,e){return(t||0)+(e||0)},0),i.labelSeriesMaxSum=Math.max(i.labelSeriesMaxSum||0,t.sum||0)),"load"===a.type&&(n=Math.max(n,L(t.options.animation).duration)),o&&(void 0!==o[0].plotX?r.animate({x:o[0].plotX+o[1],y:o[0].plotY+o[2]}):r.attr({opacity:0})))}),i.seriesLabelTimer=c(function(){i.series&&i.labelSeries&&u(i)},i.renderer.forExport||!n?0:n))}function f(t,e,r,o,a){var i,n,s=a&&a.anchorX,a=a&&a.anchorY,h=r/2;return C(s)&&C(a)&&(i=[["M",s,a]],(n=(n=e-a)<0?-o-n:n)<r&&(h=s<t+r/2?n:r-n),e+o<a?i.push(["L",t+h,e+o]):a<e?i.push(["L",t+h,e]):s<t?i.push(["L",t,e+o/2]):t+r<s&&i.push(["L",t+r,e+o/2])),i||[]}return{compose:function(t,e){s.pushUnique(p,t)&&(h(r,"load",d),h(r,"redraw",d)),s.pushUnique(p,e)&&(e.prototype.symbols.connector=f),s.pushUnique(p,n)&&n({plotOptions:{series:{label:a}}})}}}),e(t,"masters/modules/series-label.src.js",[t["Core/Globals.js"],t["Extensions/SeriesLabel/SeriesLabel.js"]],function(t,e){e.compose(t.Chart,t.SVGRenderer)})});