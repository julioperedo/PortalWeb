!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/venn",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,r,n){t.hasOwnProperty(e)||(t[e]=n.apply(null,r),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Core/Geometry/GeometryUtilities.js",[],function(){var t;t={getCenterOfPoints:function(t){var e=t.reduce(function(t,e){return t.x+=e.x,t.y+=e.y,t},{x:0,y:0});return{x:e.x/t.length,y:e.y/t.length}},getDistanceBetweenPoints:function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},getAngleBetweenPoints:function(t,e){return Math.atan2(e.x-t.x,e.y-t.y)}};return t}),e(t,"Core/Geometry/CircleUtilities.js",[t["Core/Geometry/GeometryUtilities.js"]],function(t){var e,u=t.getAngleBetweenPoints,c=t.getCenterOfPoints,l=t.getDistanceBetweenPoints;return(t=e=e||{}).round=f,t.getAreaOfCircle=o,t.getCircularSegmentArea=s,t.getOverlapBetweenCircles=function(t,e,r){var n,i=0;return i=r<t+e?f(i=r<=Math.abs(e-t)?o(t<e?t:e):(n=r-(r=(t*t-e*e+r*r)/(2*r)),s(t,t-r)+s(e,e-n)),14):i},t.getCircleCircleIntersection=a,t.getCirclesIntersectionPoints=r,t.isCircle1CompletelyOverlappingCircle2=function(t,e){return l(t,e)+e.r<t.r+1e-10},t.isPointInsideCircle=n,t.isPointInsideAllCircles=i,t.isPointOutsideAllCircles=function(e,t){return!t.some(function(t){return n(e,t)})},t.getCirclesIntersectionPolygon=p,t.getAreaOfIntersectionBetweenCircles=function(a){var t,e,r,n=p(a);return 1<n.length&&(e=c(n),r=(n=n.map(function(t){return t.angle=u(e,t),t}).sort(function(t,e){return e.angle-t.angle}))[n.length-1],0!==(n=n.reduce(function(t,i){var e,o=t.startPoint,s=c([o,i]),r=i.indexes.filter(function(t){return-1<o.indexes.indexOf(t)}).reduce(function(t,e){var e=a[e],r=u(e,i),n=u(e,o),n=n-(n-r+(n<r?2*Math.PI:0))/2,r=l(s,{x:e.x+e.r*Math.sin(n),y:e.y+e.r*Math.cos(n)}),n=e.r;return 2*n<r&&(r=2*n),t=!t||t.width>r?{r:n,largeArc:n<r?1:0,width:r,x:i.x,y:i.y}:t},null);return r&&(e=r.r,t.arcs.push(["A",e,e,0,r.largeArc,1,r.x,r.y]),t.startPoint=i),t},{startPoint:r,arcs:[]}).arcs).length&&1!==n.length&&(n.unshift(["M",r.x,r.y]),t={center:e,d:n})),t},e;function f(t,e){e=Math.pow(10,e);return Math.round(t*e)/e}function o(t){if(t<=0)throw Error("radius of circle must be a positive number.");return Math.PI*t*t}function s(t,e){return t*t*Math.acos(1-e/t)-(t-e)*Math.sqrt(e*(2*t-e))}function a(t,e){var r,n,i,o,s=l(t,e),a=t.r,u=e.r,c=[];return s<a+u&&s>Math.abs(a-u)&&(u=((a=a*a)-u*u+s*s)/(2*s),a=Math.sqrt(a-u*u),r=t.x,i=e.x,n=(t=t.y)+u*((e=e.y)-t)/s,o=a/s*-(i-r),c=[{x:f((u=r+u*(i-r)/s)+(i=a/s*-(e-t)),14),y:f(n-o,14)},{x:f(u-i,14),y:f(n+o,14)}]),c}function r(t){return t.reduce(function(t,o,s,e){e=e.slice(s+1).reduce(function(t,e,r,n){var i=[s,r+s+1];return t.concat(a(o,e).map(function(t){return t.indexes=i,t}))},[]);return t.concat(e)},[])}function n(t,e){return l(t,e)<=e.r+1e-10}function i(e,t){return!t.some(function(t){return!n(e,t)})}function p(e){return r(e).filter(function(t){return i(t,e)})}}),e(t,"Series/DrawPointUtilities.js",[t["Core/Utilities.js"]],function(t){var u=this&&this.__assign||function(){return(u=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};return t.isNumber,{draw:function(t,e){var r=e.animatableAttribs,n=e.onComplete,i=e.css,o=e.renderer,s=t.series&&t.series.chart.hasRendered?void 0:t.series&&t.series.options.animation,a=t.graphic;e.attribs=u(u({},e.attribs),{class:t.getClassName()})||{},t.shouldDraw()?(a||(a="text"===e.shapeType?o.text():"image"===e.shapeType?o.image(e.imageUrl||"").attr(e.shapeArgs||{}):o[e.shapeType](e.shapeArgs||{}),(t.graphic=a).add(e.group)),i&&a.css(i),a.attr(e.attribs).animate(r,!e.isNew&&s,n)):a&&(o=function(){t.graphic=a=a&&a.destroy(),"function"==typeof n&&n()},Object.keys(r).length?a.animate(r,void 0,o):o())}}}),e(t,"Series/Venn/VennPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e){var n,r,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),t=t.seriesTypes.scatter.prototype.pointClass,o=e.isNumber;return i(s,r=t),s.prototype.isValid=function(){return o(this.value)},s.prototype.shouldDraw=function(){return!!this.shapeArgs},s;function s(){var t=null!==r&&r.apply(this,arguments)||this;return t.options=void 0,t.series=void 0,t}}),e(t,"Series/Venn/VennSeriesDefaults.js",[],function(){return{borderColor:"#cccccc",borderDashStyle:"solid",borderWidth:1,brighten:0,clip:!1,colorByPoint:!0,dataLabels:{enabled:!0,verticalAlign:"middle",formatter:function(){return this.point.name}},inactiveOtherPoints:!0,marker:!1,opacity:.75,showInLegend:!1,legendType:"point",states:{hover:{opacity:1,borderColor:"#333333"},select:{color:"#cccccc",borderColor:"#000000",animation:!1},inactive:{opacity:.075}},tooltip:{pointFormat:"{point.name}: {point.value}"},legendSymbol:"rectangle"}}),e(t,"Series/Venn/VennUtils.js",[t["Core/Geometry/CircleUtilities.js"],t["Core/Geometry/GeometryUtilities.js"],t["Core/Utilities.js"]],function(t,e,r){var o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},i=t.getAreaOfCircle,b=t.getCircleCircleIntersection,s=t.getOverlapBetweenCircles,a=t.isPointInsideAllCircles,n=t.isPointInsideCircle,u=t.isPointOutsideAllCircles,c=e.getDistanceBetweenPoints,l=r.extend,f=r.isArray,p=r.isNumber,h=r.isObject,d=r.isString;function y(t){var i={};return t.filter(function(t){return 2===t.sets.length}).forEach(function(n){n.sets.forEach(function(t,e,r){h(i[t])||(i[t]={totalOverlap:0,overlapping:{}}),i[t]={totalOverlap:(i[t].totalOverlap||0)+n.value,overlapping:o(o({},i[t].overlapping||{}),((t={})[r[1-e]]=n.value,t))}})}),t.filter(O).forEach(function(t){var e=i[t.sets[0]];l(t,e)}),t}function g(t,e,r,n,i){var o,s,a=t(e),u=t(r),c=i||100,l=n||1e-10,f=r-e,p=1;if(r<=e)throw Error("a must be smaller than b.");if(0<a*u)throw Error("f(a) and f(b) must have opposite signs.");if(0===a)o=e;else if(0===u)o=r;else for(;p++<=c&&0!==s&&l<f;)0<a*(s=t(o=e+(f=(r-e)/2)))?e=o:r=o;return o}function v(t){for(var e=t.slice(0,-1),r=e.length,n=[],i=function(t,e){return t.sum+=e[t.i],t},o=0;o<r;o++)n[o]=e.reduce(i,{sum:0,i:o}).sum/r;return n}function C(e,r,n){var t=e+r;return n<=0?t:i(e<r?e:r)<=n?0:g(function(t){return n-s(e,r,t)},0,t)}function O(t){return f(t.sets)&&1===t.sets.length}function m(t){var r={};return h(t)&&p(t.value)&&-1<t.value&&f(t.sets)&&0<t.sets.length&&!t.sets.some(function(t){var e=!1;return!r[t]&&d(t)?r[t]=!0:e=!0,e})}function A(o,t){return t.reduce(function(t,e){var r,n,i=0;return 1<e.sets.length&&(r=e.value-(e=e.sets.map(function(t){return o[t]}),n=0,2===e.length&&(r=e[0],e=e[1],n=s(r.r,e.r,c(r,e))),n),i=Math.round(r*r*1e11)/1e11),t+i},0)}function j(t,e){return void 0!==e.totalOverlap&&void 0!==t.totalOverlap?e.totalOverlap-t.totalOverlap:NaN}return{geometry:e,geometryCircles:t,addOverlapToSets:y,getCentroid:v,getDistanceBetweenCirclesByOverlap:C,getLabelWidth:function(i,o,t){function e(r,n){return g(function(t){var e={x:i.x+n*t,y:i.y};return-(r-t)+(a(e,o)&&u(e,s)?0:Number.MAX_VALUE)},0,r)}var r=o.reduce(function(t,e){return Math.min(e.r,t)},1/0),s=t.filter(function(t){return!n(i,t)});return 2*Math.min(e(r,-1),e(r,1))},getMarginFromCircles:function(r,t,e){t=t.reduce(function(t,e){e=e.r-c(r,e);return e<=t?e:t},Number.MAX_VALUE);return e.reduce(function(t,e){e=c(r,e)-e.r;return e<=t?e:t},t)},isSet:O,layoutGreedyVenn:function(t){function e(t,e){var r=t.circle;r&&(r.x=e.x,r.y=e.y),v.push(t)}var v=[],m={},r=(t.filter(function(t){return 1===t.sets.length}).forEach(function(t){m[t.sets[0]]=t.circle={x:Number.MAX_VALUE,y:Number.MAX_VALUE,r:Math.sqrt(t.value/Math.PI)}}),y(t),t.filter(O).sort(j));e(r.shift(),{x:0,y:0});for(var x=t.filter(function(t){return 2===t.sets.length}),n=0;n<r.length;n++)!function(t){var d,y,g=t.circle;g&&(d=g.r,y=t.overlapping,e(t,v.reduce(function(t,e,r){var n=e.circle;if(!n||!y)return t;for(var e=y[e.sets[0]],i=C(d,n.r,e),o=[{x:n.x+i,y:n.y},{x:n.x-i,y:n.y},{x:n.x,y:n.y+i},{x:n.x,y:n.y-i}],s=0,a=v.slice(r+1);s<a.length;s++){var u=a[s],c=u.circle,u=y[u.sets[0]];c&&(u=C(d,c.r,u),o=o.concat(b({x:n.x,y:n.y,r:i},{x:c.x,y:c.y,r:u})))}for(var l=0,f=o;l<f.length;l++){var p=f[l],h=(g.x=p.x,g.y=p.y,A(m,x));h<t.loss&&(t.loss=h,t.coordinates=p)}return t},{loss:Number.MAX_VALUE,coordinates:void 0}).coordinates))}(r[n]);return m},loss:A,nelderMead:function(o,t){for(var e=function(t,e){return t.fx-e.fx},i=function(r,t,n,i){return t.map(function(t,e){return r*t+n*i[e]})},r=function(t,e){return e.fx=o(e),t[t.length-1]=e,t},n=function(t){var e=t[0];return t.map(function(t){t=i(.5,e,.5,t);return t.fx=o(t),t})},s=function(t,e,r,n){r=i(r,t,n,e);return r.fx=o(r),r},a=function(t){var e=t.length,r=Array(e+1);r[0]=t,r[0].fx=o(t);for(var n=0;n<e;++n){var i=t.slice();i[n]=i[n]?1.05*i[n]:.001,i.fx=o(i),r[n+1]=i}return r}(t),u=0;u<100;u++){a.sort(e);var c,l=a[a.length-1],f=v(a),p=s(f,l,2,-1);a=p.fx<a[0].fx?r(a,(c=s(f,l,3,-2)).fx<p.fx?c:p):p.fx>=a[a.length-2].fx?(c=void 0,p.fx>l.fx?(c=s(f,l,.5,.5)).fx<l.fx?r(a,c):n(a):(c=s(f,l,1.5,-.5)).fx<p.fx?r(a,c):n(a)):r(a,p)}return a[0]},processVennData:function(t,i){var t=f(t)?t:[],r=t.reduce(function(t,e){var r;return e.sets&&m(r=e)&&O(r)&&0<r.value&&-1===t.indexOf(e.sets[0])&&t.push(e.sets[0]),t},[]).sort(),n=t.reduce(function(t,e){return e.sets&&m(e)&&!e.sets.some(function(t){return-1===r.indexOf(t)})&&(t[e.sets.sort().join(i)]={sets:e.sets,value:e.value||0}),t},{});return r.reduce(function(e,r,t,n){return n.slice(t+1).forEach(function(t){e.push(r+i+t)}),e},[]).forEach(function(t){var e;n[t]||(e={sets:t.split(i),value:0},n[t]=e)}),Object.keys(n).map(function(t){return n[t]})},sortByTotalOverlap:j}}),e(t,"Series/Venn/VennSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Color/Color.js"],t["Core/Geometry/CircleUtilities.js"],t["Series/DrawPointUtilities.js"],t["Core/Geometry/GeometryUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Series/Venn/VennPoint.js"],t["Series/Venn/VennSeriesDefaults.js"],t["Series/Venn/VennUtils.js"],t["Core/Utilities.js"]],function(t,e,r,u,n,i,o,s,g,a){var c,l,f=this&&this.__extends||(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),p=t.animObject,h=e.parse,d=r.getAreaOfIntersectionBetweenCircles,y=r.getCirclesIntersectionPolygon,v=r.isCircle1CompletelyOverlappingCircle2,m=r.isPointInsideAllCircles,x=r.isPointOutsideAllCircles,b=n.getCenterOfPoints,C=i.seriesTypes.scatter,t=a.addEvent,O=a.extend,A=a.isArray,j=a.isNumber,w=a.isObject,P=a.merge,e=(f(M,l=C),M.getLabelPosition=function(n,i){var t=n.reduce(function(t,e){var r=e.r/2;return[{x:e.x,y:e.y},{x:e.x+r,y:e.y},{x:e.x-r,y:e.y},{x:e.x,y:e.y+r},{x:e.x,y:e.y-r}].reduce(function(t,e){var r=g.getMarginFromCircles(e,n,i);return t.margin<r&&(t.point=e,t.margin=r),t},t)},{point:void 0,margin:-Number.MAX_VALUE}).point,e=g.nelderMead(function(t){return-g.getMarginFromCircles({x:t[0],y:t[1]},n,i)},[t.x,t.y]);return t=m(t={x:e[0],y:e[1]},n)&&x(t,i)?t:1<n.length?b(y(n)):{x:n[0].x,y:n[0].y}},M.getLabelValues=function(t,e){var n=t.sets,r=e.reduce(function(t,e){var r=-1<n.indexOf(e.sets[0]);return e.circle&&t[r?"internal":"external"].push(e.circle),t},{internal:[],external:[]}),t=(r.external=r.external.filter(function(e){return r.internal.some(function(t){return!v(e,t)})}),M.getLabelPosition(r.internal,r.external));return{position:t,width:g.getLabelWidth(t,r.internal,r.external)}},M.layout=function(t){var e={},r={};if(0<t.length)for(var n=g.layoutGreedyVenn(t),i=t.filter(g.isSet),o=0;o<t.length;o++){var s=t[o],a=s.sets,u=a.join(),a=g.isSet(s)?n[u]:d(a.map(function(t){return n[t]}));a&&(e[u]=a,r[u]=M.getLabelValues(s,i))}return{mapOfIdToShape:e,mapOfIdToLabelValues:r}},M.getScale=function(t,e,r){var n=r.bottom-r.top,i=r.right-r.left,o=(r.right+r.left)/2,r=(r.top+r.bottom)/2,i=Math.min(0<i?1/i*t:1,0<n?1/n*e:1);return{scale:i,centerX:t/2-o*i,centerY:e/2-r*i}},M.updateFieldBoundaries=function(t,e){var r=e.x-e.r,n=e.x+e.r,i=e.y+e.r,e=e.y-e.r;return(!j(t.left)||t.left>r)&&(t.left=r),(!j(t.right)||t.right<n)&&(t.right=n),(!j(t.top)||t.top>e)&&(t.top=e),(!j(t.bottom)||t.bottom<i)&&(t.bottom=i),t},M.prototype.animate=function(t){if(!t)for(var i=p(this.options.animation),e=0,r=this.points;e<r.length;e++)!function(t){var e,r,n=t.shapeArgs;t.graphic&&n&&(e={},r={},n.d?e.opacity=.001:(e.r=0,r.r=n.r),t.graphic.attr(e).animate(r,i),n.d&&setTimeout(function(){t&&t.graphic&&t.graphic.animate({opacity:1})},i.duration))}(r[e])},M.prototype.drawPoints=function(){for(var t=this.chart,e=this.group,r=this.points||[],n=t.renderer,i=0;i<r.length;i++){var o=r[i],s={zIndex:A(o.sets)?o.sets.length:0},a=o.shapeArgs;t.styledMode||O(s,this.pointAttribs(o,o.state)),u.draw(o,{isNew:!o.graphic,animatableAttribs:a,attribs:s,group:e,renderer:n,shapeType:a&&a.d?"path":"circle"})}},M.prototype.init=function(){C.prototype.init.apply(this,arguments),delete this.opacity},M.prototype.pointAttribs=function(t,e){var r=this.options||{},n=t&&t.options||{},e=e&&r.states[e]||{},r=P(r,{color:t&&t.color},n,e);return{fill:h(r.color).brighten(r.brightness).get(),opacity:r.opacity,stroke:r.borderColor,"stroke-width":r.borderWidth,dashstyle:r.borderDashStyle}},M.prototype.translate=function(){var t=this.chart;this.processedXData=this.xData,this.generatePoints();for(var e=g.processVennData(this.options.data,M.splitter),e=M.layout(e),r=e.mapOfIdToShape,n=e.mapOfIdToLabelValues,e=Object.keys(r).filter(function(t){t=r[t];return t&&j(t.r)}).reduce(function(t,e){return M.updateFieldBoundaries(t,r[e])},{top:0,bottom:0,left:0,right:0}),t=M.getScale(t.plotWidth,t.plotHeight,e),i=t.scale,o=t.centerX,s=t.centerY,a=0,u=this.points;a<u.length;a++){var c=u[a],l=A(c.sets)?c.sets:[],f=l.join(),p=r[f],h=void 0,f=n[f]||{},d=f.width,f=f.position,y=c.options&&c.options.dataLabels;p&&(p.r?h={x:o+p.x*i,y:s+p.y*i,r:p.r*i}:p.d&&((p=p.d).forEach(function(t){"M"===t[0]?(t[1]=o+t[1]*i,t[2]=s+t[2]*i):"A"===t[0]&&(t[1]=t[1]*i,t[2]=t[2]*i,t[6]=o+t[6]*i,t[7]=s+t[7]*i)}),h={d:p}),f?(f.x=o+f.x*i,f.y=s+f.y*i):f={},j(d)&&(d=Math.round(d*i))),c.shapeArgs=h,f&&h&&(c.plotX=f.x,c.plotY=f.y),d&&h&&(c.dlOptions=P(!0,{style:{width:d}},w(y,!0)?y:void 0)),c.name=c.options.name||l.join("∩")}},M.splitter="highcharts-split",M.defaultOptions=P(C.defaultOptions,s),M);function M(){var t=null!==l&&l.apply(this,arguments)||this;return t.data=void 0,t.mapOfIdToRelation=void 0,t.options=void 0,t.points=void 0,t}return O(e.prototype,{axisTypes:[],directTouch:!0,isCartesian:!1,pointArrayMap:["value"],pointClass:o,utils:g}),t(e,"afterSetOptions",function(t){var e=t.options.states||{};if(this.is("venn"))for(var r=0,n=Object.keys(e);r<n.length;r++)e[n[r]].halo=!1}),i.registerSeriesType("venn",e),e}),e(t,"masters/modules/venn.src.js",[],function(){})});