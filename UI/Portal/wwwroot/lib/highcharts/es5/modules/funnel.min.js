!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/funnel",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,i,n){t.hasOwnProperty(e)||(t[e]=n.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Series/Funnel/FunnelSeriesDefaults.js",[],function(){return{animation:!1,borderRadius:0,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,size:!0,dataLabels:{connectorWidth:1,verticalAlign:"middle"},states:{select:{color:"#cccccc",borderColor:"#000000"}}}}),e(t,"Series/Funnel/FunnelSeries.js",[t["Series/Funnel/FunnelSeriesDefaults.js"],t["Core/Globals.js"],t["Extensions/BorderRadius.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,B,i,n){var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),R=e.noop,e=i.seriesTypes,s=e.column,a=e.pie,d=n.addEvent,e=n.extend,X=n.fireEvent,l=n.isArray,p=n.merge,U=n.pick,u=n.pushUnique,q=n.relativeLength,h=n.splat,f=i.series.prototype.alignDataLabel;function G(t,e){return/%$/.test(t)?e*parseInt(t,10)/100:parseInt(t,10)}r(g,c=a),g.prototype.alignDataLabel=function(t,e,i,n,o){var r=t.series,s=r.options.reversed,a=t.dlBox||t.shapeArgs,d=i.align,l=i.verticalAlign,p=((r.options||{}).dataLabels||{}).inside,u=r.center[1],u=s?2*u-t.plotY:t.plotY,u=r.getWidthAt(u-a.height/2+e.height),u="middle"===l?(a.topWidth-a.bottomWidth)/4:(u-a.bottomWidth)/2,h=a.y,c=a.x,y=U(e.height,e.getBBox().height);"middle"===l?h=a.y-a.height/2+y/2:"top"===l&&(h=a.y-a.height+y+(i.padding||0)),("top"===l&&!s||"bottom"===l&&s||"middle"===l)&&("right"===d?c=a.x-i.padding+u:"left"===d&&(c=a.x+i.padding-u)),n={x:c,y:s?h-a.height:h,width:a.bottomWidth,height:a.height},i.verticalAlign="bottom",p&&!t.visible||f.call(r,t,e,i,n,o),p&&(!t.visible&&t.dataLabel&&(t.dataLabel.placed=!1),t.contrastColor&&e.css({color:t.contrastColor}))},g.prototype.drawDataLabels=function(){(h(this.options.dataLabels)[0].inside?s:a).prototype.drawDataLabels.call(this)},g.prototype.getDataLabelPosition=function(t,e){var i=t.plotY||0,n=t.half?1:-1,o=this.getX(i,!!t.half,t);return{distance:e,natural:{x:0,y:i},computed:{},alignment:t.half?"right":"left",connectorPosition:{breakAt:{x:o+(e-5)*n,y:i},touchingSliceAt:{x:o+e*n,y:i}}}},g.prototype.translate=function(){function t(t){var e=Math.tan(t/2),i=Math.cos(P),n=Math.sin(P),o=E,r=o/e,t=Math.tan((Math.PI-t)/3.2104);return _<r&&(o=(r=_)*e),{dx:[r*i,(r-(t*=o))*i,r-t,r],dy:[r*n,(r-t)*n,r-t,r].map(function(t){return a?-t:t})}}var e,i,n,o=this,r=o.chart,s=o.options,a=s.reversed,d=s.ignoreHiddenPoint,l=B.optionsToObject(s.borderRadius),p=r.plotWidth,r=r.plotHeight,u=s.center,h=G(u[0],p),c=G(u[1],r),y=G(s.width,p),f=G(s.height,r),g=G(s.neckWidth,p),x=G(s.neckHeight,r),v=c-f/2+f-x,b=o.data,E=q(l.radius,y),m=l.scope,T="left"===s.dataLabels.position?1:0,L=0,I=0;o.getWidthAt=function(t){return v<t||f===x?g:g+(y-g)*(1-(t-(c-f/2))/(f-x))},o.getX=function(t,e,i){return h+(e?-1:1)*(o.getWidthAt(a?2*c-t:t)/2+(null!=(i=null==(t=null==(e=i.dataLabel)?void 0:e.dataLabelPosition)?void 0:t.distance)?i:q((null==(e=this.options.dataLabels)?void 0:e.distance)||0,y)))},o.center=[h,c,f],o.centerX=h;for(var S=0;S<b.length;S++)!(W=b[S]).y||!W.isValid()||d&&!1===W.visible||(L+=W.y);for(var j=0;j<b.length;j++){var C,Y,P,_,M,A,O,W=b[j],w=null,k=L?W.y/L:0,D=(i=c-f/2+I*f)+k*f,F=(e=h-(A=o.getWidthAt(i))/2)+A,H=(n=h-(A=o.getWidthAt(D))/2)+A;v<i?(e=n=h-g/2,F=H=h+g/2):v<D&&(w=D,H=(n=h-(A=o.getWidthAt(v))/2)+A,D=v),a&&(i=2*c-i,D=2*c-D,null!==w&&(w=2*c-w)),!E||"point"!==m&&0!==W.index&&W.index!==b.length-1&&null===w?(O=[["M",e,i],["L",F,i],["L",H,D]],null!==w&&O.push(["L",H,w],["L",n,w]),O.push(["L",n,D])):(A=Math.abs(D-i),M=F-H,C=H-n,Y=Math.sqrt(M*M+A*A),P=Math.atan(A/M),_=Y/2,null!==w&&(_=Math.min(_,Math.abs(w-D)/2)),1<=C&&(_=Math.min(_,C/2)),A=t(P),O="stack"===m&&0!==W.index?[["M",e,i],["L",F,i]]:[["M",e+A.dx[0],i+A.dy[0]],["C",e+A.dx[1],i+A.dy[1],e+A.dx[2],i,e+A.dx[3],i],["L",F-A.dx[3],i],["C",F-A.dx[2],i,F-A.dx[1],i+A.dy[1],F-A.dx[0],i+A.dy[0]]],null!==w?(M=t(Math.PI/2),A=t(Math.PI/2+P),O.push(["L",H+A.dx[0],D-A.dy[0]],["C",H+A.dx[1],D-A.dy[1],H,D+A.dy[2],H,D+A.dy[3]]),"stack"===m&&W.index!==b.length-1?O.push(["L",H,w],["L",n,w]):O.push(["L",H,w-M.dy[3]],["C",H,w-M.dy[2],H-M.dx[2],w,H-M.dx[3],w],["L",n+M.dx[3],w],["C",n+M.dx[2],w,n,w-M.dy[2],n,w-M.dy[3]]),O.push(["L",n,D+A.dy[3]],["C",n,D+A.dy[2],n-A.dx[1],D-A.dy[1],n-A.dx[0],D-A.dy[0]])):1<=C?(A=t(Math.PI-P),"stack"===m&&0===W.index?O.push(["L",H,D],["L",n,D]):O.push(["L",H+A.dx[0],D-A.dy[0]],["C",H+A.dx[1],D-A.dy[1],H-A.dx[2],D,H-A.dx[3],D],["L",n+A.dx[3],D],["C",n+A.dx[2],D,n-A.dx[1],D-A.dy[1],n-A.dx[0],D-A.dy[0]])):(A=t(Math.PI-2*P),O.push(["L",n+A.dx[0],D-A.dy[0]],["C",n+A.dx[1],D-A.dy[1],n-A.dx[1],D-A.dy[1],n-A.dx[0],D-A.dy[0]]))),O.push(["Z"]),W.shapeType="path",W.shapeArgs={d:O},W.percentage=100*k,W.plotX=h,W.plotY=(i+(w||D))/2,W.tooltipPos=[h,W.plotY],W.dlBox={x:n,y:i,topWidth:F-e,bottomWidth:H-n,height:Math.abs(U(w,D)-i),width:NaN},W.slice=R,W.half=T,!W.isValid()||d&&!1===W.visible||(I+=k)}X(o,"afterTranslate")},g.prototype.sortByAngle=function(t){t.sort(function(t,e){return t.plotY-e.plotY})},g.defaultOptions=p(a.defaultOptions,t);var c,y,n=g;function g(){var t=null!==c&&c.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return e(n.prototype,{animate:R}),n=n||{},y=[],n.compose=function(t){u(y,t)&&d(t,"afterHideAllOverlappingLabels",x)},i.registerSeriesType("funnel",n),n;function x(){for(var t=0,e=this.series;t<e.length;t++){var i=e[t],n=i.options&&i.options.dataLabels;l(n)&&(n=n[0]),i.is("pie")&&i.placeDataLabels&&n&&!n.inside&&i.placeDataLabels()}}}),e(t,"Series/Pyramid/PyramidSeriesDefaults.js",[],function(){return{neckWidth:"0%",neckHeight:"0%",reversed:!0}}),e(t,"Series/Pyramid/PyramidSeries.js",[t["Series/Funnel/FunnelSeries.js"],t["Series/Pyramid/PyramidSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,i,n){var o,r,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=n.merge,s=(s(a,r=t),a.defaultOptions=n(t.defaultOptions,e),a);function a(){var t=null!==r&&r.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return i.registerSeriesType("pyramid",s),s}),e(t,"masters/modules/funnel.src.js",[t["Core/Globals.js"],t["Series/Funnel/FunnelSeries.js"]],function(t,e){e.compose(t.Chart)})});