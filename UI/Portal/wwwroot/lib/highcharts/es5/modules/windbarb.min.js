!function(o){"object"==typeof module&&module.exports?module.exports=o.default=o:"function"==typeof define&&define.amd?define("highcharts/modules/windbarb",["highcharts"],function(t){return o(t),o.Highcharts=t,o}):o("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function o(t,o,e,r){t.hasOwnProperty(o)||(t[o]=r.apply(null,e),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:o,module:t[o]}})))}o(t,"Extensions/DataGrouping/ApproximationRegistry.js",[],function(){return{}}),o(t,"Series/OnSeriesComposition.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(t,o,e){var r,i,p=t.prototype,n=o.prototype,O=e.defined,l=e.stableSort;return t=r=r||{},i=[],t.compose=function(t){var o;return e.pushUnique(i,t)&&((o=t.prototype).getPlotBox=s,o.translate=a),t},t.getPlotBox=s,t.translate=a,r;function s(t){return n.getPlotBox.call(this.options.onSeries&&this.chart.get(this.options.onSeries)||this,t)}function a(){p.translate.apply(this);var c,r,h,f,d,b,i=this,t=i.options,o=i.chart,y=i.points,e=t.onSeries,v=e&&o.get(e),g=v&&v.options.step,m=v&&v.points,n=o.inverted,s=i.xAxis,x=i.yAxis,S=y.length-1,j=t.onKey||"y",w=m&&m.length,a=0;if(v&&v.visible&&w)for(a=(v.pointXOffset||0)+(v.barW||0)/2,e=v.currentDataGrouping,f=m[w-1].x+(e?e.totalRange:0),l(y,function(t,o){return t.x-o.x}),j="plot"+j[0].toUpperCase()+j.substr(1);w--&&y[S]&&"break"!==function(){if(h=m[w],(c=y[S]).y=h.y,h.x<=c.x&&void 0!==h[j]){if(c.x<=f&&(c.plotY=h[j],h.x<c.x&&!g&&(d=m[w+1])&&void 0!==d[j]))if(O(c.plotX)&&v.is("spline")){for(var e=[h.plotX||0,h.plotY||0],r=[d.plotX||0,d.plotY||0],i=(null==(b=h.controlPoints)?void 0:b.high)||e,n=(null==(b=d.controlPoints)?void 0:b.low)||r,t=function(t,o){return Math.pow(1-t,3)*e[o]+3*(1-t)*(1-t)*t*i[o]+3*(1-t)*t*t*n[o]+t*t*t*r[o]},o=0,s=1,a=void 0,p=0;p<100;p++){var l=(o+s)/2,u=t(l,0);if(null===u)break;if(Math.abs(u-c.plotX)<.25){a=l;break}u<c.plotX?o=l:s=l}O(a)&&(c.plotY=t(a,1),c.y=x.toValue(c.plotY,!0))}else b=(c.x-h.x)/(d.x-h.x),c.plotY+=b*(d[j]-h[j]),c.y+=b*(d.y-h.y);if(w++,--S<0)return"break"}}(););y.forEach(function(t,o){var e;t.plotX+=a,void 0!==t.plotY&&!n||(0<=t.plotX&&t.plotX<=s.len?n?(t.plotY=s.translate(t.x,0,1,0,1),t.plotX=O(t.y)?x.translate(t.y,0,0,0,1):0):t.plotY=(s.opposite?0:i.yAxis.len)+s.offset:t.shapeArgs={}),(r=y[o-1])&&r.plotX===t.plotX&&(void 0===r.stackIndex&&(r.stackIndex=0),e=r.stackIndex+1),t.stackIndex=e}),this.onSeries=v}}),o(t,"Series/Windbarb/WindbarbPoint.js",[t["Series/Column/ColumnSeries.js"],t["Core/Utilities.js"]],function(t,o){var r,e,i=this&&this.__extends||(r=function(t,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])})(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw TypeError("Class extends value "+String(o)+" is not a constructor or null");function e(){this.constructor=t}r(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),n=o.isNumber;return e=t.prototype.pointClass,i(s,e),s.prototype.isValid=function(){return n(this.value)&&0<=this.value},s;function s(){var t=null!==e&&e.apply(this,arguments)||this;return t.beaufort=void 0,t.beaufortLevel=void 0,t.direction=void 0,t.options=void 0,t.series=void 0,t.value=void 0,t}}),o(t,"Series/Windbarb/WindbarbSeriesDefaults.js",[],function(){return{dataGrouping:{enabled:!0,approximation:"windbarb",groupPixelWidth:30},lineWidth:2,onSeries:null,states:{hover:{lineWidthPlus:0}},tooltip:{pointFormat:'<span style="color:{point.color}">‚óè</span> {series.name}: <b>{point.value}</b> ({point.beaufort})<br/>'},vectorLength:20,colorKey:"value",yOffset:-20,xOffset:0}}),o(t,"Series/Windbarb/WindbarbSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Core/Globals.js"],t["Series/OnSeriesComposition.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"],t["Series/Windbarb/WindbarbPoint.js"],t["Series/Windbarb/WindbarbSeriesDefaults.js"]],function(t,o,s,a,e,r,i,n){var p,l,u=this&&this.__extends||(p=function(t,o){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])})(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw TypeError("Class extends value "+String(o)+" is not a constructor or null");function e(){this.constructor=t}p(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),c=t.animObject,t=e.seriesTypes.column,h=r.extend,f=r.merge,d=r.pick,r=(u(b,l=t),b.prototype.init=function(t,o){l.prototype.init.call(this,t,o)},b.prototype.pointAttribs=function(t,o){var e=this.options,t=t.color||this.color,r=this.options.lineWidth;return o&&(t=e.states[o].color||t,r=(e.states[o].lineWidth||r)+(e.states[o].lineWidthPlus||0)),{stroke:t,"stroke-width":r}},b.prototype.windArrow=function(t){var o,e=t.beaufortLevel,r=this.options.vectorLength/20,i=1.943844*t.value,n=-10;if(t.isNull)return[];if(0===e)return this.chart.renderer.symbols.circle(-10*r,-10*r,20*r,20*r);var s=[["M",0,7*r],["L",-1.5*r,7*r],["L",0,10*r],["L",1.5*r,7*r],["L",0,7*r],["L",0,-10*r]];if(0<(o=(i-i%50)/50))for(;o--;)s.push(-10===n?["L",0,n*r]:["M",0,n*r],["L",5*r,n*r+2],["L",0,n*r+4]),i-=50,n+=7;if(0<(o=(i-i%10)/10))for(;o--;)s.push(-10===n?["L",0,n*r]:["M",0,n*r],["L",7*r,n*r]),i-=10,n+=3;if(0<(o=(i-i%5)/5))for(;o--;)s.push(-10===n?["L",0,n*r]:["M",0,n*r],["L",4*r,n*r]),i-=5,n+=3;return s},b.prototype.drawPoints=function(){for(var t=this.chart,o=this.yAxis,e=t.inverted,r=this.options.vectorLength/2,i=0,n=this.points;i<n.length;i++){var s=n[i],a=s.plotX,p=s.plotY;!1===this.options.clip||t.isInsidePlot(a,0)?(s.graphic||(s.graphic=this.chart.renderer.path().add(this.markerGroup).addClass("highcharts-point highcharts-color-"+d(s.colorIndex,s.series.colorIndex))),s.graphic.attr({d:this.windArrow(s),translateX:a+this.options.xOffset,translateY:p+this.options.yOffset,rotation:s.direction}),this.chart.styledMode||s.graphic.attr(this.pointAttribs(s))):s.graphic&&(s.graphic=s.graphic.destroy()),s.tooltipPos=[a+this.options.xOffset+(e&&!this.onSeries?r:0),p+this.options.yOffset-(e?0:r+o.pos-t.plotTop)]}},b.prototype.animate=function(t){t?this.markerGroup.attr({opacity:.01}):this.markerGroup.animate({opacity:1},c(this.options.animation))},b.prototype.markerAttribs=function(t,o){return{}},b.prototype.getExtremes=function(){return{}},b.prototype.shouldShowTooltip=function(t,o,e){return(e=void 0===e?{}:e).ignoreX=this.chart.inverted,e.ignoreY=!e.ignoreX,l.prototype.shouldShowTooltip.call(this,t,o,e)},b.defaultOptions=f(t.defaultOptions,n),b);function b(){var t=null!==l&&l.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return a.compose(r),h(r.prototype,{beaufortFloor:[0,.3,1.6,3.4,5.5,8,10.8,13.9,17.2,20.8,24.5,28.5,32.7],beaufortName:["Calm","Light air","Light breeze","Gentle breeze","Moderate breeze","Fresh breeze","Strong breeze","Near gale","Gale","Strong gale","Storm","Violent storm","Hurricane"],invertible:!1,parallelArrays:["x","value","direction"],pointArrayMap:["value","direction"],pointClass:i,trackerGroups:["markerGroup"],translate:function(){var t=this.beaufortFloor,o=this.beaufortName;a.translate.call(this);for(var e=0,r=this.points;e<r.length;e++){for(var i=r[e],n=0;n<t.length&&!(t[n]>i.value);n++);i.beaufortLevel=n-1,i.beaufort=o[n-1]}}}),e.registerSeriesType("windbarb",r),o.windbarb||(o.windbarb=function(t,o){for(var e=0,r=0,i=0,n=t.length;i<n;i++)e+=t[i]*Math.cos(o[i]*s.deg2rad),r+=t[i]*Math.sin(o[i]*s.deg2rad);return[t.reduce(function(t,o){return t+o},0)/t.length,Math.atan2(r,e)/s.deg2rad]}),r}),o(t,"masters/modules/windbarb.src.js",[],function(){})});