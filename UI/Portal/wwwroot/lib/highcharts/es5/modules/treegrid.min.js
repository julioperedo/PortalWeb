!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/treegrid",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,i,s){t.hasOwnProperty(e)||(t[e]=s.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Core/Axis/BrokenAxis.js",[t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(l,s){var t,r=s.addEvent,i=s.find,u=s.fireEvent,o=s.isArray,f=s.isNumber,g=s.pick,e=t=t||{},n=[];function a(){void 0!==this.brokenAxis&&this.brokenAxis.setBreaks(this.options.breaks,!1)}function d(){var t;null!=(t=this.brokenAxis)&&t.hasBreaks&&(this.options.ordinal=!1)}function h(){var t=this.brokenAxis;if(null!=t&&t.hasBreaks){for(var e=this.tickPositions,i=this.tickPositions.info,s=[],r=0;r<e.length;r++)t.isInAnyBreak(e[r])||s.push(e[r]);this.tickPositions=s,this.tickPositions.info=i}}function c(){this.brokenAxis||(this.brokenAxis=new x(this))}function p(){var t=this.isDirty,e=this.options.connectNulls,i=this.points,s=this.xAxis,r=this.yAxis;if(t)for(var o=i.length;o--;){var n=i[o],a=!(null===n.y&&!1===e)&&((null==(a=null==s?void 0:s.brokenAxis)?void 0:a.isInAnyBreak(n.x,!0))||(null==(a=null==r?void 0:r.brokenAxis)?void 0:a.isInAnyBreak(n.y,!0)));n.visible=!a&&!1!==n.options.visible}}function m(){this.drawBreaks(this.xAxis,["x"]),this.drawBreaks(this.yAxis,g(this.pointArrayMap,["y"]))}function v(r,t){var e,o,n,a,i,l=this,d=l.points;null!=(e=null==r?void 0:r.brokenAxis)&&e.hasBreaks&&(i=r.brokenAxis,t.forEach(function(t){o=(null==i?void 0:i.breakArray)||[],n=r.isXAxis?r.min:g(l.options.threshold,r.min);var e,s=null==(e=null==(e=null==r?void 0:r.options)?void 0:e.breaks)?void 0:e.filter(function(t){for(var e=!0,i=0;i<o.length;i++){var s=o[i];if(s.from===t.from&&s.to===t.to){e=!1;break}}return e});d.forEach(function(i){a=g(i["stack"+t.toUpperCase()],i[t]),o.forEach(function(t){var e;f(n)&&f(a)&&(e="",n<t.from&&a>t.to||n>t.from&&a<t.from?e="pointBreak":(n<t.from&&a>t.from&&a<t.to||n>t.from&&a>t.to&&a<t.from)&&(e="pointInBreak"),e&&u(r,e,{point:i,brk:t}))}),null!=s&&s.forEach(function(t){u(r,"pointOutsideOfBreak",{point:i,brk:t})})})}))}function k(){var t=this.currentDataGrouping,t=null==t?void 0:t.gapSize,e=this.points.slice(),i=this.yAxis,s=this.options.gapSize,r=e.length-1;if(s&&0<r){"value"!==this.options.gapUnit&&(s*=this.basePointRange),t&&s<t&&t>=this.basePointRange&&(s=t);for(var o,n,a=void 0;r--;)a&&!1!==a.visible||(a=e[r+1]),o=e[r],!1!==a.visible&&!1!==o.visible&&(a.x-o.x>s&&(n=(o.x+a.x)/2,e.splice(r+1,0,{isNull:!0,x:n}),i.stacking&&this.options.stacking&&((i.stacking.stacks[this.stackKey][n]=new l(i,i.options.stackLabels,!1,n,this.stack)).total=0)),a=o)}return this.getGraphPath(e)}e.compose=function(t,e){var i;return s.pushUnique(n,t)&&(t.keepProps.push("brokenAxis"),r(t,"init",c),r(t,"afterInit",a),r(t,"afterSetTickPositions",h),r(t,"afterSetOptions",d)),s.pushUnique(n,e)&&((i=e.prototype).drawBreaks=v,i.gappedPath=k,r(e,"afterGeneratePoints",p),r(e,"afterRender",m)),t},b.isInBreak=function(t,e){var i=t.repeat||1/0,s=t.from,r=t.to-t.from,s=s<=e?(e-s)%i:i-(s-e)%i;return t.inclusive?s<=r:s<r&&0!=s},b.lin2Val=function(t){var e=this.brokenAxis,i=e&&e.breakArray;if(!i||!f(t))return t;for(var s,r=t,o=0;o<i.length&&!((s=i[o]).from>=r);o++)(s.to<r||b.isInBreak(s,r))&&(r+=s.len);return r},b.val2Lin=function(t){var e=this.brokenAxis,i=e&&e.breakArray;if(!i||!f(t))return t;for(var s,r=t,o=0;o<i.length;o++)if((s=i[o]).to<=t)r-=s.len;else{if(s.from>=t)break;if(b.isInBreak(s,t)){r-=t-s.from;break}}return r},b.prototype.findBreakAt=function(e,t){return i(t,function(t){return t.from<e&&e<t.to})},b.prototype.isInAnyBreak=function(t,e){var i,s,r,o=this.axis,n=o.options.breaks||[],a=n.length;if(a&&f(t)){for(;a--;)b.isInBreak(n[a],t)&&(i=!0,s=s||g(n[a].showPoints,!o.isXAxis));r=i&&e?i&&!s:i}return r},b.prototype.setBreaks=function(t,e){var c=this,p=c.axis,i=o(t)&&!!t.length&&!!Object.keys(t[0]).length;p.isDirty=c.hasBreaks!==i,c.hasBreaks=i,t!==p.options.breaks&&(p.options.breaks=p.userOptions.breaks=t),p.forceRedraw=!0,p.series.forEach(function(t){t.isDirty=!0}),i||p.val2lin!==b.val2Lin||(delete p.val2lin,delete p.lin2val),i&&(p.userOptions.ordinal=!1,p.lin2val=b.lin2Val,p.val2lin=b.val2Lin,p.setExtremes=function(t,e,i,s,r){if(c.hasBreaks){for(var o=this.options.breaks||[],n=void 0;n=c.findBreakAt(t,o);)t=n.to;for(;n=c.findBreakAt(e,o);)e=n.from;e<t&&(e=t)}p.constructor.prototype.setExtremes.call(this,t,e,i,s,r)},p.setAxisTranslation=function(){var e,i,s,r,t,o,n,a,l,d,h;p.constructor.prototype.setAxisTranslation.call(this),c.unitLength=void 0,c.hasBreaks&&(t=p.options.breaks||[],o=[],n=[],a=g(p.pointRangePadding,0),l=0,d=p.userMin||p.min,h=p.userMax||p.max,t.forEach(function(t){i=t.repeat||1/0,f(d)&&f(h)&&(b.isInBreak(t,d)&&(d+=t.to%i-d%i),b.isInBreak(t,h)&&(h-=h%i-t.from%i))}),t.forEach(function(t){if(s=t.from,i=t.repeat||1/0,f(d)&&f(h)){for(;d<s-i;)s-=i;for(;s<d;)s+=i;for(r=s;r<h;r+=i)o.push({value:r,move:"in"}),o.push({value:r+t.to-t.from,move:"out",size:t.breakSize})}}),o.sort(function(t,e){return t.value===e.value?("in"===t.move?0:1)-("in"===e.move?0:1):t.value-e.value}),e=0,s=d,o.forEach(function(t){1===(e+="in"===t.move?1:-1)&&"in"===t.move&&(s=t.value),0===e&&f(s)&&(n.push({from:s,to:t.value,len:t.value-s-(t.size||0)}),l+=t.value-s-(t.size||0))}),c.breakArray=n,f(d)&&f(h)&&f(p.min)&&(c.unitLength=h-d-l+a,u(p,"afterBreaks"),p.staticScale?p.transA=p.staticScale:c.unitLength&&(p.transA*=(h-p.min+a)/c.unitLength),a&&(p.minPixelPadding=p.transA*(p.minPointOffset||0)),p.min=d,p.max=h))}),g(e,!0)&&p.chart.redraw()};var x=b;function b(t){this.hasBreaks=!1,this.axis=t}return e.Additions=x,t}),e(t,"Core/Axis/GridAxis.js",[t["Core/Axis/Axis.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,l,s){var m,t=l.dateFormats,r=s.addEvent,o=s.defined,d=s.erase,h=s.find,n=s.isArray,v=s.isNumber,c=s.merge,f=s.pick,p=s.timeUnits,u=s.wrap,g=(m={top:0,0:"top",right:1,1:"right",bottom:2,2:"bottom",left:3,3:"left"},[]);function k(t){return s.isObject(t,!0)}function x(s,t){var r={width:0,height:0};return t.forEach(function(t){var e,t=s[t],i=0;k(t)&&(e=(t=k(t.label)?t.label:{}).getBBox?t.getBBox().height:0,t.textStr&&!v(t.textPxLength)&&(t.textPxLength=t.getBBox().width),i=v(t.textPxLength)?Math.round(t.textPxLength):0,t.textStr&&(i=Math.round(t.getBBox().width)),r.height=Math.max(e,r.height),r.width=Math.max(i,r.width))}),"treegrid"===this.options.type&&this.treeGrid&&this.treeGrid.mapOfPosToGridNode&&(t=this.treeGrid.mapOfPosToGridNode[-1].height||0,r.width+=this.options.labels.indentation*(t-1)),r}function b(){var t=this.grid;(t&&t.columns||[]).forEach(function(t){t.getOffset()})}function y(t){var e,i,s,r,o,n,a,l,d,h,c,p,u;!0===(this.options.grid||{}).enabled&&(p=this.axisTitle,e=this.height,i=this.horiz,s=this.left,r=this.offset,o=this.opposite,c=this.options,n=this.top,a=this.width,u=this.tickSize(),l=p&&p.getBBox().width,d=c.title.x,h=c.title.y,c=f(c.title.margin,i?5:10),p=p?this.chart.renderer.fontMetrics(p).f:0,u=(i?n+e:s)+(i?1:-1)*(o?-1:1)*(u?u[0]/2:0)+(this.side===m.bottom?p:0),t.titlePosition.x=i?s-(l||0)/2-c+d:u+(o?a:0)+r+d,t.titlePosition.y=i?u-(o?e:0)+(o?p:-p)/2+r+h:n-c+h)}function G(){var t=this.chart,e=this.options.grid,i=void 0===e?{}:e,s=this.userOptions;if(i.enabled&&((e=this.options).labels.align=f(e.labels.align,"center"),this.categories||(e.showLastLabel=!1),this.labelRotation=0,e.labels.rotation=0,e.minTickInterval=1),i.columns)for(var r=this.grid.columns=[],o=this.grid.columnIndex=0;++o<i.columns.length;){var n=c(s,i.columns[i.columns.length-o-1],{isInternal:!0,linkedTo:0,type:"category",scrollbar:{enabled:!1}}),n=(delete n.grid.columns,new a(this.chart,n,"yAxis"));n.grid.isColumn=!0,n.grid.columnIndex=o,d(t.axes,n),d(t[this.coll]||[],n),r.push(n)}}function P(){var t=this.grid,e=this.options;if(!0===(e.grid||{}).enabled){var i,s=this.min||0,r=this.max||0;if(this.maxLabelDimensions=this.getMaxLabelDimensions(this.ticks,this.tickPositions),this.rightWall&&this.rightWall.destroy(),this.grid&&this.grid.isOuterAxis()&&this.axisLine&&(i=e.lineWidth)&&(o=(i=this.getLinePath(i))[0],a=i[1],n=((this.tickSize("tick")||[1])[0]-1)*(this.side===m.top||this.side===m.left?-1:1),"M"===o[0]&&"L"===a[0]&&(this.horiz?(o[2]+=n,a[2]+=n):(o[1]+=n,a[1]+=n)),!this.horiz&&this.chart.marginRight&&(n=[o,["L",this.left,o[2]||0]],o=["L",this.chart.chartWidth-this.chart.marginRight,this.toPixels(r+this.tickmarkOffset)],a=[["M",a[1]||0,this.toPixels(r+this.tickmarkOffset)],o],this.grid.upperBorder||s%1==0||(this.grid.upperBorder=this.grid.renderBorder(n)),this.grid.upperBorder&&(this.grid.upperBorder.attr({stroke:e.lineColor,"stroke-width":e.lineWidth}),this.grid.upperBorder.animate({d:n})),this.grid.lowerBorder||r%1==0||(this.grid.lowerBorder=this.grid.renderBorder(a)),this.grid.lowerBorder&&(this.grid.lowerBorder.attr({stroke:e.lineColor,"stroke-width":e.lineWidth}),this.grid.lowerBorder.animate({d:a}))),this.grid.axisLineExtra?(this.grid.axisLineExtra.attr({stroke:e.lineColor,"stroke-width":e.lineWidth}),this.grid.axisLineExtra.animate({d:i})):this.grid.axisLineExtra=this.grid.renderBorder(i),this.axisLine[this.showAxis?"show":"hide"]()),(t&&t.columns||[]).forEach(function(t){return t.render()}),!this.horiz&&this.chart.hasRendered&&(this.scrollbar||this.linkedParent&&this.linkedParent.scrollbar)){for(var o=this.tickmarkOffset,n=this.tickPositions[this.tickPositions.length-1],a=this.tickPositions[0],l=void 0,d=void 0;(l=this.hiddenLabels.pop())&&l.element;)l.show();for(;(d=this.hiddenMarks.pop())&&d.element;)d.show();(l=this.ticks[a].label)&&(o<s-a?this.hiddenLabels.push(l.hide()):l.show()),(l=this.ticks[n].label)&&(o<n-r?this.hiddenLabels.push(l.hide()):l.show());e=this.ticks[n].mark;e&&n-r<o&&0<n-r&&this.ticks[n].isLast&&this.hiddenMarks.push(e.hide())}}}function A(){var t=this.tickPositions&&this.tickPositions.info,e=this.options,i=e.grid||{},s=this.userOptions.labels||{};i.enabled&&(this.horiz?(this.series.forEach(function(t){t.options.pointRange=0}),t&&e.dateTimeLabelFormats&&e.labels&&!o(s.align)&&(!1===e.dateTimeLabelFormats[t.unitName].range||1<t.count)&&(e.labels.align="left",o(s.x)||(e.labels.x=3))):"treegrid"!==this.options.type&&this.grid&&this.grid.columns&&(this.minPointOffset=this.tickInterval))}function T(t){var h,e=this.options,t=t.userOptions,i=e&&k(e.grid)?e.grid:{};!0===i.enabled&&(h=c(!0,{className:"highcharts-grid-axis "+(t.className||""),dateTimeLabelFormats:{hour:{list:["%H:%M","%H"]},day:{list:["%A, %e. %B","%a, %e. %b","%E"]},week:{list:["Week %W","W%W"]},month:{list:["%B","%b","%o"]}},grid:{borderWidth:1},labels:{padding:2,style:{fontSize:"0.9em"}},margin:0,title:{text:null,reserveSpace:!1,rotation:0},units:[["millisecond",[1,10,100]],["second",[1,10]],["minute",[1,5,15]],["hour",[1,6]],["day",[1]],["week",[1]],["month",[1]],["year",null]]},t),"xAxis"===this.coll&&(o(t.linkedTo)&&!o(t.tickPixelInterval)&&(h.tickPixelInterval=350),o(t.tickPixelInterval)||!o(t.linkedTo)||o(t.tickPositioner)||o(t.tickInterval)||(h.tickPositioner=function(t,e){var i=this.linkedParent&&this.linkedParent.tickPositions&&this.linkedParent.tickPositions.info;if(i){for(var s=h.units||[],r=void 0,o=1,n="year",a=0;a<s.length;a++){var l=s[a];if(l&&l[0]===i.unitName){r=a;break}}var d=v(r)&&s[r+1],d=(d?(n=d[0]||"year",o=(d=d[1])&&d[0]||1):"year"===i.unitName&&(o=10*i.count),p[n]);return this.tickInterval=d*o,this.chart.time.getTimeTicks({unitRange:d,count:o,unitName:n},t,e,this.options.startOfWeek)}})),c(!0,this.options,h),this.horiz&&(e.minPadding=f(t.minPadding,0),e.maxPadding=f(t.maxPadding,0)),v(e.grid.borderWidth)&&(e.tickWidth=e.lineWidth=i.borderWidth))}function O(t){var t=t.userOptions,t=t&&t.grid||{},e=t.columns;t.enabled&&e&&c(!0,this.options,e[e.length-1])}function B(){(this.grid.columns||[]).forEach(function(t){return t.setScale()})}function C(t){var e,i=this.horiz,s=this.maxLabelDimensions,r=this.options.grid,r=void 0===r?{}:r;r.enabled&&s&&(e=2*this.options.labels.distance,i=i?r.cellHeight||e+s.height:e+s.width,n(t.tickSize)?t.tickSize[0]=i:t.tickSize=[i,0])}function w(){this.axes.forEach(function(t){(t.grid&&t.grid.columns||[]).forEach(function(t){t.setAxisSize(),t.setAxisTranslation()})})}function I(e){var t=this.grid;(t.columns||[]).forEach(function(t){return t.destroy(e.keepEvents)}),t.columns=void 0}function N(t){var t=t.userOptions||{},e=t.grid||{};e.enabled&&o(e.borderColor)&&(t.tickColor=t.lineColor=e.borderColor),this.grid||(this.grid=new i(this)),this.hiddenLabels=[],this.hiddenMarks=[]}function E(t){var e,i,s,r=this.label,o=this.axis,n=o.reversed,a=o.chart,l=o.options.grid||{},d=o.options.labels,h=d.align,c=m[o.side],p=t.tickmarkOffset,u=o.tickPositions,f=this.pos-p,u=v(u[t.index+1])?u[t.index+1]-p:(o.max||0)+p,p=o.tickSize("tick"),g=p?p[0]:0,p=p?p[1]/2:0;!0===l.enabled&&(s=i=l=void 0,"top"===c?e=(l=o.top+o.offset)-g:"bottom"===c?l=(e=a.chartHeight-o.bottom+o.offset)+g:(l=o.top+o.len-(o.translate(n?u:f)||0),e=o.top+o.len-(o.translate(n?f:u)||0)),"right"===c?s=(i=a.chartWidth-o.right+o.offset)+g:"left"===c?i=(s=o.left+o.offset)-g:(i=Math.round(o.left+(o.translate(n?u:f)||0))-p,s=Math.min(Math.round(o.left+(o.translate(n?f:u)||0))-p,o.left+o.len)),this.slotWidth=s-i,t.pos.x="left"===h?i:"right"===h?s:i+(s-i)/2,t.pos.y=e+(l-e)/2,r&&(c=a.renderer.fontMetrics(r),g=r.getBBox().height,d.useHTML?t.pos.y+=c.b+-g/2:(n=Math.round(g/c.h),t.pos.y+=(c.b-(c.h-c.f))/2+-((n-1)*c.h)/2)),t.pos.x+=o.horiz&&d.x||0)}function L(t){var e,i,s,r,o,n=t.axis,a=t.value;n.options.grid&&n.options.grid.enabled&&(s=n.tickPositions,e=(n.linkedParent||n).series[0],i=a===s[0],s=a===s[s.length-1],o=void 0,(r=e&&h(e.options.data,function(t){return t[n.isXAxis?"x":"y"]===a}))&&e.is("gantt")&&(o=c(r),l.seriesTypes.gantt.prototype.pointClass.setGanttPointAliases(o)),t.isFirst=i,t.isLast=s,t.point=o)}function S(){var t=this.options,e=t.grid||{},i=this.categories,s=this.tickPositions,r=s[0],o=s[s.length-1],n=this.linkedParent&&this.linkedParent.min,a=this.linkedParent&&this.linkedParent.max,n=n||this.min,a=a||this.max,l=this.tickInterval;!0!==e.enabled||i||!this.horiz&&!this.isLinked||(r<n&&n<r+l&&!t.startOnTick&&(s[0]=n),a<o&&o-l<a&&!t.endOnTick&&(s[s.length-1]=a))}function M(t){var e=this.options.grid;return!0===(void 0===e?{}:e).enabled&&this.categories?this.tickInterval:t.apply(this,Array.prototype.slice.call(arguments,1))}e.prototype.isOuterAxis=function(){var i=this.axis,t=i.chart,e=i.grid.columnIndex,s=i.linkedParent&&i.linkedParent.grid.columns||i.grid.columns,r=e?i.linkedParent:i,o=-1,n=0;return(t[i.coll]||[]).forEach(function(t,e){t.side!==i.side||t.options.isInternal||(n=e,t===r&&(o=e))}),n===o&&(!v(e)||s.length===e)},e.prototype.renderBorder=function(t){var e=this.axis,i=e.chart.renderer,s=e.options,t=i.path(t).addClass("highcharts-axis-line").add(e.axisBorder);return i.styledMode||t.attr({stroke:s.lineColor,"stroke-width":s.lineWidth,zIndex:7}),t};var i=e;function e(t){this.axis=t}return t.E=function(t){return this.dateFormat("%a",t,!0).charAt(0)},t.W=function(t){var e=this,i=new this.Date(t),t=(["Hours","Milliseconds","Minutes","Seconds"].forEach(function(t){e.set(t,i,0)}),(this.get("Day",i)+6)%7),s=new this.Date(i.valueOf()),t=(this.set("Date",s,this.get("Date",i)-t+3),new this.Date(this.get("FullYear",s),0,1));return 4!==this.get("Day",t)&&(this.set("Month",i,0),this.set("Date",i,1+(11-this.get("Day",t))%7)),(1+Math.floor((s.valueOf()-t.valueOf())/6048e5)).toString()},{compose:function(t,e,i){return s.pushUnique(g,t)&&(t.keepProps.push("grid"),t.prototype.getMaxLabelDimensions=x,u(t.prototype,"unsquish",M),r(t,"init",N),r(t,"afterGetOffset",b),r(t,"afterGetTitlePosition",y),r(t,"afterInit",G),r(t,"afterRender",P),r(t,"afterSetAxisTranslation",A),r(t,"afterSetOptions",T),r(t,"afterSetOptions",O),r(t,"afterSetScale",B),r(t,"afterTickSize",C),r(t,"trimTicks",S),r(t,"destroy",I)),s.pushUnique(g,e)&&r(e,"afterSetChartSize",w),s.pushUnique(g,i)&&(r(i,"afterGetLabelPosition",E),r(i,"labelFormat",L)),t}}}),e(t,"Gantt/Tree.js",[t["Core/Utilities.js"]],function(t){var p=t.extend,u=t.isNumber,f=t.pick;function g(s,t,r,e,o,n){var a,l,i=n&&n.after,d=n&&n.before,t={data:e,depth:r-1,id:s,level:r,parent:t||""},h=0,c=0,d=("function"==typeof d&&d(t,n),(o[s]||[]).map(function(t){var e=g(t.id,s,r+1,t,o,n),i=t.start||NaN,t=!0===t.milestone?i:t.end||NaN;return a=!u(a)||i<a?i:a,l=!u(l)||l<t?t:l,h=h+1+e.descendants,c=Math.max(e.height+1,c),e}));return e&&(e.start=f(e.start,a),e.end=f(e.end,l)),p(t,{children:d,descendants:h,height:c}),"function"==typeof i&&i(t,n),t}return{getNode:g,getTree:function(t,e){return g("",null,1,null,t.reduce(function(t,e){var i=f(e.parent,"");return void 0===t[i]&&(t[i]=[]),t[i].push(e),t},{}),e)}}}),e(t,"Core/Axis/TreeGrid/TreeGridTick.js",[t["Core/Utilities.js"]],function(e){var v=e.addEvent,k=e.isObject,x=e.isNumber,b=e.pick,i=e.wrap,s=[];function r(){this.treeGrid||(this.treeGrid=new t(this))}function o(t,e,i,s,r,o,n,a,l){var o=b(this.options&&this.options.labels,o),d=this.pos,h=this.axis,c="treegrid"===h.options.type,t=t.apply(this,[e,i,s,r,o,n,a,l]);return c&&(e=o&&k(o.symbol,!0)?o.symbol:{},i=o&&x(o.indentation)?o.indentation:0,n=(r=(s=h.treeGrid.mapOfPosToGridNode)&&s[d])&&r.depth||1,t.x+=(e.width||0)+2*(e.padding||0)+(n-1)*i),t}function n(t){var e,i,s,r,o,n=this,a=n.pos,l=n.axis,d=n.label,h=l.treeGrid.mapOfPosToGridNode,c=l.options,p=b(n.options&&n.options.labels,c&&c.labels),u=p&&k(p.symbol,!0)?p.symbol:{},h=h&&h[a],f=h&&h.depth,c="treegrid"===c.type,a=-1<l.tickPositions.indexOf(a),g="highcharts-treegrid-node-",m=l.chart.styledMode;c&&h&&d&&d.element&&d.addClass(g+"level-"+f),t.apply(n,Array.prototype.slice.call(arguments,1)),c&&d&&d.element&&h&&h.descendants&&0<h.descendants&&(f=l.treeGrid.isCollapsed(h),t={color:!m&&d.styles&&d.styles.color||"",collapsed:f,group:d.parentGroup,options:u,renderer:d.renderer,show:a,xy:d.xy},l=!(c=n.treeGrid).labelIcon,h=t.renderer,a=(u=t.options).width||0,e=u.height||0,i={x:(i=t.xy).x-a/2-(u.padding||0),y:i.y-e/2},s=t.collapsed?90:180,r=t.show&&x(i.y),(o=c.labelIcon)||(c.labelIcon=o=h.path(h.symbols[u.type](u.x||0,u.y||0,a,e)).addClass("highcharts-label-icon").add(t.group)),o[r?"show":"hide"](),h.styledMode||o.attr({cursor:"pointer",fill:b(t.color,"#666666"),"stroke-width":1,stroke:u.lineColor,strokeWidth:u.lineWidth||0}),o[l?"attr":"animate"]({translateX:i.x,translateY:i.y,rotation:s}),c=g+(f?"expanded":"collapsed"),d.addClass(g+(f?"collapsed":"expanded")).removeClass(c),m||d.css({cursor:"pointer"}),[d,n.treeGrid.labelIcon].forEach(function(t){t&&!t.attachedTreeGridEvents&&(v(t.element,"mouseover",function(){d.addClass("highcharts-treegrid-node-active"),d.renderer.styledMode||d.css({textDecoration:"underline"})}),v(t.element,"mouseout",function(){var t=k(p.style)?p.style:{};d.removeClass("highcharts-treegrid-node-active"),d.renderer.styledMode||d.css({textDecoration:t.textDecoration})}),v(t.element,"click",function(){n.treeGrid.toggleCollapse()}),t.attachedTreeGridEvents=!0)}))}a.compose=function(t){e.pushUnique(s,t)&&(v(t,"init",r),i(t.prototype,"getLabelPosition",o),i(t.prototype,"renderLabel",n),t.prototype.collapse=function(t){this.treeGrid.collapse(t)},t.prototype.expand=function(t){this.treeGrid.expand(t)},t.prototype.toggleCollapse=function(t){this.treeGrid.toggleCollapse(t)})},a.prototype.collapse=function(t){var e=this.tick,i=e.axis,s=i.brokenAxis;s&&i.treeGrid.mapOfPosToGridNode&&(e=e.pos,e=i.treeGrid.mapOfPosToGridNode[e],i=i.treeGrid.collapse(e),s.setBreaks(i,b(t,!0)))},a.prototype.destroy=function(){this.labelIcon&&this.labelIcon.destroy()},a.prototype.expand=function(t){var e=this.tick,i=e.axis,s=i.brokenAxis;s&&i.treeGrid.mapOfPosToGridNode&&(e=e.pos,e=i.treeGrid.mapOfPosToGridNode[e],i=i.treeGrid.expand(e),s.setBreaks(i,b(t,!0)))},a.prototype.toggleCollapse=function(t){var e=this.tick,i=e.axis,s=i.brokenAxis;s&&i.treeGrid.mapOfPosToGridNode&&(e=e.pos,e=i.treeGrid.mapOfPosToGridNode[e],i=i.treeGrid.toggleCollapse(e),s.setBreaks(i,b(t,!0)))};var t=a;function a(t){this.tick=t}return t}),e(t,"Series/TreeUtilities.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],function(f,t){var c=t.extend,l=t.isArray,d=t.isNumber,h=t.isObject,p=t.merge,g=t.pick;return{getColor:function(t,e){var i,s,r,o=e.index,n=e.mapOptionsToLevel,a=e.parentColor,l=e.parentColorIndex,d=e.series,h=e.colors,c=e.siblings,p=d.points,u=d.chart.options.chart;return t&&(p=p[t.i],n=n[t.level]||{},p&&n.colorByPoint&&(i=p.index%(h?h.length:u.colorCount),r=h&&h[i]),d.chart.styledMode||(s=g(p&&p.options.color,n&&n.color,r,a&&((t=n&&n.colorVariation)&&"brightness"===t.key&&o&&c?f.parse(a).brighten(t.to*(o/c)).get():a),d.color)),r=g(p&&p.options.colorIndex,n&&n.colorIndex,i,l,e.colorIndex)),{color:s,colorIndex:r}},getLevelOptions:function(t){var r,e,i,o,s,n,a={};if(h(t))for(o=d(t.from)?t.from:1,n=t.levels,e={},r=h(t.defaults)?t.defaults:{},l(n)&&(e=n.reduce(function(t,e){var i,s;return h(e)&&d(e.level)&&(i=g((s=p({},e)).levelIsConstant,r.levelIsConstant),delete s.levelIsConstant,delete s.level,h(t[e=e.level+(i?0:o-1)])?p(!0,t[e],s):t[e]=s),t},{})),s=d(t.to)?t.to:1,i=0;i<=s;i++)a[i]=p({},r,h(e[i])?e[i]:{});return a},setTreeValues:function s(r,o){var t=o.before,e=o.idRoot,i=o.mapIdToNode[e],n=!1!==o.levelIsConstant,a=o.points[r.i],l=a&&a.options||{},d=[],h=0,n=(r.levelDynamic=r.level-(n?0:i.level),r.name=g(a&&a.name,""),r.visible=e===r.id||!0===o.visible,(r="function"==typeof t?t(r,o):r).children.forEach(function(t,e){var i=c({},o);c(i,{index:e,siblings:r.children.length,visible:r.visible}),t=s(t,i),d.push(t),t.visible&&(h+=t.val)}),g(l.value,h));return r.visible=0<=n&&(0<h||r.visible),r.children=d,r.childrenTotal=h,r.isLeaf=r.visible&&!h,r.val=n,r},updateRootId:function(t){var e;return h(t)&&(e=h(t.options)?t.options:{},e=g(t.rootNode,e.rootId,""),h(t.userOptions)&&(t.userOptions.rootId=e),t.rootNode=e),e}}}),e(t,"Core/Axis/TreeGrid/TreeGridAxis.js",[t["Core/Axis/BrokenAxis.js"],t["Core/Axis/GridAxis.js"],t["Gantt/Tree.js"],t["Core/Axis/TreeGrid/TreeGridTick.js"],t["Series/TreeUtilities.js"],t["Core/Utilities.js"]],function(o,n,u,a,t,l){var d,h=t.getLevelOptions,c=l.addEvent,f=l.find,i=l.fireEvent,p=l.isArray,g=l.isObject,m=l.isString,v=l.merge,s=l.pick,k=l.wrap,x=[];function r(t,e){var i=t.collapseEnd||0,t=t.collapseStart||0;return e<=i&&(t-=.5),{from:t,to:i,showPoints:!1}}function b(t,e,a){var l,n=[],s=[],d={},h="boolean"==typeof e&&e,c={},p=-1,e=u.getTree(t,{after:function(t){var t=c[t.pos],e=0,i=0;t.children.forEach(function(t){i+=(t.descendants||0)+1,e=Math.max((t.height||0)+1,e)}),t.descendants=i,t.height=e,t.collapsed&&s.push(t)},before:function(t){var e,i,s=g(t.data,!0)?t.data:{},r=m(s.name)?s.name:"",o=d[t.parent],o=g(o,!0)?c[o.pos]:null;h&&g(o,!0)&&(e=f(o.children,function(t){return t.name===r}))?(i=e.pos,e.nodes.push(t)):i=p++,c[i]||(c[i]=e={depth:o?o.depth+1:0,name:r,id:s.id,nodes:[t],children:[],pos:i},-1!==i&&n.push(r),g(o,!0)&&o.children.push(e)),m(t.id)&&(d[t.id]=t),e&&!0===s.collapsed&&(e.collapsed=!0),t.pos=i}});return{categories:n,mapOfIdToNode:d,mapOfPosToGridNode:c=(l=function(t,i,e){var s=t.nodes,r=i+(-1===i?0:a-1),o=(r-i)/2,n=i+o;return s.forEach(function(t){var e=t.data;g(e,!0)&&(e.y=i+(e.seriesIndex||0),delete e.seriesIndex),t.pos=n}),(e[n]=t).pos=n,t.tickmarkOffset=.5+o,t.collapseStart=r+.5,t.children.forEach(function(t){l(t,r+1,e),r=(t.collapseEnd||0)-.5}),t.collapseEnd=r+.5,e})(c[-1],-1,{}),collapsedNodes:s,tree:e}}function y(l){l.target.axes.filter(function(t){return"treegrid"===t.options.type}).forEach(function(t){var i,e=t.options||{},s=e.labels,r=e.uniqueNames,o=e.max,e=!t.treeGrid.mapOfPosToGridNode||t.series.some(function(t){return!t.hasRendered||t.isDirtyData||t.isDirty}),n=0;if(e){if(i=t.series.reduce(function(e,i){return i.visible&&((i.options.data||[]).forEach(function(t){i.options.keys&&i.options.keys.length&&(t=i.pointClass.prototype.optionsToObject.call({series:i},t),i.pointClass.setGanttPointAliases(t)),g(t,!0)&&(t.seriesIndex=n,e.push(t))}),!0===r&&n++),e},[]),o&&i.length<o)for(var a=i.length;a<=o;a++)i.push({name:a+"​"});e=b(i,r||!1,!0===r?n:1),t.categories=e.categories,t.treeGrid.mapOfPosToGridNode=e.mapOfPosToGridNode,t.hasNames=!0,t.treeGrid.tree=e.tree,t.series.forEach(function(t){var e=(t.options.data||[]).map(function(e){return p(e)&&t.options.keys&&t.options.keys.length&&i.forEach(function(t){0<=e.indexOf(t.x)&&0<=e.indexOf(t.x2)&&(e=t)}),g(e,!0)?v(e):e});t.visible&&t.setData(e,!1)}),t.treeGrid.mapOptionsToLevel=h({defaults:s,from:1,levels:s&&s.levels,to:t.treeGrid.tree&&t.treeGrid.tree.height}),"beforeRender"===l.type&&(t.treeGrid.collapsedNodes=e.collapsedNodes)}})}function G(t,e){var i,s=this.treeGrid.mapOptionsToLevel||{},r="treegrid"===this.options.type,o=this.ticks,n=o[e];r&&this.treeGrid.mapOfPosToGridNode?((s=s[(r=this.treeGrid.mapOfPosToGridNode[e]).depth])&&(i={labels:s}),!n&&d?o[e]=n=new d(this,e,void 0,void 0,{category:r.name,tickmarkOffset:r.tickmarkOffset,options:i}):(n.parameters.category=r.name,n.options=i,n.addLabel())):t.apply(this,Array.prototype.slice.call(arguments,1))}function P(t,e,i,s){var r=this,o="treegrid"===i.type;r.treeGrid||(r.treeGrid=new T(r)),o&&(c(e,"beforeRender",y),c(e,"beforeRedraw",y),c(e,"addSeries",function(t){t.options.data&&(t=b(t.options.data,i.uniqueNames||!1,1),r.treeGrid.collapsedNodes=(r.treeGrid.collapsedNodes||[]).concat(t.collapsedNodes))}),c(r,"foundExtremes",function(){r.treeGrid.collapsedNodes&&r.treeGrid.collapsedNodes.forEach(function(e){var t=r.treeGrid.collapse(e);r.brokenAxis&&(r.brokenAxis.setBreaks(t,!1),r.treeGrid.collapsedNodes&&(r.treeGrid.collapsedNodes=r.treeGrid.collapsedNodes.filter(function(t){return e.collapseStart!==t.collapseStart||e.collapseEnd!==t.collapseEnd})))})}),c(r,"afterBreaks",function(){"yAxis"===r.coll&&!r.staticScale&&r.chart.options.chart.height&&(r.isDirty=!0)}),i=v({grid:{enabled:!0},labels:{align:"left",levels:[{level:void 0},{level:1,style:{fontWeight:"bold"}}],symbol:{type:"triangle",x:-5,y:-5,height:10,width:10,padding:5}},uniqueNames:!1},i,{reversed:!0,grid:{columns:void 0}})),t.apply(r,[e,i,s]),o&&(r.hasNames=!0,r.options.showLastLabel=!0)}function A(t){var e=this.options;"treegrid"===e.type?(this.min=s(this.userMin,e.min,this.dataMin),this.max=s(this.userMax,e.max,this.dataMax),i(this,"foundExtremes"),this.setAxisTranslation(),this.tickmarkOffset=.5,this.tickInterval=1,this.tickPositions=this.treeGrid.mapOfPosToGridNode?this.treeGrid.getTickPositions():[]):t.apply(this,Array.prototype.slice.call(arguments,1))}e.compose=function(t,e,i,s){var r;return l.pushUnique(x,t)&&(-1===t.keepProps.indexOf("treeGrid")&&t.keepProps.push("treeGrid"),r=t.prototype,k(r,"generateTick",G),k(r,"init",P),k(r,"setTickInterval",A),r.utils={getNode:u.getNode}),l.pushUnique(x,s)&&!d&&(d=s),n.compose(t,e,s),o.compose(t,i),a.compose(s),t},e.prototype.setCollapsedStatus=function(s){var t=this.axis,r=t.chart;t.series.forEach(function(t){var e,i=t.options.data;s.id&&i&&(e=r.get(s.id),i=i[t.data.indexOf(e)],e&&i&&(e.collapsed=s.collapsed,i.collapsed=s.collapsed))})},e.prototype.collapse=function(t){var e=this.axis,i=e.options.breaks||[],s=r(t,e.max);return i.push(s),t.collapsed=!0,e.treeGrid.setCollapsedStatus(t),i},e.prototype.expand=function(t){var e=this.axis,i=e.options.breaks||[],s=r(t,e.max);return t.collapsed=!1,e.treeGrid.setCollapsedStatus(t),i.reduce(function(t,e){return e.to===s.to&&e.from===s.from||t.push(e),t},[])},e.prototype.getTickPositions=function(){var i=this.axis,s=Math.floor(i.min/i.tickInterval)*i.tickInterval,r=Math.ceil(i.max/i.tickInterval)*i.tickInterval;return Object.keys(i.treeGrid.mapOfPosToGridNode||{}).reduce(function(t,e){e=+e;return!(s<=e&&e<=r)||i.brokenAxis&&i.brokenAxis.isInAnyBreak(e)||t.push(e),t},[])},e.prototype.isCollapsed=function(t){var e=this.axis,i=e.options.breaks||[],s=r(t,e.max);return i.some(function(t){return t.from===s.from&&t.to===s.to})},e.prototype.toggleCollapse=function(t){return this.isCollapsed(t)?this.expand(t):this.collapse(t)};var T=e;function e(t){this.axis=t}return T}),e(t,"masters/modules/treegrid.src.js",[t["Core/Globals.js"],t["Core/Axis/TreeGrid/TreeGridAxis.js"]],function(t,e){e.compose(t.Axis,t.Chart,t.Series,t.Tick)})});