!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/tiledwebmap",["highcharts"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){"use strict";e=e?e._modules:{};function t(e,t,o,i){e.hasOwnProperty(t)||(e[t]=i.apply(null,o),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}t(e,"Maps/TilesProviders/OpenStreetMap.js",[],function(){return function(){this.defaultCredits='Map data &copy2023 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',this.initialProjectionName="WebMercator",this.subdomains=["a","b","c"],this.themes={Standard:{url:"https://tile.openstreetmap.org/{zoom}/{x}/{y}.png",minZoom:0,maxZoom:19},Hot:{url:"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",minZoom:0,maxZoom:19},OpenTopoMap:{url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",minZoom:0,maxZoom:17,credits:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">\n                OpenStreetMap</a> contributors, <a href="https://viewfinderpanoramas.org">SRTM</a> \n                | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> \n                (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}}}}),t(e,"Maps/TilesProviders/Stamen.js",[],function(){return function(){this.defaultCredits='&copy; Map tiles by <a href="https://stamen.com">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="https://openstreetmap.org">OpenStreetMap</a>, under <a href="https://www.openstreetmap.org/copyright">ODbL</a>',this.initialProjectionName="WebMercator",this.subdomains=["a","b","c","d"],this.themes={Toner:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png",minZoom:0,maxZoom:20},TonerBackground:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}.png",minZoom:0,maxZoom:20},TonerLite:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png",minZoom:0,maxZoom:20},Terrain:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png",minZoom:0,maxZoom:18},TerrainBackground:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/terrain-background/{z}/{x}/{y}.png",minZoom:0,maxZoom:18},Watercolor:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png",minZoom:1,maxZoom:16,credits:'&copy Map tiles by <a href="https://stamen.com">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="https://openstreetmap.org">OpenStreetMap</a>, under <a href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'}}}}),t(e,"Maps/TilesProviders/LimaLabs.js",[],function(){return function(){this.defaultCredits='Map data &copy;2023 <a href="https://maps.lima-labs.com/">LimaLabs</a>',this.initialProjectionName="WebMercator",this.requiresApiKey=!0,this.themes={Standard:{url:"https://cdn.lima-labs.com/{zoom}/{x}/{y}.png?api={apikey}",minZoom:0,maxZoom:20}}}}),t(e,"Maps/TilesProviders/Thunderforest.js",[],function(){return function(){this.defaultCredits='Maps &copy <a href="https://www.thunderforest.com">Thunderforest</a>, Data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>',this.initialProjectionName="WebMercator",this.requiresApiKey=!0,this.subdomains=["a","b","c"],this.themes={OpenCycleMap:{url:"https://{s}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png?apikey={apikey}",minZoom:0,maxZoom:22},Transport:{url:"https://{s}.tile.thunderforest.com/transport/{z}/{x}/{y}.png?apikey={apikey}",minZoom:0,maxZoom:22},TransportDark:{url:"https://{s}.tile.thunderforest.com/transport-dark/{z}/{x}/{y}.png?apikey={apikey}",minZoom:0,maxZoom:22},SpinalMap:{url:"https://{s}.tile.thunderforest.com/spinal-map/{z}/{x}/{y}.png?apikey={apikey}",minZoom:0,maxZoom:22},Landscape:{url:"https://{s}.tile.thunderforest.com/landscape/{z}/{x}/{y}.png?apikey={apikey}",minZoom:0,maxZoom:22},Outdoors:{url:"https://{s}.tile.thunderforest.com/outdoors/{z}/{x}/{y}.png?apikey={apikey}",minZoom:0,maxZoom:22},Pioneer:{url:"https://{s}.tile.thunderforest.com/pioneer/{z}/{x}/{y}.png?apikey={apikey}",minZoom:0,maxZoom:22},MobileAtlas:{url:"https://{s}.tile.thunderforest.com/mobile-atlas/{z}/{x}/{y}.png?apikey={apikey}",minZoom:0,maxZoom:22},Neighbourhood:{url:"https://{s}.tile.thunderforest.com/neighbourhood/{z}/{x}/{y}.png?apikey={apikey}",minZoom:0,maxZoom:22}}}}),t(e,"Maps/TilesProviders/Esri.js",[],function(){return function(){this.defaultCredits="Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ, USGS,  Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012",this.initialProjectionName="WebMercator",this.themes={WorldStreetMap:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",minZoom:0,maxZoom:20},DeLorme:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/Specialty/DeLorme_World_Base_Map/MapServer/tile/{z}/{y}/{x}",minZoom:1,maxZoom:11,credits:"Tiles &copy; Esri &mdash; Copyright: &copy;2012 DeLorme"},WorldTopoMap:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",minZoom:0,maxZoom:20,credits:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"},WorldImagery:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",minZoom:0,maxZoom:20,credits:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"},WorldTerrain:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",minZoom:0,maxZoom:13,credits:"Tiles &copy; Esri &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS"},WorldShadedRelief:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",minZoom:0,maxZoom:13,credits:"Tiles &copy; Esri &mdash; Source: Esri"},WorldPhysical:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",minZoom:0,maxZoom:8,credits:"Tiles &copy; Esri &mdash; Source: US National Park Service"},NatGeoWorldMap:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",minZoom:0,maxZoom:16,credits:"Tiles &copy; Esri &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC"},WorldGrayCanvas:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",minZoom:0,maxZoom:16,credits:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ"}}}}),t(e,"Maps/TilesProviders/USGS.js",[],function(){return function(){this.defaultCredits='Tiles courtesy of the <a href="https://usgs.gov/">U.S. GeologicalSurvey</a>',this.initialProjectionName="WebMercator",this.themes={USTopo:{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer/tile/{z}/{y}/{x}",minZoom:0,maxZoom:20},USImagery:{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryOnly/MapServer/tile/{z}/{y}/{x}",minZoom:0,maxZoom:20},USImageryTopo:{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryTopo/MapServer/tile/{z}/{y}/{x}",minZoom:0,maxZoom:20}}}}),t(e,"Maps/TilesProviders/TilesProviderRegistry.js",[e["Maps/TilesProviders/OpenStreetMap.js"],e["Maps/TilesProviders/Stamen.js"],e["Maps/TilesProviders/LimaLabs.js"],e["Maps/TilesProviders/Thunderforest.js"],e["Maps/TilesProviders/Esri.js"],e["Maps/TilesProviders/USGS.js"]],function(e,t,o,i,r,s){return{Esri:r,LimaLabs:o,OpenStreetMap:e,Stamen:t,Thunderforest:i,USGS:s}}),t(e,"Series/TiledWebMap/TiledWebMapSeriesDefaults.js",[],function(){return{states:{inactive:{enabled:!1}}}}),t(e,"Series/TiledWebMap/TiledWebMapSeries.js",[e["Core/Series/SeriesRegistry.js"],e["Maps/TilesProviders/TilesProviderRegistry.js"],e["Series/TiledWebMap/TiledWebMapSeriesDefaults.js"],e["Core/Utilities.js"]],function(e,C,t,o){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),s=e.seriesTypes.map,a=o.addEvent,E=o.defined,k=o.error,n=o.merge,A=o.pick,p=o.pushUnique,l=[];function m(e){var t=(this.options.series||[]).filter(function(e){return"tiledwebmap"===e.type})[0],e=e.geoBounds;if(t&&t.provider&&t.provider.type&&!t.provider.url){var o,i,r,t=C[t.provider.type];if(E(t))return t=(new t).initialProjectionName,this.options.mapView&&(e?(o=e.x1,i=e.y1,r=e.x2,e=e.y2,this.options.mapView.recommendedMapView={projection:{name:t,parallels:[i,e],rotation:[-(o+r)/2]}}):this.options.mapView.recommendedMapView={projection:{name:t},minZoom:0}),!1;k("Highcharts warning: Tiles Provider not defined in the Provider Registry.",!1)}return!0}r(h,c=s),h.compose=function(e){p(l,e)&&a(e,"beforeMapViewInit",m)},h.prototype.lonLatToTile=function(e,t){var o=e.lon,e=e.lat;return{x:Math.floor((o+180)/360*Math.pow(2,t)),y:Math.floor((1-Math.log(Math.tan(e*Math.PI/180)+1/Math.cos(e*Math.PI/180))/Math.PI)/2*Math.pow(2,t))}},h.prototype.tileToLonLat=function(e,t,o){t=Math.PI-2*Math.PI*t/Math.pow(2,o);return{lon:e/Math.pow(2,o)*360-180,lat:180/Math.PI*Math.atan(.5*(Math.exp(t)-Math.exp(-t)))}},h.prototype.drawPoints=function(){var d=this.chart,u=d.mapView;if(u){var y=this.tiles=this.tiles||{},n=this.transformGroups=this.transformGroups||[],f=this,p=this.options.provider,g=u.zoom,v=A(u.projection.options.rotation&&u.projection.options.rotation[0],0),M=d.renderer.forExport?0:200,T=function(i){for(var e=0,t=Object.keys(y);e<t.length;e++)!function(o){parseFloat(o)===(u.zoom<0?0:Math.floor(u.zoom))||f.minZoom&&(u.zoom<0?0:Math.floor(u.zoom))<f.minZoom&&parseFloat(o)===f.minZoom||f.maxZoom&&(u.zoom<0?0:Math.floor(u.zoom))>f.maxZoom&&parseFloat(o)===f.maxZoom?Object.keys(y[o].tiles).forEach(function(e,t){y[o].tiles[e].animate({opacity:1},{duration:i},function(){t===Object.keys(y[o].tiles).length-1&&(y[o].isActive=!0)})}):Object.keys(y[o].tiles).forEach(function(e,t){y[o].tiles[e].animate({opacity:0},{duration:i,defer:i/2},function(){y[o].tiles[e].destroy(),delete y[o].tiles[e],t===Object.keys(y[o].tiles).length-1&&(y[o].isActive=!1,y[o].loaded=!1)})})}(t[e])},x=g<0?0:Math.floor(g),l=Math.pow(2,x),e=.638436911716859*Math.pow(2,g)/(.638436911716859*Math.pow(2,x)),m=256*e;if(p&&(p.type||p.url)){if(p.type&&!p.url){var t=C[p.type];if(!E(t))return void k("Highcharts warning: Tiles Provider '"+p.type+"' not defined in the ProviderRegistry.",!1);var t=new t,o=t.initialProjectionName,i=void 0,r="",s=(p.theme&&E(t.themes[p.theme])?i=t.themes[p.theme]:(s=Object.keys(t.themes)[0],i=t.themes[s],k("Highcharts warning: The Tiles Provider's Theme '"+p.theme+"' is not defined in the Provider definition - falling back to '"+s+"'.",!1)),p.subdomain&&t.subdomains&&-1!==t.subdomains.indexOf(p.subdomain)?r=p.subdomain:E(t.subdomains)&&-1!==i.url.indexOf("{s}")&&(r=A(t.subdomains&&t.subdomains[0],""),k("Highcharts warning: The Tiles Provider's Subdomain '"+p.subdomain+"' is not defined in the Provider definition - falling back to '"+r+"'.",!1)),t.requiresApiKey&&(p.apiKey?i.url=i.url.replace("{apikey}",p.apiKey):(k("Highcharts warning: The Tiles Provider requires API Key to use tiles, use provider.apiKey to provide a token.",!1),i.url=i.url.replace("?apikey={apikey}",""))),p.url=i.url.replace("{s}",r),this.minZoom=i.minZoom,this.maxZoom=i.maxZoom,A(d.userOptions.credits&&d.userOptions.credits.text,"Highcharts.com "+A(i.credits,t.defaultCredits)));d.credits?d.credits.update({text:s}):d.addCredits({text:s,style:A(null==(r=d.options.credits)?void 0:r.style,{})}),u.projection.options.name!==o&&k("Highcharts warning: The set projection is different than supported by Tiles Provider.",!1)}else u.projection.options.name||k("Highcharts warning: The set projection is different than supported by Tiles Provider.",!1);if(E(this.minZoom)&&x<this.minZoom?(l=Math.pow(2,x=this.minZoom),m=256*(e=.638436911716859*Math.pow(2,g)/(.638436911716859*Math.pow(2,x)))):E(this.maxZoom)&&x>this.maxZoom&&(l=Math.pow(2,x=this.maxZoom),m=256*(e=.638436911716859*Math.pow(2,g)/(.638436911716859*Math.pow(2,x)))),u.projection&&u.projection.def){u.projection.hasCoordinates=!0,n[x]||(n[x]=d.renderer.g().add(this.group));var i=u.pixelsToProjectedUnits({x:0,y:0}),t=u.projection.def.inverse([i.x,i.y]),s={lon:t[0]-v,lat:t[1]},r=u.pixelsToProjectedUnits({x:d.plotWidth,y:d.plotHeight}),o=u.projection.def.inverse([r.x,r.y]),e={lon:o[0]-v,lat:o[1]},a=((s.lat>u.projection.maxLatitude||e.lat<-1*u.projection.maxLatitude)&&(s.lat=u.projection.maxLatitude,e.lat=-1*u.projection.maxLatitude),this.lonLatToTile(s,x)),c=this.lonLatToTile(e,x),i=this.tileToLonLat(a.x,a.y,x),t=u.projection.def.forward([i.lon+v,i.lat]),r=u.projectedUnitsToPixels({x:t[0],y:t[1]}),h=a.x*m-r.x,S=a.y*m-r.y;y["".concat(x)]||(y["".concat(x)]={tiles:{},isActive:!1,howManyTiles:0,actualTilesCount:0,loaded:!1}),y["".concat(x)].howManyTiles=(c.x-a.x+1)*(c.y-a.y+1),y["".concat(x)].actualTilesCount=0;for(var b=a.x;b<=c.x;b++)for(var Z=a.y;Z<=c.y;Z++)!function(e,t,o,i,r){var s=e%l,a=t%l,s=s<0?s+l:s,a=a<0?a+l:a;!y["".concat(o)].tiles["".concat(e,",").concat(t)]&&p.url&&(s=p.url.replace("{x}",s.toString()).replace("{y}",a.toString()).replace("{zoom}",o.toString()).replace("{z}",o.toString()),y[o].loaded=!1,y["".concat(o)].tiles["".concat(e,",").concat(t)]=d.renderer.image(s,e*m-i,t*m-r,m,m).attr({zIndex:2,opacity:0}).on("load",function(){p.onload&&p.onload.apply(this),o!==(u.zoom<0?0:Math.floor(u.zoom))&&o!==f.minZoom||(y["".concat(o)].actualTilesCount++,y["".concat(o)].howManyTiles===y["".concat(o)].actualTilesCount&&(y[o].loaded=!0,f.isAnimating?f.redrawTiles=!0:(f.redrawTiles=!1,T(M)),y["".concat(o)].actualTilesCount=0))}).add(n[o]),y["".concat(o)].tiles["".concat(e,",").concat(t)].posX=e,y["".concat(o)].tiles["".concat(e,",").concat(t)].posY=t,y["".concat(o)].tiles["".concat(e,",").concat(t)].originalURL=s)}(b,Z,x,h,S)}for(var w=this,j=0,P=Object.keys(y);j<P.length;j++)!function(h){for(var e=0,t=Object.keys(y[h].tiles);e<t.length;e++)!function(o){var i,e,r,s,t,a,n,p,l,m,c;u.projection&&u.projection.def&&(i=.638436911716859*Math.pow(2,g)/(.638436911716859*Math.pow(2,parseFloat(h)))*256,e=y[h].tiles[Object.keys(y[h].tiles)[0]],t=y[h].tiles[o],r=t.posX,s=t.posY,E(r)&&E(s)&&E(e.posX)&&E(e.posY)&&(t=w.tileToLonLat(e.posX,e.posY,parseFloat(h)),t=u.projection.def.forward([t.lon+v,t.lat]),t=u.projectedUnitsToPixels({x:t[0],y:t[1]}),a=e.posX*i-t.x,n=e.posY*i-t.y,d.renderer.globalAnimation&&d.hasRendered?(p=Number(y[h].tiles[o].attr("x")),l=Number(y[h].tiles[o].attr("y")),m=Number(y[h].tiles[o].attr("width")),c=Number(y[h].tiles[o].attr("height")),f.isAnimating=!0,y[h].tiles[o].attr({animator:0}).animate({animator:1},{step:function(e,t){y[h].tiles[o].attr({x:p+(r*i-a-p)*t.pos,y:l+(s*i-n-l)*t.pos,width:m+(Math.ceil(i)+1-m)*t.pos,height:c+(Math.ceil(i)+1-c)*t.pos})}},function(){f.isAnimating=!1,f.redrawTiles&&(f.redrawTiles=!1,T(M))})):((f.redrawTiles||parseFloat(h)!==x||(y[h].isActive||parseFloat(h)===x)&&Object.keys(y[h].tiles).map(function(e){return y[h].tiles[e]}).some(function(e){return 0===e.opacity}))&&(f.redrawTiles=!1,T(M)),y[h].tiles[o].attr({x:r*i-a,y:s*i-n,width:Math.ceil(i)+1,height:Math.ceil(i)+1}))))}(t[e])}(P[j])}else k("Highcharts warning: Tiles Provider not defined in the Provider Registry.",!1)}},h.prototype.update=function(){var e=this.transformGroups,t=this.chart.mapView,o=arguments[0].provider;e&&(e.forEach(function(e){0!==Object.keys(e).length&&e.destroy()}),this.transformGroups=[]),t&&!E(t.options.projection)&&o&&o.type&&(e=C[o.type])&&(o=(new e).initialProjectionName,t.update({projection:{name:o}})),c.prototype.update.apply(this,arguments)},h.defaultOptions=n(s.defaultOptions,t);var c,o=h;function h(){var e=null!==c&&c.apply(this,arguments)||this;return e.options=void 0,e.redrawTiles=!1,e.isAnimating=!1,e}return e.registerSeriesType("tiledwebmap",o),o}),t(e,"masters/modules/tiledwebmap.src.js",[e["Core/Globals.js"],e["Series/TiledWebMap/TiledWebMapSeries.js"],e["Maps/TilesProviders/TilesProviderRegistry.js"]],function(e,t,o){e.TilesProviderRegistry=o,t.compose(e.Chart)})});