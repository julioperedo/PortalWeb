!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/series-label",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,r,o){t.hasOwnProperty(e)||(t[e]=o.apply(null,r),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Extensions/SeriesLabel/SeriesLabelDefaults.js",[],function(){return{enabled:!0,connectorAllowed:!1,connectorNeighbourDistance:24,format:void 0,formatter:void 0,minFontSize:null,maxFontSize:null,onArea:null,style:{fontSize:"0.8em",fontWeight:"bold"},useHTML:!1,boxesToAvoid:[]}}),e(t,"Extensions/SeriesLabel/SeriesLabelUtilities.js",[],function(){function h(t,e,r,o,a,i){i=(i-e)*(r-t)-(o-e)*(a-t);return 0<i||!(i<0)}function l(t,e,r,o,a,i,n,s){return h(t,e,a,i,n,s)!==h(r,o,a,i,n,s)&&h(t,e,r,o,a,i)!==h(t,e,r,o,n,s)}return{boxIntersectLine:function(t,e,r,o,a,i,n,s){return l(t,e,t+r,e,a,i,n,s)||l(t+r,e,t+r,e+o,a,i,n,s)||l(t,e+o,t+r,e+o,a,i,n,s)||l(t,e,t,e+o,a,i,n,s)},intersectRect:function(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}}}),e(t,"Extensions/SeriesLabel/SeriesLabel.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Chart/Chart.js"],t["Core/Templating.js"],t["Core/Defaults.js"],t["Extensions/SeriesLabel/SeriesLabelDefaults.js"],t["Extensions/SeriesLabel/SeriesLabelUtilities.js"],t["Core/Utilities.js"]],function(t,r,e,o,a,i,n){var A=this&&this.__spreadArray||function(t,e,r){if(r||2==arguments.length)for(var o,a=0,i=e.length;a<i;a++)!o&&a in e||((o=o||Array.prototype.slice.call(e,0,a))[a]=e[a]);return t.concat(o||Array.prototype.slice.call(e))},L=t.animObject,E=e.format,s=o.setOptions,v=i.boxIntersectLine,w=i.intersectRect,h=n.addEvent,T=n.extend,l=n.fireEvent,C=n.isNumber,P=n.pick,c=n.syncTimeout,p=[];function j(t,e,r,o,a){for(var i,n,s,h,l,c=t.chart,p=t.options.label||{},u=P(p.onArea,!!t.area),d=u||p.connectorAllowed,f=c.boxesToAvoid,x=Number.MAX_VALUE,b=Number.MAX_VALUE,m=0;f&&m<f.length;m+=1)if(w(f[m],{left:e,right:e+o.width,top:r,bottom:r+o.height}))return!1;for(m=0;m<c.series.length;m+=1){var g=c.series[m],y=g.interpolatedPoints&&A([],g.interpolatedPoints,!0);if(g.visible&&y){for(var Y=c.plotHeight/10,X=c.plotTop;X<=c.plotTop+c.plotHeight;X+=Y)y.unshift({chartX:c.plotLeft,chartY:X}),y.push({chartX:c.plotLeft+c.plotWidth,chartY:X});for(l=1;l<y.length;l+=1){if(y[l].chartX>=e-16&&y[l-1].chartX<=e+o.width+16){if(v(e,r,o.width,o.height,y[l-1].chartX,y[l-1].chartY,y[l].chartX,y[l].chartY))return!1;t===g&&!s&&a&&(s=v(e-16,r-16,o.width+32,o.height+32,y[l-1].chartX,y[l-1].chartY,y[l].chartX,y[l].chartY))}!d&&!s||t===g&&!u||(x=Math.min(x,(h=e+o.width/2-y[l].chartX)*h+(h=r+o.height/2-y[l].chartY)*h))}if(!u&&d&&t===g&&(a&&!s||x<Math.pow(p.connectorNeighbourDistance||1,2))){for(l=1;l<y.length;l+=1)(i=Math.min(Math.pow(e+o.width/2-y[l].chartX,2)+Math.pow(r+o.height/2-y[l].chartY,2),Math.pow(e-y[l].chartX,2)+Math.pow(r-y[l].chartY,2),Math.pow(e+o.width-y[l].chartX,2)+Math.pow(r-y[l].chartY,2),Math.pow(e+o.width-y[l].chartX,2)+Math.pow(r+o.height-y[l].chartY,2),Math.pow(e-y[l].chartX,2)+Math.pow(r+o.height-y[l].chartY,2)))<b&&(b=i,n=y[l]);s=!0}}}return(!a||!!s)&&{x:e,y:r,weight:x-(n?b:0),connectorPoint:n}}function u(a){var S,i;this.renderer&&(i=L((S=this).renderer.globalAnimation).duration,S.labelSeries=[],S.labelSeriesMaxSum=0,S.seriesLabelTimer&&n.clearTimeout(S.seriesLabelTimer),S.series.forEach(function(t){var e=t.options.label||{},r=t.labelBySeries,o=r&&r.closest;e.enabled&&t.visible&&(t.graph||t.area)&&!t.boosted&&S.labelSeries&&(S.labelSeries.push(t),e.minFontSize&&e.maxFontSize&&t.yData&&(t.sum=t.yData.reduce(function(t,e){return(t||0)+(e||0)},0),S.labelSeriesMaxSum=Math.max(S.labelSeriesMaxSum||0,t.sum||0)),"load"===a.type&&(i=Math.max(i,L(t.options.animation).duration)),o&&(void 0!==o[0].plotX?r.animate({x:o[0].plotX+o[1],y:o[0].plotY+o[2]}):r.attr({opacity:0})))}),S.seriesLabelTimer=c(function(){var t,i;S.series&&S.labelSeries&&(S.boxesToAvoid=[],t=S.labelSeries||[],i=S.boxesToAvoid,S.series.forEach(function(a){return(a.points||[]).forEach(function(t){return(t.dataLabels||[]).forEach(function(t){var e=t.getBBox(),r=e.width,e=e.height,o=(t.translateX||0)+(a.xAxis?a.xAxis.pos:a.chart.plotLeft),t=(t.translateY||0)+(a.yAxis?a.yAxis.pos:a.chart.plotTop);i.push({left:o,top:t,right:o+r,bottom:t+e})})})}),t.forEach(function(t){var e=t.options.label||{};t.interpolatedPoints=function(t){if(t.xAxis||t.yAxis){var e,r,o,a=t.points,i=[],n=t.graph||t.area,s=n&&n.element,h=t.chart.inverted,l=t.xAxis,c=t.yAxis,p=(h?c:l).pos,u=(h?l:c).pos,d=P((t.options.label||{}).onArea,!!t.area),f=c.getThreshold(t.options.threshold),x={};if(t.getPointSpline&&s&&s.getPointAtLength&&!d&&a.length<(t.chart.plotSizeX||0)/16){h=n.toD&&n.attr("d");for(n.toD&&n.attr({d:n.toD}),m=s.getTotalLength(),y=0;y<m;y+=16){var b=s.getPointAtLength(y);M({chartX:p+b.x,chartY:u+b.y,plotX:b.x,plotY:b.y})}h&&n.attr({d:h}),M({chartX:p+((Y=a[a.length-1]).plotX||0),chartY:u+(Y.plotY||0)})}else for(var m=a.length,g=void 0,y=0;y<m;y+=1){var Y,X=(Y=a[y]).plotX,A=Y.plotY,v=Y.plotHigh;if(C(X)&&C(A)){var w={plotX:X,plotY:A,chartX:p+X,chartY:u+A};if(d&&(v&&(w.plotY=v,w.chartY=u+v),w.chartCenterY=u+((v||A)+P(Y.yBottom,f))/2),g&&16<(e=Math.max(Math.abs(w.chartX-g.chartX),Math.abs(w.chartY-g.chartY))))for(o=1,r=Math.ceil(e/16);o<r;o+=1)M({chartX:g.chartX+(w.chartX-g.chartX)*(o/r),chartY:g.chartY+(w.chartY-g.chartY)*(o/r),chartCenterY:(g.chartCenterY||0)+((w.chartCenterY||0)-(g.chartCenterY||0))*(o/r),plotX:(g.plotX||0)+(X-(g.plotX||0))*(o/r),plotY:(g.plotY||0)+(A-(g.plotY||0))*(o/r)});M(w),g=w}}return i}function M(t){var e=Math.round((t.plotX||0)/8)+","+Math.round((t.plotY||0)/8);x[e]||(x[e]=1,i.push(t))}}(t),i.push.apply(i,e.boxesToAvoid||[])}),S.series.forEach(function(t){var e=t.options.label;if(e&&(t.xAxis||t.yAxis)){var r,o,a,i,n,s,h,l,c="highcharts-color-"+P(t.colorIndex,"none"),p=!t.labelBySeries,u=e.minFontSize,d=e.maxFontSize,f=S.inverted,x=(f?t.yAxis:t.xAxis).pos,b=(f?t.xAxis:t.yAxis).pos,m=(S.inverted?t.yAxis:t.xAxis).len,g=(S.inverted?t.xAxis:t.yAxis).len,y=t.interpolatedPoints,Y=P(e.onArea,!!t.area),X=[],A=t.xData||[],v=t.labelBySeries;if(Y&&!f&&(f=[t.xAxis.toPixels(A[0]),t.xAxis.toPixels(A[A.length-1])],h=Math.min.apply(Math,f),l=Math.max.apply(Math,f)),t.visible&&!t.boosted&&y){for(v||(A=t.name,"string"==typeof e.format?A=E(e.format,t,S):e.formatter&&(A=e.formatter.call(t)),t.labelBySeries=v=S.renderer.label(A,0,0,"connector",0,0,e.useHTML).addClass("highcharts-series-label highcharts-series-label-"+t.index+" "+(t.options.className||"")+" "+c),S.renderer.styledMode||(f="string"==typeof t.color?t.color:"#666666",v.css(T({color:Y?S.renderer.getContrast(f):f},e.style||{})),v.attr({opacity:S.renderer.forExport?1:0,stroke:t.color,"stroke-width":1})),u&&d&&v.css({fontSize:u+(t.sum||0)/(t.chart.labelSeriesMaxSum||0)*(d-u)+"px"}),v.attr({padding:0,zIndex:3}).add()),(r=v.getBBox()).width=Math.round(r.width),n=y.length-1;0<n;--n)Y?w(o=y[n].chartX-r.width/2,a=(y[n].chartCenterY||0)-r.height/2,r)&&(s=j(t,o,a,r)):((s=w(o=y[n].chartX+3,a=y[n].chartY-r.height-3,r)?j(t,o,a,r,!0):s)&&X.push(s),(s=w(o=y[n].chartX+3,a=y[n].chartY+3,r)?j(t,o,a,r,!0):s)&&X.push(s),(s=w(o=y[n].chartX-r.width-3,a=y[n].chartY+3,r)?j(t,o,a,r,!0):s)&&X.push(s),w(o=y[n].chartX-r.width-3,a=y[n].chartY-r.height-3,r)&&(s=j(t,o,a,r,!0))),s&&X.push(s);if(e.connectorAllowed&&!X.length&&!Y)for(o=x+m-r.width;x<=o;o-=16)for(a=b;a<b+g-r.height;a+=16)(i=j(t,o,a,r,!0))&&X.push(i);X.length?(X.sort(function(t,e){return e.weight-t.weight}),s=X[0],(S.boxesToAvoid||[]).push({left:s.x,right:s.x+r.width,top:s.y,bottom:s.y+r.height}),(A=Math.sqrt(Math.pow(Math.abs(s.x-(v.x||0)),2)+Math.pow(Math.abs(s.y-(v.y||0)),2)))&&t.labelBySeries&&(c={opacity:S.renderer.forExport?1:0,x:s.x,y:s.y},f={opacity:1},d=void(A<=10&&(f={x:c.x,y:c.y},c={})),p&&((d=L(t.options.animation)).duration*=.2),t.labelBySeries.attr(T(c,{anchorX:s.connectorPoint&&(s.connectorPoint.plotX||0)+x,anchorY:s.connectorPoint&&(s.connectorPoint.plotY||0)+b})).animate(f,d),t.options.kdNow=!0,t.buildKDTree(),(u=t.searchPoint({chartX:s.x,chartY:s.y},!0))&&(v.closest=[u,s.x-(u.plotX||0),s.y-(u.plotY||0)]))):M()}else M()}function w(t,e,r){var o=Math.max(x,P(h,-1/0)),a=Math.min(x+m,P(l,1/0));return o<t&&t<=a-r.width&&b<=e&&e<=b+g-r.height}function M(){v&&(t.labelBySeries=v.destroy())}}),l(S,"afterDrawSeriesLabels"))},S.renderer.forExport||!i?0:i))}function d(t,e,r,o,a){var i,n,s=a&&a.anchorX,a=a&&a.anchorY,h=r/2;return C(s)&&C(a)&&(i=[["M",s,a]],(n=(n=e-a)<0?-o-n:n)<r&&(h=s<t+r/2?n:r-n),e+o<a?i.push(["L",t+h,e+o]):a<e?i.push(["L",t+h,e]):s<t?i.push(["L",t,e+o/2]):t+r<s&&i.push(["L",t+r,e+o/2])),i||[]}return{compose:function(t,e){n.pushUnique(p,t)&&(h(r,"load",u),h(r,"redraw",u)),n.pushUnique(p,e)&&(e.prototype.symbols.connector=d),n.pushUnique(p,s)&&s({plotOptions:{series:{label:a}}})}}}),e(t,"masters/modules/series-label.src.js",[t["Core/Globals.js"],t["Extensions/SeriesLabel/SeriesLabel.js"]],function(t,e){e.compose(t.Chart,t.SVGRenderer)})});