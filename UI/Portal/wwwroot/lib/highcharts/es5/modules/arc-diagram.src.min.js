!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/arc-diagram",["highcharts","highcharts/modules/sankey"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,o,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,o),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Series/ArcDiagram/ArcDiagramPoint.js",[t["Series/NodesComposition.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,o){var i,n,s=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),e=e.seriesTypes.sankey.prototype.pointClass,o=o.extend,s=(s(r,n=e),r.prototype.isValid=function(){return!0},r);function r(){var t=null!==n&&n.apply(this,arguments)||this;return t.fromNode=void 0,t.index=void 0,t.linksFrom=void 0,t.linksTo=void 0,t.options=void 0,t.series=void 0,t.scale=void 0,t.shapeArgs=void 0,t.toNode=void 0,t}return o(s.prototype,{setState:t.setNodeState}),s}),e(t,"Series/ArcDiagram/ArcDiagramSeries.js",[t["Series/ArcDiagram/ArcDiagramPoint.js"],t["Series/Sankey/SankeyColumnComposition.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,e,o,i,n,s){var r,a,p=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=this&&this.__rest||function(t,e){var o={};for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(o[n[i]]=t[n[i]]);return o},d=n.prototype.symbols,n=i.seriesTypes,h=n.column,c=n.sankey,n=s.extend,u=s.merge,m=s.pick,f=s.relativeLength,s=(p(y,a=c),y.prototype.createNodeColumns=function(){var c=this,l=this,u=l.chart,m=e.compose([],l);return m.sankeyColumn.maxLength=u.inverted?u.plotHeight:u.plotWidth,m.sankeyColumn.getTranslationFactor=function(t){for(var e,o,i=m.slice(),n=c.options.minLinkWidth||0,s=0,r=0,a=1,p=0,l=(u.plotSizeX||0)-(t.options.marker&&t.options.marker.lineWidth||0)-(m.length-1)*t.nodePadding;m.length;){for(s=l/m.sankeyColumn.sum(),e=!1,o=m.length;o--;){var h=m[o].getSum()*s*a,d=Math.min(u.plotHeight,u.plotWidth);d<h?a=Math.min(d/h,a):h<n&&(m.splice(o,1),l-=n,h=n,e=!0),p+=h*(1-a)/2,r=Math.max(r,h)}if(!e)break}return m.length=0,i.forEach(function(t){t.scale=a,m.push(t)}),m.sankeyColumn.maxRadius=r,m.sankeyColumn.scale=a,m.sankeyColumn.additionalSpace=p,s},m.sankeyColumn.offset=function(t,e){for(var o=t.series.options.equalNodes,i=m.sankeyColumn.additionalSpace||0,n=l.nodePadding,s=Math.min(u.plotWidth,u.plotHeight,(m.sankeyColumn.maxLength||0)/l.nodes.length-n),r=0;r<m.length;r++){var a=m[r].getSum()*(m.sankeyColumn.scale||0),p=o?s:Math.max(a*e,l.options.minLinkWidth||0),a=a?p+n:0;if(m[r]===t)return{relativeLeft:i+f(t.options.offset||0,a)};i+=a}},l.nodes.forEach(function(t){t.column=0,m.push(t)}),[m]},y.prototype.translateLink=function(o){function t(t,e){return e=(t.offset(o,e)||0)*s,Math.min(t.nodeX+e,t.nodeX+(t.shapeArgs&&t.shapeArgs.height||0)-p)}var e=o.fromNode,i=o.toNode,n=this.chart,s=this.translationFactor,r=o.options,a=this.options,p=m(r.linkWeight,a.linkWeight,Math.max((o.weight||0)*s*e.scale,this.options.minLinkWidth||0)),r=o.series.options.centeredLinks,l=e.nodeY,h=r?e.nodeX+((e.shapeArgs.height||0)-p)/2:t(e,"linksFrom"),r=r?i.nodeX+((i.shapeArgs.height||0)-p)/2:t(i,"linksTo"),i=l,l=(r<h&&(h=(l=[r,h])[0],r=l[1]),a.reversed&&(h=(l=[r,h])[0],r=l[1],i=(n.plotSizeY||0)-i,0),o.shapeType="path",o.linkBase=[h,h+p,r,r+p],(r+p-h)/Math.abs(r+p-h)*m(a.linkRadius,Math.min(Math.abs(r+p-h)/2,e.nodeY-Math.abs(p))));o.shapeArgs={d:[["M",h,i],["A",(r+p-h)/2,l,0,0,1,r+p,i],["L",r,i],["A",(r-h-p)/2,l-p,0,0,0,h+p,i],["Z"]]},o.dlBox={x:h+(r-h)/2,y:i-l,height:p,width:0},o.tooltipPos=n.inverted?[(n.plotSizeY||0)-o.dlBox.y-p/2,(n.plotSizeX||0)-o.dlBox.x]:[o.dlBox.x,o.dlBox.y+p/2],o.y=o.plotY=1,o.x=o.plotX=1,o.color||(o.color=e.color)},y.prototype.translateNode=function(t,e){var o=this.translationFactor,i=this.chart,n=i.inverted?i.plotWidth:i.plotHeight,s=this.options,n=Math.min(i.plotWidth,i.plotHeight,n/t.series.nodes.length-this.nodePadding),r=t.getSum()*(e.sankeyColumn.scale||0),n=s.equalNodes?n:Math.max(r*o,this.options.minLinkWidth||0),a=Math.round(s.marker&&s.marker.lineWidth||0)%2/2,p=e.sankeyColumn.offset(t,o),o=Math.floor(m(p&&p.absoluteLeft,(e.sankeyColumn.left(o)||0)+(p&&p.relativeLeft||0)))+a,p=u(s.marker,t.options.marker),l=p.symbol,h=p.radius,p=parseInt(s.offset,10)*((i.inverted?i.plotWidth:i.plotHeight)-(Math.floor(this.colDistance*(t.column||0)+(p.lineWidth||0)/2)+a+(e.sankeyColumn.scale||0)*(e.sankeyColumn.maxRadius||0)/2))/100;(t.sum=r)?(t.nodeX=o,t.nodeY=p,a=o,e=t.options.width||s.width||n,r=t.options.height||s.height||n,o=p,s.reversed&&(o=(i.plotSizeY||0)-p,i.inverted&&(o=(i.plotSizeY||0)-p)),this.mapOptionsToLevel&&(t.dlOptions=c.getDLOptions({level:this.mapOptionsToLevel[t.level],optionsPoint:t.options})),t.plotX=1,t.plotY=1,t.tooltipPos=i.inverted?[(i.plotSizeY||0)-o-r/2,(i.plotSizeX||0)-a-e/2]:[a+e/2,o+r/2],t.shapeType="path",t.shapeArgs={d:d[l||"circle"](a,o-(h||r)/2,h||e,h||r),width:h||e,height:h||r},t.dlBox={x:a+e/2,y:o,height:0,width:0}):t.dlOptions={enabled:!1}},y.prototype.drawDataLabels=function(){var t;this.options.dataLabels&&(t=this.options.dataLabels.textPath,h.prototype.drawDataLabels.call(this,this.nodes),this.options.dataLabels.textPath=this.options.dataLabels.linkTextPath,h.prototype.drawDataLabels.call(this,this.data),this.options.dataLabels.textPath=t)},y.prototype.pointAttribs=function(t,e){return t&&t.isNode?((t=o.prototype.pointAttribs.apply(this,arguments)).opacity,l(t,["opacity"])):a.prototype.pointAttribs.apply(this,arguments)},y.prototype.markerAttribs=function(t){return t.isNode?a.prototype.markerAttribs.apply(this,arguments):{}},y.defaultOptions=u(c.defaultOptions,{centeredLinks:!1,offset:"100%",equalNodes:!1,reversed:!1,dataLabels:{linkTextPath:{attributes:{startOffset:"25%"}}},marker:{symbol:"circle",fillOpacity:1,lineWidth:0,states:{}}}),y);function y(){var t=null!==a&&a.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.nodeColumns=void 0,t.nodes=void 0,t.points=void 0,t}return n(s.prototype,{orderNodes:!1}),s.prototype.pointClass=t,i.registerSeriesType("arcdiagram",s),s}),e(t,"masters/modules/arc-diagram.src.js",[],function(){})});