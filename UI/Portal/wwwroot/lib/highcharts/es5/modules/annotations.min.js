!function(o){"object"==typeof module&&module.exports?module.exports=o.default=o:"function"==typeof define&&define.amd?define("highcharts/modules/annotations",["highcharts"],function(t){return o(t),o.Highcharts=t,o}):o("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function o(t,o,i,n){t.hasOwnProperty(o)||(t[o]=n.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:o,module:t[o]}})))}o(t,"Extensions/Annotations/AnnotationChart.js",[t["Core/Utilities.js"]],function(n){var e=n.addEvent,s=n.erase,a=n.find,r=n.fireEvent,i=n.pick,l=n.wrap,h=[];function c(t,o){t=this.initAnnotation(t);return this.options.annotations.push(t.options),i(o,!0)&&(t.redraw(),t.graphic.attr({opacity:1})),t}function p(){var d=this;d.plotBoxClip=this.renderer.clipRect(this.plotBox),d.controlPointsGroup=d.renderer.g("control-points").attr({zIndex:99}).clip(d.plotBoxClip).add(),d.options.annotations.forEach(function(o,t){var i;d.annotations.some(function(t){return t.options===o})||(i=d.initAnnotation(o),d.options.annotations[t]=i.options)}),d.drawAnnotations(),e(d,"redraw",d.drawAnnotations),e(d,"destroy",function(){d.plotBoxClip.destroy(),d.controlPointsGroup.destroy()}),e(d,"exportData",function(l){var t=d.annotations,o=(this.options.exporting&&this.options.exporting.csv||{}).columnHeaderFormatter,i=!l.dataRows[1].xValues,n=d.options.lang&&d.options.lang.exportData&&d.options.lang.exportData.annotationHeader,h=l.dataRows[0].length,c=d.options.exporting&&d.options.exporting.csv&&d.options.exporting.csv.annotations&&d.options.exporting.csv.annotations.itemDelimiter,p=d.options.exporting&&d.options.exporting.csv&&d.options.exporting.csv.annotations&&d.options.exporting.csv.annotations.join,e=(t.forEach(function(t){t.options.labelOptions&&t.options.labelOptions.includeInDataExport&&t.labels.forEach(function(t){var r;t.options.text&&(r=t.options.text,t.points.forEach(function(t){var o=t.x,i=t.series.xAxis?t.series.xAxis.index:-1,n=!1;if(-1===i){for(var e=l.dataRows[0].length,s=Array(e),a=0;a<e;++a)s[a]="";s.push(r),s.xValues=[],s.xValues[i]=o,l.dataRows.push(s),n=!0}if(n||l.dataRows.forEach(function(t){!n&&t.xValues&&void 0!==i&&o===t.xValues[i]&&(p&&t.length>h?t[t.length-1]+=c+r:t.push(r),n=!0)}),!n){for(e=l.dataRows[0].length,s=Array(e),a=0;a<e;++a)s[a]="";s[0]=o,s.push(r),s.xValues=[],void 0!==i&&(s.xValues[i]=o),l.dataRows.push(s)}}))})}),0);l.dataRows.forEach(function(t){e=Math.max(e,t.length)});for(var s,a=e-l.dataRows[0].length,r=0;r<a;r++){u=r+1,s=void 0;var u=o&&!1!==(s=o(u))?s:(s=n+" "+u,i?{columnTitle:s,topLevelColumnTitle:s}:s);i?(l.dataRows[0].push(u.topLevelColumnTitle),l.dataRows[1].push(u.columnTitle)):l.dataRows[0].push(u)}})}function u(){this.plotBoxClip.attr(this.plotBox),this.annotations.forEach(function(t){t.redraw(),t.graphic.animate({opacity:1},t.animationConfig)})}function d(o){var t=this.annotations,i="annotations"===o.coll?o:a(t,function(t){return t.options.id===o});i&&(r(i,"remove"),s(this.options.annotations,i.options),s(t,i),i.destroy())}function f(){this.annotations=[],this.options.annotations||(this.options.annotations=[])}function g(t){this.chart.hasDraggedAnnotation||t.apply(this,Array.prototype.slice.call(arguments,1))}return{compose:function(o,t,i){n.pushUnique(h,t)&&(e(t,"afterInit",f),(t=t.prototype).addAnnotation=c,t.callbacks.push(p),t.collectionsWithInit.annotations=[c],t.collectionsWithUpdate.push("annotations"),t.drawAnnotations=u,t.removeAnnotation=d,t.initAnnotation=function(t){t=new(o.types[t.type]||o)(this,t);return this.annotations.push(t),t}),n.pushUnique(h,i)&&l(i.prototype,"onContainerMouseDown",g)}}}),o(t,"Extensions/Annotations/AnnotationDefaults.js",[t["Core/Utilities.js"]],function(t){var o=t.defined;return{visible:!0,animation:{},crop:!0,draggable:"xy",labelOptions:{align:"center",allowOverlap:!1,backgroundColor:"rgba(0, 0, 0, 0.75)",borderColor:"#000000",borderRadius:3,borderWidth:1,className:"highcharts-no-tooltip",crop:!1,formatter:function(){return o(this.y)?""+this.y:"Annotation label"},includeInDataExport:!0,overflow:"justify",padding:5,shadow:!1,shape:"callout",style:{fontSize:"0.7em",fontWeight:"normal",color:"contrast"},useHTML:!1,verticalAlign:"bottom",x:0,y:-16},shapeOptions:{stroke:"rgba(0, 0, 0, 0.75)",strokeWidth:1,fill:"rgba(0, 0, 0, 0.75)",r:0,snap:2},controlPointOptions:{events:{},style:{cursor:"pointer",fill:"#ffffff",stroke:"#000000","stroke-width":2},height:10,symbol:"circle",visible:!1,width:10},events:{},zIndex:6}}),o(t,"Extensions/Annotations/EventEmitter.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(t,o){var a=t.doc,r=t.isTouchDevice,l=o.addEvent,h=o.fireEvent,e=o.objectEach,c=o.pick,i=o.removeEvent;return n.prototype.addEvents=function(){function o(t){l(t,r?"touchstart":"mousedown",function(t){n.onMouseDown(t)},{passive:!1})}var i,n=this;o(this.graphic.element),(n.labels||[]).forEach(function(t){t.options.useHTML&&t.graphic.text&&o(t.graphic.text.element)}),e(n.options.events,function(o,i){function t(t){"click"===i&&n.cancelClick||o.call(n,n.chart.pointer.normalize(t),n.target)}-1===(n.nonDOMEvents||[]).indexOf(i)?n.graphic.on(i,t):l(n,i,t,{passive:!1})}),n.options.draggable&&(l(n,"drag",n.onDrag),!n.graphic.renderer.styledMode)&&(i={cursor:{x:"ew-resize",y:"ns-resize",xy:"move"}[n.options.draggable]},n.graphic.css(i),(n.labels||[]).forEach(function(t){t.options.useHTML&&t.graphic.text&&t.graphic.text.css(i)})),n.isUpdating||h(n,"add")},n.prototype.destroy=function(){this.removeDocEvents(),i(this),this.hcEvents=null},n.prototype.mouseMoveToRadians=function(t,o,i){var n=t.prevChartY-i,e=t.prevChartX-o,i=t.chartY-i,t=t.chartX-o;return this.chart.inverted&&(o=e,e=n,n=o,o=t,t=i,i=o),Math.atan2(i,t)-Math.atan2(n,e)},n.prototype.mouseMoveToScale=function(t,o,i){var n=t.prevChartX-o,e=t.prevChartY-i,o=(t.chartX-o||1)/(n||1),n=(t.chartY-i||1)/(e||1);return this.chart.inverted&&(t=n,n=o,o=t),{x:o,y:n}},n.prototype.mouseMoveToTranslation=function(t){var o,i=t.chartX-t.prevChartX,t=t.chartY-t.prevChartY;return this.chart.inverted&&(o=t,t=i,i=o),{x:i,y:t}},n.prototype.onDrag=function(t){var o;this.chart.isInsidePlot(t.chartX-this.chart.plotLeft,t.chartY-this.chart.plotTop,{visiblePlotOnly:!0})&&(o=this.mouseMoveToTranslation(t),"x"===this.options.draggable&&(o.y=0),"y"===this.options.draggable&&(o.x=0),this.points.length?this.translate(o.x,o.y):(this.shapes.forEach(function(t){return t.translate(o.x,o.y)}),this.labels.forEach(function(t){return t.translate(o.x,o.y)})),this.redraw(!1))},n.prototype.onMouseDown=function(t){var i,o,n,e,s;t.preventDefault&&t.preventDefault(),2!==t.button&&(o=(i=this).chart.pointer,n=(null==(n=null==t?void 0:t.sourceCapabilities)?void 0:n.firesTouchEvents)||!1,e=(t=o.normalize(t)).chartX,s=t.chartY,i.cancelClick=!1,i.chart.hasDraggedAnnotation=!0,i.removeDrag=l(a,r||n?"touchmove":"mousemove",function(t){i.hasDragged=!0,(t=o.normalize(t)).prevChartX=e,t.prevChartY=s,h(i,"drag",t),e=t.chartX,s=t.chartY},r||n?{passive:!1}:void 0),i.removeMouseUp=l(a,r||n?"touchend":"mouseup",function(t){var o=c(i.target&&i.target.annotation,i.target);o&&(o.cancelClick=i.hasDragged),i.cancelClick=i.hasDragged,i.hasDragged=!1,i.chart.hasDraggedAnnotation=!1,h(c(o,i),"afterUpdate"),i.onMouseUp(t)},r||n?{passive:!1}:void 0))},n.prototype.onMouseUp=function(t){var o=this.chart,i=this.target||this,n=o.options.annotations,o=o.annotations.indexOf(i);this.removeDocEvents(),n[o]=i.options},n.prototype.removeDocEvents=function(){this.removeDrag&&(this.removeDrag=this.removeDrag()),this.removeMouseUp&&(this.removeMouseUp=this.removeMouseUp())},n;function n(){}}),o(t,"Extensions/Annotations/ControlPoint.js",[t["Extensions/Annotations/EventEmitter.js"],t["Core/Utilities.js"]],function(t,o){var n,s,i=this&&this.__extends||(n=function(t,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])})(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw TypeError("Class extends value "+String(o)+" is not a constructor or null");function i(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}),e=o.merge,a=o.pick;return i(r,s=t),r.prototype.destroy=function(){s.prototype.destroy.call(this),this.graphic&&(this.graphic=this.graphic.destroy()),this.chart=null,this.target=null,this.options=null},r.prototype.redraw=function(t){this.graphic[t?"animate":"attr"](this.options.positioner.call(this,this.target))},r.prototype.render=function(){var t=this.chart,o=this.options;this.graphic=t.renderer.symbol(o.symbol,0,0,o.width,o.height).add(t.controlPointsGroup).css(o.style),this.setVisibility(o.visible),this.addEvents()},r.prototype.setVisibility=function(t){this.graphic[t?"show":"hide"](),this.options.visible=t},r.prototype.update=function(t){var o=this.chart,i=this.target,n=this.index,t=e(!0,this.options,t);this.destroy(),this.constructor(o,i,t,n),this.render(o.controlPointsGroup),this.redraw()},r;function r(t,o,i,n){var e=s.call(this)||this;return e.graphic=void 0,e.nonDOMEvents=["drag"],e.chart=t,e.target=o,e.options=i,e.index=a(i.index,n),e}}),o(t,"Extensions/Annotations/MockPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,o){var n=t.series.prototype,s=o.defined,a=o.fireEvent;return i.fromPoint=function(t){return new i(t.series.chart,null,{x:t.x,y:t.y,xAxis:t.series.xAxis,yAxis:t.series.yAxis})},i.pointToPixels=function(t,o){var i=t.series,n=i.chart,e=t.plotX||0,s=t.plotY||0;return n.inverted&&(s=t.mock?(e=t.plotY,t.plotX):(e=n.plotWidth-(t.plotY||0),n.plotHeight-(t.plotX||0))),i&&!o&&(e+=(n=i.getPlotBox()).translateX,s+=n.translateY),{x:e,y:s}},i.pointToOptions=function(t){return{x:t.x,y:t.y,xAxis:t.series.xAxis,yAxis:t.series.yAxis}},i.prototype.applyOptions=function(t){this.command=t.command,this.setAxis(t,"x"),this.setAxis(t,"y"),this.refresh()},i.prototype.getLabelConfig=function(){return{x:this.x,y:this.y,point:this}},i.prototype.getOptions=function(){return this.hasDynamicOptions()?this.options(this.target):this.options},i.prototype.hasDynamicOptions=function(){return"function"==typeof this.options},i.prototype.isInsidePlot=function(){var t=this.plotX,o=this.plotY,i=this.series.xAxis,n=this.series.yAxis,e={x:t,y:o,isInsidePlot:!0,options:{}};return i&&(e.isInsidePlot=s(t)&&0<=t&&t<=i.len),n&&(e.isInsidePlot=e.isInsidePlot&&s(o)&&0<=o&&o<=n.len),a(this.series.chart,"afterIsInsidePlot",e),e.isInsidePlot},i.prototype.refresh=function(){var t=this.series,o=t.xAxis,t=t.yAxis,i=this.getOptions();o?(this.x=i.x,this.plotX=o.toPixels(i.x,!0)):(this.x=void 0,this.plotX=i.x),t?(this.y=i.y,this.plotY=t.toPixels(i.y,!0)):(this.y=null,this.plotY=i.y),this.isInside=this.isInsidePlot()},i.prototype.refreshOptions=function(){var t=this.series,o=t.xAxis,t=t.yAxis;this.x=this.options.x=o?this.options.x=o.toValue(this.plotX,!0):this.plotX,this.y=this.options.y=t?t.toValue(this.plotY,!0):this.plotY},i.prototype.rotate=function(t,o,i){var n,e,s;this.hasDynamicOptions()||(n=Math.cos(i),i=Math.sin(i),e=this.plotX-t,s=this.plotY-o,this.plotX=e*n-s*i+t,this.plotY=e*i+s*n+o,this.refreshOptions())},i.prototype.scale=function(t,o,i,n){var e,s;this.hasDynamicOptions()||(e=this.plotX*i,s=this.plotY*n,this.plotX=(1-i)*t+e,this.plotY=(1-n)*o+s,this.refreshOptions())},i.prototype.setAxis=function(t,o){var o=o+"Axis",t=t[o],i=this.series.chart;this.series[o]="object"==typeof t?t:s(t)?i[o][t]||i.get(t):null},i.prototype.toAnchor=function(){var t=[this.plotX,this.plotY,0,0];return this.series.chart.inverted&&(t[0]=this.plotY,t[1]=this.plotX),t},i.prototype.translate=function(t,o,i,n){this.hasDynamicOptions()||(this.plotX+=i,this.plotY+=n,this.refreshOptions())},i;function i(t,o,i){this.plotX=void 0,this.plotY=void 0,this.mock=!0,this.series={visible:!0,chart:t,getPlotBox:n.getPlotBox},this.target=o||null,this.options=i,this.applyOptions(this.getOptions())}}),o(t,"Extensions/Annotations/ControlTarget.js",[t["Extensions/Annotations/ControlPoint.js"],t["Extensions/Annotations/MockPoint.js"],t["Core/Utilities.js"]],function(s,r,a){var t,o;return t=t||{},o=[],t.compose=function(t){a.pushUnique(o,t)&&a.merge(!0,t.prototype,{addControlPoints:i,anchor:n,destroyControlTarget:e,getPointsOptions:l,linkPoints:h,point:c,redrawControlPoints:p,renderControlPoints:u,transform:d,transformPoint:f,translate:g,translatePoint:y})},t;function i(){var i=this,n=this.controlPoints,e=this.options.controlPoints||[];e.forEach(function(t,o){t=a.merge(i.options.controlPointOptions,t);t.index||(t.index=o),e[o]=t,n.push(new s(i.chart,i,t))})}function n(t){var o=t.series.getPlotBox(),i=t.series.chart,n=t.mock?t.toAnchor():i.tooltip&&i.tooltip.getAnchor.call({chart:t.series.chart},t)||[0,0,0,0],n={x:n[0]+(this.options.x||0),y:n[1]+(this.options.y||0),height:n[2]||0,width:n[3]||0};return{relativePosition:n,absolutePosition:a.merge(n,{x:n.x+(t.mock?o.translateX:i.plotLeft),y:n.y+(t.mock?o.translateY:i.plotTop)})}}function e(){this.controlPoints.forEach(function(t){return t.destroy()}),this.chart=null,this.controlPoints=null,this.points=null,this.options=null,this.annotation&&(this.annotation=null)}function l(){var t=this.options;return t.points||t.point&&a.splat(t.point)}function h(){for(var t,o=this.getPointsOptions(),i=this.points,n=o&&o.length||0,e=0;e<n;e++){if(!(t=this.point(o[e],i[e])))return void(i.length=0);t.mock&&t.refresh(),i[e]=t}return i}function c(t,o){return t&&t.series?t:(o&&null!==o.series||(a.isObject(t)?o=new r(this.chart,this,t):a.isString(t)?o=this.chart.get(t)||null:"function"==typeof t&&(o=(i=t.call(o,this)).series?i:new r(this.chart,this,t))),o);var i}function p(o){this.controlPoints.forEach(function(t){return t.redraw(o)})}function u(){this.controlPoints.forEach(function(t){return t.render()})}function d(i,n,e,s,a){var t,r=this;this.chart.inverted&&(t=n,n=e,e=t),this.points.forEach(function(t,o){return r.transformPoint(i,n,e,s,a,o)},this)}function f(t,o,i,n,e,s){var a=this.points[s];(a=a.mock?a:this.points[s]=r.fromPoint(a))[t](o,i,n,e)}function g(t,o){this.transform("translate",null,null,t,o)}function y(t,o,i){this.transformPoint("translate",null,null,t,o,i)}}),o(t,"Extensions/Annotations/Controllables/Controllable.js",[t["Extensions/Annotations/ControlTarget.js"],t["Core/Utilities.js"]],function(t,o){var e=o.merge,o=(i.prototype.attr=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];this.graphic.attr.apply(this.graphic,arguments)},i.prototype.attrsFromOptions=function(t){var o,i,n=this.constructor.attrsMap,e={},s=this.chart.styledMode;for(o in t)i=n[o],void 0===n[o]||s&&-1!==["fill","stroke","stroke-width"].indexOf(i)||(e[i]=t[o]);return e},i.prototype.destroy=function(){this.graphic&&(this.graphic=this.graphic.destroy()),this.tracker&&(this.tracker=this.tracker.destroy()),this.destroyControlTarget()},i.prototype.init=function(t,o,i){this.annotation=t,this.chart=t.chart,this.options=o,this.points=[],this.controlPoints=[],this.index=i,this.linkPoints(),this.addControlPoints()},i.prototype.redraw=function(t){this.redrawControlPoints(t)},i.prototype.render=function(t){this.renderControlPoints()},i.prototype.rotate=function(t,o,i){this.transform("rotate",t,o,i)},i.prototype.scale=function(t,o,i,n){this.transform("scale",t,o,i,n)},i.prototype.setControlPointsVisibility=function(o){this.controlPoints.forEach(function(t){t.setVisibility(o)})},i.prototype.shouldBeDrawn=function(){return!!this.points.length},i.prototype.translateShape=function(t,o,i){var n=this.annotation.chart,e=this.annotation.userOptions,s=n.annotations.indexOf(this.annotation),n=n.options.annotations[s];this.translatePoint(t,o,0),i&&this.translatePoint(t,o,1),n[this.collection][this.index].point=this.options.point,e[this.collection][this.index].point=this.options.point},i.prototype.update=function(t){var o=this.annotation,t=e(!0,this.options,t),i=this.graphic.parentGroup,n=this.constructor;this.destroy(),e(!0,this,new n(o,t,this.index,this.itemType)),this.render(i),this.redraw()},i);function i(t,o,i,n){this.graphic=void 0,this.annotation=t,this.chart=t.chart,this.collection="label"===n?"labels":"shapes",this.controlPoints=[],this.options=o,this.points=[],this.index=i,this.itemType=n,this.init(t,o,i)}return t.compose(o),o}),o(t,"Extensions/Annotations/Controllables/ControllableDefaults.js",[],function(){return{defaultMarkers:{arrow:{tagName:"marker",attributes:{id:"arrow",refY:5,refX:9,markerWidth:10,markerHeight:10},children:[{tagName:"path",attributes:{d:"M 0 0 L 10 5 L 0 10 Z","stroke-width":0}}]},"reverse-arrow":{tagName:"marker",attributes:{id:"reverse-arrow",refY:5,refX:1,markerWidth:10,markerHeight:10},children:[{tagName:"path",attributes:{d:"M 0 5 L 10 0 L 10 10 Z","stroke-width":0}}]}}}}),o(t,"Extensions/Annotations/Controllables/ControllablePath.js",[t["Extensions/Annotations/Controllables/Controllable.js"],t["Extensions/Annotations/Controllables/ControllableDefaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(t,o,i,n){var e,s,a=this&&this.__extends||(e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])})(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw TypeError("Class extends value "+String(o)+" is not a constructor or null");function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}),r=o.defaultMarkers,l=n.addEvent,p=n.defined,h=n.extend,u=n.merge,d=n.uniqueKey,c=[],f=v("marker-end"),g=v("marker-start"),y="rgba(192,192,192,"+(i.svg?1e-4:.002)+")";function v(o){return function(t){this.attr(o,"url(#"+t+")")}}function m(){this.options.defs=u(r,this.options.defs||{})}function x(t,o){var i={attributes:{id:t}},n={stroke:o.color||"none",fill:o.color||"rgba(0, 0, 0, 0.75)"},o=(i.children=o.children&&o.children.map(function(t){return u(n,t)}),u(!0,{attributes:{markerWidth:20,markerHeight:20,refX:0,refY:0,orient:"auto"}},o,i)),i=this.definition(o);return i.id=t,i}return a(b,s=t),b.compose=function(t,o){n.pushUnique(c,t)&&l(t,"afterGetContainer",m),n.pushUnique(c,o)&&(o.prototype.addMarker=x)},b.prototype.toD=function(){var t=this.options.d;if(t)return"function"==typeof t?t.call(this):t;var o,i=this.points,n=i.length,e=[],s=n,a=i[0],r=s&&this.anchor(a).absolutePosition,l=0;if(r)for(e.push(["M",r.x,r.y]);++l<n&&s;)o=(a=i[l]).command||"L",r=this.anchor(a).absolutePosition,"M"===o||"L"===o?e.push([o,r.x,r.y]):"Z"===o&&e.push([o]),s=a.series.visible;return s&&this.graphic?this.chart.renderer.crispLine(e,this.graphic.strokeWidth()):null},b.prototype.shouldBeDrawn=function(){return s.prototype.shouldBeDrawn.call(this)||!!this.options.d},b.prototype.render=function(t){var o=this.options,i=this.attrsFromOptions(o);this.graphic=this.annotation.chart.renderer.path([["M",0,0]]).attr(i).add(t),o.className&&this.graphic.addClass(o.className),this.tracker=this.annotation.chart.renderer.path([["M",0,0]]).addClass("highcharts-tracker-line").attr({zIndex:2}).add(t),this.annotation.chart.styledMode||this.tracker.attr({"stroke-linejoin":"round",stroke:y,fill:y,"stroke-width":this.graphic.strokeWidth()+2*o.snap}),s.prototype.render.call(this),h(this.graphic,{markerStartSetter:g,markerEndSetter:f}),this.setMarkers(this)},b.prototype.redraw=function(t){var o,i;this.graphic&&(i=t?"animate":"attr",(o=this.toD())?(this.graphic[i]({d:o}),this.tracker[i]({d:o})):(this.graphic.attr({d:"M 0 -9000000000"}),this.tracker.attr({d:"M 0 -9000000000"})),this.graphic.placed=this.tracker.placed=!!o),s.prototype.redraw.call(this,t)},b.prototype.setMarkers=function(a){var r=a.options,l=a.chart,h=l.options.defs,t=r.fill,c=p(t)&&"none"!==t?t:r.stroke;["markerStart","markerEnd"].forEach(function(t){var o,i,n,e,s=r[t];if(s){for(n in h)if((s===((o=h[n]).attributes&&o.attributes.id)||s===o.id)&&"marker"===o.tagName){i=o;break}i&&(e=a[t]=l.renderer.addMarker((r.id||d())+"-"+s,u(i,{color:c})),a.attr(t,e.getAttribute("id")))}})},b.attrsMap={dashStyle:"dashstyle",strokeWidth:"stroke-width",stroke:"stroke",fill:"fill",zIndex:"zIndex"},b;function b(t,o,i){t=s.call(this,t,o,i,"shape")||this;return t.type="path",t}}),o(t,"Extensions/Annotations/Controllables/ControllableRect.js",[t["Extensions/Annotations/Controllables/Controllable.js"],t["Extensions/Annotations/Controllables/ControllablePath.js"],t["Core/Utilities.js"]],function(t,o,i){var n,e,s=this&&this.__extends||(n=function(t,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])})(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw TypeError("Class extends value "+String(o)+" is not a constructor or null");function i(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}),i=i.merge;return s(a,e=t),a.prototype.render=function(t){var o=this.attrsFromOptions(this.options);this.graphic=this.annotation.chart.renderer.rect(0,-9e9,0,0).attr(o).add(t),e.prototype.render.call(this)},a.prototype.redraw=function(t){var o;this.graphic&&((o=this.anchor(this.points[0]).absolutePosition)?this.graphic[t?"animate":"attr"]({x:o.x,y:o.y,width:this.options.width,height:this.options.height}):this.attr({x:0,y:-9e9}),this.graphic.placed=!!o),e.prototype.redraw.call(this,t)},a.attrsMap=i(o.attrsMap,{width:"width",height:"height"}),a;function a(t,o,i){t=e.call(this,t,o,i,"shape")||this;return t.type="rect",t.translate=e.prototype.translateShape,t}}),o(t,"Extensions/Annotations/Controllables/ControllableCircle.js",[t["Extensions/Annotations/Controllables/Controllable.js"],t["Extensions/Annotations/Controllables/ControllablePath.js"],t["Core/Utilities.js"]],function(t,o,i){var n,e,s=this&&this.__extends||(n=function(t,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])})(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw TypeError("Class extends value "+String(o)+" is not a constructor or null");function i(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}),i=i.merge;return s(a,e=t),a.prototype.redraw=function(t){var o;this.graphic&&((o=this.anchor(this.points[0]).absolutePosition)?this.graphic[t?"animate":"attr"]({x:o.x,y:o.y,r:this.options.r}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=!!o),e.prototype.redraw.call(this,t)},a.prototype.render=function(t){var o=this.attrsFromOptions(this.options);this.graphic=this.annotation.chart.renderer.circle(0,-9e9,0).attr(o).add(t),e.prototype.render.call(this)},a.prototype.setRadius=function(t){this.options.r=t},a.attrsMap=i(o.attrsMap,{r:"r"}),a;function a(t,o,i){t=e.call(this,t,o,i,"shape")||this;return t.type="circle",t.translate=e.prototype.translateShape,t}}),o(t,"Extensions/Annotations/Controllables/ControllableEllipse.js",[t["Extensions/Annotations/Controllables/Controllable.js"],t["Extensions/Annotations/Controllables/ControllablePath.js"],t["Core/Utilities.js"]],function(t,o,i){var n,e,s=this&&this.__extends||(n=function(t,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])})(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw TypeError("Class extends value "+String(o)+" is not a constructor or null");function i(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}),a=i.merge,r=i.defined;return s(l,e=t),l.prototype.init=function(t,o,i){r(o.yAxis)&&o.points.forEach(function(t){t.yAxis=o.yAxis}),r(o.xAxis)&&o.points.forEach(function(t){t.xAxis=o.xAxis}),e.prototype.init.call(this,t,o,i)},l.prototype.render=function(t){this.graphic=this.annotation.chart.renderer.createElement("ellipse").attr(this.attrsFromOptions(this.options)).add(t),e.prototype.render.call(this)},l.prototype.translate=function(t,o){e.prototype.translateShape.call(this,t,o,!0)},l.prototype.getDistanceFromLine=function(t,o,i,n){return Math.abs((o.y-t.y)*i-(o.x-t.x)*n+o.x*t.y-o.y*t.x)/Math.sqrt((o.y-t.y)*(o.y-t.y)+(o.x-t.x)*(o.x-t.x))},l.prototype.getAttrs=function(t,o){var i=t.x,t=t.y,n=o.x,o=o.y,e=(i+n)/2,s=180*Math.atan((o-t)/(n-i))/Math.PI;return e<i&&(s+=180),{cx:e,cy:(t+o)/2,rx:Math.sqrt((i-n)*(i-n)/4+(t-o)*(t-o)/4),ry:this.getRY(),angle:s}},l.prototype.getRY=function(){var t=this.getYAxis();return r(t)?Math.abs(t.toPixels(this.options.ry)-t.toPixels(0)):this.options.ry},l.prototype.getYAxis=function(){var t=this.options.yAxis;return this.chart.yAxis[t]},l.prototype.getAbsolutePosition=function(t){return this.anchor(t).absolutePosition},l.prototype.redraw=function(t){var o,i;this.graphic&&(o=this.getAbsolutePosition(this.points[0]),i=this.getAbsolutePosition(this.points[1]),i=this.getAttrs(o,i),o?this.graphic[t?"animate":"attr"]({cx:i.cx,cy:i.cy,rx:i.rx,ry:i.ry,rotation:i.angle,rotationOriginX:i.cx,rotationOriginY:i.cy}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=!!o),e.prototype.redraw.call(this,t)},l.prototype.setYRadius=function(t){var o=this.annotation.userOptions.shapes;this.options.ry=t,o&&o[0]&&(o[0].ry=t,o[0].ry=t)},l.attrsMap=a(o.attrsMap,{ry:"ry"}),l;function l(t,o,i){t=e.call(this,t,o,i,"shape")||this;return t.type="ellipse",t}}),o(t,"Extensions/Annotations/Controllables/ControllableLabel.js",[t["Extensions/Annotations/Controllables/Controllable.js"],t["Core/Templating.js"],t["Extensions/Annotations/MockPoint.js"],t["Core/Utilities.js"]],function(t,o,p,i){var n,s,e=this&&this.__extends||(n=function(t,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])})(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw TypeError("Class extends value "+String(o)+" is not a constructor or null");function i(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}),a=o.format,u=i.extend,h=i.isNumber,d=i.pick,r=[];function l(t,o,i,n,e){var s,a,r=e&&e.anchorX,e=e&&e.anchorY,l=i/2;return h(r)&&h(e)&&(s=[["M",r,e]],(a=(a=o-e)<0?-n-a:a)<i&&(l=r<t+i/2?a:i-a),o+n<e?s.push(["L",t+l,o+n]):e<o?s.push(["L",t+l,o]):r<t?s.push(["L",t,o+n/2]):t+i<r&&s.push(["L",t+i,o+n/2])),s||[]}return e(f,s=t),f.alignedPosition=function(t,o){var i,n,e=t.align,s=t.verticalAlign,a=(o.x||0)+(t.x||0),r=(o.y||0)+(t.y||0);return"right"===e?i=1:"center"===e&&(i=2),i&&(a+=(o.width-(t.width||0))/i),"bottom"===s?n=1:"middle"===s&&(n=2),n&&(r+=(o.height-(t.height||0))/n),{x:Math.round(a),y:Math.round(r)}},f.compose=function(t){i.pushUnique(r,t)&&(t.prototype.symbols.connector=l)},f.justifiedOptions=function(t,o,i,n){var e,s=i.align,a=i.verticalAlign,r=!o.box&&o.padding||0,l=o.getBBox(),i={align:s,verticalAlign:a,x:i.x,y:i.y,width:o.width,height:o.height},o=(n.x||0)-t.plotLeft,n=(n.y||0)-t.plotTop;return(e=o+r)<0&&("right"===s?i.align="left":i.x=(i.x||0)-e),(e=o+l.width-r)>t.plotWidth&&("left"===s?i.align="right":i.x=(i.x||0)+t.plotWidth-e),(e=n+r)<0&&("bottom"===a?i.verticalAlign="top":i.y=(i.y||0)-e),(e=n+l.height-r)>t.plotHeight&&("top"===a?i.verticalAlign="bottom":i.y=(i.y||0)+t.plotHeight-e),i},f.prototype.translatePoint=function(t,o){s.prototype.translatePoint.call(this,t,o,0)},f.prototype.translate=function(t,o){var i=this.annotation.chart,n=this.annotation.userOptions,e=i.annotations.indexOf(this.annotation),e=i.options.annotations[e];i.inverted&&(i=t,t=o,o=i),this.options.x+=t,this.options.y+=o,e[this.collection][this.index].x=this.options.x,e[this.collection][this.index].y=this.options.y,n[this.collection][this.index].x=this.options.x,n[this.collection][this.index].y=this.options.y},f.prototype.render=function(t){var o=this.options,i=this.attrsFromOptions(o),n=o.style;this.graphic=this.annotation.chart.renderer.label("",0,-9999,o.shape,null,null,o.useHTML,null,"annotation-label").attr(i).add(t),this.annotation.chart.styledMode||("contrast"===n.color&&(n.color=this.annotation.chart.renderer.getContrast(-1<f.shapesWithoutBackground.indexOf(o.shape)?"#FFFFFF":o.backgroundColor)),this.graphic.css(o.style).shadow(o.shadow)),o.className&&this.graphic.addClass(o.className),this.graphic.labelrank=o.labelrank,s.prototype.render.call(this)},f.prototype.redraw=function(t){var o=this.options,i=this.text||o.format||o.text,n=this.graphic,e=this.points[0];n?(n.attr({text:i?a(String(i),e.getLabelConfig(),this.annotation.chart):o.formatter.call(e,this)}),i=this.anchor(e),(o=this.position(i))?((n.alignAttr=o).anchorX=i.absolutePosition.x,o.anchorY=i.absolutePosition.y,n[t?"animate":"attr"](o)):n.attr({x:0,y:-9999}),n.placed=!!o,s.prototype.redraw.call(this,t)):this.redraw(t)},f.prototype.anchor=function(t){var o=s.prototype.anchor.apply(this,arguments),i=this.options.x||0,n=this.options.y||0;return o.absolutePosition.x-=i,o.absolutePosition.y-=n,o.relativePosition.x-=i,o.relativePosition.y-=n,o},f.prototype.position=function(t){var o,i,n,e=this.graphic,s=this.annotation.chart,a=s.tooltip,r=this.points[0],l=this.options,h=t.absolutePosition,t=t.relativePosition,c=r.series.visible&&p.prototype.isInsidePlot.call(r);return e&&c&&(i=void 0===(i=e.width)?0:i,n=void 0===(n=e.height)?0:n,l.distance&&a?o=a.getPosition.call({chart:s,distance:d(l.distance,16),getPlayingField:a.getPlayingField},i,n,{plotX:t.x,plotY:t.y,negative:r.negative,ttBelow:r.ttBelow,h:t.height||t.width}):l.positioner?o=l.positioner.call(this):(a={x:h.x,y:h.y,width:0,height:0},o=f.alignedPosition(u(l,{width:i,height:n}),a),"justify"===this.options.overflow&&(o=f.alignedPosition(f.justifiedOptions(s,e,l,o),a))),l.crop&&(r=o.x-s.plotLeft,t=o.y-s.plotTop,c=s.isInsidePlot(r,t)&&s.isInsidePlot(r+i,t+n))),c?o:null},f.attrsMap={backgroundColor:"fill",borderColor:"stroke",borderWidth:"stroke-width",zIndex:"zIndex",borderRadius:"r",padding:"padding"},f.shapesWithoutBackground=["connector"],f;function f(t,o,i){return s.call(this,t,o,i,"label")||this}}),o(t,"Extensions/Annotations/Controllables/ControllableImage.js",[t["Extensions/Annotations/Controllables/Controllable.js"],t["Extensions/Annotations/Controllables/ControllableLabel.js"]],function(t,i){var n,e;return(this&&this.__extends||(n=function(t,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])})(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw TypeError("Class extends value "+String(o)+" is not a constructor or null");function i(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}))(o,e=t),o.prototype.render=function(t){var o=this.attrsFromOptions(this.options),i=this.options;this.graphic=this.annotation.chart.renderer.image(i.src,0,-9e9,i.width,i.height).attr(o).add(t),this.graphic.width=i.width,this.graphic.height=i.height,e.prototype.render.call(this)},o.prototype.redraw=function(t){var o;this.graphic&&(o=this.anchor(this.points[0]),(o=i.prototype.position.call(this,o))?this.graphic[t?"animate":"attr"]({x:o.x,y:o.y}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=!!o),e.prototype.redraw.call(this,t)},o.attrsMap={width:"width",height:"height",zIndex:"zIndex"},o;function o(t,o,i){t=e.call(this,t,o,i,"shape")||this;return t.type="image",t.translate=e.prototype.translateShape,t}}),o(t,"Core/Chart/ChartNavigationComposition.js",[],function(){var t,o,i=t={compose:function(t){return t.navigation||(t.navigation=new o(t)),t}};return n.prototype.addUpdate=function(t){this.chart.navigation.updates.push(t)},n.prototype.update=function(o,i){var n=this;this.updates.forEach(function(t){t.call(n.chart,o,i)})},o=n,i.Additions=o,t;function n(t){this.updates=[],this.chart=t}}),o(t,"Extensions/Annotations/NavigationBindingsUtilities.js",[t["Core/Utilities.js"]],function(t){var i=t.defined,e=t.isNumber,s=t.pick,n={backgroundColor:"string",borderColor:"string",borderRadius:"string",color:"string",fill:"string",fontSize:"string",labels:"string",name:"string",stroke:"string",title:"string"};return{annotationsFieldsTypes:n,getAssignedAxis:function(t){return t.filter(function(t){var o=t.axis.getExtremes(),i=o.min,o=o.max,n=s(t.axis.minPointOffset,0);return e(i)&&e(o)&&t.value>=i-n&&t.value<=o+n&&!t.axis.options.isInternal})[0]},getFieldType:function(t,o){t=n[t],o=typeof o;return{string:"text",number:"number",boolean:"checkbox"}[o=i(t)?t:o]}}}),o(t,"Extensions/Annotations/NavigationBindingsDefaults.js",[t["Extensions/Annotations/NavigationBindingsUtilities.js"],t["Core/Utilities.js"]],function(t,o){var s=t.getAssignedAxis,a=o.isNumber,r=o.merge;return{lang:{navigation:{popup:{simpleShapes:"Simple shapes",lines:"Lines",circle:"Circle",ellipse:"Ellipse",rectangle:"Rectangle",label:"Label",shapeOptions:"Shape options",typeOptions:"Details",fill:"Fill",format:"Text",strokeWidth:"Line width",stroke:"Line color",title:"Title",name:"Name",labelOptions:"Label options",labels:"Labels",backgroundColor:"Background color",backgroundColors:"Background colors",borderColor:"Border color",borderRadius:"Border radius",borderWidth:"Border width",style:"Style",padding:"Padding",fontSize:"Font size",color:"Color",height:"Height",shapes:"Shape options"}}},navigation:{bindingsClassName:"highcharts-bindings-container",bindings:{circleAnnotation:{className:"highcharts-circle-annotation",start:function(t){var t=this.chart.pointer.getCoordinates(t),o=s(t.xAxis),t=s(t.yAxis),i=this.chart.options.navigation;if(o&&t)return this.chart.addAnnotation(r({langKey:"circle",type:"basicAnnotation",shapes:[{type:"circle",point:{x:o.value,y:t.value,xAxis:o.axis.index,yAxis:t.axis.index},r:5}]},i.annotationsOptions,i.bindings.circleAnnotation.annotationsOptions))},steps:[function(t,o){var i,n,e=o.options.shapes,e=e&&e[0]&&e[0].point||{};a(e.xAxis)&&a(e.yAxis)&&(n=this.chart.inverted,i=this.chart.xAxis[e.xAxis].toPixels(e.x),e=this.chart.yAxis[e.yAxis].toPixels(e.y),n=Math.max(Math.sqrt(Math.pow(n?e-t.chartX:i-t.chartX,2)+Math.pow(n?i-t.chartY:e-t.chartY,2)),5)),o.update({shapes:[{r:n}]})}]},ellipseAnnotation:{className:"highcharts-ellipse-annotation",start:function(t){var t=this.chart.pointer.getCoordinates(t),o=s(t.xAxis),t=s(t.yAxis),i=this.chart.options.navigation;if(o&&t)return this.chart.addAnnotation(r({langKey:"ellipse",type:"basicAnnotation",shapes:[{type:"ellipse",xAxis:o.axis.index,yAxis:t.axis.index,points:[{x:o.value,y:t.value},{x:o.value,y:t.value}],ry:1}]},i.annotationsOptions,i.bindings.ellipseAnnotation.annotationOptions))},steps:[function(t,o){var o=o.shapes[0],i=o.getAbsolutePosition(o.points[1]);o.translatePoint(t.chartX-i.x,t.chartY-i.y,1),o.redraw(!1)},function(t,o){var o=o.shapes[0],i=o.getAbsolutePosition(o.points[0]),n=o.getAbsolutePosition(o.points[1]),i=o.getDistanceFromLine(i,n,t.chartX,t.chartY),n=o.getYAxis(),t=Math.abs(n.toValue(0)-n.toValue(i));o.setYRadius(t),o.redraw(!1)}]},rectangleAnnotation:{className:"highcharts-rectangle-annotation",start:function(t){var o,i,n,t=this.chart.pointer.getCoordinates(t),e=s(t.xAxis),t=s(t.yAxis);if(e&&t)return o=e.value,i=t.value,e=e.axis.index,t=t.axis.index,n=this.chart.options.navigation,this.chart.addAnnotation(r({langKey:"rectangle",type:"basicAnnotation",shapes:[{type:"path",points:[{xAxis:e,yAxis:t,x:o,y:i},{xAxis:e,yAxis:t,x:o,y:i},{xAxis:e,yAxis:t,x:o,y:i},{xAxis:e,yAxis:t,x:o,y:i},{command:"Z"}]}]},n.annotationsOptions,n.bindings.rectangleAnnotation.annotationsOptions))},steps:[function(t,o){var i=o.options.shapes,i=i&&i[0]&&i[0].points||[],t=this.chart.pointer.getCoordinates(t),n=s(t.xAxis),t=s(t.yAxis);n&&t&&(n=n.value,t=t.value,i[1].x=n,i[2].x=n,i[2].y=t,i[3].y=t,o.update({shapes:[{points:i}]}))}]},labelAnnotation:{className:"highcharts-label-annotation",start:function(t){var t=this.chart.pointer.getCoordinates(t),o=s(t.xAxis),t=s(t.yAxis),i=this.chart.options.navigation;if(o&&t)return this.chart.addAnnotation(r({langKey:"label",type:"basicAnnotation",labelOptions:{format:"{y:.2f}",overflow:"none",crop:!0},labels:[{point:{xAxis:o.axis.index,yAxis:t.axis.index,x:o.value,y:t.value}}]},i.annotationsOptions,i.bindings.labelAnnotation.annotationsOptions))}}},events:{},annotationsOptions:{animation:{defer:0}}}}}),o(t,"Extensions/Annotations/NavigationBindings.js",[t["Core/Chart/ChartNavigationComposition.js"],t["Core/Defaults.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Extensions/Annotations/NavigationBindingsDefaults.js"],t["Extensions/Annotations/NavigationBindingsUtilities.js"],t["Core/Utilities.js"]],function(t,o,i,e,n,s,a){var r=o.setOptions,c=i.format,l=e.doc,h=e.win,p=s.getFieldType,u=a.addEvent,d=a.attr,f=a.defined,g=a.fireEvent,y=a.isArray,v=a.isFunction,m=a.isNumber,x=a.isObject,b=a.merge,A=a.objectEach,C=a.pick,E=[];function P(){this.chart.navigationBindings&&this.chart.navigationBindings.deselectAnnotation()}function w(){this.navigationBindings&&this.navigationBindings.destroy()}function k(){var t=this.options;t&&t.navigation&&t.navigation.bindings&&(this.navigationBindings=new N(this,t.navigation),this.navigationBindings.initEvents(),this.navigationBindings.initUpdate())}function O(){var a,r,t=this.navigationBindings,l="highcharts-disabled-btn";this&&t&&(a=!1,this.series.forEach(function(t){!t.options.isInternal&&t.visible&&(a=!0)}),this.navigationBindings&&this.navigationBindings.container&&this.navigationBindings.container[0]&&(r=this.navigationBindings.container[0],A(t.boundClassNames,function(t,o){var i=r.querySelectorAll("."+o);if(i)for(var n=0;n<i.length;n++){var e=i[n],s=e.className;"normal"===t.noDataState||a?-1!==s.indexOf(l)&&e.classList.remove(l):-1===s.indexOf(l)&&(e.className+=" "+l)}})))}function j(){this.deselectAnnotation()}function B(){this.selectedButtonElement=null}function T(t){var o,i,e=t.prototype.defaultOptions.events&&t.prototype.defaultOptions.events.click;function n(t){var i=this,n=i.chart.navigationBindings,o=n.activeAnnotation;e&&e.call(i,t),o!==i?(n.deselectAnnotation(),(n.activeAnnotation=i).setControlPointsVisibility(!0),g(n,"showPopup",{annotation:i,formType:"annotation-toolbar",options:n.annotationToFields(i),onSubmit:function(t){var o;"remove"===t.actionType?(n.activeAnnotation=!1,n.chart.removeAnnotation(i)):(n.fieldsToOptions(t.fields,t={}),n.deselectAnnotation(),o=t.typeOptions,"measure"===i.options.type&&(o.crosshairY.enabled=0!==o.crosshairY.strokeWidth,o.crosshairX.enabled=0!==o.crosshairX.strokeWidth),i.update(t))}})):g(n,"closePopup"),t.activeAnnotation=!0}b(!0,t.prototype.defaultOptions.events,{click:n,touchstart:function(t){o=t.touches[0].clientX,i=t.touches[0].clientY},touchend:function(t){o&&4<=Math.sqrt(Math.pow(o-t.changedTouches[0].clientX,2)+Math.pow(i-t.changedTouches[0].clientY,2))||n.call(this,t)}})}M.compose=function(t,o){a.pushUnique(E,t)&&(u(t,"remove",P),T(t),A(t.types,function(t){T(t)})),a.pushUnique(E,o)&&(u(o,"destroy",w),u(o,"load",k),u(o,"render",O)),a.pushUnique(E,M)&&(u(M,"closePopup",j),u(M,"deselectButton",B)),a.pushUnique(E,r)&&r(n)},M.prototype.initEvents=function(){var n=this,o=n.chart,t=n.container,i=n.options;n.boundClassNames={},A(i.bindings||{},function(t){n.boundClassNames[t.className]=t}),[].forEach.call(t,function(i){n.eventsToUnbind.push(u(i,"click",function(t){var o=n.getButtonEvents(i,t);o&&!o.button.classList.contains("highcharts-disabled-btn")&&n.bindingsButtonClick(o.button,o.events,t)}))}),A(i.events||{},function(t,o){v(t)&&n.eventsToUnbind.push(u(n,o,t,{passive:!1}))}),n.eventsToUnbind.push(u(o.container,"click",function(t){!o.cancelClick&&o.isInsidePlot(t.chartX-o.plotLeft,t.chartY-o.plotTop,{visiblePlotOnly:!0})&&n.bindingsChartClick(this,t)})),n.eventsToUnbind.push(u(o.container,e.isTouchDevice?"touchmove":"mousemove",function(t){n.bindingsContainerMouseMove(this,t)},e.isTouchDevice?{passive:!1}:void 0))},M.prototype.initUpdate=function(){var o=this;t.compose(this.chart).navigation.addUpdate(function(t){o.update(t)})},M.prototype.bindingsButtonClick=function(t,o,i){var n=this.chart,e=n.renderer.boxWrapper,s=!0;this.selectedButtonElement&&(this.selectedButtonElement.classList===t.classList&&(s=!1),g(this,"deselectButton",{button:this.selectedButtonElement}),this.nextEvent&&(this.currentUserDetails&&"annotations"===this.currentUserDetails.coll&&n.removeAnnotation(this.currentUserDetails),this.mouseMoveEvent=this.nextEvent=!1)),s?(this.selectedButton=o,this.selectedButtonElement=t,g(this,"selectButton",{button:t}),o.init&&o.init.call(this,t,i),(o.start||o.steps)&&n.renderer.boxWrapper.addClass("highcharts-draw-mode")):(n.stockTools&&n.stockTools.toggleButtonActiveClass(t),e.removeClass("highcharts-draw-mode"),this.nextEvent=!1,this.mouseMoveEvent=!1,this.selectedButton=null)},M.prototype.bindingsChartClick=function(t,o){t=this.chart;var i=this.activeAnnotation,n=this.selectedButton,t=t.renderer.boxWrapper;i&&(i.cancelClick||o.activeAnnotation||!o.target.parentNode||function(t,o){var i=h.Element.prototype,n=i.matches||i.msMatchesSelector||i.webkitMatchesSelector,e=null;if(i.closest)e=i.closest.call(t,o);else do{if(n.call(t,o))return t}while(null!==(t=t.parentElement||t.parentNode)&&1===t.nodeType);return e}(o.target,".highcharts-popup")?i.cancelClick&&setTimeout(function(){i.cancelClick=!1},0):g(this,"closePopup")),n&&n.start&&(this.nextEvent?(this.nextEvent(o,this.currentUserDetails),this.steps&&(this.stepIndex++,n.steps[this.stepIndex]?this.mouseMoveEvent=this.nextEvent=n.steps[this.stepIndex]:(g(this,"deselectButton",{button:this.selectedButtonElement}),t.removeClass("highcharts-draw-mode"),n.end&&n.end.call(this,o,this.currentUserDetails),this.nextEvent=!1,this.mouseMoveEvent=!1,this.selectedButton=null))):(this.currentUserDetails=n.start.call(this,o),this.currentUserDetails&&n.steps?(this.stepIndex=0,this.steps=!0,this.mouseMoveEvent=this.nextEvent=n.steps[this.stepIndex]):(g(this,"deselectButton",{button:this.selectedButtonElement}),t.removeClass("highcharts-draw-mode"),this.steps=!1,this.selectedButton=null,n.end&&n.end.call(this,o,this.currentUserDetails))))},M.prototype.bindingsContainerMouseMove=function(t,o){this.mouseMoveEvent&&this.mouseMoveEvent(o,this.currentUserDetails)},M.prototype.fieldsToOptions=function(t,i){return A(t,function(n,t){var e,o=parseFloat(n),s=t.split("."),a=s.length-1;"undefined"!==(n=!m(o)||n.match(/px|em/g)||t.match(/format/g)?n:o)&&(e=i,s.forEach(function(t,o){var i=C(s[o+1],"");a===o?e[t]=n:(e[t]||(e[t]=i.match(/\d/g)?[]:{}),e=e[t])}))}),i},M.prototype.deselectAnnotation=function(){this.activeAnnotation&&(this.activeAnnotation.setControlPointsVisibility(!1),this.activeAnnotation=!1)},M.prototype.annotationToFields=function(a){var o=a.options,n=M.annotationsEditable,r=n.nestedOptions,e=C(o.type,o.shapes&&o.shapes[0]&&o.shapes[0].type,o.labels&&o.labels[0]&&o.labels[0].type,"label"),l=M.annotationsNonEditable[o.langKey]||[],s={langKey:o.langKey,type:e};function h(t,n,i,e,o){var s;i&&f(t)&&-1===l.indexOf(n)&&(0<=(i.indexOf&&i.indexOf(n))||i[n]||!0===i)&&(y(t)?(e[n]=[],t.forEach(function(t,i){x(t)?(e[n][i]={},A(t,function(t,o){h(t,o,r[n],e[n][i],n)})):h(t,0,r[n],e[n],n)})):x(t)?(s={},y(e)?(e.push(s),s[n]={},s=s[n]):e[n]=s,A(t,function(t,o){h(t,o,0===n?i:r[n],s,n)})):"format"===n?e[n]=[c(t,a.labels[0].points[0]).toString(),"text"]:y(e)?e.push([t,p(o,t)]):e[n]=[t,p(n,t)])}return A(o,function(t,i){"typeOptions"===i?(s[i]={},A(o[i],function(t,o){h(t,o,r,s[i],o)})):h(t,i,n[e],s,i)}),s},M.prototype.getClickedClassNames=function(t,o){for(var i,n=o.target,e=[];n&&n.tagName&&((i=d(n,"class"))&&(e=e.concat(i.split(" ").map(function(t){return[t,n]}))),(n=n.parentNode)!==t););return e},M.prototype.getButtonEvents=function(t,o){var i,n=this;return this.getClickedClassNames(t,o).forEach(function(t){n.boundClassNames[t[0]]&&!i&&(i={events:n.boundClassNames[t[0]],button:t[1]})}),i},M.prototype.update=function(t){this.options=b(!0,this.options,t),this.removeEvents(),this.initEvents()},M.prototype.removeEvents=function(){this.eventsToUnbind.forEach(function(t){return t()})},M.prototype.destroy=function(){this.removeEvents()},M.annotationsEditable={nestedOptions:{labelOptions:["style","format","backgroundColor"],labels:["style"],label:["style"],style:["fontSize","color"],background:["fill","strokeWidth","stroke"],innerBackground:["fill","strokeWidth","stroke"],outerBackground:["fill","strokeWidth","stroke"],shapeOptions:["fill","strokeWidth","stroke"],shapes:["fill","strokeWidth","stroke"],line:["strokeWidth","stroke"],backgroundColors:[!0],connector:["fill","strokeWidth","stroke"],crosshairX:["strokeWidth","stroke"],crosshairY:["strokeWidth","stroke"]},circle:["shapes"],ellipse:["shapes"],verticalLine:[],label:["labelOptions"],measure:["background","crosshairY","crosshairX"],fibonacci:[],tunnel:["background","line","height"],pitchfork:["innerBackground","outerBackground"],rect:["shapes"],crookedLine:[],basicAnnotation:["shapes","labelOptions"]},M.annotationsNonEditable={rectangle:["crosshairX","crosshairY","labelOptions"],ellipse:["labelOptions"],circle:["labelOptions"]};var N=M;function M(t,o){this.boundClassNames=void 0,this.selectedButton=void 0,this.chart=t,this.options=o,this.eventsToUnbind=[],this.container=this.chart.container.getElementsByClassName(this.options.bindingsClassName||""),this.container.length||(this.container=l.getElementsByClassName(this.options.bindingsClassName||""))}return N}),o(t,"Shared/BaseForm.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Utilities.js"]],function(n,t){var e=t.addEvent,s=t.createElement;return o.prototype.createPopupContainer=function(t,o){return s("div",{className:o=void 0===o?"highcharts-popup highcharts-no-tooltip":o},void 0,t)},o.prototype.addCloseButton=function(t){var o=this,i=this.iconsURL,n=s("div",{className:t=void 0===t?"highcharts-popup-close":t},void 0,this.container);return n.style["background-image"]="url("+(i.match(/png|svg|jpeg|jpg|gif/gi)?i:i+"close.svg")+")",["click","touchstart"].forEach(function(t){e(n,t,o.closeButtonEvents.bind(o))}),e(document,"keydown",function(t){"Escape"===t.code&&o.closeButtonEvents()}),n},o.prototype.closeButtonEvents=function(){this.closePopup()},o.prototype.showPopup=function(t){void 0===t&&(t="highcharts-annotation-toolbar");var o=this.container,i=this.closeButton;this.type=void 0,o.innerHTML=n.emptyHTML,0<=o.className.indexOf(t)&&(o.classList.remove(t),o.removeAttribute("style")),o.appendChild(i),o.style.display="block",o.style.height=""},o.prototype.closePopup=function(){this.container.style.display="none"},o;function o(t,o){this.iconsURL=o,this.container=this.createPopupContainer(t),this.closeButton=this.addCloseButton()}}),o(t,"Extensions/Annotations/Popup/PopupAnnotations.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(t,o){var p=t.doc,u=t.isFirefox,d=o.createElement,f=o.isArray,g=o.isObject,y=o.objectEach,l=o.pick,v=o.stableSort;function m(i,n,e,t,s,o){var a,r,l,h,c=this;n&&(l=this.addInput,h=this.lang,y(t,function(t,o){a=""!==e?e+"."+o:o,g(t)&&(!f(t)||f(t)&&g(t[0])?((r=h[o]||o).match(/\d/g)||s.push([!0,r,i]),m.call(c,i,n,a,t,s,!1)):s.push([c,a,"annotation",i,t]))}),o&&(v(s,function(t){return t[1].match(/format/g)?-1:1}),u&&s.reverse(),s.forEach(function(t){!0===t[0]?d("span",{className:"highcharts-annotation-title"},void 0,t[2]).appendChild(p.createTextNode(t[1])):(t[4]={value:t[4][0],type:t[4][1]},l.apply(t[0],t.splice(1)))})))}return{addForm:function(t,o,i,n){var e,s,a,r;t&&(e=this.container,s=this.lang,(a=d("h2",{className:"highcharts-popup-main-title"},void 0,e)).appendChild(p.createTextNode(s[o.langKey]||o.langKey||"")),a=d("div",{className:"highcharts-popup-lhs-col highcharts-popup-lhs-full"},void 0,e),r=d("div",{className:"highcharts-popup-bottom-row"},void 0,e),m.call(this,a,t,"",o,[],!0),this.addButton(r,n?s.addButton||"Add":s.saveButton||"Save",n?"add":"save",e,i))},addToolbar:function(t,o,i){var n=this,e=this.lang,s=this.container,a=this.showForm,r="highcharts-annotation-toolbar",r=(-1===s.className.indexOf(r)&&(s.className+=" "+r+" highcharts-no-mousewheel"),t&&(s.style.top=t.plotTop+10+"px"),d("span",void 0,void 0,s).appendChild(p.createTextNode(l(e[o.langKey]||o.langKey,o.shapes&&o.shapes[0].type,""))),this.addButton(s,e.removeButton||"Remove","remove",s,i));r.className+=" highcharts-annotation-remove-button",r.style["background-image"]="url("+this.iconsURL+"destroy.svg)",(r=this.addButton(s,e.editButton||"Edit","edit",s,function(){a.call(n,"annotation-edit",t,o,i)})).className+=" highcharts-annotation-edit-button",r.style["background-image"]="url("+this.iconsURL+"edit.svg)"}}}),o(t,"Extensions/Annotations/Popup/PopupIndicators.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Extensions/Annotations/NavigationBindingsUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(u,t,o,i,n){var c,d=t.doc,p=o.annotationsFieldsTypes,e=i.seriesTypes,f=n.addEvent,g=n.createElement,y=n.defined,v=n.isArray,m=n.isObject,x=n.objectEach,b=n.stableSort,r=((t=c=c||{})[t["params.algorithm"]=0]="params.algorithm",t[t["params.average"]=1]="params.average",{"algorithm-pivotpoints":["standard","fibonacci","camarilla"],"average-disparityindex":["sma","ema","dema","tema","wma"]});function a(t){g("div",{className:"highcharts-popup-lhs-col"},void 0,t);t=g("div",{className:"highcharts-popup-rhs-col"},void 0,t);g("div",{className:"highcharts-popup-rhs-col-wrapper"},void 0,t)}function l(e,t,o,i){var s,n,a,r,l=this,h=l.lang,c=t.querySelectorAll(".highcharts-popup-lhs-col")[0],t=t.querySelectorAll(".highcharts-popup-rhs-col")[0],p="edit"===o,o=p?e.series:e.options.plotOptions||{};!e&&o||(n=[],p||v(o)?v(o)&&(n=function(t){var o=[];return t.forEach(function(t){t.is("sma")&&o.push({indicatorFullName:t.name,indicatorType:t.type,series:t})}),o}.call(this,o)):n=function(t,s){this.indicators;var a,o=this.chart&&this.chart.options.lang,r=o&&o.navigation&&o.navigation.popup&&o.navigation.popup.indicatorAliases,l=[];return x(t,function(t,o){var i,n,e=t&&t.options;(t.params||e&&e.params)&&(o=(e=P(t,o)).indicatorFullName,e=e.indicatorType,s?(i=RegExp(s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i"),n=r&&r[e]&&r[e].join(" ")||"",(o.match(i)||n.match(i))&&(a={indicatorFullName:o,indicatorType:e,series:t},l.push(a))):(a={indicatorFullName:o,indicatorType:e,series:t},l.push(a)))}),l}.call(this,o,i),b(n,function(t,o){t=t.indicatorFullName.toLowerCase(),o=o.indicatorFullName.toLowerCase();return t<o?-1:o<t?1:0}),c.children[1]&&c.children[1].remove(),a=g("ul",{className:"highcharts-indicator-list"},void 0,c),r=t.querySelectorAll(".highcharts-popup-rhs-col-wrapper")[0],n.forEach(function(t){var o=t.indicatorFullName,i=t.indicatorType,n=t.series;(s=g("li",{className:"highcharts-indicator-list"},void 0,a)).appendChild(d.createTextNode(o)),["click","touchstart"].forEach(function(t){f(s,t,function(){var t=r.parentNode.children[1];(function(t,o,i,n){var e=o.params||o.options.params;n.innerHTML=u.emptyHTML,g("h3",{className:"highcharts-indicator-title"},void 0,n).appendChild(d.createTextNode(P(o,i).indicatorFullName)),g("input",{type:"hidden",name:"highcharts-type-"+i,value:i},void 0,n),w.call(this,i,"series",t,n,o,o.linkedParent&&o.linkedParent.options.id),e.volumeSeriesID&&w.call(this,i,"volume",t,n,o,o.linkedParent&&e.volumeSeriesID),A.call(this,t,"params",e,i,n)}).call(l,e,n,i,r),t&&(t.style.display="block"),p&&n.options&&g("input",{type:"hidden",name:"highcharts-id-"+i,value:n.options.id},void 0,r).setAttribute("highcharts-data-series-id",n.options.id)})})}),0<a.childNodes.length?a.childNodes[0].click():p||(u.setElementHTML(r.parentNode.children[0],h.noFilterMatch||""),r.parentNode.children[1].style.display="none"))}function A(e,s,t,a,r){var l,h=this;e&&(l=this.addInput,x(t,function(t,o){p[o];var i,n=s+"."+o;y(t)&&n&&(m(t)&&(l.call(h,n,a,r,{}),A.call(h,e,n,t,a,r)),n in c?(i=C.call(h,a,n,r),E.call(h,e,s,i,a,o,t)):"params.volumeSeriesID"==n||v(t)||l.call(h,n,a,r,{value:t,type:"number"}))}))}function h(o,t){function i(t){l.call(n,o,n.container,"add",t)}var n=this,t=t.querySelectorAll(".highcharts-popup-lhs-col")[0],e=this.lang.clearFilter,t=g("div",{className:"highcharts-input-wrapper"},void 0,t),s=this.addInput("searchIndicators","input",t,{value:"",type:"text",htmlFor:"search-indicators",labelClassName:"highcharts-input-search-indicators-label"}),a=g("a",{textContent:e},void 0,t);s.classList.add("highcharts-input-search-indicators"),a.classList.add("clear-filter-button"),f(s,"input",function(t){i(this.value),this.value.length?a.style.display="inline-block":a.style.display="none"}),["click","touchstart"].forEach(function(t){f(a,t,function(){s.value="",i(""),a.style.display="none"})})}function C(t,o,i){var n=o.split("."),n=n[n.length-1],t="highcharts-"+o+"-type-"+t,e=this.lang,e=(g("label",{htmlFor:t},null,i).appendChild(d.createTextNode(e[n]||o)),g("select",{name:t,className:"highcharts-popup-field",id:"highcharts-select-"+o},null,i));return e.setAttribute("id","highcharts-select-"+o),e}function E(t,n,e,o,i,s,a){"series"===n||"volume"===n?t.series.forEach(function(t){var o=t.options,i=o.name||o.params?t.name:o.id||"";"highcharts-navigator-series"!==o.id&&o.id!==(a&&a.options&&a.options.id)&&(y(s)||"volume"!==n||"column"!==t.type||(s=o.id),g("option",{value:o.id},void 0,e).appendChild(d.createTextNode(i)))}):o&&i&&r[i+"-"+o].forEach(function(t){g("option",{value:t},void 0,e).appendChild(d.createTextNode(t))}),y(s)&&(e.value=s)}function P(t,o){var i=t.options,n=e[o]&&e[o].prototype.nameBase||o.toUpperCase();return i&&i.type&&(o=t.options.type,n=t.name),{indicatorFullName:n,indicatorType:o}}function w(t,o,i,n,e,s){this.indicators,i&&(t=C.call(this,t,o,n),E.call(this,i,o,t,void 0,void 0,void 0,e),y(s)&&(t.value=s))}return{addForm:function(t,o,i){var n,e,s=this.lang;t&&(this.tabs.init.call(this,t),a((e=this.container.querySelectorAll(".highcharts-tab-item-content"))[0]),h.call(this,t,e[0]),l.call(this,t,e[0],"add"),n=e[0].querySelectorAll(".highcharts-popup-rhs-col")[0],this.addButton(n,s.addButton||"add","add",n,i),a(e[1]),l.call(this,t,e[1],"edit"),n=e[1].querySelectorAll(".highcharts-popup-rhs-col")[0],this.addButton(n,s.saveButton||"save","edit",n,i),this.addButton(n,s.removeButton||"remove","remove",n,i))},getAmount:function(){var o=0;return this.series.forEach(function(t){(t.params||t.options.params)&&o++}),o}}}),o(t,"Extensions/Annotations/Popup/PopupTabs.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(t,o){var s=t.doc,e=o.addEvent,a=o.createElement;function i(){return a("div",{className:"highcharts-tab-item-content highcharts-no-mousewheel"},void 0,this.container)}function n(t,o){var i=this.container,n=this.lang,e="highcharts-tab-item",o=(0===o&&(e+=" highcharts-tab-disabled"),a("span",{className:e},void 0,i));return o.appendChild(s.createTextNode(n[t+"Button"]||t)),o.setAttribute("highcharts-data-tab-type",t),o}function r(t,o){var i=this.container.querySelectorAll(".highcharts-tab-item-content");t.className+=" highcharts-tab-item-active",i[o].className+=" highcharts-tab-item-show"}function l(t){var n=this;this.container.querySelectorAll(".highcharts-tab-item").forEach(function(o,i){0===t&&"edit"===o.getAttribute("highcharts-data-tab-type")||["click","touchstart"].forEach(function(t){e(o,t,function(){(function(){for(var t=this.container,o=t.querySelectorAll(".highcharts-tab-item"),i=t.querySelectorAll(".highcharts-tab-item-content"),n=0;n<o.length;n++)o[n].classList.remove("highcharts-tab-item-active"),i[n].classList.remove("highcharts-tab-item-show")}).call(n),r.call(n,this,i)})})})}return{init:function(t){var o;t&&(t=this.indicators.getAmount.call(t),o=n.call(this,"add"),n.call(this,"edit",t),i.call(this),i.call(this),l.call(this,t),r.call(this,o,0))}}}),o(t,"Extensions/Annotations/Popup/Popup.js",[t["Shared/BaseForm.js"],t["Core/Globals.js"],t["Core/Defaults.js"],t["Extensions/Annotations/Popup/PopupAnnotations.js"],t["Extensions/Annotations/Popup/PopupIndicators.js"],t["Extensions/Annotations/Popup/PopupTabs.js"],t["Core/Utilities.js"]],function(t,o,i,n,e,s,a){var r,l,h=this&&this.__extends||(r=function(t,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])})(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw TypeError("Class extends value "+String(o)+" is not a constructor or null");function i(){this.constructor=t}r(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}),c=o.doc,p=i.getOptions,u=a.addEvent,d=a.createElement,o=a.extend,f=a.fireEvent,g=a.pick,i=(h(y,l=t),y.prototype.addInput=function(t,o,i,n){var e=t.split("."),e=e[e.length-1],s=this.lang,o="highcharts-"+o+"-"+g(n.htmlFor,e),s=(e.match(/^\d+$/)||d("label",{htmlFor:o,className:n.labelClassName},void 0,i).appendChild(c.createTextNode(s[e]||e)),d("input",{name:o,value:n.value,type:n.type,className:"highcharts-popup-field"},void 0,i));return s.setAttribute("highcharts-data-name",t),s},y.prototype.closeButtonEvents=function(){var t;this.chart?(t=this.chart.navigationBindings,f(t,"closePopup"),t&&t.selectedButtonElement&&f(t,"deselectButton",{button:t.selectedButtonElement})):l.prototype.closeButtonEvents.call(this)},y.prototype.addButton=function(t,o,s,a,r){var l=this,i=d("button",void 0,void 0,t);return i.appendChild(c.createTextNode(o)),r&&["click","touchstart"].forEach(function(t){u(i,t,function(){var t,o,i,n,e;return l.closePopup(),r((t=Array.prototype.slice.call(a.querySelectorAll("input")),o=Array.prototype.slice.call(a.querySelectorAll("select")),i=a.querySelectorAll("#highcharts-select-series > option:checked")[0],n=a.querySelectorAll("#highcharts-select-volume > option:checked")[0],e={actionType:s,linkedTo:i&&i.getAttribute("value")||"",fields:{}},t.forEach(function(t){var o=t.getAttribute("highcharts-data-name");t.getAttribute("highcharts-data-series-id")?e.seriesId=t.value:o?e.fields[o]=t.value:e.type=t.value}),o.forEach(function(t){var o=t.id;"highcharts-select-series"!==o&&"highcharts-select-volume"!==o&&(o=o.split("highcharts-select-")[1],e.fields[o]=t.value)}),n&&(e.fields["params.volumeSeriesID"]=n.getAttribute("value")||""),e))})}),i},y.prototype.showForm=function(t,o,i,n){o&&(this.showPopup(),"indicators"===t&&this.indicators.addForm.call(this,o,i,n),"annotation-toolbar"===t&&this.annotations.addToolbar.call(this,o,i,n),"annotation-edit"===t&&this.annotations.addForm.call(this,o,i,n),"flag"===t&&this.annotations.addForm.call(this,o,i,n,!0),this.type=t,this.container.style.height=this.container.offsetHeight+"px")},y);function y(t,o,i){t=l.call(this,t,o)||this;return t.chart=i,t.lang=(p().lang.navigation||{}).popup||{},u(t.container,"mousedown",function(){var t,o=i&&i.navigationBindings&&i.navigationBindings.activeAnnotation;o&&(o.cancelClick=!0,t=u(c,"click",function(){setTimeout(function(){o.cancelClick=!1},0),t()}))}),t}return o(i.prototype,{annotations:n,indicators:e,tabs:s}),i}),o(t,"Extensions/Annotations/Popup/PopupComposition.js",[t["Extensions/Annotations/Popup/Popup.js"],t["Core/Utilities.js"]],function(o,i){var n=i.addEvent,e=i.wrap,s=[];function a(){this.popup&&this.popup.closePopup()}function r(t){this.popup||(this.popup=new o(this.chart.container,this.chart.options.navigation.iconsURL||this.chart.options.stockTools&&this.chart.options.stockTools.gui.iconsURL||"https://code.highcharts.com/11.2.0/gfx/stock-icons/",this.chart)),this.popup.showForm(t.formType,this.chart,t.options,t.onSubmit)}function l(t,o){this.inClass(o.target,"highcharts-popup")||t.apply(this,Array.prototype.slice.call(arguments,1))}return{compose:function(t,o){i.pushUnique(s,t)&&(n(t,"closePopup",a),n(t,"showPopup",r)),i.pushUnique(s,o)&&e(o.prototype,"onContainerMouseDown",l)}}}),o(t,"Extensions/Annotations/Annotation.js",[t["Core/Animation/AnimationUtilities.js"],t["Extensions/Annotations/AnnotationChart.js"],t["Extensions/Annotations/AnnotationDefaults.js"],t["Extensions/Annotations/Controllables/ControllableRect.js"],t["Extensions/Annotations/Controllables/ControllableCircle.js"],t["Extensions/Annotations/Controllables/ControllableEllipse.js"],t["Extensions/Annotations/Controllables/ControllablePath.js"],t["Extensions/Annotations/Controllables/ControllableImage.js"],t["Extensions/Annotations/Controllables/ControllableLabel.js"],t["Extensions/Annotations/ControlPoint.js"],t["Extensions/Annotations/ControlTarget.js"],t["Extensions/Annotations/EventEmitter.js"],t["Extensions/Annotations/MockPoint.js"],t["Extensions/Annotations/NavigationBindings.js"],t["Extensions/Annotations/Popup/PopupComposition.js"],t["Core/Utilities.js"]],function(t,n,o,i,e,s,a,r,l,h,c,p,u,d,f,g){var y,v=this&&this.__extends||(y=function(t,o){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])})(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw TypeError("Class extends value "+String(o)+" is not a constructor or null");function i(){this.constructor=t}y(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}),m=t.getDeferredAnimation,x=g.destroyObjectProperties,b=g.erase,A=g.fireEvent,C=g.merge,E=g.pick,P=g.splat;function w(o,n){var e={};return["labels","shapes"].forEach(function(t){var i=o[t];i&&(n[t]?e[t]=P(n[t]).map(function(t,o){return C(i[o],t)}):e[t]=o[t])}),e}v(O,k=p),O.compose=function(t,o,i){n.compose(O,t,o),l.compose(i),a.compose(t,i),d.compose(O,t),f.compose(d,o)},O.prototype.addClipPaths=function(){this.setClipAxes(),this.clipXAxis&&this.clipYAxis&&this.options.crop&&(this.clipRect=this.chart.renderer.clipRect(this.getClipBox()))},O.prototype.addLabels=function(){var i=this,n=this.options.labels||[];n.forEach(function(t,o){t=i.initLabel(t,o);C(!0,n[o],t.options)})},O.prototype.addShapes=function(){var i=this,n=this.options.shapes||[];n.forEach(function(t,o){t=i.initShape(t,o);C(!0,n[o],t.options)})},O.prototype.destroy=function(){function t(t){t.destroy()}var o=this.chart;this.labels.forEach(t),this.shapes.forEach(t),this.clipXAxis=null,this.clipYAxis=null,b(o.labelCollectors,this.labelCollector),k.prototype.destroy.call(this),this.destroyControlTarget(),x(this,o)},O.prototype.destroyItem=function(t){b(this[t.itemType+"s"],t),t.destroy()},O.prototype.getClipBox=function(){if(this.clipXAxis&&this.clipYAxis)return{x:this.clipXAxis.left,y:this.clipYAxis.top,width:this.clipXAxis.width,height:this.clipYAxis.height}},O.prototype.initProperties=function(t,o){this.setOptions(o);var i=w(this.options,o);this.options.labels=i.labels,this.options.shapes=i.shapes,this.chart=t,this.points=[],this.controlPoints=[],this.coll="annotations",this.userOptions=o,this.labels=[],this.shapes=[]},O.prototype.init=function(t,o,i){void 0===i&&(i=this.index);var n=this.chart,e=this.options.animation;this.index=i,this.linkPoints(),this.addControlPoints(),this.addShapes(),this.addLabels(),this.setLabelCollector(),this.animationConfig=m(n,e)},O.prototype.initLabel=function(t,o){t=new l(this,C(this.options.labelOptions,{controlPointOptions:this.options.controlPointOptions},t),o);return t.itemType="label",this.labels.push(t),t},O.prototype.initShape=function(t,o){t=C(this.options.shapeOptions,{controlPointOptions:this.options.controlPointOptions},t),t=new O.shapesMap[t.type](this,t,o);return t.itemType="shape",this.shapes.push(t),t},O.prototype.redraw=function(t){this.linkPoints(),this.graphic||this.render(),this.clipRect&&this.clipRect.animate(this.getClipBox()),this.redrawItems(this.shapes,t),this.redrawItems(this.labels,t),this.redrawControlPoints(t)},O.prototype.redrawItem=function(t,o){var i;t.linkPoints(),t.shouldBeDrawn()?(t.graphic||this.renderItem(t),t.redraw(E(o,!0)&&t.graphic.placed),t.points.length&&(o=t.graphic,i=t.points.some(function(t){return!1!==t.series.visible&&!1!==t.visible}),o&&(i?"hidden"===o.visibility&&o.show():o.hide()))):this.destroyItem(t)},O.prototype.redrawItems=function(t,o){for(var i=t.length;i--;)this.redrawItem(t[i],o)},O.prototype.remove=function(){return this.chart.removeAnnotation(this)},O.prototype.render=function(){var t=this.chart.renderer;this.graphic=t.g("annotation").attr({opacity:0,zIndex:this.options.zIndex,visibility:this.options.visible?"inherit":"hidden"}).add(),this.shapesGroup=t.g("annotation-shapes").add(this.graphic),this.options.crop&&this.shapesGroup.clip(this.chart.plotBoxClip),this.labelsGroup=t.g("annotation-labels").attr({translateX:0,translateY:0}).add(this.graphic),this.addClipPaths(),this.clipRect&&this.graphic.clip(this.clipRect),this.renderItems(this.shapes),this.renderItems(this.labels),this.addEvents(),this.renderControlPoints()},O.prototype.renderItem=function(t){t.render("label"===t.itemType?this.labelsGroup:this.shapesGroup)},O.prototype.renderItems=function(t){for(var o=t.length;o--;)this.renderItem(t[o])},O.prototype.setClipAxes=function(){var i=this.chart.xAxis,n=this.chart.yAxis,t=(this.options.labels||[]).concat(this.options.shapes||[]).reduce(function(t,o){o=o&&(o.point||o.points&&o.points[0]);return[i[o&&o.xAxis]||t[0],n[o&&o.yAxis]||t[1]]},[]);this.clipXAxis=t[0],this.clipYAxis=t[1]},O.prototype.setControlPointsVisibility=function(o){function t(t){t.setControlPointsVisibility(o)}this.controlPoints.forEach(function(t){t.setVisibility(o)}),this.shapes.forEach(t),this.labels.forEach(t)},O.prototype.setLabelCollector=function(){var t=this;t.labelCollector=function(){return t.labels.reduce(function(t,o){return o.options.allowOverlap||t.push(o.graphic),t},[])},t.chart.labelCollectors.push(t.labelCollector)},O.prototype.setOptions=function(t){this.options=C(this.defaultOptions,t)},O.prototype.setVisibility=function(t){var o=this.options,i=this.chart.navigationBindings,n=E(t,!o.visible);this.graphic.attr("visibility",n?"inherit":"hidden"),n||(this.shapes.forEach(t=function(t){t.setControlPointsVisibility(n)}),this.labels.forEach(t),i.activeAnnotation===this&&i.popup&&"annotation-toolbar"===i.popup.type&&A(i,"closePopup")),o.visible=n},O.prototype.update=function(t,o){var i=this.chart,n=w(this.userOptions,t),e=i.annotations.indexOf(this),t=C(!0,this.userOptions,t);t.labels=n.labels,t.shapes=n.shapes,this.destroy(),this.initProperties(i,t),this.init(i,t),i.options.annotations[e]=t,this.isUpdating=!0,E(o,!0)&&i.redraw(),A(this,"afterUpdate"),this.isUpdating=!1},O.ControlPoint=h,O.MockPoint=u,O.shapesMap={rect:i,circle:e,ellipse:s,path:a,image:r},O.types={};var k,t=O;function O(t,o){var i=k.call(this)||this,o=(i.coll="annotations",i.animationConfig=void 0,i.graphic=void 0,i.group=void 0,i.labelCollector=void 0,i.labelsGroup=void 0,i.shapesGroup=void 0,i.chart=t,i.points=[],i.controlPoints=[],i.coll="annotations",i.index=-1,i.labels=[],i.shapes=[],i.options=C(i.defaultOptions,o),i.userOptions=o,w(i.options,o));return i.options.labels=o.labels,i.options.shapes=o.shapes,i.init(t,i.options),i}return t.prototype.defaultOptions=o,t.prototype.nonDOMEvents=["add","afterUpdate","drag","remove"],c.compose(t),t}),o(t,"masters/modules/annotations.src.js",[t["Core/Globals.js"],t["Extensions/Annotations/Annotation.js"]],function(t,o){(t.Annotation=o).compose(t.Chart,t.Pointer,t.SVGRenderer)})});