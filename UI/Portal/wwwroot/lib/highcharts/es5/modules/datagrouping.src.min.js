!function(o){"object"==typeof module&&module.exports?module.exports=o.default=o:"function"==typeof define&&define.amd?define("highcharts/modules/datagrouping",["highcharts"],function(t){return o(t),o.Highcharts=t,o}):o("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function o(t,o,a,i){t.hasOwnProperty(o)||(t[o]=i.apply(null,a),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:o,module:t[o]}})))}o(t,"Extensions/DataGrouping/ApproximationRegistry.js",[],function(){return{}}),o(t,"Extensions/DataGrouping/ApproximationDefaults.js",[t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Core/Utilities.js"]],function(e,t){var o=t.arrayMax,a=t.arrayMin,i=t.correctFloat,n=t.extend,r=t.isNumber;function s(t){var o=t.length,t=p(t);return t=r(t)&&o?i(t/o):t}function p(t){var o,a=t.length;if(!a&&t.hasNulls)o=null;else if(a)for(o=0;a--;)o+=t[a];return o}t={average:s,averages:function(){var o=[];return[].forEach.call(arguments,function(t){o.push(s(t))}),void 0===o[0]?void 0:o},close:function(t){return t.length?t[t.length-1]:t.hasNulls?null:void 0},high:function(t){return t.length?o(t):t.hasNulls?null:void 0},hlc:function(t,o,a){if(t=e.high(t),o=e.low(o),a=e.close(a),r(t)||r(o)||r(a))return[t,o,a]},low:function(t){return t.length?a(t):t.hasNulls?null:void 0},ohlc:function(t,o,a,i){if(t=e.open(t),o=e.high(o),a=e.low(a),i=e.close(i),r(t)||r(o)||r(a)||r(i))return[t,o,a,i]},open:function(t){return t.length?t[0]:t.hasNulls?null:void 0},range:function(t,o){return t=e.low(t),o=e.high(o),r(t)||r(o)?[t,o]:null===t&&null===o?null:void 0},sum:p};return n(e,t),t}),o(t,"Extensions/DataGrouping/DataGroupingDefaults.js",[],function(){return{common:{groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %e %b, %H:%M:%S.%L","%A, %e %b, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %e %b, %H:%M:%S","%A, %e %b, %H:%M:%S","-%H:%M:%S"],minute:["%A, %e %b, %H:%M","%A, %e %b, %H:%M","-%H:%M"],hour:["%A, %e %b, %H:%M","%A, %e %b, %H:%M","-%H:%M"],day:["%A, %e %b %Y","%A, %e %b","-%A, %e %b %Y"],week:["Week from %A, %e %b %Y","%A, %e %b","-%A, %e %b %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},seriesSpecific:{line:{},spline:{},area:{},areaspline:{},arearange:{},column:{groupPixelWidth:10},columnrange:{groupPixelWidth:10},candlestick:{groupPixelWidth:10},ohlc:{groupPixelWidth:5},hlc:{groupPixelWidth:5},heikinashi:{groupPixelWidth:10}},units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]]}}),o(t,"Extensions/DataGrouping/DataGroupingAxisComposition.js",[t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Core/Utilities.js"]],function(r,o){var i,a=o.addEvent,e=o.extend,n=o.merge,s=o.pick,p=[];function u(o){var a=this,t=a.series;t.forEach(function(t){t.groupPixelWidth=void 0}),t.forEach(function(t){t.groupPixelWidth=a.getGroupPixelWidth&&a.getGroupPixelWidth(),t.groupPixelWidth&&(t.hasProcessed=!0),t.applyGrouping(!!o.hasExtremesChanged)})}function l(){for(var t,o,a=this.series,i=a.length,e=0,n=!1;i--;)(o=a[i].options.dataGrouping)&&(e=Math.max(e,s(o.groupPixelWidth,r.common.groupPixelWidth)),t=(a[i].processedXData||a[i].data).length,(a[i].groupPixelWidth||t>this.chart.plotSizeX/e||t&&o.forced)&&(n=!0));return n?e:0}function d(){this.series.forEach(function(t){t.hasProcessed=!1})}function h(o,t){var a;if(t=s(t,!0),o=o||{forced:!1,units:null},this instanceof i)for(a=this.series.length;a--;)this.series[a].update({dataGrouping:o},!1);else this.chart.options.series.forEach(function(t){t.dataGrouping="boolean"==typeof o?o:n(o,t.dataGrouping)});this.ordinal&&(this.ordinal.slope=void 0),t&&this.chart.redraw()}return{compose:function(t){i=t,o.pushUnique(p,t)&&(a(t,"afterSetScale",d),a(t,"postProcessData",u),e(t.prototype,{applyGrouping:u,getGroupPixelWidth:l,setDataGrouping:h}))}}}),o(t,"Extensions/DataGrouping/DataGroupingSeriesComposition.js",[t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Core/Axis/DateTimeAxis.js"],t["Core/Defaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(C,S,E,s,t,a){var P=t.series.prototype,i=a.addEvent,W=a.defined,b=a.error,e=a.extend,k=a.isNumber,H=a.merge,j=a.pick,o=P.generatePoints,n=[];function r(t){var o=this,a=o.chart,i=o.options.dataGrouping,e=!1!==o.allowDG&&i&&j(i.enabled,a.options.isStock),n=o.reserveSpace(),r=this.currentDataGrouping,s=!1,p=(e&&!o.requireSorting&&(o.requireSorting=s=!0),!1==(t=t,!((p=o).isCartesian&&!p.isDirty&&!p.xAxis.isDirty&&!p.yAxis.isDirty&&!t))||!e);if(s&&(o.requireSorting=!1),!p){o.destroyGroupedData();var t=i.groupAll?o.xData:o.processedXData,e=i.groupAll?o.yData:o.processedYData,s=a.plotSizeX,p=o.xAxis,u=p.options.ordinal,l=o.groupPixelWidth,d=void 0,h=void 0;if(l&&t&&t.length&&s){o.isDirty=h=!0,o.points=null;var g=p.getExtremes(),c=g.min,g=g.max,u=u&&p.ordinal&&p.ordinal.getGroupIntervalFactor(c,g,o)||1,f=p.getTimeTicks(E.Additions.prototype.normalizeTimeTickInterval(l*(g-c)/s*u,i.units||S.units),Math.min(c,t[0]),Math.max(g,t[t.length-1]),p.options.startOfWeek,t,o.closestPointRange),l=P.groupData.apply(o,[t,e,f,i.approximation]),s=l.groupedXData,u=l.groupedYData,m=0;for(i&&i.smoothed&&s.length&&(i.firstAnchor="firstPoint",i.anchor="middle",i.lastAnchor="lastPoint",b(32,!1,a,{"dataGrouping.smoothed":"use dataGrouping.anchor"})),d=1;d<f.length;d++)f.info.segmentStarts&&-1!==f.info.segmentStarts.indexOf(d)||(m=Math.max(f[d]-f[d-1],m));(c=f.info).gapSize=m,o.closestPointRange=f.info.totalRange,o.groupMap=l.groupMap,o.currentDataGrouping=c;var t=o,x=s,e=g,a=t.options.dataGrouping,l=t.currentDataGrouping&&t.currentDataGrouping.gapSize;if(a&&t.xData&&l&&t.groupMap){var D,G,g=x.length-1,y=a.anchor,v=j(a.firstAnchor,y),a=j(a.lastAnchor,y);if(y&&"start"!==y)for(var M=l*{middle:.5,end:1}[y],A=x.length-1;A--&&0<A;)x[A]+=M;v&&"start"!==v&&t.xData[0]>=x[0]&&(y=t.groupMap[0].start,D=t.groupMap[0].length,G=void 0,k(y)&&k(D)&&(G=y+(D-1)),x[0]={middle:x[0]+.5*l,end:x[0]+l,firstPoint:t.xData[0],lastPoint:G&&t.xData[G]}[v]),a&&"start"!==a&&l&&x[g]>=e-l&&(y=t.groupMap[t.groupMap.length-1].start,x[g]={middle:x[g]+.5*l,end:x[g]+l,firstPoint:y&&t.xData[y],lastPoint:t.xData[t.xData.length-1]}[a])}n&&(D=p,W((G=s)[0])&&k(D.min)&&k(D.dataMin)&&G[0]<D.min&&((!W(D.options.min)&&D.min<=D.dataMin||D.min===D.dataMin)&&(D.min=Math.min(G[0],D.min)),D.dataMin=Math.min(G[0],D.dataMin)),W(G[G.length-1])&&k(D.max)&&k(D.dataMax)&&G[G.length-1]>D.max&&((!W(D.options.max)&&k(D.dataMax)&&D.max>=D.dataMax||D.max===D.dataMax)&&(D.max=Math.max(G[G.length-1],D.max)),D.dataMax=Math.max(G[G.length-1],D.dataMax))),i.groupAll&&(o.allGroupedData=u,v=o.cropData(s,u,p.min,p.max),s=v.xData,u=v.yData,o.cropStart=v.start),o.processedXData=s,o.processedYData=u}else o.groupMap=null;o.hasGroupedData=h,o.preventGraphAnimation=(r&&r.totalRange)!==(c&&c.totalRange)}}function p(){this.groupedData&&(this.groupedData.forEach(function(t,o){t&&(this.groupedData[o]=t.destroy?t.destroy():null)},this),this.groupedData.length=0)}function u(){o.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null}function l(){return this.is("arearange")?"range":this.is("ohlc")?"ohlc":this.is("hlc")?"hlc":this.is("column")||this.options.cumulative?"sum":"average"}function d(t,o,a,i){var e,n,r=this,s=r.data,p=r.options&&r.options.data,u=[],l=[],d=[],h=t.length,g=!!o,c=[],f=r.pointArrayMap,m=f&&f.length,x=["x"].concat(f||["y"]),D=this.options.dataGrouping&&this.options.dataGrouping.groupAll,G=0,y=0,v="function"==typeof i?i:i&&C[i]?C[i]:C[r.getDGApproximation&&r.getDGApproximation()||"average"];if(m)for(var M=f.length;M--;)c.push([]);else c.push([]);for(var A=m||1,S=0;S<=h;S++)if(!(t[S]<a[0])){for(;void 0!==a[G+1]&&t[S]>=a[G+1]||S===h;){e=a[G],r.dataGroupInfo={start:D?y:r.cropStart+y,length:c[0].length},n=v.apply(r,c),r.pointClass&&!W(r.dataGroupInfo.options)&&(r.dataGroupInfo.options=H(r.pointClass.prototype.optionsToObject.call({series:r},r.options.data[r.cropStart+y])),x.forEach(function(t){delete r.dataGroupInfo.options[t]})),void 0!==n&&(u.push(e),l.push(n),d.push(r.dataGroupInfo));for(var y=S,E=0;E<A;E++)c[E].length=0,c[E].hasNulls=!1;if(G+=1,S===h)break}if(S===h)break;if(f)for(var P,b=r.options.dataGrouping&&r.options.dataGrouping.groupAll?S:r.cropStart+S,j=s&&s[b]||r.pointClass.prototype.applyOptions.apply({series:r},[p[b]]),E=0;E<m;E++)P=j[f[E]],k(P)?c[E].push(P):null===P&&(c[E].hasNulls=!0);else b=g?o[S]:null,k(b)?c[0].push(b):null===b&&(c[0].hasNulls=!0)}return{groupedXData:u,groupedYData:l,groupMap:d}}function h(t){var o,t=t.options,a=this.type,i=this.chart.options.plotOptions,e=this.useCommonDataGrouping&&S.common,n=S.seriesSpecific,r=s.defaultOptions.plotOptions[a].dataGrouping;i&&(n[a]||e)&&(o=this.chart.rangeSelector,r=r||H(S.common,n[a]),t.dataGrouping=H(e,r,i.series&&i.series.dataGrouping,i[a].dataGrouping,this.userOptions.dataGrouping,!t.isInternal&&o&&k(o.selected)&&o.buttonOptions[o.selected].dataGrouping))}return{compose:function(t){var o=t.prototype.pointClass;a.pushUnique(n,o)&&i(o,"update",function(){if(this.dataGroup)return b(24,!1,this.series.chart),!1}),a.pushUnique(n,t)&&(i(t,"afterSetOptions",h),i(t,"destroy",p),e(t.prototype,{applyGrouping:r,destroyGroupedData:p,generatePoints:u,getDGApproximation:l,groupData:d}))},groupData:d}}),o(t,"Extensions/DataGrouping/DataGrouping.js",[t["Extensions/DataGrouping/DataGroupingAxisComposition.js"],t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Extensions/DataGrouping/DataGroupingSeriesComposition.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(i,g,e,t,n){var c=t.format,r=n.addEvent,f=n.extend,m=n.isNumber,s=[];function p(t){var o,a,i,e=this.chart,n=e.time,r=t.labelConfig,s=r.series,p=s.options,u=s.tooltipOptions,p=p.dataGrouping,l=s.xAxis,d=u.xDateFormat,h=u[t.isFooter?"footerFormat":"headerFormat"];l&&"datetime"===l.options.type&&p&&m(r.key)&&(a=s.currentDataGrouping,p=p.dateTimeLabelFormats||g.common.dateTimeLabelFormats,a?(i=p[a.unitName],1===a.count?d=i[0]:(d=i[1],o=i[2])):!d&&p&&l.dateTime&&(d=l.dateTime.getXDateFormat(r.x,u.dateTimeLabelFormats)),i=n.dateFormat(d,r.key),o&&(i+=n.dateFormat(o,r.key+a.totalRange-1)),s.chart.styledMode&&(h=this.styledModeFormat(h)),t.text=c(h,{point:f(r.point,{key:i}),series:s},e),t.preventDefault())}return{compose:function(t,o,a){i.compose(t),e.compose(o),a&&n.pushUnique(s,a)&&r(a,"headerFormatter",p)},groupData:e.groupData}}),o(t,"masters/modules/datagrouping.src.js",[t["Core/Globals.js"],t["Extensions/DataGrouping/ApproximationDefaults.js"],t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Extensions/DataGrouping/DataGrouping.js"]],function(t,o,a,i){t.dataGrouping={approximationDefaults:o,approximations:a},i.compose(t.Axis,t.Series,t.Tooltip)})});