!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/funnel3d",["highcharts","highcharts/highcharts-3d","highcharts/modules/cylinder"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,r,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,r),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Series/Funnel3D/SVGElement3DFunnel.js",[t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Utilities.js"]],function(t,e,r,i){var n,o,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),S=t.parse,l=e.charts,t=r.getRendererType().prototype.Element3D,F=i.merge;return s(a,o=t),a.prototype.opacitySetter=function(t,e,r){var t=parseFloat(t),i=this.parts,n=l[this.renderer.chartIndex],o="group-opacity-"+t+"-"+n.index;if(this.parts=this.mainParts,this.singleSetterForParts("opacity",t),this.parts=i,!n.renderer.filterId){n.renderer.definition({tagName:"filter",attributes:{id:o},children:[{tagName:"feComponentTransfer",children:[{tagName:"feFuncA",attributes:{type:"table",tableValues:"0 "+t}}]}]});for(var s=0,a=this.sideGroups;s<a.length;s++)this[a[s]].attr({filter:"url(#"+o+")"});if(this.renderer.styledMode){n.renderer.definition({tagName:"style",textContent:".highcharts-"+o+" {filter:url(#"+o+")}"});for(var h=0,d=this.sideGroups;h<d.length;h++)this[d[h]].addClass("highcharts-"+o)}}return this},a.prototype.fillSetter=function(t){var e=S(t),r=e.rgba[3],i={top:S(t).brighten(.1).get(),bottom:S(t).brighten(-.2).get()};if(r<1?(e.rgba[3]=1,e=e.get("rgb"),this.attr({opacity:r})):e=t,(e=e.linearGradient||e.radialGradient||!this.gradientForSides?e:{linearGradient:{x1:0,x2:1,y1:1,y2:1},stops:[[0,S(t).brighten(-.2).get()],[.5,t],[1,S(t).brighten(-.2).get()]]}).linearGradient)for(var n=0,o=this.sideGroups;n<o.length;n++)for(var s=o[n],a=this[s].gradientBox,h=e.linearGradient,d=F(e,{linearGradient:{x1:a.x+h.x1*a.width,y1:a.y+h.y1*a.height,x2:a.x+h.x2*a.width,y2:a.y+h.y2*a.height}}),l=0,p=this.sideParts[s];l<p.length;l++)i[p[l]]=d;else if(F(!0,i,{frontUpper:e,backUpper:e,rightUpper:e,frontLower:e,backLower:e,rightLower:e}),e.radialGradient)for(var u=0,c=this.sideGroups;u<c.length;u++)for(var g=this[s=c[u]].gradientBox,f=g.x+g.width/2,y=g.y+g.height/2,w=Math.min(g.width,g.height),x=0,m=this.sideParts[s];x<m.length;x++)this[m[x]].setRadialReference([f,y,w]);if(this.singleSetterForParts("fill",null,i),this.color=this.fill=t,e.linearGradient)for(var b=0,v=[this.frontLower,this.frontUpper];b<v.length;b++){var C=v[b].element,C=C&&this.renderer.gradients[C.gradient];C&&"userSpaceOnUse"!==C.attr("gradientUnits")&&C.attr({gradientUnits:"userSpaceOnUse"})}return this},a.prototype.adjustForGradient=function(){for(var t,e=0,r=this.sideGroups;e<r.length;e++){for(var i=r[e],n={x:Number.MAX_VALUE,y:Number.MAX_VALUE},o={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE},s=0,a=this.sideParts[i];s<a.length;s++)t=this[a[s]].getBBox(!0),n={x:Math.min(n.x,t.x),y:Math.min(n.y,t.y)},o={x:Math.max(o.x,t.x+t.width),y:Math.max(o.y,t.y+t.height)};this[i].gradientBox={x:n.x,width:o.x-n.x,y:n.y,height:o.y-n.y}}},a.prototype.zIndexSetter=function(){return this.finishedOnAdd&&this.adjustForGradient(),this.renderer.Element.prototype.zIndexSetter.apply(this,arguments)},a.prototype.onAdd=function(){this.adjustForGradient(),this.finishedOnAdd=!0},a;function a(){var t=null!==o&&o.apply(this,arguments)||this;return t.mainParts=["top","bottom"],t.parts=["top","bottom","frontUpper","backUpper","frontLower","backLower","rightUpper","rightLower"],t.sideGroups=["upperGroup","lowerGroup"],t.sideParts={upperGroup:["frontUpper","backUpper","rightUpper"],lowerGroup:["frontLower","backLower","rightLower"]},t.pathType="funnel3d",t}}),e(t,"Series/Funnel3D/Funnel3DComposition.js",[t["Series/Funnel3D/SVGElement3DFunnel.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,t,r){var f=t.charts,y=r.error,i=r.extend,w=r.merge,n=r.pushUnique,o=[];function s(t){var e=this.element3d("funnel3d",t),r=this.styledMode,i={"stroke-width":1,stroke:"none"};e.upperGroup=this.g("funnel3d-upper-group").attr({zIndex:e.frontUpper.zIndex}).add(e);for(var n=0,o=[e.frontUpper,e.backUpper,e.rightUpper];n<o.length;n++){var s=o[n];r||s.attr(i),s.add(e.upperGroup)}e.lowerGroup=this.g("funnel3d-lower-group").attr({zIndex:e.frontLower.zIndex}).add(e);for(var a=0,h=[e.frontLower,e.backLower,e.rightLower];a<h.length;a++){var d=h[a];r||d.attr(i),d.add(e.lowerGroup)}return e.gradientForSides=t.gradientForSides,e}function a(t){this.getCylinderEnd||y("A required Highcharts module is missing: cylinder.js",!0,f[this.chartIndex]);var e=f[this.chartIndex],r=t.alphaCorrection=90-Math.abs(e.options.chart.options3d.alpha%180-90),i=this.cuboidPath.call(this,w(t,{depth:t.width,width:(t.width+t.bottom.width)/2})),n=i.isTop,o=!i.isFront,s=!!t.middle,a=this.getCylinderEnd(e,w(t,{x:t.x-t.width/2,z:t.z-t.width/2,alphaCorrection:r})),h=t.bottom.width,d=w(t,{width:h,x:t.x-h/2,z:t.z-h/2,alphaCorrection:r}),l=this.getCylinderEnd(e,d,!0),p=h,u=d,c=l,g=l,i=(s&&(p=t.middle.width,u=w(t,{y:t.y+t.middle.fraction*t.height,width:p,x:t.x-p/2,z:t.z-p/2}),c=this.getCylinderEnd(e,u,!1),g=this.getCylinderEnd(e,u,!1)),{top:a,bottom:l,frontUpper:this.getCylinderFront(a,c),zIndexes:{group:i.zIndexes.group,top:0!==n?0:3,bottom:1!==n?0:3,frontUpper:o?2:1,backUpper:o?1:2,rightUpper:o?2:1}});return i.backUpper=this.getCylinderBack(a,c),n=Math.min(p,t.width)/Math.max(p,t.width)!=1,i.rightUpper=this.getCylinderFront(this.getCylinderEnd(e,w(t,{x:t.x-t.width/2,z:t.z-t.width/2,alphaCorrection:n?-r:0}),!1),this.getCylinderEnd(e,w(u,{alphaCorrection:n?-r:0}),!s)),s&&(n=Math.min(p,h)/Math.max(p,h)!=1,w(!0,i,{frontLower:this.getCylinderFront(g,l),backLower:this.getCylinderBack(g,l),rightLower:this.getCylinderFront(this.getCylinderEnd(e,w(d,{alphaCorrection:n?-r:0}),!0),this.getCylinderEnd(e,w(u,{alphaCorrection:n?-r:0}),!1)),zIndexes:{frontLower:o?2:1,backLower:o?1:2,rightLower:o?1:2}})),i}return{compose:function(t){n(o,t)&&((t=t.prototype).Element3D.types.funnel3d=e,i(t,{funnel3d:s,funnel3dPath:a}))}}}),e(t,"Series/Funnel3D/Funnel3DSeriesDefaults.js",[],function(){return{center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,gradientForSides:!0,animation:!1,edgeWidth:0,colorByPoint:!0,showInLegend:!1,dataLabels:{align:"right",crop:!1,inside:!1,overflow:"allow"}}}),e(t,"Series/Funnel3D/Funnel3DPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e){var i,r,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),t=t.seriesTypes.column,e=e.extend,t=(r=t.prototype.pointClass,n(o,r),o);function o(){var t=null!==r&&r.apply(this,arguments)||this;return t.dlBoxRaw=void 0,t.options=void 0,t.series=void 0,t.y=void 0,t}return e(t.prototype,{shapeType:"funnel3d"}),t}),e(t,"Series/Funnel3D/Funnel3DSeries.js",[t["Series/Funnel3D/Funnel3DComposition.js"],t["Series/Funnel3D/Funnel3DSeriesDefaults.js"],t["Series/Funnel3D/Funnel3DPoint.js"],t["Core/Globals.js"],t["Core/Math3D.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,r,i,n,o,s){var a,h,d=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=i.noop,L=n.perspective,G=o.series,l=o.seriesTypes.column,A=s.extend,p=s.merge,D=s.pick,E=s.relativeLength,n=(d(u,h=l),u.prototype.alignDataLabel=function(t,e,r){var i=t.dlBoxRaw,n=this.chart.inverted,o=t.plotY>D(this.translatedThreshold,this.yAxis.len),s=D(r.inside,!!this.options.stacking),a={x:i.x,y:i.y,height:0};r.align=D(r.align,!n||s?"center":o?"right":"left"),r.verticalAlign=D(r.verticalAlign,n||s?"middle":o?"top":"bottom"),"top"!==r.verticalAlign&&(a.y+=i.bottom/("bottom"===r.verticalAlign?1:2)),a.width=this.getWidthAt(a.y),this.options.reversed&&(a.width=i.fullWidth-a.width),s?a.x-=a.width/2:"left"===r.align?(r.align="right",a.x-=1.5*a.width):"right"===r.align?(r.align="left",a.x+=a.width/2):a.x-=a.width/2,t.dlBox=a,l.prototype.alignDataLabel.apply(this,arguments)},u.prototype.bindAxes=function(){G.prototype.bindAxes.apply(this,arguments),A(this.xAxis.options,{gridLineWidth:0,lineWidth:0,title:void 0,tickPositions:[]}),p(!0,this.yAxis.options,{gridLineWidth:0,title:void 0,labels:{enabled:!1}})},u.prototype.translate=function(){G.prototype.translate.apply(this,arguments);var t,e,r=this.chart,i=this.options,n=i.reversed,o=i.ignoreHiddenPoint,s=r.plotWidth,a=r.plotHeight,h=i.center,d=E(h[0],s),l=E(h[1],a),p=E(i.width,s),u=E(i.height,a),c=E(i.neckWidth,s),g=E(i.neckHeight,a),f=l-u/2+u-g,y=this.data,w=0,x=0;this.getWidthAt=t=function(t){return f<t||u===g?c:c+(p-c)*(1-(t-(l-u/2))/(u-g))},this.center=[d,l,u],this.centerX=d;for(var m=0;m<y.length;m++){var b=y[m];o&&!1===b.visible||(w+=b.y)}for(var v=0;v<y.length;v++){var b=y[v],C=null,S=w?b.y/w:0,F=(e=l-u/2+x*u)+S*u,j=t(e),_=F-e,U={gradientForSides:D(b.options.gradientForSides,i.gradientForSides),x:d,y:e,height:_,width:j,z:1,top:{width:j}};j=t(F),U.bottom={fraction:S,width:j},f<=e?U.isCylinder=!0:f<F&&(C=F,j=t(f),F=f,U.bottom.width=j,U.middle={fraction:_?(f-e)/_:0,width:j}),n&&(U.y=e=l+u/2-(x+S)*u,U.middle&&(U.middle.fraction=1-(_?U.middle.fraction:0)),j=U.width,U.width=U.bottom.width,U.bottom.width=j),b.shapeArgs=A(b.shapeArgs,U),b.percentage=100*S,b.plotX=d,b.plotY=n?l+u/2-(x+S/2)*u:(e+(C||F))/2,_=L([{x:d,y:b.plotY,z:n?-(p-t(b.plotY))/2:-t(b.plotY)/2}],r,!0)[0],b.tooltipPos=[_.x,_.y],b.dlBoxRaw={x:d,width:t(b.plotY),y:e,bottom:U.height||0,fullWidth:p},o&&!1===b.visible||(x+=S)}},u.compose=t.compose,u.defaultOptions=p(l.defaultOptions,e),u);function u(){var t=null!==h&&h.apply(this,arguments)||this;return t.center=void 0,t.data=void 0,t.options=void 0,t.points=void 0,t}return A(n.prototype,{pointClass:r,translate3dShapes:i}),o.registerSeriesType("funnel3d",n),n}),e(t,"masters/modules/funnel3d.src.js",[t["Core/Renderer/RendererRegistry.js"],t["Series/Funnel3D/Funnel3DSeries.js"]],function(t,e){return e.compose(t.getRendererType()),e})});