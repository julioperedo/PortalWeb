!function(n){"object"==typeof module&&module.exports?module.exports=n.default=n:"function"==typeof define&&define.amd?define("highcharts/modules/pathfinder",["highcharts"],function(t){return n(t),n.Highcharts=t,n}):n("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function n(t,n,i,e){t.hasOwnProperty(n)||(t[n]=e.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:n,module:t[n]}})))}n(t,"Gantt/Connection.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(t,n){var s=n.defined,o=n.error,h=n.merge,i=n.objectEach,x=t.deg2rad,c=Math.max,d=Math.min;function e(t,n,i){this.chart=void 0,this.fromPoint=void 0,this.graphics=void 0,this.pathfinder=void 0,this.toPoint=void 0,this.init(t,n,i)}return e.prototype.init=function(t,n,i){this.fromPoint=t,this.toPoint=n,this.options=i,this.chart=t.series.chart,this.pathfinder=this.chart.pathfinder},e.prototype.renderPath=function(t,n,i){var e=this.chart,r=e.styledMode,o=e.pathfinder,a=!e.options.chart.forExport&&!1!==i,s={},h=this.graphics&&this.graphics.path;o.group||(o.group=e.renderer.g().addClass("highcharts-pathfinder-group").attr({zIndex:-1}).add(e.seriesGroup)),o.group.translate(e.plotLeft,e.plotTop),h&&h.renderer||(h=e.renderer.path().add(o.group),r||h.attr({opacity:0})),h.attr(n),s.d=t,r||(s.opacity=1),h[a?"animate":"attr"](s,i),this.graphics=this.graphics||{},this.graphics.path=h},e.prototype.addMarker=function(t,n,i){var e,r,o=this,a=o.fromPoint.series.chart,s=a.pathfinder,a=a.renderer,h="start"===t?o.fromPoint:o.toPoint,c=h.getPathfinderAnchorPoint(n);n.enabled&&((i="start"===t?i[1]:i[i.length-2])&&"M"===i[0]||"L"===i[0])&&(i={x:i[1],y:i[2]},i=h.getRadiansToVector(i,c),c=h.getMarkerVector(i,n.radius,c),i=-i/x,n.width&&n.height?(e=n.width,r=n.height):e=r=2*n.radius,o.graphics=o.graphics||{},e={x:c.x-e/2,y:c.y-r/2,width:e,height:r,rotation:i,rotationOriginX:c.x,rotationOriginY:c.y},o.graphics[t]?o.graphics[t].animate(e):(o.graphics[t]=a.symbol(n.symbol).addClass("highcharts-point-connecting-path-"+t+"-marker highcharts-color-"+this.fromPoint.colorIndex).attr(e).add(s.group),a.styledMode||o.graphics[t].attr({fill:n.color||o.fromPoint.color,stroke:n.lineColor,"stroke-width":n.lineWidth,opacity:0}).animate({opacity:1},h.series.options.animation)))},e.prototype.getPath=function(t){var n=this.pathfinder,i=this.chart,e=n.algorithms[t.type],r=n.chartObstacles;return"function"!=typeof e?(o('"'+t.type+'" is not a Pathfinder algorithm.'),{path:[],obstacles:[]}):(e.requiresObstacles&&!r&&(r=n.chartObstacles=n.getChartObstacles(t),i.options.connectors.algorithmMargin=t.algorithmMargin,n.chartObstacleMetrics=n.getObstacleMetrics(r)),e(this.fromPoint.getPathfinderAnchorPoint(t.startMarker),this.toPoint.getPathfinderAnchorPoint(t.endMarker),h({chartObstacles:r,lineObstacles:n.lineObstacles||[],obstacleMetrics:n.chartObstacleMetrics,hardBounds:{xMin:0,xMax:i.plotWidth,yMin:0,yMax:i.plotHeight},obstacleOptions:{margin:t.algorithmMargin},startDirectionX:n.getAlgorithmStartDirection(t.startMarker)},t)))},e.prototype.render=function(){var t=this,n=t.fromPoint,i=n.series,e=i.chart,r=e.pathfinder,o={},a=h(e.options.connectors,i.options.connectors,n.options.connectors,t.options),e=(e.styledMode||(o.stroke=a.lineColor||n.color,o["stroke-width"]=a.lineWidth,a.dashStyle&&(o.dashstyle=a.dashStyle)),o.class="highcharts-point-connecting-path highcharts-color-"+n.colorIndex,a=h(o,a),s(a.marker.radius)||(a.marker.radius=d(c(Math.ceil((a.algorithmMargin||8)/2)-1,1),5)),t.getPath(a)),n=e.path;e.obstacles&&(r.lineObstacles=r.lineObstacles||[],r.lineObstacles=r.lineObstacles.concat(e.obstacles)),t.renderPath(n,o,i.options.animation),t.addMarker("start",h(a.marker,a.startMarker),n),t.addMarker("end",h(a.marker,a.endMarker),n)},e.prototype.destroy=function(){this.graphics&&(i(this.graphics,function(t){t.destroy()}),delete this.graphics)},e}),n(t,"Series/PathUtilities.js",[],function(){function c(t,n){for(var i=[],e=0;e<t.length;e++){var r,o,a,s,h,c,x=t[e][1],d=t[e][2];"number"==typeof x&&"number"==typeof d&&(0===e?i.push(["M",x,d]):e!==t.length-1&&n?(o=t[e-1],s=t[e+1],o&&s&&(r=o[1],o=o[2],a=s[1],s=s[2],"number"==typeof r&&"number"==typeof a&&"number"==typeof o&&"number"==typeof s&&r!==a&&o!==s&&(c=o<s?1:-1,i.push(["L",x-(h=r<a?1:-1)*Math.min(Math.abs(x-r),n),d-c*Math.min(Math.abs(d-o),n)],["C",x,d,x,d,x+h*Math.min(Math.abs(x-a),n),d+c*Math.min(Math.abs(d-s),n)])))):i.push(["L",x,d]))}return i}return{applyRadius:c,getLinkPath:{default:function(t){var n=t.x1,i=t.y1,e=t.x2,r=t.y2,o=t.width,o=void 0===o?0:o,a=t.inverted,a=void 0!==a&&a,s=t.radius,t=t.parentVisible,h=[["M",n,i],["L",n,i],["C",n,i,n,r,n,r],["L",n,r],["C",n,i,n,r,n,r],["L",n,r]];return t?c([["M",n,i],["L",n+o*(a?-.5:.5),i],["L",n+o*(a?-.5:.5),r],["L",e,r]],s):h},straight:function(t){var n=t.x1,i=t.y1,e=t.x2,r=t.y2,o=t.width,o=void 0===o?0:o,a=t.inverted,a=void 0!==a&&a;return t.parentVisible?[["M",n,i],["L",n+o*(a?-1:1),r],["L",e,r]]:[["M",n,i],["L",n,r],["L",n,r]]},curved:function(t){var n=t.x1,i=t.y1,e=t.x2,r=t.y2,o=t.offset,o=void 0===o?0:o,a=t.width,a=void 0===a?0:a,s=t.inverted,s=void 0!==s&&s;return t.parentVisible?[["M",n,i],["C",n+o,i,n-o+a*(s?-1:1),r,n+a*(s?-1:1),r],["L",e,r]]:[["M",n,i],["C",n,i,n,r,n,r],["L",e,r]]}}}}),n(t,"Gantt/PathfinderAlgorithms.js",[t["Series/PathUtilities.js"],t["Core/Utilities.js"]],function(M,t){var b=t.pick,P=Math.min,C=Math.max,O=Math.abs;function w(t,n,i){for(var e,r,o=n-1e-7,a=i||0,s=t.length-1;a<=s;)if(0<(r=o-t[e=s+a>>1].xMin))a=1+e;else{if(!(r<0))return e;s=e-1}return 0<a?a-1:0}function k(t,n){for(var i,e,r=w(t,n.x+1)+1;r--;)if(t[r].xMax>=n.x&&(i=t[r],(e=n).x<=i.xMax&&e.x>=i.xMin&&e.y<=i.yMax&&e.y>=i.yMin))return r;return-1}function j(t){var n=[];if(t.length){n.push(["M",t[0].start.x,t[0].start.y]);for(var i=0;i<t.length;++i)n.push(["L",t[i].end.x,t[i].end.y])}return n}function L(t,n){t.yMin=C(t.yMin,n.yMin),t.yMax=P(t.yMax,n.yMax),t.xMin=C(t.xMin,n.xMin),t.xMax=P(t.xMax,n.xMax)}function n(t,n,i){var e,r=[],o=i.chartObstacles,a=k(o,t),s=k(o,n),h=b(i.startDirectionX,O(n.x-t.x)>O(n.y-t.y))?"x":"y";function c(t,n,i,e,r){t={x:t.x,y:t.y};return t[n]=i[e||n]+(r||0),t}function x(t,n,i){var e=O(n[i]-t[i+"Min"])>O(n[i]-t[i+"Max"]);return c(n,i,t,i+(e?"Max":"Min"),e?1:-1)}s=-1<s?(e={start:d=x(o[s],n,h),end:n},d):n,-1<a&&(d=x(o=o[a],t,h),r.push({start:t,end:d}),d[h]>=t[h]==d[h]>=s[h]&&(a=t[h="y"===h?"x":"y"]<n[h],r.push({start:d,end:c(d,h,o,h+(a?"Max":"Min"),a?1:-1)}),h="y"===h?"x":"y"));var d=c(n=r.length?r[r.length-1].end:t,h,s);return r.push({start:n,end:d}),o=c(d,h="y"===h?"x":"y",s),r.push({start:d,end:o}),r.push(e),{path:M.applyRadius(j(r),i.radius),obstacles:r}}function i(t,n,d){var i,e,r,o,a,s=b(d.startDirectionX,O(n.x-t.x)>O(n.y-t.y)),h=s?"x":"y",c=[],x=d.obstacleMetrics,M=P(t.x,n.x)-x.maxWidth-10,p=C(t.x,n.x)+x.maxWidth+10,l=P(t.y,n.y)-x.maxHeight-10,y=C(t.y,n.y)+x.maxHeight+10,f=!1,u=d.chartObstacles,g=w(u,p),x=w(u,M);function m(t,n,i){for(var e,r,o=t.x<n.x?1:-1,a=t.x<n.x?(e=t,n):(e=n,t),s=t.y<n.y?(r=t,n):(r=n,t),h=o<0?P(w(u,a.x),u.length-1):0;u[h]&&(0<o&&u[h].xMin<=a.x||o<0&&u[h].xMax>=e.x);){if(u[h].xMin<=a.x&&u[h].xMax>=e.x&&u[h].yMin<=s.y&&u[h].yMax>=r.y)return i?{y:t.y,x:t.x<n.x?u[h].xMin-1:u[h].xMax+1,obstacle:u[h]}:{x:t.x,y:t.y<n.y?u[h].yMin-1:u[h].yMax+1,obstacle:u[h]};h+=o}return n}function v(t,n,i,e,r){var o=r.soft,r=r.hard,a=e?"x":"y",s={x:n.x,y:n.y},h={x:n.x,y:n.y},c=t[a+"Max"]>=o[a+"Max"],o=t[a+"Min"]<=o[a+"Min"],x=t[a+"Max"]>=r[a+"Max"],r=t[a+"Min"]<=r[a+"Min"],d=O(t[a+"Min"]-n[a]),M=O(t[a+"Max"]-n[a]),i=O(d-M)<10?n[a]<i[a]:M<d,M=(h[a]=t[a+"Min"],s[a]=t[a+"Max"],m(n,h,e)[a]!==h[a]),d=m(n,s,e)[a]!==s[a],i=M?!d||i:!d&&i;return i=o?!c||i:!c&&i,i=r?!x||i:!x&&i}for(-1<(g=k(u=u.slice(x,g+1),n))&&(x=u[g],r=n,o=t,a=P(x.xMax-r.x,r.x-x.xMin)<P(x.yMax-r.y,r.y-x.yMin),o=v(x,r,o,a,{soft:d.hardBounds,hard:d.hardBounds}),e=a?{y:r.y,x:x[o?"xMax":"xMin"]+(o?1:-1)}:{x:r.x,y:x[o?"yMax":"yMin"]+(o?1:-1)},c.push({end:n,start:e}),n=e);-1<(g=k(u,n));)i=n[h]-t[h]<0,(e={x:n.x,y:n.y})[h]=u[g][i?h+"Max":h+"Min"]+(i?1:-1),c.push({end:n,start:e}),n=e;return{path:j(a=(a=function t(n,i,e){if(n.x===i.x&&n.y===i.y)return[];var r,o,a,s=e?"x":"y",h=d.obstacleOptions.margin,c={soft:{xMin:M,xMax:p,yMin:l,yMax:y},hard:d.hardBounds},x=k(u,n);return-1<x?(r=v(x=u[x],n,i,e,c),L(x,d.hardBounds),a=e?{y:n.y,x:x[r?"xMax":"xMin"]+(r?1:-1)}:{x:n.x,y:x[r?"yMax":"yMin"]+(r?1:-1)},-1<(o=k(u,a))&&(L(o=u[o],d.hardBounds),a[s]=r?C(x[s+"Max"]-h+1,(o[s+"Min"]+x[s+"Max"])/2):P(x[s+"Min"]+h-1,(o[s+"Max"]+x[s+"Min"])/2),f=n.x===a.x&&n.y===a.y&&(f&&(a[s]=r?C(x[s+"Max"],o[s+"Max"])+1:P(x[s+"Min"],o[s+"Min"])-1),!f)),o=[{start:n,end:a}]):(o=[{start:n,end:{x:(h=m(n,{x:(e?i:n).x,y:(e?n:i).y},e)).x,y:h.y}}],h[e?"x":"y"]!==i[e?"x":"y"]&&(r=v(h.obstacle,h,i,!e,c),L(h.obstacle,d.hardBounds),x={x:e?h.x:h.obstacle[r?"xMax":"xMin"]+(r?1:-1),y:e?h.obstacle[r?"yMax":"yMin"]+(r?1:-1):h.y},o=o.concat(t({x:h.x,y:h.y},x,e=!e)))),o=o.concat(t(o[o.length-1].end,i,!e))}(t,n,s)).concat(c.reverse())),obstacles:a}}return i.requiresObstacles=n.requiresObstacles=!0,{fastAvoid:i,straight:function(t,n){return{path:[["M",t.x,t.y],["L",n.x,n.y]],obstacles:[{start:t,end:n}]}},simpleConnect:n}}),n(t,"Gantt/ConnectorsDefaults.js",[],function(){return{connectors:{type:"straight",radius:0,lineWidth:1,marker:{enabled:!1,align:"center",verticalAlign:"middle",inside:!1,lineWidth:1},startMarker:{symbol:"diamond"},endMarker:{symbol:"arrow-filled"}}}}),n(t,"Gantt/PathfinderComposition.js",[t["Gantt/ConnectorsDefaults.js"],t["Core/Defaults.js"],t["Core/Utilities.js"]],function(e,t,n){var i,r,o=t.setOptions,a=n.defined,s=n.error,h=n.merge,c=n.pushUnique;function y(t){var n=t.shapeArgs;if(n)return{xMin:n.x||0,xMax:(n.x||0)+(n.width||0),yMin:n.y||0,yMax:(n.y||0)+(n.height||0)};n=t.graphic&&t.graphic.getBBox();return n?{xMin:t.plotX-n.width/2,xMax:t.plotX+n.width/2,yMin:t.plotY-n.height/2,yMax:t.plotY+n.height/2}:null}function x(t){var n,i,e=y(this);switch(t.align){case"right":n="xMax";break;case"left":n="xMin"}switch(t.verticalAlign){case"top":i="yMin";break;case"bottom":i="yMax"}return{x:n?e[n]:(e.xMin+e.xMax)/2,y:i?e[i]:(e.yMin+e.yMax)/2}}function d(t,n){var i;return a(n)||(i=y(this))&&(n={x:(i.xMin+i.xMax)/2,y:(i.yMin+i.yMax)/2}),Math.atan2(n.y-t.y,t.x-n.x)}function M(t,n,i){for(var e,r=2*Math.PI,o=y(this),a=o.xMax-o.xMin,s=o.yMax-o.yMin,h=Math.atan2(s,a),a=a/2,c=s/2,x=o.xMin+a,o=o.yMin+c,d={x:x,y:o},M=t,t=!1,p=1,l=1;M<-Math.PI;)M+=r;for(;M>Math.PI;)M-=r;return e=Math.tan(M),-h<M&&M<=h?(l=-1,t=!0):h<M&&M<=Math.PI-h?l=-1:M>Math.PI-h||M<=-(Math.PI-h)?(p=-1,t=!0):p=-1,t?(d.x+=p*a,d.y+=l*a*e):(d.x+=p*(s/(2*e)),d.y+=l*c),i.x!==x&&(d.x=i.x),i.y!==o&&(d.y=i.y),{x:d.x+n*Math.cos(M),y:d.y-n*Math.sin(M)}}return i=i||{},r=[],i.compose=function(t,n,i){c(r,t)&&t.prototype.callbacks.push(function(t){!1!==t.options.connectors.enabled&&(((t=t).options.pathfinder||t.series.reduce(function(t,n){return n.options&&h(!0,n.options.connectors=n.options.connectors||{},n.options.pathfinder),t||n.options&&n.options.pathfinder},!1))&&(h(!0,t.options.connectors=t.options.connectors||{},t.options.pathfinder),s('WARNING: Pathfinder options have been renamed. Use "chart.connectors" or "series.connectors" instead.')),this.pathfinder=new n(this),this.pathfinder.update(!0))}),c(r,i)&&((t=i.prototype).getMarkerVector=M,t.getPathfinderAnchorPoint=x,t.getRadiansToVector=d),c(r,o)&&o(e)},i}),n(t,"Gantt/Pathfinder.js",[t["Gantt/Connection.js"],t["Gantt/PathfinderAlgorithms.js"],t["Gantt/PathfinderComposition.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(d,t,i,M,n){var e=n.addEvent,p=n.defined,l=n.pick,y=n.splat,a=Math.max,h=Math.min;function f(t){for(var n,i=t.length,e=[],r=0;r<i;++r)for(var o=r+1;o<i;++o)(n=function t(n,i,e){var e=l(e,10),r=n.yMax+e>i.yMin-e&&n.yMin-e<i.yMax+e,o=n.xMax+e>i.xMin-e&&n.xMin-e<i.xMax+e,a=r?n.xMin>i.xMax?n.xMin-i.xMax:i.xMin-n.xMax:1/0,s=o?n.yMin>i.yMax?n.yMin-i.yMax:i.yMin-n.yMax:1/0;return o&&r?e?t(n,i,Math.floor(e/2)):1/0:h(a,s)}(t[r],t[o]))<80&&e.push(n);return e.push(80),a(Math.floor(e.sort(function(t,n){return t-n})[Math.floor(e.length/10)]/2-1),1)}r.compose=function(t,n){i.compose(t,r,n)},r.prototype.init=function(t){this.chart=t,this.connections=[],e(t,"redraw",function(){this.pathfinder.update()})},r.prototype.update=function(t){var e=this.chart,r=this,n=r.connections;r.connections=[],e.series.forEach(function(t){t.visible&&!t.options.isInternal&&t.points.forEach(function(n){var i,t=n.options,t=(t&&t.dependency&&(t.connect=t.dependency),(null==(t=n.options)?void 0:t.connect)&&y(n.options.connect));n.visible&&!1!==n.isInside&&t&&t.forEach(function(t){(i=e.get("string"==typeof t?t:t.to))instanceof M&&i.series.visible&&i.visible&&!1!==i.isInside&&r.connections.push(new d(n,i,"string"==typeof t?{}:t))})})});for(var i=0,o=void 0,a=void 0,s=n.length,h=r.connections.length;i<s;++i){for(var a=!1,c=n[i],o=0;o<h;++o){var x=r.connections[o];if((c.options&&c.options.type)===(x.options&&x.options.type)&&c.fromPoint===x.fromPoint&&c.toPoint===x.toPoint){x.graphics=c.graphics,a=!0;break}}a||c.destroy()}delete this.chartObstacles,delete this.lineObstacles,r.renderConnections(t)},r.prototype.renderConnections=function(t){t?this.chart.series.forEach(function(n){function t(){var t=n.chart.pathfinder;(t&&t.connections||[]).forEach(function(t){t.fromPoint&&t.fromPoint.series===n&&t.render()}),n.pathfinderRemoveRenderEvent&&(n.pathfinderRemoveRenderEvent(),delete n.pathfinderRemoveRenderEvent)}!1===n.options.animation?t():n.pathfinderRemoveRenderEvent=e(n,"afterAnimate",t)}):this.connections.forEach(function(t){t.render()})},r.prototype.getChartObstacles=function(t){for(var n,i,e=this.chart.series,r=l(t.algorithmMargin,0),o=[],a=0,s=e.length;a<s;++a)if(e[a].visible&&!e[a].options.isInternal)for(var h,c=0,x=e[a].points.length,d=void 0;c<x;++c)(h=e[a].points[c]).visible&&(i=void 0,(d=(i=(h=h).shapeArgs)?{xMin:i.x||0,xMax:(i.x||0)+(i.width||0),yMin:i.y||0,yMax:(i.y||0)+(i.height||0)}:(i=h.graphic&&h.graphic.getBBox())?{xMin:h.plotX-i.width/2,xMax:h.plotX+i.width/2,yMin:h.plotY-i.height/2,yMax:h.plotY+i.height/2}:null)&&o.push({xMin:d.xMin-r,xMax:d.xMax+r,yMin:d.yMin-r,yMax:d.yMax+r}));return o=o.sort(function(t,n){return t.xMin-n.xMin}),p(t.algorithmMargin)||(n=t.algorithmMargin=f(o),o.forEach(function(t){t.xMin-=n,t.xMax+=n,t.yMin-=n,t.yMax+=n})),o},r.prototype.getObstacleMetrics=function(t){for(var n,i=0,e=0,r=t.length;r--;)i<(n=t[r].xMax-t[r].xMin)&&(i=n),e<(n=t[r].yMax-t[r].yMin)&&(e=n);return{maxHeight:e,maxWidth:i}},r.prototype.getAlgorithmStartDirection=function(t){var n="left"!==t.align&&"right"!==t.align,t="top"!==t.verticalAlign&&"bottom"!==t.verticalAlign;return n?t&&void 0:t||void 0};n=r;function r(t){this.chart=void 0,this.chartObstacles=void 0,this.chartObstacleMetrics=void 0,this.connections=void 0,this.group=void 0,this.lineObstacles=void 0,this.init(t)}return n.prototype.algorithms=t,n}),n(t,"Extensions/ArrowSymbols.js",[t["Core/Utilities.js"]],function(n){var i=[];function r(t,n,i,e){return[["M",t,n+e/2],["L",t+i,n],["L",t,n+e/2],["L",t+i,n+e]]}function e(t,n,i,e){return r(t,n,i/2,e)}function o(t,n,i,e){return[["M",t+i,n],["L",t,n+e/2],["L",t+i,n+e],["Z"]]}function a(t,n,i,e){return o(t,n,i/2,e)}return{compose:function(t){n.pushUnique(i,t)&&((t=t.prototype.symbols).arrow=r,t["arrow-filled"]=o,t["arrow-filled-half"]=a,t["arrow-half"]=e,t["triangle-left"]=o,t["triangle-left-half"]=a)}}}),n(t,"masters/modules/pathfinder.src.js",[t["Core/Globals.js"],t["Gantt/Pathfinder.js"],t["Extensions/ArrowSymbols.js"]],function(t,n,i){t.Pathfinder=n,i.compose(t.SVGRenderer),n.compose(t.Chart,t.Point)})});