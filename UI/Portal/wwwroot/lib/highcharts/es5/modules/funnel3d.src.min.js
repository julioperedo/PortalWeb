!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/funnel3d",["highcharts","highcharts/highcharts-3d","highcharts/modules/cylinder"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,r,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,r),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Series/Funnel3D/SVGElement3DFunnel.js",[t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Utilities.js"]],function(t,e,r,i){var n,o,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),S=t.parse,h=e.charts,t=r.getRendererType().prototype.Element3D,j=i.merge;function s(){var t=null!==o&&o.apply(this,arguments)||this;return t.mainParts=["top","bottom"],t.parts=["top","bottom","frontUpper","backUpper","frontLower","backLower","rightUpper","rightLower"],t.sideGroups=["upperGroup","lowerGroup"],t.sideParts={upperGroup:["frontUpper","backUpper","rightUpper"],lowerGroup:["frontLower","backLower","rightLower"]},t.pathType="funnel3d",t}return a(s,o=t),s.prototype.opacitySetter=function(t,e,r){var i=this,t=parseFloat(t),n=i.parts,o=h[i.renderer.chartIndex],a="group-opacity-"+t+"-"+o.index;if(i.parts=i.mainParts,i.singleSetterForParts("opacity",t),i.parts=n,!o.renderer.filterId){o.renderer.definition({tagName:"filter",attributes:{id:a},children:[{tagName:"feComponentTransfer",children:[{tagName:"feFuncA",attributes:{type:"table",tableValues:"0 "+t}}]}]});for(var s=0,d=i.sideGroups;s<d.length;s++)i[d[s]].attr({filter:"url(#"+a+")"});if(i.renderer.styledMode){o.renderer.definition({tagName:"style",textContent:".highcharts-"+a+" {filter:url(#"+a+")}"});for(var l=0,p=i.sideGroups;l<p.length;l++)i[p[l]].addClass("highcharts-"+a)}}return i},s.prototype.fillSetter=function(t){var e=S(t),r=this,i=e.rgba[3],n={top:S(t).brighten(.1).get(),bottom:S(t).brighten(-.2).get()};if(i<1?(e.rgba[3]=1,e=e.get("rgb"),r.attr({opacity:i})):e=t,(e=e.linearGradient||e.radialGradient||!r.gradientForSides?e:{linearGradient:{x1:0,x2:1,y1:1,y2:1},stops:[[0,S(t).brighten(-.2).get()],[.5,t],[1,S(t).brighten(-.2).get()]]}).linearGradient)for(var o=0,a=r.sideGroups;o<a.length;o++)for(var s=r[g=a[o]].gradientBox,d=e.linearGradient,l=j(e,{linearGradient:{x1:s.x+d.x1*s.width,y1:s.y+d.y1*s.height,x2:s.x+d.x2*s.width,y2:s.y+d.y2*s.height}}),p=0,h=r.sideParts[g];p<h.length;p++)n[h[p]]=l;else if(j(!0,n,{frontUpper:e,backUpper:e,rightUpper:e,frontLower:e,backLower:e,rightLower:e}),e.radialGradient)for(var u=0,c=r.sideGroups;u<c.length;u++)for(var g,f=r[g=c[u]].gradientBox,y=f.x+f.width/2,w=f.y+f.height/2,x=Math.min(f.width,f.height),m=0,b=r.sideParts[g];m<b.length;m++)r[b[m]].setRadialReference([y,w,x]);if(r.singleSetterForParts("fill",null,n),r.color=r.fill=t,e.linearGradient)for(var v=0,C=[r.frontLower,r.frontUpper];v<C.length;v++){var F=C[v].element,F=F&&r.renderer.gradients[F.gradient];F&&"userSpaceOnUse"!==F.attr("gradientUnits")&&F.attr({gradientUnits:"userSpaceOnUse"})}return r},s.prototype.adjustForGradient=function(){for(var t=0,e=this.sideGroups;t<e.length;t++){for(var r=e[t],i={x:Number.MAX_VALUE,y:Number.MAX_VALUE},n={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE},o=0,a=this.sideParts[r];o<a.length;o++)var s=this[a[o]].getBBox(!0),i={x:Math.min(i.x,s.x),y:Math.min(i.y,s.y)},n={x:Math.max(n.x,s.x+s.width),y:Math.max(n.y,s.y+s.height)};this[r].gradientBox={x:i.x,width:n.x-i.x,y:i.y,height:n.y-i.y}}},s.prototype.zIndexSetter=function(){return this.finishedOnAdd&&this.adjustForGradient(),this.renderer.Element.prototype.zIndexSetter.apply(this,arguments)},s.prototype.onAdd=function(){this.adjustForGradient(),this.finishedOnAdd=!0},s}),e(t,"Series/Funnel3D/Funnel3DComposition.js",[t["Series/Funnel3D/SVGElement3DFunnel.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,t,r){var y=t.charts,w=r.error,i=r.extend,x=r.merge,n=r.pushUnique,o=[];function a(t){var e=this.element3d("funnel3d",t),r=this.styledMode,i={"stroke-width":1,stroke:"none"};e.upperGroup=this.g("funnel3d-upper-group").attr({zIndex:e.frontUpper.zIndex}).add(e);for(var n=0,o=[e.frontUpper,e.backUpper,e.rightUpper];n<o.length;n++){var a=o[n];r||a.attr(i),a.add(e.upperGroup)}e.lowerGroup=this.g("funnel3d-lower-group").attr({zIndex:e.frontLower.zIndex}).add(e);for(var s=0,d=[e.frontLower,e.backLower,e.rightLower];s<d.length;s++){var l=d[s];r||l.attr(i),l.add(e.lowerGroup)}return e.gradientForSides=t.gradientForSides,e}function s(t){this.getCylinderEnd||w("A required Highcharts module is missing: cylinder.js",!0,y[this.chartIndex]);var e=this,r=y[e.chartIndex],i=t.alphaCorrection=90-Math.abs(r.options.chart.options3d.alpha%180-90),n=this.cuboidPath.call(e,x(t,{depth:t.width,width:(t.width+t.bottom.width)/2})),o=n.isTop,a=!n.isFront,s=!!t.middle,d=e.getCylinderEnd(r,x(t,{x:t.x-t.width/2,z:t.z-t.width/2,alphaCorrection:i})),l=t.bottom.width,p=x(t,{width:l,x:t.x-l/2,z:t.z-l/2,alphaCorrection:i}),h=e.getCylinderEnd(r,p,!0),u=l,c=p,g=h,f=h,n=(s&&(u=t.middle.width,c=x(t,{y:t.y+t.middle.fraction*t.height,width:u,x:t.x-u/2,z:t.z-u/2}),g=e.getCylinderEnd(r,c,!1),f=e.getCylinderEnd(r,c,!1)),{top:d,bottom:h,frontUpper:e.getCylinderFront(d,g),zIndexes:{group:n.zIndexes.group,top:0!==o?0:3,bottom:1!==o?0:3,frontUpper:a?2:1,backUpper:a?1:2,rightUpper:a?2:1}});return n.backUpper=e.getCylinderBack(d,g),o=Math.min(u,t.width)/Math.max(u,t.width)!=1,n.rightUpper=e.getCylinderFront(e.getCylinderEnd(r,x(t,{x:t.x-t.width/2,z:t.z-t.width/2,alphaCorrection:o?-i:0}),!1),e.getCylinderEnd(r,x(c,{alphaCorrection:o?-i:0}),!s)),s&&(o=Math.min(u,l)/Math.max(u,l)!=1,x(!0,n,{frontLower:e.getCylinderFront(f,h),backLower:e.getCylinderBack(f,h),rightLower:e.getCylinderFront(e.getCylinderEnd(r,x(p,{alphaCorrection:o?-i:0}),!0),e.getCylinderEnd(r,x(c,{alphaCorrection:o?-i:0}),!1)),zIndexes:{frontLower:a?2:1,backLower:a?1:2,rightLower:a?1:2}})),n}return{compose:function(t){n(o,t)&&((t=t.prototype).Element3D.types.funnel3d=e,i(t,{funnel3d:a,funnel3dPath:s}))}}}),e(t,"Series/Funnel3D/Funnel3DSeriesDefaults.js",[],function(){return{center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,gradientForSides:!0,animation:!1,edgeWidth:0,colorByPoint:!0,showInLegend:!1,dataLabels:{align:"right",crop:!1,inside:!1,overflow:"allow"}}}),e(t,"Series/Funnel3D/Funnel3DPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e){var i,r,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),t=t.seriesTypes.column,e=e.extend,t=(r=t.prototype.pointClass,n(o,r),o);function o(){var t=null!==r&&r.apply(this,arguments)||this;return t.dlBoxRaw=void 0,t.options=void 0,t.series=void 0,t.y=void 0,t}return e(t.prototype,{shapeType:"funnel3d"}),t}),e(t,"Series/Funnel3D/Funnel3DSeries.js",[t["Series/Funnel3D/Funnel3DComposition.js"],t["Series/Funnel3D/Funnel3DSeriesDefaults.js"],t["Series/Funnel3D/Funnel3DPoint.js"],t["Core/Globals.js"],t["Core/Math3D.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,r,i,n,o,a){var s,d,l=this&&this.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=i.noop,A=n.perspective,D=o.series,p=o.seriesTypes.column,k=a.extend,h=a.merge,P=a.pick,E=a.relativeLength,n=(l(u,d=p),u.prototype.alignDataLabel=function(t,e,r){var i=this,n=t.dlBoxRaw,o=i.chart.inverted,a=t.plotY>P(i.translatedThreshold,i.yAxis.len),s=P(r.inside,!!i.options.stacking),d={x:n.x,y:n.y,height:0};r.align=P(r.align,!o||s?"center":a?"right":"left"),r.verticalAlign=P(r.verticalAlign,o||s?"middle":a?"top":"bottom"),"top"!==r.verticalAlign&&(d.y+=n.bottom/("bottom"===r.verticalAlign?1:2)),d.width=i.getWidthAt(d.y),i.options.reversed&&(d.width=n.fullWidth-d.width),s?d.x-=d.width/2:"left"===r.align?(r.align="right",d.x-=1.5*d.width):"right"===r.align?(r.align="left",d.x+=d.width/2):d.x-=d.width/2,t.dlBox=d,p.prototype.alignDataLabel.apply(i,arguments)},u.prototype.bindAxes=function(){D.prototype.bindAxes.apply(this,arguments),k(this.xAxis.options,{gridLineWidth:0,lineWidth:0,title:void 0,tickPositions:[]}),h(!0,this.yAxis.options,{gridLineWidth:0,title:void 0,labels:{enabled:!1}})},u.prototype.translate=function(){D.prototype.translate.apply(this,arguments);var t,e=this,r=e.chart,i=e.options,n=i.reversed,o=i.ignoreHiddenPoint,a=r.plotWidth,s=r.plotHeight,d=i.center,l=E(d[0],a),p=E(d[1],s),h=E(i.width,a),u=E(i.height,s),c=E(i.neckWidth,a),g=E(i.neckHeight,s),f=p-u/2+u-g,d=e.data,y=0,w=0;e.getWidthAt=t=function(t){return f<t||u===g?c:c+(h-c)*(1-(t-(p-u/2))/(u-g))},e.center=[l,p,u],e.centerX=l;for(var x=0,m=d;x<m.length;x++){var b=m[x];o&&!1===b.visible||(y+=b.y)}for(var v=0,C=d;v<C.length;v++){var F,S,b=C[v],j=null,_=y?b.y/y:0,U=t(F=p-u/2+w*u),L=(S=F+_*u)-F,G={gradientForSides:P(b.options.gradientForSides,i.gradientForSides),x:l,y:F,height:L,width:U,z:1,top:{width:U}};U=t(S),G.bottom={fraction:_,width:U},f<=F?G.isCylinder=!0:f<S&&(j=S,U=t(f),S=f,G.bottom.width=U,G.middle={fraction:L?(f-F)/L:0,width:U}),n&&(G.y=F=p+u/2-(w+_)*u,G.middle&&(G.middle.fraction=1-(L?G.middle.fraction:0)),U=G.width,G.width=G.bottom.width,G.bottom.width=U),b.shapeArgs=k(b.shapeArgs,G),b.percentage=100*_,b.plotX=l,b.plotY=n?p+u/2-(w+_/2)*u:(F+(j||S))/2,L=A([{x:l,y:b.plotY,z:n?-(h-t(b.plotY))/2:-t(b.plotY)/2}],r,!0)[0],b.tooltipPos=[L.x,L.y],b.dlBoxRaw={x:l,width:t(b.plotY),y:F,bottom:G.height||0,fullWidth:h},o&&!1===b.visible||(w+=_)}},u.compose=t.compose,u.defaultOptions=h(p.defaultOptions,e),u);function u(){var t=null!==d&&d.apply(this,arguments)||this;return t.center=void 0,t.data=void 0,t.options=void 0,t.points=void 0,t}return k(n.prototype,{pointClass:r,translate3dShapes:i}),o.registerSeriesType("funnel3d",n),n}),e(t,"masters/modules/funnel3d.src.js",[t["Core/Renderer/RendererRegistry.js"],t["Series/Funnel3D/Funnel3DSeries.js"]],function(t,e){return e.compose(t.getRendererType()),e})});