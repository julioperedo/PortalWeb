@model Portal.Areas.Product.Models.Product
@{
    ViewData["Title"] = "Edit";
    string volumen = Json.Serialize(Model.Volumen).ToString(), accelerators = Json.Serialize(Model.Lots).ToString(), offers = Json.Serialize(Model.Offers).ToString();
    var alignCenter = new Dictionary<string, object> { ["style"] = "text-align: center" };
}
<form asp-action="Edit" asp-controller="Product" asp-area="Product">
    <div class="form-horizontal">
        <input asp-for="Id" type="hidden" />
        <input type="hidden" id="Volumen" value="@volumen" />
        <input type="hidden" id="Accelerators" value="@accelerators" />
        <input type="hidden" id="Offers" value="@offers" />
        <div class="row">
            <label asp-for="ItemCode" class="col-3 col-sm-2 col-md-2 col-lg-1">C&oacute;digo</label>
            <div class="col-9 col-sm-10 col-md-10 col-lg-11">
                <display-for asp-for="ItemCode"></display-for>
                <input type="hidden" asp-for="ItemCode" />
                <input type="hidden" asp-for="Editable" />
                <input type="hidden" asp-for="Commentaries" />
            </div>
        </div>
        <div class="row">
            <label asp-for="Name" class="col-3 col-sm-2 col-md-2 col-lg-1">Nombre</label>
            <div class="col-9 col-sm-8 col-md-8 col-lg-9">
                <display-for asp-for="Name"></display-for>
                <input type="hidden" asp-for="Name" />
            </div>
        </div>
        <div class="row">
            <div class="col pt-2">
                <div class="custom-tab">
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active show" data-toggle="tab" href="#tab1" role="tab" aria-selected="true">Detalle</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#tab2" role="tab">Precios</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#tab3" role="tab"><span class="d-none d-sm-inline">Precios por</span> Volumen</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#tab4" role="tab">Imagen</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#tab5" role="tab">KBytes</a>
                        </li>
                    </ul>
                    <div class="tab-content main-tab">
                        <div class="tab-pane active show" id="tab1" role="tabpanel">
                            <div class="row">
                                <label asp-for="Enabled" class="col-3 col-sm-2 col-md-2 col-lg-1">Habilitado</label>
                                <div class="col-9 col-sm-1 col-md-1 col-lg-1 pt-1">
                                    <input type="hidden" asp-for="Enabled" />
                                    <span>@(Model.Enabled ? "Si" : "No")</span>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3">
                                    <div class="custom-control custom-switch">
                                        <input type="checkbox" class="custom-control-input selected" asp-for="ShowAlways" />
                                        <input name="ShowAlways" type="hidden" value="false" />
                                        <label class="custom-control-label" asp-for="ShowAlways"> Mostrar Siempre</label>
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="custom-control custom-switch">
                                        <input type="checkbox" class="custom-control-input selected" asp-for="ShowInWeb" />
                                        <input name="ShowInWeb" type="hidden" value="false" />
                                        <label class="custom-control-label" asp-for="ShowInWeb"> Mostrar en Pag. Web</label>
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="custom-control custom-switch">
                                        <input type="checkbox" class="custom-control-input selected" asp-for="ShowTeamOnly" />
                                        <input name="ShowTeamOnly" type="hidden" value="false" />
                                        <label class="custom-control-label" asp-for="ShowTeamOnly"> Visible s&oacute;lo DMC</label>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="custom-control custom-switch">
                                        <input type="checkbox" class="custom-control-input selected" asp-for="IsDigital" />
                                        <input name="IsDigital" type="hidden" value="false" />
                                        <label class="custom-control-label" asp-for="IsDigital"> Producto Digital</label>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <label asp-for="Description" class="col-3 col-sm-2 col-md-2">Descripci&oacute;n</label>
                                <div class="col-9 col-sm-10">
                                    <display-for asp-for="Description"></display-for>
                                    <input type="hidden" asp-for="Description" />
                                </div>
                            </div>
                            <div class="row">
                                <label asp-for="Link" class="col-sm-2 col-md-2">V&iacute;nculo</label>
                                <div class="col-sm-10 col-md-10">
                                    <input asp-for="Link" class="form-control" />
                                </div>
                            </div>
                            <div class="row">
                                <label asp-for="Warranty" class="col-3 col-sm-2 col-md-2">Garant&iacute;a</label>
                                <div class="col-9 col-sm-4 col-md-4">
                                    <display-for asp-for="Warranty"></display-for>
                                    <input type="hidden" asp-for="Warranty" />
                                </div>
                                <label asp-for="Consumables" class="col-3 col-sm-2 col-md-2">Consumibles</label>
                                <div class="col-9 col-sm-4 col-md-4">
                                    <display-for asp-for="Consumables"></display-for>
                                    <input type="hidden" asp-for="Consumables" />
                                </div>
                            </div>
                            <div class="row">
                                <label asp-for="Line" class="col-3 col-sm-2 col-md-2">L&iacute;nea</label>
                                <div class="col-9 col-sm-10 col-md-10">
                                    <display-for asp-for="Line"></display-for>
                                    <input type="hidden" asp-for="Line" />
                                </div>
                            </div>
                            <div class="row">
                                <label asp-for="Category" class="col-3 col-sm-2 col-md-2">Categor&iacute;a</label>
                                <div class="col-9 col-sm-4 col-md-4">
                                    <display-for asp-for="Category"></display-for>
                                    <input type="hidden" asp-for="Category" />
                                </div>
                                <label asp-for="SubCategory" class="col-4 col-sm-2 col-md-2">Subcategor&iacute;a</label>
                                <div class="col-8 col-sm-4 col-md-4">
                                    <display-for asp-for="SubCategory"></display-for>
                                    <input type="hidden" asp-for="SubCategory" />
                                </div>
                            </div>
                            <div class="row">
                                <label asp-for="ExtraComments" class="col-sm-2 col-md-2">Com. Adicionales</label>
                                <div class="col-sm-10 col-md-10">
                                    <textarea asp-for="ExtraComments" style="height: 200px;"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="tab2" role="tabpanel">
                            <div class="custom-tab">
                                <ul class="nav nav-tabs" role="tablist">
                                    @foreach (var bePrice in Model.Prices)
                                    {
                                        string clsActive = Model.Prices.IndexOf(bePrice) == 0 ? "active show" : "", attActive = Model.Prices.IndexOf(bePrice) == 0 ? @"aria-selected=""true""" : "";
                                        <li class="nav-item">
                                            <a class="nav-link @clsActive" data-toggle="tab" href="#tab-price-@bePrice.IdSubsidiary" role="tab" @attActive>@bePrice.Subsidiary</a>
                                        </li>
                                    }
                                    @if (!string.IsNullOrWhiteSpace(Model.ExternalSite))
                                    {
                                        <li class="nav-item">
                                            <a class="nav-link" data-toggle="tab" href="#tab-price-external" role="tab">@Model.ExternalSite</a>
                                        </li>
                                    }
                                </ul>
                                <div class="tab-content">
                                    @foreach (var bePrice in Model.Prices)
                                    {
                                        string clsActive = Model.Prices.IndexOf(bePrice) == 0 ? "active show" : "";
                                        <div class="price-subsidiary tab-pane @clsActive" id="tab-price-@bePrice.IdSubsidiary" role="tabpanel">
                                            <input type="hidden" id="id-subsidiary" value="@bePrice.IdSubsidiary" class="id-subsidiary" />
                                            <input type="hidden" id="id" value="@bePrice.Id" />
                                            <table class="w-100">
                                                <tr>
                                                    <td class="control-label">Regular</td>
                                                    <td>
                                                        <input type="number" value="@bePrice.Regular" min="0" id="regular-price" />
                                                    </td>
                                                    <td class="control-label">Sugerido Cliente</td>
                                                    <td>
                                                        <input type="number" value="@bePrice.ClientSuggested" id="client-suggested" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="control-label">Oferta</td>
                                                    <td colspan="3">
                                                        <input type="number" value="@bePrice.Offer" id="offer-price" />
                                                        <span>El precio s&oacute;lo aparecer&aacute; en la lista cuando se cuente con stock.</span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="control-label">Texto Oferta</td>
                                                    <td colspan="3">
                                                        <input type="text" value="@bePrice.OfferDescription" class="form-control" id="offer-description" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="control-label">Observaciones</td>
                                                    <td colspan="3">
                                                        <input type="text" id="observations" value="@bePrice.Observations" class="form-control" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="control-label">Comentarios Internos</td>
                                                    <td colspan="3">
                                                        <input type="text" id="commentaries" value="@bePrice.Commentaries" class="form-control" />
                                                    </td>
                                                </tr>
                                            </table>
                                            <div class="row">
                                                <div class="col pt-4">
                                                    <h5>Ofertas</h5>
                                                    <div id="offers-@bePrice.IdSubsidiary" class="offers"></div>
                                                    <div id="detail-offer-@bePrice.IdSubsidiary" class="detail-offer" style="display: none">
                                                        <div class="row">
                                                            <div class="col-2"><label for="price-@bePrice.IdSubsidiary">Precio</label></div>
                                                            <div class="col-10"><input id="price-@bePrice.IdSubsidiary" type="number"></div>
                                                            <div class="col-2"><label for="description-@bePrice.IdSubsidiary">Comentarios</label></div>
                                                            <div class="col-10"><textarea id="description-@bePrice.IdSubsidiary" rows="2" class="form-control"></textarea></div>
                                                            <div class="col-2"><label for="since-@bePrice.IdSubsidiary">Desde</label></div>
                                                            <div class="col-4"><input id="since-@bePrice.IdSubsidiary" type="date"></div>
                                                            <div class="col-2"><label for="until-@bePrice.IdSubsidiary">Hasta</label></div>
                                                            <div class="col-4"><input id="until-@bePrice.IdSubsidiary" type="date" /></div>
                                                            <div class="col-6">Habilitado</div>
                                                            <div class="col-6">Deshabilitar sin stock</div>
                                                            <div class="col-12 text-right">a</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-12 col-sm-6 mt-4">
                                                    <h5>Stock</h5>
                                                    <table class="table table-condensed table-striped w-100" style="font-size: 0.9em;">
                                                        <thead>
                                                            <tr>
                                                                <th>Almac&eacute;n</th>
                                                                <th class="text-right">Stock</th>
                                                                <th class="text-right">Reserva</th>
                                                                <th class="text-right">Pedido</th>
                                                            </tr>
                                                        </thead>
                                                        @foreach (var subStock in bePrice.StockDetail)
                                                        {
                                                            <tr>
                                                                <td>@subStock.Warehouse</td>
                                                                <td class="text-right">@subStock.Stock</td>
                                                                <td class="text-right">@subStock.Reserve</td>
                                                                <td class="text-right">@subStock.Transit</td>
                                                            </tr>
                                                        }
                                                    </table>
                                                </div>
                                                <div class="col-12 col-sm-6 mt-4">
                                                    <h5>Costos</h5>
                                                    <table class="table table-condensed table-striped w-100" style="font-size: 0.9em;">
                                                        <thead>
                                                            <tr>
                                                                <th>Almac&eacute;n</th>
                                                                <th class="text-right">Stock</th>
                                                                <th class="text-right">Costo</th>
                                                                <th class="text-right">Total</th>
                                                                <th class="text-center">Fecha</th>
                                                            </tr>
                                                        </thead>
                                                        @foreach (var subStock in bePrice.FifoDetail)
                                                        {
                                                            <tr>
                                                                <td>@subStock.Warehouse</td>
                                                                <td class="text-right">@subStock.Stock</td>
                                                                <td class="text-right">@(subStock.RealCost.HasValue ? subStock.RealCost.Value.ToString("N2") : "")</td>
                                                                <td class="text-right">@(subStock.Total.HasValue ? subStock.Total.Value.ToString("N2") : "")</td>
                                                                <td class="text-center text-nowrap">@(subStock.Date.HasValue ? subStock.Date.Value.ToString("dd-MM-yyyy") : "")</td>
                                                            </tr>
                                                        }
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                    @if (!string.IsNullOrWhiteSpace(Model.ExternalSite))
                                    {
                                        <div class="price-external-site tab-pane" id="tab-price-external" role="tabpanel">
                                            <input type="hidden" id="id-external" value="@Model.ExternalPrice.Id" />
                                            <table style="width: 100%">
                                                <tr>
                                                    <td class="control-label" style="width: 100px;">Precio</td>
                                                    <td>
                                                        <input type="number" value="@Model.ExternalPrice.Price" min="0" id="external-price" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="control-label">Comentario</td>
                                                    <td>
                                                        <input type="text" id="external-price-commentaries" value="@Model.ExternalPrice.Commentaries" class="form-control" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2">
                                                        <div class="custom-control custom-switch">
                                                            <input type="checkbox" class="custom-control-input selected" value="@Model.ExternalPrice.ShowAlways" id="external-price-show-always" />
                                                            <label class="custom-control-label" for="external-price-show-always"> Mostrar Siempre</label>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="tab3" role="tabpanel">
                            <div class="custom-tab">
                                <ul class="nav nav-tabs" role="tablist">
                                    @foreach (var bePrice in Model.Prices)
                                    {
                                        string clsActive = Model.Prices.IndexOf(bePrice) == 0 ? "active show" : "", attActive = Model.Prices.IndexOf(bePrice) == 0 ? @"aria-selected=""true""" : "";
                                        <li class="nav-item">
                                            <a class="nav-link @clsActive" data-toggle="tab" href="#tab-volumeprice-@bePrice.IdSubsidiary" role="tab" @attActive>@bePrice.Subsidiary</a>
                                        </li>
                                    }
                                </ul>
                                <div class="tab-content">
                                    @foreach (var bePrice in Model.Prices)
                                    {
                                        string clsActive = Model.Prices.IndexOf(bePrice) == 0 ? "active show" : "";
                                        <div class="volumeprice-subsidiary tab-pane @clsActive" id="tab-volumeprice-@bePrice.IdSubsidiary" role="tabpanel">
                                            <input type="hidden" value="@bePrice.IdSubsidiary" class="id-subsidiary" />
                                            <div class="grid-volume"></div>
                                            <div class="card d-none detail-volume" style="margin-top: 8px;">
                                                <div class="card-header">Detalle</div>
                                                <div class="card-body">
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-12 col-sm-6">
                                                    <table class="table table-condensed table-striped w-100 mt-4" style="font-size: 0.9em;">
                                                        <thead>
                                                            <tr>
                                                                <th>Almac&eacute;n</th>
                                                                <th class="text-right">Stock</th>
                                                                <th class="text-right">Reserva</th>
                                                                <th class="text-right">Pedido</th>
                                                            </tr>
                                                        </thead>
                                                        @foreach (var subStock in bePrice.StockDetail)
                                                        {
                                                            <tr>
                                                                <td>@subStock.Warehouse</td>
                                                                <td class="text-right">@subStock.Stock</td>
                                                                <td class="text-right">@subStock.Reserve</td>
                                                                <td class="text-right">@subStock.Transit</td>
                                                            </tr>
                                                        }
                                                    </table>
                                                </div>
                                                <div class="col-12 col-sm-6">
                                                    <table class="table table-condensed table-striped w-100 mt-4" style="font-size: 0.9em;">
                                                        <thead>
                                                            <tr>
                                                                <th>Almac&eacute;n</th>
                                                                <th class="text-right">Stock</th>
                                                                <th class="text-right">Costo</th>
                                                                <th class="text-right">Total</th>
                                                                <th class="text-center">Fecha</th>
                                                            </tr>
                                                        </thead>
                                                        @foreach (var subStock in bePrice.FifoDetail)
                                                        {
                                                            <tr>
                                                                <td>@subStock.Warehouse</td>
                                                                <td class="text-right">@subStock.Stock</td>
                                                                <td class="text-right">@(subStock.RealCost.HasValue ? subStock.RealCost.Value.ToString("N2") : "")</td>
                                                                <td class="text-right">@(subStock.Total.HasValue ? subStock.Total.Value.ToString("N2") : "")</td>
                                                                <td class="text-center text-nowrap">@(subStock.Date.HasValue ? subStock.Date.Value.ToString("dd-MM-yyyy") : "")</td>
                                                            </tr>
                                                        }
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="tab4" role="tabpanel">
                            <input type="hidden" asp-for="ImageURL" />
                            <input type="hidden" asp-for="NewImageURL" />
                            <img id="Photo" src="@Url.Content(string.IsNullOrWhiteSpace(Model.ImageURL) ? "~/images/no-image.jpg" : $"~/images/products/{Model.ImageURL.Trim()}")" style="max-height: 180px; height: auto; width: auto; margin-left: 10px;" />
                        </div>
                        <div class="tab-pane" id="tab5" role="tabpanel">
                            <div class="kbyte-detail pt-3">
                                <div id="AcceleratorLots"></div>
                                <div class="card d-none mt-4">
                                    <div class="card-header">Detalle Lote Acelerador</div>
                                    <div class="card-body">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col text-right pt-3 pb-5 pb-sm-1">
            <button class="btn btn-primary save-product">Guardar Producto</button>
        </div>
    </div>
</form>